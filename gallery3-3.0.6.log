commit 285b468814ca08766d9e864125b8d420a80a4a04
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Mar 15 10:15:59 2013 -0700

    Automated update of .build_number to 280 for branch 3.0.x
    Last update: 517c7561ebe77985a0cffa1c46971cd40333fda3 (1 commits ago)
    [ci skip]

commit 443872b375ec57f3a8293e681e793b3a2f8ec9d1
Merge: 517c756 2362b2c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Mar 15 10:15:36 2013 -0700

    Merge pull request #220 from shadlaws/naming_306
    
    Version 3.0.6, I hereby dub thee "Rive Gauche"

commit 2362b2c62162a32e7e6975afecd55ff43dac9228
Author: shadlaws <shad@shadlaws.com>
Date:   Fri Mar 15 16:49:41 2013 +0100

    Version 3.0.6, I hereby dub thee "Rive Gauche"

commit 517c7561ebe77985a0cffa1c46971cd40333fda3
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Mar 14 10:02:11 2013 -0700

    Automated update of .build_number to 279 for branch 3.0.x
    Last update: 9247082168c1c7f46c7e98a772b635b514d65bf9 (1 commits ago)
    [ci skip]

commit e16404da6c6e91e85f60184d3559bfd5a5e545a8
Merge: 9247082 e45812d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Mar 14 10:01:41 2013 -0700

    Merge pull request #219 from shadlaws/fix_2062_30x
    
    #2062 - Fix extra/missing spaces in search query in 3.0.x.

commit 9247082168c1c7f46c7e98a772b635b514d65bf9
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Mar 14 10:00:37 2013 -0700

    Automated update of .build_number to 278 for branch 3.0.x
    Last update: 31f66e98175786eb579dda95e9436972550bf116 (1 commits ago)
    [ci skip]

commit d0099aab921bf08a717d7ec1bc822f40e7f6fb28
Merge: 31f66e9 81c44c4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Mar 14 10:00:24 2013 -0700

    Merge pull request #217 from shadlaws/revise_movie_img_30x
    
    Update movie_img event to include filename (implemented as part of #2046 in master/3.1.x).

commit e45812d47eedd0644e6f7ec68726bd2d06e9c4a8
Author: shadlaws <shad@shadlaws.com>
Date:   Thu Mar 14 15:44:00 2013 +0100

    #2062 - Fix extra/missing spaces in search query.
    - Every to-be-concatenated string now begins with 1 space and ends with 0 spaces.
    
    --HG--
    extra : source : 57479da6fa26fdf965cbe72021b6cef568bce2be

commit 81c44c4cf333a1ec98b2226111d2792979121d40
Author: shadlaws <shad@shadlaws.com>
Date:   Thu Mar 14 14:36:36 2013 +0100

    Update movie_img event to include filename (implemented as part of #2046 in master/3.1.x).

commit 31f66e98175786eb579dda95e9436972550bf116
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Mar 12 17:02:19 2013 -0700

    Automated update of .build_number to 277 for branch 3.0.x
    Last update: 4b0be85b2bfa824361830311651d7aae55a2cdb0 (1 commits ago)
    [ci skip]

commit 6c3c36b503df3c1c889e6ac73917a3edccf6b3ba
Merge: 4b0be85 08c336c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 12 17:01:57 2013 -0700

    Merge pull request #208 from shadlaws/30x_updates_30130312
    
    Cherry-pick changes from master to 3.0.x.

commit 08c336c9e5d6dd2177ed5f23579bf39879e56aa0
Author: shadlaws <shad@shadlaws.com>
Date:   Mon Mar 11 23:10:27 2013 +0100

    Fix Theme_View::siblings bug - limit and offset reversed in sibling_callback.
    I wonder if this could be causing some random issues I see on the forums...
    
    --HG--
    extra : source : 00e42d0aa732062712d50b9e3ae162c985c245ad

commit d060304faed6e828e9cc0506c5d9cc650d8fa30a
Author: shadlaws <shad@shadlaws.com>
Date:   Mon Mar 11 18:44:45 2013 +0100

    #2049 - Fix issues with ports other than http/80 or https/443.
    - get SERVER_PORT and add to SERVER_NAME if it's not http/80 or https/443
    
    --HG--
    extra : source : 2ebb9d70dc22a3ae3df67ecf299e1f7d3b700a51

commit f4e25d8722fd9eca717c4039692d15ee1d8bd638
Author: shadlaws <shad@shadlaws.com>
Date:   Sun Mar 10 11:27:10 2013 +0100

    Follow-on fix: if tests throw an exception, don't throw another by calling an undefined variable.
    
    --HG--
    extra : source : 21be6986cdbabfa3c17b3d00a85c8e3164ab50f1

commit 78957a47d2709402ef7ab07f680d56fb4609e961
Author: Jozef Selesi <jozef.selesi@saturized.com>
Date:   Fri Mar 8 12:47:49 2013 +0100

    Add Vagrant files to .gitignore.
    
    Trac-Ticket: #2047
    
    --HG--
    extra : source : f67746f90f9b0994ac3f606f36191f7147894eae

commit 11c326b8e1e9ce5ec2b8d8fb7c9a9a92731e59a8
Author: shadlaws <shad@shadlaws.com>
Date:   Sat Mar 9 15:59:23 2013 +0100

    Follow-on to #1935 - Ensure ffmpeg is executable, remove possible doubled "/".
    - movie::find_ffmpeg - made it use is_executable instead of just file_exists.
    - system::find_binary - removed possible doubled "/" in paths.
    
    --HG--
    extra : source : a27fd24b8699018179d9fdf93437bd4ac32e412d

commit 64ee4d5cfc19760a44c573a4d42d42eb840562c9
Author: shadlaws <shad@shadlaws.com>
Date:   Fri Mar 8 12:53:23 2013 +0100

    Follow-on to #2003 - Fix innocuous typo (unneeded semi-colon).
    
    --HG--
    extra : source : 55bcf18c2a6d640e493ea08560fe8e52dc8d2bc7

commit 836ddc84b344a6dab94daa18fede6564dc39b9d0
Author: Jozef Selesi <jozef.selesi@saturized.com>
Date:   Thu Mar 7 00:10:36 2013 +0100

    Add newline after code block so packaging doesn't complain.
    
    --HG--
    extra : source : 5a30c314cde35fa1ca479781c60da3c40250845d

commit 4b0be85b2bfa824361830311651d7aae55a2cdb0
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Mar 6 15:32:42 2013 -0700

    Automated update of .build_number to 276 for branch 3.0.x
    Last update: eb06f176864e031928e15501b78953abafc3df09 (1 commits ago)
    [ci skip]

commit b763fa5c3677cfa54c57831bcfb5a6c5edc50aa5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Mar 6 17:30:58 2013 -0500

    Only build 3.0.x, 3.1.x and master branches

commit eb06f176864e031928e15501b78953abafc3df09
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Mar 6 15:07:58 2013 -0700

    Automated update of .build_number to 275 for branch 3.0.x
    Last update: 4d87c0c7496e98d69ddf997d4b54023189da149f (1 commits ago)
    [ci skip]

commit fe5cb30b55902e855e03e4c65c3c29f07a5e4395
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Mar 6 17:04:54 2013 -0500

    Follow-on fix: count errors as well as test failures.

commit 4d87c0c7496e98d69ddf997d4b54023189da149f
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Mar 6 14:48:45 2013 -0700

    Automated update of .build_number to 274 for branch 3.0.x
    Last update: 52c142e5bd141d6668a49b11dba8bed8d0cb48b9 (1 commits ago)
    [ci skip]

commit 817e60b8c80161011b5a087b47941338ed83ed76
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Mar 6 16:45:38 2013 -0500

    Set exit status to the number of failed tests.  This should fix issues with Travis.

commit 52c142e5bd141d6668a49b11dba8bed8d0cb48b9
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Mar 6 12:55:51 2013 -0700

    Automated update of .build_number to 273 for branch 3.0.x
    Last update: c4cc6dc50bf14207a0876492947b568b8c87559c (17 commits ago)

commit a0860c1e2dd7ab3ba6dcf8c8cab52486e536256a
Author: shadlaws <shad@shadlaws.com>
Date:   Tue Mar 5 16:54:41 2013 +0100

    #2040 - Deactivate modules that no longer exist.
    - added module::deactivate_missing_modules()
    - revised module::deactivate() to change log message if the module is missing
    - added call to new function in module::get_obsolete_modules_message()
    - added call to new function when loading admin/maintenance menu

commit b3690223d3584fadbda10153e70826b0f1104444
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Mar 6 14:33:24 2013 -0500

    Follow-on for #2043.  Fix some tests that made bad assumptions about
    the state of the world.  These were uncovered when we ran the tests on
    Travis which runs the tests in a different order than what I (and
    apparently others) use on their dev boxes.

commit 78c2c3b4af8c68237eb3f5d92e1b7ee10e353b2b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 5 21:36:47 2013 -0500

    Travis doesn't have PHP 5.2.3.  Test against 5.3 / 5.4 / 5.5.

commit ac24347988f2baa8173115dbfc19f17576d610e9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 5 21:34:43 2013 -0500

    Test against 5.2.3, our minimum version.
    Also test against 5.3, 5.4 and 5.5 to be forward looking

commit d8428727150614efcb7c60efab6ac97895dc125e
Author: Jozef Selesi <jozef.selesi@saturized.com>
Date:   Mon Mar 4 21:38:09 2013 +0100

    Travis CI integration.

commit 54fa62cc9449504c98e711f99e67cdfb2e185aa1
Author: Jozef Selesi <jozef.selesi@saturized.com>
Date:   Tue Mar 5 10:17:22 2013 +0100

    Add Travis CI build status badge to README.

commit f15c7eca602ac77b4a3ba2cfd6842ecf4bd73466
Author: Jozef Selesi <jozef.selesi@saturized.com>
Date:   Tue Mar 5 10:17:00 2013 +0100

    Convert README to Markdown.
    
    Conflicts:
    	README.md

commit ee07fc55e59b65ddf85a9e66722a8fa1c9d35250
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 5 13:20:12 2013 -0500

    Remove stray line of debug output.

commit 595fcda25dca6a0dc719b5f6fff4d371da650b17
Author: shadlaws <shad@shadlaws.com>
Date:   Sun Mar 3 23:42:02 2013 +0100

    #2037 - Fix bug with "item_before_update" event in item model.

commit 81f2fc2ce6c6e25cd6e1fa3a6bddd064eca8f16b
Merge: b35678a efc43de
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Mar 3 14:16:55 2013 -0800

    Merge pull request #182 from shadlaws/fix_2030
    
    #2030 - Fix thumb hover effect for 3.0.6.

commit efc43de6c028e1e38fb6363621fd9fbc6d1afd21
Author: shadlaws <shad@shadlaws.com>
Date:   Sun Mar 3 22:48:11 2013 +0100

    #2030 - Fix thumb hover effect for 3.0.6.
    This is adapted from the commits on the 3.1.x branch:
    09fbe4c3442af2689b1ec7e540cd87a282c01123 & ef2ca6edb572501145ec3a4d6aa529118081188a.
    The changes to ui.init.js are the same; the changes to gallery.common.js are
    slightly different for better compatibility with jQuery 1.3.

commit b35678a1be08f3bf8923d6009389e004278f4d9b
Author: shadlaws <shad@shadlaws.com>
Date:   Mon Feb 25 17:13:10 2013 +0100

    #2018 - Make ui.init.js thumbnail hover effect more robust.
    - changed thumbnail hover effect to store its original height on mouseenter, then return to it on mouseleave.
    - removed previous routine which depended on the height of its siblings and was incompatible with some IE versions.

commit 677c44c2e851604908f620891615c8c1057c382d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Mar 3 15:45:04 2013 -0500

    Remove deprecated $.browser call.  Fixes #2029.

commit a8da1c59151365dfeb91b378cadc3033c473cfaf
Author: shadlaws <shad@shadlaws.com>
Date:   Sat Mar 2 13:25:10 2013 +0100

    #2031 - Add class_exists() before method_exists() if class existence is unknown.
    - fixed all instances of this in core code
    - deleted previous Zend Guard Loader workaround in MY_Kohana.php
    - updated Bootstrap.php to reflect deleted MY_Kohana.php

commit 09f16e945d79eddb1ffc436949c67989fe6fdc7a
Author: shadlaws <shad@shadlaws.com>
Date:   Thu Feb 28 17:32:48 2013 +0100

    #2024 - In Wind thumb view, hide movie names just like photo names.

commit 94451ec00ad49892efb83732533d5fcf8877517a
Author: shadlaws <shad@shadlaws.com>
Date:   Wed Feb 27 07:11:52 2013 +0100

    #2021 - Cleanup thumb_dirty and resize_dirty instances.
    - g2_import: changed "false" assignment to "0" assignment for consistency.
    - admin_theme_options: removed unused variables (they're called/used nowhere else).
    - graphics: removed stanza that clears thumb_dirty and resize_dirty and returns
    if we have no ops.  This has no effect on Gallery currently (for one,
    graphics::generate doesn't normally get called on an item with no dirty flags),
    but can inconsistently set resize_dirty of albums and movies to 0 where it's
    otherwise left at 1.  Going forward, it may be useful to be consistent here.
    - gallery_installer: added v57 stanza to correct any resize_dirty flags of
    movies/albums that were previously reset to 0.
    - module.info, install.sql: update to v57

commit 7f5d8d15213e1b15285050b5b5aa36fee68e6e95
Author: shadlaws <shad@shadlaws.com>
Date:   Tue Feb 26 13:36:31 2013 +0100

    #2020 - Add CLI install argument to set admin password.
    This isn't too useful for end users, but would be really useful for developers
    that install Gallery3 over and over again...

commit 096e49194a421399439250910be5684f4ca0e40b
Author: shadlaws <shad@shadlaws.com>
Date:   Tue Feb 26 15:52:32 2013 +0100

    #2017, 2019 - Update Flowplayer, fix special character issues. In sync with gallery3-vendor.
    - updated all four swf to newest
    - modified flashembed.js as per http://code.google.com/p/flowplayer-core/issues/detail?id=30
    - rebuilt flowplayer.js from source using modified flashembed.js
    - included ipad plugin in flowplayer.js

commit c4cc6dc50bf14207a0876492947b568b8c87559c
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Feb 22 09:39:11 2013 -0700

    Automated update of .build_number to 272 for branch 3.0.x
    Last update: 61e078d191295221cfa57a240d4dc8c7e2a1e886 (1 commits ago)

commit f255617b4b31b9818a292e50eeff1b6ae49d1f8b
Merge: 61e078d 4287855
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 21 17:49:54 2013 -0500

    Merge branch 'master' into 3.0.x

commit 42878556cf38bccfea2b9b38ab2c8dd90d1ebc88
Merge: 2a6896e 94aadf0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Feb 20 10:22:26 2013 -0800

    Merge pull request #155 from shadlaws/fix_2008
    
    #2008 - Add warnings if some active modules are obsolete.

commit 94aadf03dadbfa01ba1744df60c97b6f3094ae88
Author: shadlaws <shad@shadlaws.com>
Date:   Wed Feb 20 17:30:27 2013 +0100

    #2008 - Add warnings if some active modules are obsolete.
    - added module::get_obsolete_modules_message function
    - put message on admin/dashboard
    - put message on admin/modules
    - put message on upgrader
    - updated unit test golden file xss_data

commit 61e078d191295221cfa57a240d4dc8c7e2a1e886
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Feb 18 17:37:36 2013 -0700

    Automated update of .build_number to 271 for branch 3.0.x
    Last update: a991cf28c4f70e772a3336c59328f5ca3a3dbf05 (1 commits ago)

commit 3bef27e07b86bbae8fc23162aa3ae57e5b7b7033
Merge: a991cf2 2a6896e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Feb 18 19:37:21 2013 -0500

    Merge branch 'master' into 3.0.x

commit 2a6896e2a51833f45cd48bca0b5048cc9633c9bd
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Feb 18 17:23:19 2013 -0700

    Automated update of .build_number to 357 for branch master
    Last update: 12d68b89feea10855ce4c779f2afb543e40f1c21 (1 commits ago)

commit 1b6bae2e8088a107a2c28f589b7c1a94c2c2fbf4
Merge: 12d68b8 62035bd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Feb 18 16:23:07 2013 -0800

    Merge pull request #154 from shadlaws/master
    
    Follow-on to fd0051dab7258c817ff01877bd4324530ce79398 for #2006.

commit 62035bdbe1f4e8173eff1d93a31bdb658686a926
Author: shadlaws <shad@shadlaws.com>
Date:   Mon Feb 18 23:30:29 2013 +0100

    Follow-on to fd0051dab7258c817ff01877bd4324530ce79398 for #2006.
    
    - fix unit tests for watermarks, which check for deleted files.

commit 12d68b89feea10855ce4c779f2afb543e40f1c21
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Feb 18 13:35:05 2013 -0700

    Automated update of .build_number to 356 for branch master
    Last update: f12aaf3c345fcce39fdbe721c896c03e3b429e58 (1 commits ago)

commit 3e3ed1c819f1a9aaf67e509b331adc7665500a54
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Feb 18 15:31:59 2013 -0500

    Fix up some tests:
    - unlink copied files because they confused File_Structure_Test
    - update golden files

commit a991cf28c4f70e772a3336c59328f5ca3a3dbf05
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Feb 18 11:30:30 2013 -0700

    Automated update of .build_number to 270 for branch 3.0.x
    Last update: dca4fbc62790d01878eaae074379290cd1c0f502 (1 commits ago)

commit 04493680c0e604ca0e2dc27b9c9b1a1e81a938cf
Merge: dca4fbc f12aaf3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Feb 18 13:30:09 2013 -0500

    Merge branch 'master' into 3.0.x

commit f12aaf3c345fcce39fdbe721c896c03e3b429e58
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Feb 18 11:21:13 2013 -0700

    Automated update of .build_number to 355 for branch master
    Last update: e950d2f4ef52b68e1ccf1cec2e896a916af5e571 (1 commits ago)

commit 97f96bcb4826599ca17eaa83c95dcb2e5f2b6ba2
Merge: e950d2f ab920ae
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Feb 18 10:20:52 2013 -0800

    Merge pull request #150 from shadlaws/fix_zend_guard_loader_issues
    
    #1749, 1754, 1901 - Eliminate incompatibility with Zend Guard Loader.

commit ab920ae360d5cca446784675bb0401349c50d9fb
Author: shadlaws <shad@shadlaws.com>
Date:   Mon Feb 18 19:12:45 2013 +0100

    #1749, 1754, 1901 - Eliminate incompatibility with Zend Guard Loader.
    - added MY_Kohana to provide wrapper for auto_load(), which loads dummy class when none found.
    - revised Bootstrap to load MY_Kohana.
    
    This is based on the patch described here: http://blog.teatime.com.tw/1/post/403

commit e950d2f4ef52b68e1ccf1cec2e896a916af5e571
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Feb 18 11:08:34 2013 -0700

    Automated update of .build_number to 354 for branch master
    Last update: afa61f9d0d551bc2a0c4fa903eb3f55742720c8d (1 commits ago)

commit 788e9662268c6d4f518886fcb774a221076c5deb
Merge: afa61f9 58c137c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Feb 18 10:08:03 2013 -0800

    Merge pull request #149 from shadlaws/fix_2007
    
    #2007 - Change search box text when only looking in the current album.

commit 58c137c98183377c8bacaad83c9b32caa9925fa2
Author: shadlaws <shad@shadlaws.com>
Date:   Mon Feb 18 18:55:03 2013 +0100

    #2007 - Change search box text when only looking in the current album.
    - search.html.php - updated to use new labels.
    - search_link.html.php - updated to use new labels.  Moved code that determines
    current album to top, then used it for both the new label and the hidden album
    input.  Resulting form code looks more symmetric to search.html.php.

commit afa61f9d0d551bc2a0c4fa903eb3f55742720c8d
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Feb 17 16:47:25 2013 -0700

    Automated update of .build_number to 353 for branch master
    Last update: 87d20c63af02ae573853da2cb82d7323a56677b5 (1 commits ago)

commit 9f02011dacdd2c4bf6d2d1c29be522f04a3d13c7
Merge: 87d20c6 fd0051d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 17 15:46:52 2013 -0800

    Merge pull request #148 from shadlaws/fix_2006
    
    #2006 - Add system::mark_file_for_delete API to delete files at shutdown.

commit fd0051dab7258c817ff01877bd4324530ce79398
Author: shadlaws <shad@shadlaws.com>
Date:   Sun Feb 17 23:19:35 2013 +0100

    #2006 - Add system::mark_file_for_delete API to delete files at shutdown.
    - added system::mark_file_for_delete to be called to mark a file
    - added system::delete_marked_files to be called at shutdown to delete the list
    - amended system::temp_filename to, by default, add the temp name to the list
    - updated a few other places in code where this should be used

commit 87d20c63af02ae573853da2cb82d7323a56677b5
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Feb 16 12:42:07 2013 -0700

    Automated update of .build_number to 352 for branch master
    Last update: eb5b99abb4fb50df2dc8e8125a4fc49a674bc423 (1 commits ago)

commit 971b56ae09eb20e77310fbd8e08dbf2c0e64a3d3
Merge: eb5b99a b018028
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Feb 16 11:41:36 2013 -0800

    Merge pull request #145 from shadlaws/revert_zend_guard_check
    
    #1749, 1754, 1901 - revert two recent commits that check for Zend Guard code obfuscation.

commit b0180288e049b472f3fefbfb28d7bed77e718b37
Author: shadlaws <shad@shadlaws.com>
Date:   Sat Feb 16 08:23:36 2013 +0100

    #1749, 1754, 1901 - revert two recent commits that check for Zend Guard obfuscation level support.
    This is not the root of the problem for all installs, and can trigger false positives
    that break previously-working installs... we'll have to find a better way.

commit dca4fbc62790d01878eaae074379290cd1c0f502
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Feb 15 17:17:58 2013 -0700

    Automated update of .build_number to 269 for branch 3.0.x
    Last update: 5eb4f6869bdb9c77e2f122d6d4c3c9e3e84014ba (1 commits ago)

commit eb5b99abb4fb50df2dc8e8125a4fc49a674bc423
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Feb 15 17:17:51 2013 -0700

    Automated update of .build_number to 351 for branch master
    Last update: 9346503c62a14a738dfa2efe24b8831275b73f44 (1 commits ago)

commit c27bd8721fb78e01da7a7ccd38f200c9d5230cad
Merge: 5eb4f68 96ad778
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Feb 15 19:17:46 2013 -0500

    Merge branch 'master' into 3.0.x

commit 96ad7789c84b5b81320f9cb94b4c8cb4e10ad92f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Feb 15 16:15:40 2013 -0800

    Follow-on to 7bdccade98e76df3a7830bc45bc42321a77c709a to exclude
    directories for now.

commit 5eb4f6869bdb9c77e2f122d6d4c3c9e3e84014ba
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Feb 15 17:16:42 2013 -0700

    Automated update of .build_number to 268 for branch 3.0.x
    Last update: 495acbc2da2aa7ad189336d432526e014a6ed79e (4 commits ago)

commit bf49b69c29ecd811e8edb6709a195441916a9196
Merge: 89305c2 18298de
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Feb 15 16:16:10 2013 -0800

    Merge branch '3.0.x' of github.com:gallery/gallery3 into 3.0.x

commit 89305c26658c50a0e4d9c8fc396a59e87bbb315d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Feb 15 16:15:40 2013 -0800

    Follow-on to 7bdccade98e76df3a7830bc45bc42321a77c709a to exclude
    directories for now.

commit 18298de81f2f4dde13cbe31b80a024b3c7c4dee1
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Feb 15 17:13:08 2013 -0700

    Automated update of .build_number to 267 for branch 3.0.x
    Last update: 495acbc2da2aa7ad189336d432526e014a6ed79e (2 commits ago)

commit 0f85e3cce86f11fd7c2a1bd086f51faf32259bf1
Merge: 242a6fe 0dd12ca
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Feb 15 19:12:31 2013 -0500

    Merge branch 'master' into 3.0.x

commit 9346503c62a14a738dfa2efe24b8831275b73f44
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Feb 15 17:12:30 2013 -0700

    Automated update of .build_number to 350 for branch master
    Last update: c97fe4bcdde3201ca416d61e38cd8afb4503dca2 (1 commits ago)

commit 0dd12caa6f4c0452167b0e621a01bee28e71b0af
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Feb 15 19:12:08 2013 -0500

    Follow-on to 7bdccade98e76df3a7830bc45bc42321a77c709a - point out that there's
    duplicated code in gallery_event.

commit 242a6fe3361b69ac51393e584f1e5784f83bc22c
Merge: 495acbc 346c578
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Feb 15 19:10:48 2013 -0500

    Merge branch 'master' into 3.0.x

commit c97fe4bcdde3201ca416d61e38cd8afb4503dca2
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Feb 15 17:10:08 2013 -0700

    Automated update of .build_number to 349 for branch master
    Last update: 5b6c138da1e53e93e4de8079885fcef29d12e673 (4 commits ago)

commit 346c578f30490384d4d6595aedd77c3e7024092e
Merge: 7bdccad 016335f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Feb 15 19:09:17 2013 -0500

    Merge branch 'master' of github.com:gallery/gallery3

commit 7bdccade98e76df3a7830bc45bc42321a77c709a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Feb 15 19:09:06 2013 -0500

    Every 500th request prune a single old file from var/tmp and var/logs.
    Might not be aggressive enough.  Fixes #2005.

commit 016335fb8983ae90f559ddc0ec04473dbd437b63
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Feb 15 11:24:48 2013 -0700

    Automated update of .build_number to 348 for branch master
    Last update: 5b6c138da1e53e93e4de8079885fcef29d12e673 (2 commits ago)

commit 1748aae9d1b3735747555025e7c202b895837625
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Feb 15 13:23:39 2013 -0500

    Create an empty and secure gallery3/bin directory for use with the new
    system::find_binary code.  Fixes #2004.

commit 8b0088fd8d1774f4bdf5ae345ab5ad2da1eaedaf
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Feb 15 13:23:05 2013 -0500

    Change gallery/bin -> gallery3/bin in the comment since I suspect most
    people don't change the name of the directory.  Follow-on to
    1d7f5e3ab117a6cce8f2a1d3de5e311b74dbee81 for #1935

commit 495acbc2da2aa7ad189336d432526e014a6ed79e
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Feb 15 10:59:06 2013 -0700

    Automated update of .build_number to 266 for branch 3.0.x
    Last update: b1216c147436dcea81be678bdbe6f5c2aa843665 (5 commits ago)

commit 1e2aafb8a748d3a93b241450c51aaa75c531c583
Merge: c59adf9 d1718ff
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Feb 15 12:58:31 2013 -0500

    Merge branch '3.0.x' of github.com:gallery/gallery3 into 3.0.x

commit 5b6c138da1e53e93e4de8079885fcef29d12e673
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Feb 15 10:58:25 2013 -0700

    Automated update of .build_number to 347 for branch master
    Last update: 6089374891407dda5da27bbceb9aa774004737b6 (1 commits ago)

commit c59adf96e7de86d1f4018dd6171452766e1842b9
Merge: 82bbb62 264e1e8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Feb 15 12:58:06 2013 -0500

    Merge branch 'master' into 3.0.x

commit d1718ffbd5b173e9986b648ec988992037dcba99
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Feb 15 10:57:49 2013 -0700

    Automated update of .build_number to 265 for branch 3.0.x
    Last update: b1216c147436dcea81be678bdbe6f5c2aa843665 (3 commits ago)

commit 264e1e82b23f622e9a79f7834cfcbfb536eac4f6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Feb 15 12:55:16 2013 -0500

    Digibug up and vanished.  Move the module to contrib for now.  This
    will leave the module active in any existing installs that had it
    active, but that shouldn't cause any negative impact.  Fixes #2002.

commit 82bbb6283d4c8a38bd57e0a945788c7fe8a1b0b0
Merge: 1dfd773 a35beb4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Feb 15 12:57:07 2013 -0500

    Merge branch '3.0.x' of github.com:gallery/gallery3 into 3.0.x

commit 1dfd7737c3a28d1a92b6eac0b9bd10bce5370590
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Feb 15 12:55:16 2013 -0500

    Digibug up and vanished.  Move the module to contrib for now.  This
    will leave the module active in any existing installs that had it
    active, but that shouldn't cause any negative impact.  Fixes #2002.

commit 6089374891407dda5da27bbceb9aa774004737b6
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Feb 14 18:40:48 2013 -0700

    Automated update of .build_number to 346 for branch master
    Last update: 21acbbf549f3167d14c89270683ef06746552d75 (1 commits ago)

commit ea741a8457102b06992e6ecfb248bb71ca791840
Merge: 21acbbf f212f6a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 14 17:40:44 2013 -0800

    Merge pull request #138 from shadlaws/fix_2003
    
    #2003 - Add admin/movies screen.

commit f212f6a794c4aff96446b99e4824a9e2c8cfb259
Author: shadlaws <shad@shadlaws.com>
Date:   Thu Feb 14 23:42:20 2013 +0100

    #2003 - Add admin/movies screen.
    Added admin/movies screen analogous to the admin/graphics screen so the user can:
    - see how FFmpeg is configured (path and version, similar to toolkits in admin/graphics)
    - get some instructions on how to install FFmpeg if not found
    - change the movie_allow_uploads setting
    - ask Gallery to rebuild their movie thumbs
    Specifics:
    - admin_movies, admin_movies.html (new) - new Movies admin screen
    - ffmpeg.png (new) - logo for admin screen
    - movie::get_ffmpeg_version (new) - return version number and date of FFmpeg
    - form_uploadify.html - change admin message if movie uploads are disabled
    - gallery_event::admin_menu - added Movies link to Settings
    - xss_data.txt - updated golden file for unit tests

commit a35beb4a92ae4c946eb049c4cbae3309211b34f1
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Feb 14 12:51:08 2013 -0700

    Automated update of .build_number to 264 for branch 3.0.x
    Last update: b1216c147436dcea81be678bdbe6f5c2aa843665 (1 commits ago)

commit aa58fa07779c6769b73e29b3221afd31b9e912fd
Merge: b1216c1 21acbbf
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 14 14:50:32 2013 -0500

    Merge branch 'master' into 3.0.x

commit 21acbbf549f3167d14c89270683ef06746552d75
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Feb 14 12:44:08 2013 -0700

    Automated update of .build_number to 345 for branch master
    Last update: 3fa08f54a6cd4741646824b8ed98c14ea2d1633f (1 commits ago)

commit 004fb588c603b5ab834a942eb8252f7b6f77da6c
Merge: 3fa08f5 0a10f37
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 14 11:43:44 2013 -0800

    Merge pull request #139 from shadlaws/followon_zend_guard_debug_message
    
    Follow-on to b01897af8deaf38d9da627b39168cb296572384f - add debugging message

commit 3fa08f54a6cd4741646824b8ed98c14ea2d1633f
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Feb 14 12:43:27 2013 -0700

    Automated update of .build_number to 344 for branch master
    Last update: db9810136381a6d74e82be10b4dbe7e4d2e344bf (1 commits ago)

commit 72a6a8abafb90321ecd4e2101eac03f86c7c07dd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 14 14:40:34 2013 -0500

    Follow-on to 9dbe2e15ad9db3b2be53e46bc5f67d382fb4089d for #1999.
    Fix an issue where siblings() by itself throws an error.  The problem is that
    Theme_View::siblings() passes a null offset and limit to the callback which
    gets passed down to search::search_within_album, which creates its query
    in raw SQL and doesn't check for a null offset/limit.  We want a reasonable
    limit on the size of the set here (and 1000 is probably wayyy too high so
    lower that to 100) so amend get_siblings to stop using default parameters
    and actually check the inputs.
    
    Author: Bharat Mediratta <bharat@menalto.com>
    Date:   Sat Feb 9 14:53:34 2013 -0500
    
        Extend siblings callbacks to take a $limit and an $offset for navigating
        large sibling sets.  Useful for the thumbnav module since we don't want to
        iterate a thousand siblings to find the one we care about.  Fixes #1999.

commit db9810136381a6d74e82be10b4dbe7e4d2e344bf
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Feb 14 12:18:56 2013 -0700

    Automated update of .build_number to 343 for branch master
    Last update: e5ed05004f005bdccdbf68e199ae2324ad97e895 (1 commits ago)

commit 6c861a014d247efdc967c8e6ce567d73cd3c2cd4
Merge: e5ed050 27be4ae
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 14 11:18:45 2013 -0800

    Merge pull request #133 from shadlaws/followon_1994
    
    Follow-on to 0312d1b071bd4434ddb3f82888b0323da6bf3732 for #1994.

commit e5ed05004f005bdccdbf68e199ae2324ad97e895
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Feb 13 14:55:53 2013 -0700

    Automated update of .build_number to 342 for branch master
    Last update: 4fc539651685d0c0b540c88f2a64e8ffe1f69646 (1 commits ago)

commit 3b9eb29d89e1b1c1bb869ea1cc8ee8a7e7df280a
Merge: 4fc5396 d3ca261
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Feb 13 13:55:27 2013 -0800

    Merge pull request #143 from mikeage/g2_import
    
    Replace = with ==

commit d3ca2617f21be55509a30b02babec156f0bac539
Author: Mike Miller <github@mikeage.net>
Date:   Wed Feb 13 23:11:32 2013 +0200

    Replace = with ==
    
    This was my mistake; I didn't test it thoroughly. It results in all g2 mappings being broken!

commit 0a10f3719a00d47396bedcef419cd4170dc7fc5f
Author: shadlaws <shad@shadlaws.com>
Date:   Tue Feb 12 22:21:50 2013 +0100

    Follow-on to b01897af8deaf38d9da627b39168cb296572384f - add debugging message if Zend Guard code obfuscation is enabled to installer, too.

commit 4fc539651685d0c0b540c88f2a64e8ffe1f69646
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Feb 12 10:25:10 2013 -0700

    Automated update of .build_number to 341 for branch master
    Last update: 9ed67350331ff32e6f42a53ad1ba09d1533e8af9 (1 commits ago)

commit 8a1133952e534e0c15d67b8bd7f614e05ca75525
Merge: 9ed6735 d04a6fc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 12 09:24:37 2013 -0800

    Merge pull request #134 from shadlaws/fix_2001
    
    #2001 - Make filename sanitizing more consistent.

commit 9ed67350331ff32e6f42a53ad1ba09d1533e8af9
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Feb 12 10:23:59 2013 -0700

    Automated update of .build_number to 340 for branch master
    Last update: 0302e4ec0ef04f1a11b20f3c60637246bf915b7f (1 commits ago)

commit c02152c77c7c16c29b9bb9468d9e566e2521a1a2
Merge: 0302e4e 0a2670a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 12 09:23:27 2013 -0800

    Merge pull request #123 from shadlaws/fix_1988
    
    #1988 - Add movie_allow_uploads option ("always", "never", or "autodetect").

commit 0302e4ec0ef04f1a11b20f3c60637246bf915b7f
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Feb 12 10:21:28 2013 -0700

    Automated update of .build_number to 339 for branch master
    Last update: e109f0b5113c1f8b33130866af44450ca4107ed4 (1 commits ago)

commit 93a7722318f83605616155492bcb5c4429c351e5
Merge: e109f0b b01897a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 12 09:21:05 2013 -0800

    Merge pull request #135 from shadlaws/fix_zend_debug_message
    
    #1749, #1754, #1901 - Add debugging message if Zend Guard code obfuscation is enabled.

commit b01897af8deaf38d9da627b39168cb296572384f
Author: shadlaws <shad@shadlaws.com>
Date:   Tue Feb 12 11:26:43 2013 +0100

    #1749, #1754, #1901 - Add debugging message if Zend Guard code obfuscation is enabled.
    Zend Guard code obfuscation is enabled by default on many PHP 5.3+ installations,
    but we don't use it and Kohana 2.4 is incompatible with it (see Trac tickets).
    Rather than crash and/or hack core Kohana code, we can display an error message
    to help the end user disable it.

commit d04a6fc87d96b70ab0f70414f2ff40d1f1e7f482
Author: shadlaws <shad@shadlaws.com>
Date:   Tue Feb 12 00:37:33 2013 +0100

    #2001 - Make filename sanitizing more consistent.
    - legal_file - added sanitize_filname() to sanitize photo/movie filenames.
    - admin_watermarks - revised add() to use new function.
    - item model - added _process_data_file_info() to validate the data file, get its metadata, and sanitize the item name.
    - item model - revised save() for new items to use _process_data_file_info *before* the slug is checked.
    - item model - revised save() for updated items to use _process_data_file_info.
    - item model - revised save() for updated items to sanitize name if changed.
    - uploader - removed call to smash_extensions (item model does this when it calls sanitize_filename).
    - Legal_File_Helper_Test - added unit tests for sanitize_filename.
    - Item_Model_Test - revised existing unit tests based on changes.
    - Item_Model_Test - added new unit tests for names with legal but incorrect extensions.
    - Averted take over by HAL with fix #2001...

commit 0a2670a19ab121fe6970f2fcdf1864cb452a76c1
Author: shadlaws <shad@shadlaws.com>
Date:   Tue Feb 12 00:30:30 2013 +0100

    #1988 - Add movie_allow_uploads option ("always", "never", or "autodetect").
    - gallery_installer, module.info, install.sql - add movie_allow_uploads variable
    - movie::allow_uploads (new) - return true if movie_allow_uploads is "always" or "autodetect" and FFmpeg found, false otherwise
    - legal_file - use movie::allow_uploads instead of movie::find_ffmpeg
    - Form_Uploadify - use movie::allow_uploads instead of movie::find_ffmpeg

commit e109f0b5113c1f8b33130866af44450ca4107ed4
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Feb 10 22:51:22 2013 -0700

    Automated update of .build_number to 338 for branch master
    Last update: 53ce9c85d16cef2d7e63d02a6b9e93d184787d3f (1 commits ago)

commit 33149ef87aaba0730918e0f8fe8e1b58f32f5b50
Merge: 53ce9c8 1d7f5e3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 10 21:51:05 2013 -0800

    Merge pull request #121 from shadlaws/fix_1935_only
    
    #1935 - Make FFmpeg easier to install.

commit 53ce9c85d16cef2d7e63d02a6b9e93d184787d3f
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Feb 10 22:42:53 2013 -0700

    Automated update of .build_number to 337 for branch master
    Last update: 9c363abc419039eaf5bb40cce90c3f5bde9d4e76 (1 commits ago)

commit bb7590152d03385ad2e742e86c35162fcd556993
Merge: 9c363ab bfdf5a0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 10 21:42:24 2013 -0800

    Merge pull request #132 from shadlaws/fix_2000
    
    #2000 - Make legal_file::smash_extensions more robust.

commit 9c363abc419039eaf5bb40cce90c3f5bde9d4e76
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Feb 10 16:56:03 2013 -0700

    Automated update of .build_number to 336 for branch master
    Last update: a06faf61b40b458870bad5e66e2666c90032ee2d (2 commits ago)

commit 27be4ae6064b8609a641f4bf239999d5a8ec2c60
Author: shadlaws <shad@shadlaws.com>
Date:   Sun Feb 10 10:10:44 2013 +0100

    Follow-on to 0312d1b071bd4434ddb3f82888b0323da6bf3732 for #1994.
    - Updated function comments to match revisions.
    - No functional changes.

commit bfdf5a00fd8a256c4b564887f4eb649cf9d34774
Author: shadlaws <shad@shadlaws.com>
Date:   Sun Feb 10 02:28:47 2013 +0100

    #2000 - Make legal_file::smash_extensions more robust.
    - Fixed legal_file::smash_extensions.
    - Added new unit test.
    - Removed duplicated condition in existing unit test.

commit 9dbe2e15ad9db3b2be53e46bc5f67d382fb4089d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Feb 9 14:53:34 2013 -0500

    Extend siblings callbacks to take a $limit and an $offset for navigating
    large sibling sets.  Useful for the thumbnav module since we don't want to
    iterate a thousand siblings to find the one we care about.  Fixes #1999.

commit 8c5d5525d0b5602e125b5c9784a7c88b9f63a303
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Feb 9 14:53:07 2013 -0500

    Reset db_applied after find().  Fixes #1998.

commit 1d7f5e3ab117a6cce8f2a1d3de5e311b74dbee81
Author: shadlaws <shad@shadlaws.com>
Date:   Sat Feb 9 20:48:02 2013 +0100

    #1935 - Make FFmpeg easier to install.
    - system::find_binary - add Gallery's bin subdirectory to search
    - system::find_binary - auto-fix permissions if found in Gallery's bin directory

commit a06faf61b40b458870bad5e66e2666c90032ee2d
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Feb 9 11:36:48 2013 -0700

    Automated update of .build_number to 335 for branch master
    Last update: dce31266988a79c45ba41fca31cf95a520c7bff3 (1 commits ago)

commit 11e56b29da73d30ce97db190498d096e45556159
Merge: dce3126 8dcdb3b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Feb 9 10:36:42 2013 -0800

    Merge pull request #130 from shadlaws/fix_1997
    
    #1997 - Correct movie dimensions and mime type improperly set by contributed modules.

commit dce31266988a79c45ba41fca31cf95a520c7bff3
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Feb 9 11:36:11 2013 -0700

    Automated update of .build_number to 334 for branch master
    Last update: bc8cd154c5bad64ed13a5c6662e9685fdabe2c79 (1 commits ago)

commit 2dc695c6064ca03ddf9cf75825144fff3f80804e
Merge: bc8cd15 942233d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Feb 9 10:36:03 2013 -0800

    Merge pull request #129 from shadlaws/fix_1996
    
    #1996 - Add blacklist to legal_file helper.

commit bc8cd154c5bad64ed13a5c6662e9685fdabe2c79
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Feb 9 11:35:34 2013 -0700

    Automated update of .build_number to 333 for branch master
    Last update: f4ecb7e65850ca0cac9f7d963c34f7cd20ee9446 (1 commits ago)

commit 7613d886f98299c36d667908c52401bd07eef1e0
Merge: f4ecb7e 0312d1b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Feb 9 10:35:04 2013 -0800

    Merge pull request #128 from shadlaws/fix_1994
    
    #1994 - Make get_file_metadata throw an exception if photo or movie is unidentifiable/illegal.

commit 8dcdb3b8e14c58a65fb98a906dc8916d481c2af4
Author: shadlaws <shad@shadlaws.com>
Date:   Sat Feb 9 18:12:08 2013 +0100

    #1997 - Update movie dimensions and mime type if previously set without FFmpeg.
    - Added code to check/correct movie width, height, and mime in graphics::generate.
    As the comment says in the commit, this isn't ideal, but doing it in an upgrade
    script wouldn't be very ideal either.

commit f4ecb7e65850ca0cac9f7d963c34f7cd20ee9446
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Feb 8 21:19:58 2013 -0700

    Automated update of .build_number to 332 for branch master
    Last update: 40c5cba2dccdb217bd93274f65d16fd5558257fe (1 commits ago)

commit e4f206c6ae195c5764c8f0be9fdb076814821d2b
Merge: 40c5cba 2dc97fa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Feb 8 20:19:54 2013 -0800

    Merge pull request #127 from shadlaws/fix_1993
    
    #1993 - Remove "failed" query string from upgrader redirect if there are no errors.

commit 942233dd26a02f86936963e5e7adfea6ae746bba
Author: shadlaws <shad@shadlaws.com>
Date:   Fri Feb 8 15:21:57 2013 +0100

    #1996 - Add blacklist to legal_file helper.
    Adding a blacklist to legal_file could prevent possible security holes arising
    from a contributed module that adds file types by user input (e.g. an admin screen).

commit 0312d1b071bd4434ddb3f82888b0323da6bf3732
Author: shadlaws <shad@shadlaws.com>
Date:   Fri Feb 8 13:51:41 2013 +0100

    #1994 - Make get_file_metadata throw an exception if photo or movie is unidentifiable/illegal.
    - photo & movie helpers: modified to throw exceptions when file is known to be unidentifiable/illegal.
    - item model: revised to work with exceptions and be more explicit when the data file is invalid.
    - item model: removed duplicate get_file_metadata call for updated items.
    - admin_watermarks controller: revised to work with exceptions (really cleans up logic here).
    - graphics helper: revised to handle invalid placeholders (a nearly-impossible corner case, but still...).
    - photo & movie helper tests: revised to work with exceptions, added new tests for illegal files with valid extensions.
    - item model tests: revised to work with exceptions, added new tests for illegal files with valid extensions.

commit 2dc97fab053996dcb5fe743329e1b786ca43712d
Author: shadlaws <shad@shadlaws.com>
Date:   Fri Feb 8 09:03:57 2013 +0100

    #1993 - Remove "failed" query string from upgrader redirect if there are no errors.
    - Changed redirect if it finished without failures.
    - No change to Upgrader_Controller::index(), since its behavior with an empty vs. undefined failed query is identical.

commit 40c5cba2dccdb217bd93274f65d16fd5558257fe
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Feb 7 13:09:54 2013 -0700

    Automated update of .build_number to 331 for branch master
    Last update: 1796a290c18a2e38c7714ac903c78ac54c373e6b (2 commits ago)

commit 59371077c28a9af149bdc0f4aa97ce8037755dcb
Merge: 27ec3b4 0f7eecb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 7 15:09:15 2013 -0500

    Merge branch 'master' of github.com:gallery/gallery3

commit 27ec3b4c6c9e5bd9fa61fd613b9b68af37eab1e4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 7 15:08:55 2013 -0500

    Follow-on to 1e4d75c12072b49c3469f18af13bcf3439afc6b0 for #1975.
    Don't try to use an array index on a function return, that's not supported
    in PHP 5.3

commit 0f7eecbf9b99bcf214c7a07ad8df771d18db787f
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Feb 7 12:57:02 2013 -0700

    Automated update of .build_number to 330 for branch master
    Last update: 2fe80add2ed23516948c712cd899c03302c865fb (1 commits ago)

commit 530da82c5fc95753f5fc5d217338e69eb93372ce
Merge: 2fe80ad 2da4d9d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 7 11:56:37 2013 -0800

    Merge pull request #125 from shadlaws/fix_1992
    
    #1992 - Improve examples for thumb/resize/file path/url functions in item model

commit 2da4d9dd1f99707778b61a320601921243202d2c
Author: shadlaws <shad@shadlaws.com>
Date:   Thu Feb 7 09:49:28 2013 +0100

    #1992 - Improve examples for thumb/resize/file path/url functions in item model.
    Documentation-only changes to examples used in:
    - Item_Model::url
    - Item_Model::abs_url
    - Item_Model::file_path
    - Item_Model::file_url
    - Item_Model::resize_path
    - Item_Model::resize_url
    - Item_Model::thumb_path
    - Item_Model::thumb_url

commit 2fe80add2ed23516948c712cd899c03302c865fb
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Feb 6 15:58:48 2013 -0700

    Automated update of .build_number to 329 for branch master
    Last update: aed006a92e858cb9ca66dd021c07c5d80586169f (1 commits ago)

commit d9273038b0a4a1e84edaf46d9b8e09925c421a4e
Merge: aed006a faa7195
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Feb 6 14:58:25 2013 -0800

    Merge pull request #124 from shadlaws/fix_1991
    
    #1991 - Add options to graphics::mark_dirty to specify type and/or mime type

commit aed006a92e858cb9ca66dd021c07c5d80586169f
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Feb 6 15:57:04 2013 -0700

    Automated update of .build_number to 328 for branch master
    Last update: 1796a290c18a2e38c7714ac903c78ac54c373e6b (1 commits ago)

commit 0c4912c5428580eac01eb4423dd48a1504d17a48
Merge: 1796a29 1ae1165
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Feb 6 14:56:31 2013 -0800

    Merge pull request #122 from shadlaws/followon_1982_part_2
    
    Follow-on to 949b8cda14ec037386da34c43248ebd60542f5da for #1982.

commit faa719551d68308be8a1c41d9cd6104604958593
Author: shadlaws <shad@shadlaws.com>
Date:   Wed Feb 6 11:04:24 2013 +0100

    #1991 - Add options to graphics::mark_dirty to specify type and/or mime type.
    - graphics::mark_dirty - added $type and $mime_type as options.
    - graphics::mark_dirty - used options to set additional where conditions.

commit 1ae1165229813421384341e7ab83a834e08ca6f0
Author: shadlaws <shad@shadlaws.com>
Date:   Wed Feb 6 10:24:06 2013 +0100

    Follow-on to 949b8cda14ec037386da34c43248ebd60542f5da for #1982.
    - Add extra condition to Item_Model_Test::urls_test to test cache busters of missing files.
    - Previous commit fixes unit test for empty album url, but now no test checks missing files.

commit b1216c147436dcea81be678bdbe6f5c2aa843665
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Feb 5 12:40:36 2013 -0700

    Automated update of .build_number to 263 for branch 3.0.x
    Last update: 78dd12c219b4a8e855a097b366ba86fed9e44c6f (1 commits ago)

commit 42dee20bb8dd4da1fd5829a965d89b3e7f7f14e6
Merge: 78dd12c 428d4f3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 5 14:40:27 2013 -0500

    Merge branch 'master' into 3.0.x

commit 1796a290c18a2e38c7714ac903c78ac54c373e6b
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Feb 5 11:03:07 2013 -0700

    Automated update of .build_number to 327 for branch master
    Last update: f9aeb3b5cd4efb6bb92f034e82af93c8133df66c (5 commits ago)

commit 428d4f319bf9d6b5d16c90d847d61f70964e6e26
Merge: c4b2f79 8739e58
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 5 13:02:56 2013 -0500

    Merge branch 'master' of github.com:gallery/gallery3

commit c4b2f79a677e38a9af87827ad2e753275eb37f6b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 5 13:02:26 2013 -0500

    Force a sort order no sibling checks.  Fixes #1990.

commit 8739e58348c354eb155af21620f38598b793a33f
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Feb 3 10:45:10 2013 -0700

    Automated update of .build_number to 326 for branch master
    Last update: 291059d86a5badb62360b88f5dccab4a07f47778 (1 commits ago)

commit 0d9c4da0ffe9796bd0fa1ee9003e0a4cf277c538
Merge: 291059d 949b8cd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 3 09:44:51 2013 -0800

    Merge pull request #118 from shadlaws/fix_1982_followon
    
    Follow-on to f83ed5f8716663a45c9d8e8118bbcf0e2849c3fb for #1982.

commit 291059d86a5badb62360b88f5dccab4a07f47778
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Feb 2 21:42:14 2013 -0700

    Automated update of .build_number to 325 for branch master
    Last update: f9aeb3b5cd4efb6bb92f034e82af93c8133df66c (3 commits ago)

commit 3439eb57006f6973bbcd17c9d2c13b1edf909f52
Merge: dece6dc 241d7d6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Feb 2 23:41:53 2013 -0500

    Merge branch 'master' of github.com:gallery/gallery3

commit dece6dc5a5880c6267431ba3299c5758b38662ee
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Feb 2 23:39:16 2013 -0500

    Create gallery::allow_css_and_js_combining() which lets you disable combining CSS/JS
    by touching var/DONT_COMBINE.  Fixes #1989.

commit 241d7d63a0818a0b8fd9c8d1f1789fadbd5964c5
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Feb 2 18:41:57 2013 -0700

    Automated update of .build_number to 324 for branch master
    Last update: a99b6f79aa8f66bc4d2ea34f814a2f53dde1d288 (1 commits ago)

commit 7192dfad1b6d47a3c5510cfb806e7aba7a829cdc
Merge: a99b6f7 bc0bf10
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Feb 2 17:41:49 2013 -0800

    Merge pull request #120 from shadlaws/fix_1986_followon
    
    Follow-in to 314e2e67b1d52b7d01a715d7a6680862bf83b987 for #1986.

commit bc0bf10643413ea1d952ea1472a6af914d0696c5
Author: shadlaws <shad@shadlaws.com>
Date:   Sat Feb 2 14:04:15 2013 +0100

    Follow-in to 314e2e67b1d52b7d01a715d7a6680862bf83b987 for #1986.
    - Update xss_test golden file (change line numbers).

commit 949b8cda14ec037386da34c43248ebd60542f5da
Author: shadlaws <shad@shadlaws.com>
Date:   Sat Feb 2 10:02:37 2013 +0100

    Follow-on to f83ed5f8716663a45c9d8e8118bbcf0e2849c3fb for #1982.
    - Fix unit test for album url since empty albums now have thumbnails.

commit a99b6f79aa8f66bc4d2ea34f814a2f53dde1d288
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Feb 1 16:13:53 2013 -0700

    Automated update of .build_number to 323 for branch master
    Last update: 070095cf6cc628374ff56489c27220ca61b5735a (1 commits ago)

commit 1f82533a0b500ad1cfaf5661d1ecf9e01656e819
Merge: 070095c 6e757f9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Feb 1 15:13:21 2013 -0800

    Merge pull request #117 from mikeage/fix_1987
    
     #1987 g2_import module should redirect with a 301, not 302

commit 6e757f9988545aa0afbf5b345f81cbfcc6bed7ab
Author: Mike Miller <github@mikeage.net>
Date:   Fri Feb 1 15:33:18 2013 +0200

     #1987 g2_import module should redirect with a 301, not 302
    
    As the g2_import process is generally assumed to be permanent, the
    redirect should be a 301, and not a 302.

commit 070095cf6cc628374ff56489c27220ca61b5735a
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Jan 31 22:52:50 2013 -0700

    Automated update of .build_number to 322 for branch master
    Last update: f9aeb3b5cd4efb6bb92f034e82af93c8133df66c (1 commits ago)

commit 314e2e67b1d52b7d01a715d7a6680862bf83b987
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Feb 1 00:52:14 2013 -0500

    Fix ctrl-click behavior. Fixes #1986.

commit f9aeb3b5cd4efb6bb92f034e82af93c8133df66c
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Jan 31 21:47:49 2013 -0700

    Automated update of .build_number to 321 for branch master
    Last update: 340a14d3065aa9f330b462d14426960450a0d1d8 (1 commits ago)

commit f72c5a87c8e86421d294d504f2f58cc9fe672384
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 31 23:45:36 2013 -0500

    Follow-on to 93963422505ecc790af62ae0503f301145debac3 for #1985 which
    was breaking all unit tests.  Use module::install("gallery") instead
    of calling gallery_installer::install directly.

commit 78dd12c219b4a8e855a097b366ba86fed9e44c6f
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Jan 31 18:00:21 2013 -0700

    Automated update of .build_number to 262 for branch 3.0.x
    Last update: 0dc89038c20432087547692664d87a51e3f76a98 (1 commits ago)

commit 4a07993389afb1f92b6eefdc026eb41494e668cb
Merge: 0dc8903 a29fb33
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 31 19:59:51 2013 -0500

    Merge branch 'master' into 3.0.x

commit 340a14d3065aa9f330b462d14426960450a0d1d8
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Jan 31 17:59:41 2013 -0700

    Automated update of .build_number to 320 for branch master
    Last update: 795f2569941f582127885f0bdcabe089d644a5d6 (3 commits ago)

commit a29fb3343c33963bcc4db55384455ac277eb66f1
Merge: 9396342 51995ae
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 31 19:59:32 2013 -0500

    Merge branch 'master' of github.com:gallery/gallery3

commit 93963422505ecc790af62ae0503f301145debac3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 31 19:55:53 2013 -0500

    Drop the requirement to have the install() function set the module
    version.  It's redundant.  Fixes #1985.

commit 51995ae48ac0b589d6b84943d73687401a8c441a
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Jan 31 16:48:26 2013 -0700

    Automated update of .build_number to 319 for branch master
    Last update: 795f2569941f582127885f0bdcabe089d644a5d6 (1 commits ago)

commit cb08f6cc13bfd07aed2e6588cad6a6cc655b73f6
Merge: 795f256 f83ed5f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 31 15:48:18 2013 -0800

    Merge pull request #115 from shadlaws/fix_1982
    
    #1982 - Add placeholder for albums with no album cover.

commit 0dc89038c20432087547692664d87a51e3f76a98
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Jan 31 14:29:55 2013 -0700

    Automated update of .build_number to 261 for branch 3.0.x
    Last update: c3dc32c8989c77aeff311e43500a384e6c72cb85 (1 commits ago)

commit 795f2569941f582127885f0bdcabe089d644a5d6
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Jan 31 14:29:49 2013 -0700

    Automated update of .build_number to 318 for branch master
    Last update: 107735ffc42bd761e28cbfc79f59aa23c1bcbc2a (1 commits ago)

commit 535b96190976c6ae695a21658b9a290c71a90c66
Merge: c3dc32c ea54a88
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 31 16:29:46 2013 -0500

    Merge branch 'master' into 3.0.x

commit ea54a88ec8d3c6e412f5efda58601006af1cf86c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 31 16:29:09 2013 -0500

    Escape the host/username/password arguments to mysqldump.  Fixes #1984.

commit 107735ffc42bd761e28cbfc79f59aa23c1bcbc2a
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Jan 31 12:45:36 2013 -0700

    Automated update of .build_number to 317 for branch master
    Last update: a15d062b23f36920f5db0793b1086a149f7030ac (1 commits ago)

commit 60c37726cea095f646d46f756cc846202af3214b
Merge: a15d062 fd8b8de
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 31 11:45:10 2013 -0800

    Merge pull request #116 from shadlaws/fix_1983
    
    #1983: Remove item keys changed for/by graphics::generate from significant changes list.

commit a15d062b23f36920f5db0793b1086a149f7030ac
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Jan 31 12:42:38 2013 -0700

    Automated update of .build_number to 316 for branch master
    Last update: e17c39386b9d322f9bafd8b548ec6b94a7c5f7b5 (1 commits ago)

commit 92bd0dd28ea5d83a06ada2c5287fe9101a95bbdd
Merge: e17c393 8384d79
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 31 11:42:09 2013 -0800

    Merge pull request #114 from shadlaws/fix_1945_followon
    
    Follow-on to 5fca371a616dba16f955087c4477ee229ee222d0 for #1945.

commit fd8b8de2420066f907d09fd30ac75d678ef3e0ca
Author: shadlaws <shad@shadlaws.com>
Date:   Thu Jan 31 18:59:33 2013 +0100

    #1983: Remove item keys changed for/by graphics::generate from significant changes list.
    There's no need to run through all of the item save/validation logic for these
    entries, which are changed frequently during the course of thumb/resize generation.

commit f83ed5f8716663a45c9d8e8118bbcf0e2849c3fb
Author: shadlaws <shad@shadlaws.com>
Date:   Thu Jan 31 17:18:39 2013 +0100

    #1982 - Add placeholder for albums with no album cover.
    - Added missing_album_cover.jpg placeholder image.
    - Modified the graphics helper to use it.  Calling graphics::generate will copy it.
    - Modified item::remove_album_cover and gallery_event::item_created to run graphics::generate.
    - Added unit test to Graphics_Helper_Test.

commit 8384d7948e257c9bc825c2d45da9630d00c603f0
Author: shadlaws <shad@shadlaws.com>
Date:   Thu Jan 31 12:40:55 2013 +0100

    Follow-on to 5fca371a616dba16f955087c4477ee229ee222d0 for #1945.
    Previously skipped admin_watermarks mods to use new functionality of #1945
    since there was concurrent work on it with #1970.
    Now that both are done, we can wrap this up.

commit c3dc32c8989c77aeff311e43500a384e6c72cb85
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Jan 30 19:44:21 2013 -0700

    Automated update of .build_number to 260 for branch 3.0.x
    Last update: 9318f76a683728d65d412808629f40ff41f5339a (1 commits ago)

commit 72545003b78873989a23e2da6343afe3dee38acd
Merge: 9318f76 8d15e5c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 30 21:43:48 2013 -0500

    Merge branch 'master' into 3.0.x

commit e17c39386b9d322f9bafd8b548ec6b94a7c5f7b5
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Jan 30 19:43:42 2013 -0700

    Automated update of .build_number to 315 for branch master
    Last update: fc82f56f4b3c91ac1ceee426f477b256918636f8 (2 commits ago)

commit 8d15e5cb2eed56bbd894ff5578d081deee8ca255
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 30 21:42:47 2013 -0500

    Follow-in to cff1e76e8da2055f9faf7449222b43a686014b1c for #1978
    Restrict which album cover ids we swap over to the hierarchy of the
    current album, otherwise we can wind up in sticky situations with
    hierarchical album cover chains.
    
    Eg, you have a hierarchy like this:
    
    root -> A1 -> A2 --> A3 -> P1
                         A4 -> P2
    
    P1 is the album cover for its entire hierarchy.  But then you
    swap A2's album cover for A3 making this:
    
    root -> A1 -> A2 +   A3 -> P1
                     \-> A4 -> P2
    
    Since A1, A2 and A3 all had P1 as their album cover item id.  Now
    we're swapping it over to P2 but we want to leave P1 as A3's album
    cover item id.  So only look at A4's hierarchy and ignore its peers.

commit 71cf911649811666919d040e2fc319f485b99966
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 30 21:38:32 2013 -0500

    Support additional where tuples in ORM_MPTT::parents.  Fixes #1980.

commit 9318f76a683728d65d412808629f40ff41f5339a
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Jan 30 19:20:03 2013 -0700

    Automated update of .build_number to 259 for branch 3.0.x
    Last update: 64f254ef6213c231eb4d762740f42bf550c67a9a (1 commits ago)

commit 3855955a5a9d9620974b9e552ffae72781e33459
Merge: 64f254e 30ec44b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 30 21:19:44 2013 -0500

    Merge branch 'master' into 3.0.x

commit fc82f56f4b3c91ac1ceee426f477b256918636f8
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Jan 30 19:19:24 2013 -0700

    Automated update of .build_number to 314 for branch master
    Last update: 12ea6ad642c0e84fe67f1324f8fa00c9534e7aa5 (3 commits ago)

commit 30ec44b3b2cdf20e842ba1fe9645ed9fbf0c1f18
Merge: 075b95f ec232f6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 30 21:19:08 2013 -0500

    Merge branch 'master' of github.com:gallery/gallery3

commit 075b95f0ed6f843c64756c772011a1ecb406168f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 30 21:18:26 2013 -0500

    Actually disable the "make album cover" option when the item is already the album cover.  Fixes #1979.

commit ec232f6a47a7ee64acd1641775bbdb2f8b351134
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Jan 30 19:09:46 2013 -0700

    Automated update of .build_number to 313 for branch master
    Last update: 12ea6ad642c0e84fe67f1324f8fa00c9534e7aa5 (1 commits ago)

commit cff1e76e8da2055f9faf7449222b43a686014b1c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 30 21:08:36 2013 -0500

    When changing the album cover, find and retarget any other albums which were using the old item as their album cover.  Fixes #1978.

commit 12ea6ad642c0e84fe67f1324f8fa00c9534e7aa5
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Jan 30 18:17:12 2013 -0700

    Automated update of .build_number to 312 for branch master
    Last update: 0ab40de11d65476454d4bf1129916a6856001002 (1 commits ago)

commit d8d01e0aa0cac2b8576ae481527d875213cdc3a7
Merge: 0ab40de cf07742
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 30 17:17:06 2013 -0800

    Merge pull request #112 from shadlaws/fix_1968
    
    #1968 - Improve album cover generation/removal/etc.

commit 0ab40de11d65476454d4bf1129916a6856001002
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Jan 30 17:37:03 2013 -0700

    Automated update of .build_number to 311 for branch master
    Last update: 28cd0ad2c13fec256c4a0f162ec7b552eb88d66c (5 commits ago)

commit b6b269948f10a727384723b5c8a4630273242bce
Merge: 49dd099 8de70ee
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 30 19:36:11 2013 -0500

    Merge branch 'master' of github.com:gallery/gallery3

commit 49dd0994df6f6709dcd9ea6971beb13c68a99cf0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 30 19:32:35 2013 -0500

    Follow-on to 1e4d75c12072b49c3469f18af13bcf3439afc6b0 for #1975.
    Create a siblings() function which pulls together the siblings_callback
    function and makes it a more palatable API.

commit 8de70ee7bc02d99261705e391b7187e84dc3f896
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Jan 30 16:47:17 2013 -0700

    Automated update of .build_number to 310 for branch master
    Last update: 28cd0ad2c13fec256c4a0f162ec7b552eb88d66c (3 commits ago)

commit ee0a0d7bf7ef6ae05a8961f8a956871a8c7bf371
Merge: 9ef8918 8ada16d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 30 18:47:04 2013 -0500

    Merge branch 'master' of github.com:gallery/gallery3

commit 9ef891858ca6ccf4213c5981868c6175cb2cde47
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 30 18:45:49 2013 -0500

    Protect admins from themselves - in case an admin changed the
    watermark.name setting to something terrible by accident via Admin >
    Advanced, we'll just use the basename.  Fixes #1977.

commit 8ada16d887e0ad6fc68750c325c9d8594cbe1025
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Jan 30 12:20:27 2013 -0700

    Automated update of .build_number to 309 for branch master
    Last update: 28cd0ad2c13fec256c4a0f162ec7b552eb88d66c (1 commits ago)

commit 92c264033a23cd9e7473a60948760baefd488407
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 30 14:19:44 2013 -0500

    Don't concatenate tainted strings in JS.  Fixes #1976.

commit 64f254ef6213c231eb4d762740f42bf550c67a9a
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Jan 30 10:21:58 2013 -0700

    Automated update of .build_number to 258 for branch 3.0.x
    Last update: 3f1bfa7551648071ea935031363076e9866d62eb (4 commits ago)

commit 2b8a407aab01ed17580617a2450674b0efb4abcc
Merge: e8a1f7f 28cd0ad
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 30 12:21:37 2013 -0500

    Merge branch 'master' into 3.0.x

commit e8a1f7f2df6fa503b86b1854380152104f68d59f
Merge: 545d30f 63a3704
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 30 12:21:24 2013 -0500

    Merge branch '3.0.x' of github.com:gallery/gallery3 into 3.0.x

commit 28cd0ad2c13fec256c4a0f162ec7b552eb88d66c
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Jan 30 10:12:06 2013 -0700

    Automated update of .build_number to 308 for branch master
    Last update: a983e8748e6e6667e968e96f8f0994f49b763b73 (1 commits ago)

commit 1e4d75c12072b49c3469f18af13bcf3439afc6b0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 30 12:10:18 2013 -0500

    Improve the display context API to return a "siblings_callback" field
    containing a callback that returns all the siblings.  Fixes #1975.

commit a983e8748e6e6667e968e96f8f0994f49b763b73
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Jan 30 08:54:19 2013 -0700

    Automated update of .build_number to 307 for branch master
    Last update: 861e8628f5d847cbf5bc3cc9f94254514e8296a8 (1 commits ago)

commit 6e609c249a6fd9c2fad64d407c2acdbf0f3aedec
Merge: 861e862 91acf81
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 30 07:53:56 2013 -0800

    Merge pull request #110 from mikeage/g2_import
    
     #1973 Handle redirected G2 URLs for tags, including g2_itemId passed

commit 91acf812a12c331c7bac53a8718419b024dff4a6
Author: Mike Miller <github@mikeage.net>
Date:   Mon Jan 28 17:05:43 2013 +0200

     #1973 Handle redirected G2 URLs for tags, including g2_itemId passed

commit cf077425953a6a492dea97eaf1517e7d08c9648f
Author: shadlaws <shad@shadlaws.com>
Date:   Wed Jan 30 01:07:36 2013 +0100

    #1968 - Improve album cover generation/removal/etc.
    - Added stanza to Item_Model::save that handles when cover id is null.
    - Added logic to graphics::generate to copy/convert album cover thumbs from their item thumbs to ensure they're always jpg, and eliminate the possibility that we copy/convert a dirty thumb.
    - Redirected other places in code where we want to do one of the above two things to use these two functions instead (gallery_event::item_updated_data_file, item::make_album_cover, item::remove_album_cover).
    - Improved validation in Item_Model so only albums can have covers and all covers must be non-albums.
    - Added unit tests to Graphics_Helper_Test.

commit 861e8628f5d847cbf5bc3cc9f94254514e8296a8
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Jan 29 11:29:53 2013 -0700

    Automated update of .build_number to 306 for branch master
    Last update: 899590873bbc444a35654573473f3c7326a95f87 (1 commits ago)

commit ed7e2d5089e3373f35fe37e0c58412a98949ae54
Merge: 8995908 4cf31d8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 29 10:29:25 2013 -0800

    Merge pull request #108 from shadlaws/fix_1970
    
    #1970 - Make add watermarks more secure and add unit tests.

commit 899590873bbc444a35654573473f3c7326a95f87
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Jan 29 11:28:41 2013 -0700

    Automated update of .build_number to 305 for branch master
    Last update: b7c73ee693473eef9b536fb05f8c2b190e47b866 (1 commits ago)

commit a3478732f910eb7eff93dfa5cc44d833b995d79a
Merge: b7c73ee 536bdaa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 29 10:28:38 2013 -0800

    Merge pull request #105 from shadlaws/fix_1967
    
    #1967 - Improve how graphics::generate handles missing/bad images.

commit 4cf31d8850c7df4d53a2bc56e6832bbe11388d13
Author: shadlaws <shad@shadlaws.com>
Date:   Tue Jan 29 18:48:39 2013 +0100

    #1970 - Make add watermarks more secure and add unit tests.
    This follows #1855 and #1951...
    - Ensured that invalid or illegal files are not added even if they have valid extensions.
    - Added unit tests (currently there aren't any...)

commit 536bdaa4db6e950cb4f382697964651b8eab63cd
Author: shadlaws <shad@shadlaws.com>
Date:   Tue Jan 29 18:35:10 2013 +0100

    #1967 - Improve how graphics::generate handles missing/bad images.
    - Made missing_photo match the image format (jpg, png, etc.).
    - Swapped missing_photo.png for missing_photo.jpg since it's likely to require less conversion to match.
    - Improved error messages to user when things go wrong.
    - Ensured that missing image placeholders are always copied when there's an error.
    - Ensured we don't mistake no file output for a correct file output (delete target before attempt).
    - Restructured graphics::generate a bit to work better with above changes.
    - Added unit tests for graphics::generate.

commit b7c73ee693473eef9b536fb05f8c2b190e47b866
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Jan 29 10:10:26 2013 -0700

    Automated update of .build_number to 304 for branch master
    Last update: cf58e064d462eae6a1973cdf146e4867bf539357 (1 commits ago)

commit 2551b31b8f165ad3af8fce5dc927e80bfb945af4
Merge: cf58e06 5fca371
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 29 09:10:06 2013 -0800

    Merge pull request #106 from shadlaws/fix_1945
    
    #1945 - Extend legal_file helper functions.

commit cf58e064d462eae6a1973cdf146e4867bf539357
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Jan 29 10:01:44 2013 -0700

    Automated update of .build_number to 303 for branch master
    Last update: 23c6c507526ec1fc4a7ff80afb154341d75e9cab (1 commits ago)

commit 3b0de7791b3171b9d4b4e2577223a47bcaba34ac
Merge: 23c6c50 9e20a30
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 29 09:01:31 2013 -0800

    Merge pull request #107 from shadlaws/fix_1969
    
    #1969 - Give graphics events the ability to override the standard process

commit 5fca371a616dba16f955087c4477ee229ee222d0
Author: shadlaws <shad@shadlaws.com>
Date:   Mon Jan 28 23:31:18 2013 +0100

    #1945 - Extend legal_file helper functions.
    - Added get_types_by_extension function, which is a merged version of get...types_by_extension functions (similar to get_extensions).
    - Added optional extension argument to get...extensions functions similar to get...types_by_extension functions.
    - Added unit tests.  Now, every legal_file function has one.
    - Restructured helper file to include caches.
    - Added array_unique to get...types (derived from get...types_by_extension, which can be many-to-one).
    - Edited server_add, uploader, and item model to use new functionality.

commit 23c6c507526ec1fc4a7ff80afb154341d75e9cab
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Jan 28 10:47:35 2013 -0700

    Automated update of .build_number to 302 for branch master
    Last update: daad29e5c391d15d99cd8f3f5af8aaf3e3b76749 (1 commits ago)

commit 785633d910e517d3d7baa35d6dde9a16df912b73
Merge: daad29e 1313a02
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 28 09:47:11 2013 -0800

    Merge pull request #109 from shadlaws/fix_1971
    
    #1971 - Make resequence_child_weights_test unit test more reliable.

commit 1313a02bf4e28c169c672a342d7ad16f9b4b17dc
Author: shadlaws <shad@shadlaws.com>
Date:   Mon Jan 28 14:47:26 2013 +0100

    #1971 - Make resequence_child_weights_test unit test more reliable.
    - Set the sort_column of the parent album to id, which has no possibility of being identical between the two photos.
    - Now, the reweighting will reverse the order even if they were created during the same second.

commit 9e20a30d22c48f5aacc09035405dd0added499de
Author: shadlaws <shad@shadlaws.com>
Date:   Sun Jan 27 21:55:24 2013 +0100

    #1969 - Give graphics events the ability to override the standard process.
    While graphics_rotate, graphics_resize, and graphics_composite events already exist, they don't have the ability to *override* the standard process.
    This makes it a bit tricky when you want to replace the standard procedure with another (e.g. use jpegtran to perform lossless jpg rotation).
    Solution:
    - make a temp filename.
    - tell the events to use it as the output file.
    - if an event makes something, use it and skip the standard process.

commit daad29e5c391d15d99cd8f3f5af8aaf3e3b76749
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Jan 27 13:37:08 2013 -0700

    Automated update of .build_number to 301 for branch master
    Last update: 0c214d85e63fc74fb315ca1b542251d5c6112201 (1 commits ago)

commit 545d30fee0c361911a0445de13bf8ad8de9b5327
Merge: 77e3c55 e957c97
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 27 15:36:45 2013 -0500

    Merge branch 'master' into 3.0.x

commit e957c97c947427093d03de3302f4d98909d1ab1a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 27 15:35:42 2013 -0500

    Add a key on relative_path_cache in the items table to improve performance on installs
    that use File_Proxy heavily.  Fixes #1920.

commit 63a370445a3b93b876d96ff1e123d82d7d531930
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Jan 27 13:27:00 2013 -0700

    Automated update of .build_number to 257 for branch 3.0.x
    Last update: 3f1bfa7551648071ea935031363076e9866d62eb (1 commits ago)

commit 77e3c558022609c065a55b6a8043540603bf3f20
Merge: 3f1bfa7 0c214d8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 27 15:26:28 2013 -0500

    Merge branch 'master' into 3.0.x

commit 0c214d85e63fc74fb315ca1b542251d5c6112201
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Jan 26 12:01:04 2013 -0700

    Automated update of .build_number to 300 for branch master
    Last update: c508fc4a45f0af94c89ba7f0ac1533244a7f35a3 (1 commits ago)

commit b06c0f4890a3a3bfd1bdf6b2b8238a0d07fc7ccf
Merge: c508fc4 603db40
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 26 11:00:56 2013 -0800

    Merge pull request #104 from shadlaws/fix_1966
    
    #1966 - "Fix your Gallery" shows 60/59 items completed.

commit c508fc4a45f0af94c89ba7f0ac1533244a7f35a3
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Jan 26 11:59:20 2013 -0700

    Automated update of .build_number to 299 for branch master
    Last update: 847a825b2527584662da277fd6a47921287cbbf4 (1 commits ago)

commit 6042bfd1f519ee543483f9850b04621f58a7ff19
Merge: 847a825 cc2aed6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 26 10:59:18 2013 -0800

    Merge pull request #91 from shadlaws/fix_1946_1947
    
    #1946, 1947 - Make altered names/slugs more user-friendly, make conflict-finding code check filenames with no extensions

commit 603db40459fdaebb5917c8c5aef922476700dce2
Author: shadlaws <shad@shadlaws.com>
Date:   Sat Jan 26 09:08:03 2013 +0100

    #1966 - "Fix your Gallery" shows 60/59 items completed.
    - Fixed counter in gallery_task::fix that was often one too many.
    
    For FIX_STATE_RUN_MISSING_ACCESS_CACHES, changed this:
    $stack = explode(" ", $task->get("stack"));
    To this:
    $stack = array_filter(explode(" ", $task->get("stack")));

commit cc2aed656c7289881ba23e8ec700a4daf7889688
Author: shadlaws <shad@shadlaws.com>
Date:   Sat Jan 26 08:38:31 2013 +0100

    #1946, 1947 - Make altered names/slugs more user-friendly, make conflict-finding code check filenames with no extensions
    - Reduced from four places that alter names/slugs to two (one to populate empty slugs, one to handle conflicting names/slugs).
    - For empty slugs, fill with generic human-readable name (e.g. "photo") instead of random value.
    - For conflicting names/slugs, add suffix that's sequential (e.g. "-01"), only using random after 99 conflicts.
    - Made conflict-finding code check filenames with no extensions.
    - Renamed _randomize_name_or_slug_on_conflict to _check_and_fix_conflicts.
    - Added unit tests.  Also cleaned up existing unit tests to reflect new logic and removed a redundant test.
    - Added installer logic to correct existing items now considered in conflict.
    - Revised gallery_task to look for duplicate names based on new criteria.

commit 3f1bfa7551648071ea935031363076e9866d62eb
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Jan 25 17:04:21 2013 -0700

    Automated update of .build_number to 256 for branch 3.0.x
    Last update: dbaec634545eec57365768f641c4841445c63d67 (1 commits ago)

commit 5dd78c292ab36c4c623e9665d77f4e24414a925a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 25 19:03:49 2013 -0500

    This is branch is now 3.0.5 (Daydreaming)

commit 847a825b2527584662da277fd6a47921287cbbf4
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Jan 25 16:26:55 2013 -0700

    Automated update of .build_number to 298 for branch master
    Last update: 066f4cdf8e44585790711797baf9130511d4203d (1 commits ago)

commit 96f4a5ea85fd4b4618002bdbd584effc4a86190e
Merge: 066f4cd c2d1c24
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 25 15:26:27 2013 -0800

    Merge pull request #103 from shadlaws/fix_1965
    
    #1965 - Improve sanity checks and copy/convert/process logic for rotate and resize

commit 066f4cdf8e44585790711797baf9130511d4203d
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Jan 25 16:25:39 2013 -0700

    Automated update of .build_number to 297 for branch master
    Last update: 776fe75ceb93f8eb729d13d58fb411d6ceeb9270 (1 commits ago)

commit 3fa7b66585a70149e6d3eb2d064661fb929f8613
Merge: 776fe75 212944e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 25 15:25:06 2013 -0800

    Merge pull request #96 from shadlaws/fix_1951
    
    #1951 - Make metadata generation more flexible (photo and movie helpers).

commit 212944e1eae2ffb9a3e27ea7d1c6813160cce1ed
Author: shadlaws <shad@shadlaws.com>
Date:   Sat Jan 26 00:04:55 2013 +0100

    #1951 - Make metadata generation more flexible (photo and movie helpers).
    - added photo_get_file_metadata and movie_get_file_metadata events
    - modified photo::get_file_metadata and movie::get_file_metadata to use them
    - ensure that non-readable files throw exceptions
    - redirected other photo metadata calls in core to photo::get_file_metadata (the helper function already exists, but in many places getimagesize is still called directly)
    - added some unit tests (neither of the functions above had one)

commit c2d1c2407fdef326cd1f59d6852620f915a5c0e1
Author: shadlaws <shad@shadlaws.com>
Date:   Fri Jan 25 23:47:08 2013 +0100

    #1965 - Improve sanity checks and copy/convert/process logic for rotate and resize.
    - resize: ensured that resize is skipped *only* if the metadata is valid or the options are well-defined and would upscale. Then, if resize is skipped, check to see if it still needs to be converted. Previous conditions would allow a small PNG to get copied to a JPG, and would allow a corrupted JPG to be copied to the output.
    - rotate: add checks for empty file or empty options.
    - use get_file_metadata instead of direct getimagesize call.
    - add unit tests for rotate and resize, including some for corrupted input files and missing options.

commit dbaec634545eec57365768f641c4841445c63d67
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Jan 25 13:50:16 2013 -0700

    Automated update of .build_number to 255 for branch 3.0.x
    Last update: edae3f87e36a92aea49686fe362b7cdf1e3f7097 (1 commits ago)

commit b3d98c6ea295134beb6b9650a6b8c1b05e7d94e0
Merge: edae3f8 21a4341
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 25 15:50:10 2013 -0500

    Merge branch 'master' into 3.0.x

commit 776fe75ceb93f8eb729d13d58fb411d6ceeb9270
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Jan 25 13:49:32 2013 -0700

    Automated update of .build_number to 296 for branch master
    Last update: 7e710366de1514c900807881aaf2fdd42a467fe9 (1 commits ago)

commit 21a43410141579e4347e2255ae3ab1da9d27ae11
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 25 15:49:04 2013 -0500

    Fix an assignment-instead-of-comparison bug.  I wish PHP had a better
    warning system for this stuff.  In this case it's innocuous because
    the UI only allows you to rearrange stuff inside a single album, so
    the assignment doesn't do anything.  Fixes #1914.

commit edae3f87e36a92aea49686fe362b7cdf1e3f7097
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Jan 25 12:53:43 2013 -0700

    Automated update of .build_number to 254 for branch 3.0.x
    Last update: 4e5b28ed15fd883fc9dc5006dbea3e5ce5c987c7 (1 commits ago)

commit 94609c31d40be47e0f5810604843f79f4b98409f
Merge: 4e5b28e 7e71036
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 25 14:53:28 2013 -0500

    Merge branch 'master' into 3.0.x

commit 7e710366de1514c900807881aaf2fdd42a467fe9
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Jan 25 12:31:28 2013 -0700

    Automated update of .build_number to 295 for branch master
    Last update: c71f3091d2c3d87467640c0d7a0e701c259dd519 (1 commits ago)

commit 5868fe0b867fe1e7612f155033f0f9fd762241ee
Merge: c71f309 f90cd11
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 25 11:31:07 2013 -0800

    Merge pull request #102 from shadlaws/fix_1964
    
    #1964 - TMPPATH is mis-defined in index.php.

commit 4e5b28ed15fd883fc9dc5006dbea3e5ce5c987c7
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Jan 25 12:29:10 2013 -0700

    Automated update of .build_number to 253 for branch 3.0.x
    Last update: ffd162738edd1ee30aa9e2d9db743bc94395b905 (5 commits ago)

commit c71f3091d2c3d87467640c0d7a0e701c259dd519
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Jan 25 12:28:58 2013 -0700

    Automated update of .build_number to 294 for branch master
    Last update: ba3b0c06b0874faeed0eaa62e507c8d44f2a68f5 (1 commits ago)

commit 0f15c2cf29b2ad5dbec7f031fd87e7b65ee44ff8
Merge: 51fd687 f2704b9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 25 14:28:55 2013 -0500

    Merge branch '3.0.x' of github.com:gallery/gallery3 into 3.0.x

commit 51fd6871a69746d797cdb50d5102e43018ae5982
Merge: 6711cc6 cc91159
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 25 14:28:43 2013 -0500

    Merge branch 'master' into 3.0.x

commit cc91159beed09cdde8322801a1b2a501b639b036
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 25 14:28:24 2013 -0500

    Follow-on to 8e954cf5f0be61eb9ac6fa6e8f04ee6dcf4aaf23 - use HTTP_HOST if there's no SERVER_NAME

commit f2704b9baef07b443a775757a501d914ec762c21
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Jan 25 12:23:14 2013 -0700

    Automated update of .build_number to 252 for branch 3.0.x
    Last update: ffd162738edd1ee30aa9e2d9db743bc94395b905 (3 commits ago)

commit 6711cc675ac756f54d78b865ff0f8171b4bca025
Merge: a8b0b76 47c97a7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 25 14:22:41 2013 -0500

    Merge branch '3.0.x' of github.com:gallery/gallery3 into 3.0.x

commit a8b0b76b77691fc6cebd75abb34ec1a8d316015a
Author: shadlaws <shad@shadlaws.com>
Date:   Thu Jan 24 12:03:05 2013 +0100

    #1960 - Add unit test to look for extra spaces at end of line
    - Added no_extra_spaces_at_end_of_line_test to File_Structure_Test.
    - Updated Gallery_Filters to exclude testing code that isn't ours.
    - Removed existing extra spaces.  New test now passes.

commit 47c97a728017002682d98165a49efd0d8493fcb7
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Jan 25 12:20:54 2013 -0700

    Automated update of .build_number to 251 for branch 3.0.x
    Last update: ffd162738edd1ee30aa9e2d9db743bc94395b905 (1 commits ago)

commit 1d7fa16d198f11b1efe3bb3af09070555157c825
Merge: ffd1627 8e954cf
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 25 14:20:18 2013 -0500

    Merge branch 'master' into 3.0.x

commit ba3b0c06b0874faeed0eaa62e507c8d44f2a68f5
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Jan 25 12:20:16 2013 -0700

    Automated update of .build_number to 293 for branch master
    Last update: 0397497ba0a019548eaf909e7ef61a53008d9403 (2 commits ago)

commit 8e954cf5f0be61eb9ac6fa6e8f04ee6dcf4aaf23
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 24 23:22:57 2013 -0500

    Use SERVER_NAME instead of HTTP_HOST.  Fixes #1963.

commit 7548266edf6d277527ba69153e7eadcf811bbb14
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 24 22:35:56 2013 -0500

    Properly escape backslashes.  Fixes #1962.

commit 0397497ba0a019548eaf909e7ef61a53008d9403
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Jan 25 10:10:03 2013 -0700

    Automated update of .build_number to 292 for branch master
    Last update: 4c1dc8457e82bd8960e10416981b5dadfc3aebe4 (1 commits ago)

commit 98e709220a4636ecec05ebf6a15a8a564400be0a
Merge: 4c1dc84 48bd198
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 25 09:09:38 2013 -0800

    Merge pull request #100 from shadlaws/fix_1956
    
    #1956 - Escape LIKE queries (for _ and %).

commit f90cd11bcf087b001d0d84a3c2f32a36863cf4fb
Author: shadlaws <shad@shadlaws.com>
Date:   Fri Jan 25 13:36:27 2013 +0100

    #1964 - TMPPATH is mis-defined in index.php.
    - fixed mis-definition of TMPPATH, which was resulting in something like .../gallery/var//tmp/

commit 48bd19808c38a8de20cfece1adc1ffe226da3783
Author: shadlaws <shad@shadlaws.com>
Date:   Fri Jan 25 08:47:29 2013 +0100

    #1956 - Escape LIKE queries (for _ and %).
    In MySQL queries, _ and % characters are treated as wildcards (similar to ? and *, respectively).
    - Added escape_for_like function to MY_Database.php
    - Added unit test to Database_Test
    - Corrected the five unescaped instances in the code using this function.

commit ffd162738edd1ee30aa9e2d9db743bc94395b905
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Jan 24 21:50:02 2013 -0700

    Automated update of .build_number to 250 for branch 3.0.x
    Last update: 57a77d259c1abffd4003567865751195bfcf23e5 (5 commits ago)

commit 105060bda1c8f3340be18fcca2049e624aea2b96
Merge: 8966cde c2e90f0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 24 23:49:41 2013 -0500

    Merge branch '3.0.x' of github.com:gallery/gallery3 into 3.0.x

commit 4c1dc8457e82bd8960e10416981b5dadfc3aebe4
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Jan 24 21:49:24 2013 -0700

    Automated update of .build_number to 291 for branch master
    Last update: 4926615cd01ff829324b61ac3e8f61f32f52a36b (1 commits ago)

commit 8966cdea6be69c1d288f7a829eafb025989a11e2
Merge: 922fa47 e8b7e15
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 24 23:48:56 2013 -0500

    Merge branch 'master' into 3.0.x

commit e8b7e155d5c3e315942ecfde8800a2c7679ec6b3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 24 23:48:07 2013 -0500

    Follow-on to b50768142745dc4bfd8a9460c7490ddd00e3b06a - add a default
    value for lock_timeout so that folks who get the latest code but don't
    run the upgrader don't get burned by a SQL error.

commit c2e90f0d6a749ba03a714f89375ed0c950608d7b
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Jan 24 21:30:20 2013 -0700

    Automated update of .build_number to 249 for branch 3.0.x
    Last update: 57a77d259c1abffd4003567865751195bfcf23e5 (3 commits ago)

commit 922fa47e0a082809b69de4d263cc431cd2067d5b
Merge: 9675069 fe77d5c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 24 23:30:07 2013 -0500

    Merge branch '3.0.x' of github.com:gallery/gallery3 into 3.0.x

commit 9675069e86461ea1ef03e1fa682a5207fe23e568
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 24 23:29:48 2013 -0500

    Revert "#1946, 1947 - Make altered names/slugs more user-friendly, make conflict-finding code check filenames with no extensions"
    
    This reverts commit e3132af0aa56f27c2d91a981f1a4fecb2f92fe97.

commit fe77d5cad857f2b488cffcd9d1b438869e0215e4
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Jan 24 21:27:30 2013 -0700

    Automated update of .build_number to 248 for branch 3.0.x
    Last update: 57a77d259c1abffd4003567865751195bfcf23e5 (1 commits ago)

commit 499216f3cb7d742c92b0d14c39da7d0f746bc503
Merge: 57a77d2 75adae3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 24 23:27:02 2013 -0500

    Merge branch 'master' into 3.0.x

commit 75adae38c705257e3b46936c3c5f3ea7050a06f8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 24 23:22:57 2013 -0500

    Use SERVER_NAME instead of HTTP_HOST.  Fixes #1963.

commit 08bf1479e367e74de066e6ba40563525299d14ab
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 24 22:35:56 2013 -0500

    Properly escape backslashes.  Fixes #1962.

commit 72b48d9034a7b1a779a423feddc24ea1024dd573
Merge: 4926615 e3132af
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 24 18:52:13 2013 -0500

    Merge branch 'fix_1946_1947' of git://github.com/shadlaws/gallery3

commit 57a77d259c1abffd4003567865751195bfcf23e5
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Jan 24 16:16:07 2013 -0700

    Automated update of .build_number to 247 for branch 3.0.x
    Last update: caf188dc0d59b6b879b9dfef53773f206ddcabd3 (1 commits ago)

commit 4926615cd01ff829324b61ac3e8f61f32f52a36b
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Jan 24 16:16:01 2013 -0700

    Automated update of .build_number to 290 for branch master
    Last update: 31807a59a5160a816718fbea1b1659398a2110bb (13 commits ago)

commit 6a4a682685b24bb62762b133ad160b761c32b89c
Merge: caf188d 0353578
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 24 18:15:58 2013 -0500

    Merge branch 'master' into 3.0.x

commit 03535786307c60f0f79ce4f773c9c1a8e43826ed
Merge: 86a2759 98d09c3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 24 18:14:28 2013 -0500

    Merge branch 'master' of github.com:gallery/gallery3

commit 86a2759062ee3dbf93f4c17c7499e3f506035047
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 24 18:14:14 2013 -0500

    If profiling is enabled, dump out profiling data instead of proxied
    images so that we can see how efficient our proxying is.  Follow-on
    for #1959.

commit 727a595447ebd331db199f34620d7e037415b582
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 24 18:13:26 2013 -0500

    Add back a comment that I accidentally removed in the last commit.

commit 98d09c3740f1c19e477a71bdb44791306d7bd05b
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Jan 24 13:46:34 2013 -0700

    Automated update of .build_number to 289 for branch master
    Last update: c9a30e3b7e3b85b645a987d7024572345091364a (1 commits ago)

commit 6830ac4542f1afda275fcdf332e25ce35e53d0e7
Merge: c9a30e3 126727b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 24 12:46:26 2013 -0800

    Merge pull request #99 from shadlaws/fix_1955
    
    #1955 - Make unit test photos unique.

commit c9a30e3b7e3b85b645a987d7024572345091364a
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Jan 24 13:40:45 2013 -0700

    Automated update of .build_number to 288 for branch master
    Last update: 3e451d6edc6ab3586ef730e4458ca0b2d55f5170 (1 commits ago)

commit d8f99c258c0aa0979915222333cf520ae3ea93fe
Merge: 3e451d6 031dd3b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 24 12:40:32 2013 -0800

    Merge pull request #101 from shadlaws/fix_1960
    
    #1960 - Add unit test to look for extra spaces at end of line

commit e3132af0aa56f27c2d91a981f1a4fecb2f92fe97
Author: shadlaws <shad@shadlaws.com>
Date:   Thu Jan 24 19:02:53 2013 +0100

    #1946, 1947 - Make altered names/slugs more user-friendly, make conflict-finding code check filenames with no extensions
    - Reduced from four places that alter names/slugs to two (one to populate empty slugs, one to handle conflicting names/slugs).
    - For empty slugs, fill with generic human-readable name (e.g. "photo") instead of random value.
    - For conflicting names/slugs, add suffix that's sequential (e.g. "-01"), only using random after 99 conflicts.
    - Made conflict-finding code check filenames with no extensions.
    - Renamed _randomize_name_or_slug_on_conflict to _check_and_fix_conflicts.
    - Added unit tests.  Also cleaned up existing unit tests to reflect new logic and removed a redundant test.
    - Added installer logic to correct existing items now considered in conflict.

commit 126727b4f2fa521d8b8dd45b6b4c26431efdfd66
Author: shadlaws <shad@shadlaws.com>
Date:   Thu Jan 24 15:56:13 2013 +0100

    #1955 - Make unit test photos unique.
    - Added test::random_unique_photo and test::random_unique_photo_unsaved to uniquify test photos.
    - Uniquified the black dot of test.jpg by coloring it with the six-digit hex code already used to name the random photos (e.g. "name_a48801.jpg").
    - Modified four tests in Item_Model_Test that check photo file contents to use new functions to guarantee uniqueness.

commit 031dd3bd6f279b5ddec6f08ff11e0acee521a5fe
Author: shadlaws <shad@shadlaws.com>
Date:   Thu Jan 24 12:03:05 2013 +0100

    #1960 - Add unit test to look for extra spaces at end of line
    - Added no_extra_spaces_at_end_of_line_test to File_Structure_Test.
    - Updated Gallery_Filters to exclude testing code that isn't ours.
    - Removed existing extra spaces.  New test now passes.

commit 3e451d6edc6ab3586ef730e4458ca0b2d55f5170
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Jan 23 19:34:42 2013 -0700

    Automated update of .build_number to 287 for branch master
    Last update: 31807a59a5160a816718fbea1b1659398a2110bb (10 commits ago)

commit da5fbd10c7a99f4800b3b948ad2799f916227c54
Merge: aa8fffc d34a45f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 23 21:34:14 2013 -0500

    Merge branch 'master' of github.com:gallery/gallery3

commit aa8fffcd8fc7d16f4bd84a9f8f7ead206d9ce45a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 23 21:33:19 2013 -0500

    Extract reweighting logic out of Organize_Controller into
    item::reweight_all_children as an API and write a test for it.  Work
    in progress on #1914.

commit d34a45f640cf10b94499c236fb4a95813ee217aa
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Jan 23 18:53:40 2013 -0700

    Automated update of .build_number to 286 for branch master
    Last update: 31807a59a5160a816718fbea1b1659398a2110bb (8 commits ago)

commit de78d3bfca20fec80fc87a7c5e2d18f3fdd791f1
Merge: 34198e7 52fb40a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 23 20:52:17 2013 -0500

    Merge branch 'master' of github.com:gallery/gallery3

commit 34198e71d320fe013993abff870986eafb6aa8bc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 23 20:50:54 2013 -0500

    Add a cache buster to all data_rest urls, add caching headers to all
    data_rest responses, and check cache validity.  Fixes #1909.

commit 52fb40ad3c706306d1a5208cecfdc3b0a33e8500
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Jan 23 17:00:34 2013 -0700

    Automated update of .build_number to 285 for branch master
    Last update: 31807a59a5160a816718fbea1b1659398a2110bb (6 commits ago)

commit 7f0a844794fbdced45d23eb898fc0475eeef18e2
Merge: cc926cb efc3730
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 23 18:58:53 2013 -0500

    Merge branch 'master' of github.com:gallery/gallery3

commit cc926cb9e165399971356e0a63587fbf611da47c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 23 18:58:37 2013 -0500

    After finding a test in Item_Model_Test that didn't end in the string "_test" and
    fixing it in 9ba9f3953132c5c5de9efb0a4724c7b9300dc9ea I decided to write a test to make
    sure that we don't have any other overlooked tests.  We don't.

commit bc5dbd812a349ac1d4cb0c517b36c05b60c8cb26
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 23 18:56:30 2013 -0500

    Fix comment typo.

commit efc3730ebe5bd0f18137a198d5325ca0d87d8c37
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Jan 23 16:29:29 2013 -0700

    Automated update of .build_number to 284 for branch master
    Last update: 31807a59a5160a816718fbea1b1659398a2110bb (3 commits ago)

commit 32c09b9dd6f8bb4209e4fc142468158a4740eb15
Merge: e6783b7 2dc12b7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 23 18:28:49 2013 -0500

    Merge branch 'master' of github.com:gallery/gallery3

commit e6783b7aa71c6109909ca8b7bf6cf0cd550e5825
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 23 18:28:28 2013 -0500

    Update golden files after 80d6a895edb1cfc3dd0bcacd0d2c63b40c04670c

commit 2dc12b709cdcba8e17b1bf6a3ba79790b13600e9
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Jan 23 16:26:02 2013 -0700

    Automated update of .build_number to 283 for branch master
    Last update: 31807a59a5160a816718fbea1b1659398a2110bb (1 commits ago)

commit 9ba9f3953132c5c5de9efb0a4724c7b9300dc9ea
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 23 18:24:31 2013 -0500

    Add a "can_add" permission bit similar to the "can_edit" bit to the RESTful array
    representation of Item_Model.  Fixes #1903.

commit caf188dc0d59b6b879b9dfef53773f206ddcabd3
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Jan 23 16:07:56 2013 -0700

    Automated update of .build_number to 246 for branch 3.0.x
    Last update: 4c5a74b495a8dfd1121f8c5f7e94c5b9e57e5330 (1 commits ago)

commit 677f20d9b455ad32206412cdc17855cd214125dd
Merge: 4c5a74b 1d700bf
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 23 18:07:22 2013 -0500

    Merge branch 'master' into 3.0.x

commit 31807a59a5160a816718fbea1b1659398a2110bb
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Jan 23 16:07:14 2013 -0700

    Automated update of .build_number to 282 for branch master
    Last update: d928064f0b7b4f12ce1371d7e0e61f6832f09a01 (2 commits ago)

commit 1d700bf66574d677f96011ecd0811b5f4ada0e11
Merge: a1a6600 df60cf2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 23 18:06:50 2013 -0500

    Merge branch 'master' of github.com:gallery/gallery3

commit a1a66004571c2f6161335f9413b39d255190f153
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 23 18:03:09 2013 -0500

    Enable the profiler and debug output if var/PROFILE exists.  This
    provides a quick/easy way for server admins to provide profile output.
    Fixes #1959.

commit df60cf288320342620585c541e156f084e66bb0f
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Jan 23 15:08:24 2013 -0700

    Automated update of .build_number to 281 for branch master
    Last update: d928064f0b7b4f12ce1371d7e0e61f6832f09a01 (1 commits ago)

commit 937102e888dc7a5172fa97af5e5b6c4e35aa886d
Merge: d928064 80d6a89
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 23 14:07:59 2013 -0800

    Merge pull request #97 from mikeage/organize_tag2
    
    Add batch tagging via the organize module

commit 80d6a895edb1cfc3dd0bcacd0d2c63b40c04670c
Author: Mike Miller <github@mikeage.net>
Date:   Wed Jan 23 21:59:02 2013 +0200

     #1952 Add bulk tagging to the Organize module.
    
    Allow a user to highlight one or more items (images, videos, or albums), and enter a tag (or tags, comma delimited) and apply it to all of the selected items. The code is based on the batchtag module.
    
    If the tags module is not enabled, no changes to the Organize UI will be shown.

commit d928064f0b7b4f12ce1371d7e0e61f6832f09a01
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Jan 23 12:04:10 2013 -0700

    Automated update of .build_number to 280 for branch master
    Last update: b1fd5c9c8538d7179c287404a2161b0c0eaf14c8 (1 commits ago)

commit eefc9d555374678665f79275d0c6b6a70b7d443e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 23 14:03:44 2013 -0500

    Use the thumb proportion from the first item in an album if the album has children.  Fixes #1958.

commit 4c5a74b495a8dfd1121f8c5f7e94c5b9e57e5330
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Jan 23 09:54:57 2013 -0700

    Automated update of .build_number to 245 for branch 3.0.x
    Last update: 0c213a55137153e8b57e616b35a2dd403d8fb64f (3 commits ago)

commit 08e52d09afd3f7f10c3e98d60b1f72adf0484c90
Merge: d77595e c3262bd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 23 11:54:29 2013 -0500

    Merge branch '3.0.x' of github.com:gallery/gallery3 into 3.0.x

commit d77595e6fb092fa59f5f8678362e731dbfee5adc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 23 11:43:58 2013 -0500

    mark as unreleased 3.0.5

commit c3262bd9ce78d32bbc45ce6e9fca413dd2358a8b
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Jan 23 09:42:50 2013 -0700

    Automated update of .build_number to 244 for branch 3.0.x
    Last update: 0c213a55137153e8b57e616b35a2dd403d8fb64f (1 commits ago)

commit 1a6d9e3dac10acf82384e5b955f3eda7dcc754c3
Merge: 0c213a5 b1fd5c9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 23 11:42:26 2013 -0500

    Merge branch 'master' into 3.0.x

commit b1fd5c9c8538d7179c287404a2161b0c0eaf14c8
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Jan 23 09:41:31 2013 -0700

    Automated update of .build_number to 279 for branch master
    Last update: 9b75a4e9260e20f1679c28ba8ffe9647e8912122 (3 commits ago)

commit e8302ffce5a167608595d798fc2ff692f7f1eed4
Merge: 49f6ce2 8436e16
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 22 17:57:58 2013 -0800

    Merge pull request #98 from shadlaws/fix_1954
    
    #1954 - Skip buffer calls for unit tests of file_proxy and data_rest.

commit 49f6ce2d94194220213edb108e4ac372acd2eabb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 22 18:39:24 2013 -0500

    gallery.menalto.com -> galleryproject.org
    codex.gallery2.org -> codex.galleryproject.org
    
    Fixes #1957.

commit 8436e16b2f2fe398be22e59110a907e7554cac90
Author: shadlaws <shad@shadlaws.com>
Date:   Mon Jan 21 10:45:34 2013 +0100

    #1954 - Skip buffer calls for unit tests of file_proxy and data_rest.
    Moved the "if (TEST_MODE)" statement before the buffer calls in file_proxy and data_rest.
    This has no impact on normal use, but will make the unit tests more compatible with different server/PHP configurations.
    Note: We do not have to skip setting the headers, which means we can build unit tests around them if we wish.

commit d45a73777935c86fc5131955831833d7465b5e9d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 21 01:22:01 2013 -0500

    Update copyright to 2013.  Fixes #1953.

commit 9b75a4e9260e20f1679c28ba8ffe9647e8912122
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Jan 20 23:06:15 2013 -0700

    Automated update of .build_number to 278 for branch master
    Last update: 49ebef7f0005f429f7bea8e9c307a140035b4a05 (1 commits ago)

commit 61eebe13c9050c20899090558a4c5ca1d10ab59c
Merge: 49ebef7 14b02a5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 20 22:06:12 2013 -0800

    Merge pull request #95 from shadlaws/fix_1950
    
    #1950 - Replace bogus file overwrites from item model unit test.

commit 49ebef7f0005f429f7bea8e9c307a140035b4a05
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Jan 20 22:55:00 2013 -0700

    Automated update of .build_number to 277 for branch master
    Last update: 2353c92c1adf42763bede046caaa6abbfba834d8 (3 commits ago)

commit 090814e56c4df56e0a0d72c2ebbc0560305fcb1f
Merge: 8dc34da ca21cfb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 21 00:53:11 2013 -0500

    Merge branch 'master' of github.com:gallery/gallery3

commit 8dc34dade882768feb8100d7041d94c7d446b818
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 21 00:51:31 2013 -0500

    Add unit tests for data_rest.  While I'm in there, get rid of the
    clause that returns nothing when the album has no album cover - we'll
    fail before that if the album's thumbnail is missing, and if it's not
    missing then we'll have something to serve even if it's out of date.

commit ca21cfbfc00d969a6933d42103aee5b984e565b2
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Jan 20 21:55:02 2013 -0700

    Automated update of .build_number to 276 for branch master
    Last update: 2353c92c1adf42763bede046caaa6abbfba834d8 (1 commits ago)

commit f1d2a8e871327d250574d2dd7cacbb21ea3ae995
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 20 23:54:01 2013 -0500

    Add a long overdue test for File_Proxy_Controller that tests all the various
    edge case behaviors.  It doesn't cover the various headers, but it does cover
    the permission based code paths.

commit 14b02a5b1215ced4e4ef1d536f0301c6bfb3a845
Author: shadlaws <shad@shadlaws.com>
Date:   Sun Jan 20 10:01:41 2013 +0100

    #1950 - Replace bogus file overwrites from item model unit test.
    - modified rename_photo_test, rename_album_test, move_album_test, move_photo_test
    - unit tests still test file system integrity and pass

commit 2353c92c1adf42763bede046caaa6abbfba834d8
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Jan 20 00:51:11 2013 -0700

    Automated update of .build_number to 275 for branch master
    Last update: dc3f2f637e720dd456a406859417ccb39184bedc (1 commits ago)

commit 38797ad82adf918a809628d451f743be7c14ee4b
Merge: dc3f2f6 1927dd0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 19 23:50:47 2013 -0800

    Merge pull request #94 from shadlaws/fix_1949
    
    #1949 - Fix album thumb mime types given by data_rest and file_proxy

commit 1927dd00e42062a98855d121ec8427b25d74d015
Author: shadlaws <shad@shadlaws.com>
Date:   Sun Jan 20 08:34:12 2013 +0100

    #1949 - Fix album thumb mime types given by data_rest and file_proxy
    Correct result: always "image/jpeg"
    Old data_rest result: mime of cover item
    Old file_proxy result: mime of album item (null)

commit dc3f2f637e720dd456a406859417ccb39184bedc
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Jan 19 23:26:47 2013 -0700

    Automated update of .build_number to 274 for branch master
    Last update: 2c584d5d23a346b085259a717055fbbb6c737da4 (1 commits ago)

commit 52ab0e99884e6f018e540c3c64cb877fd608cef6
Merge: 2c584d5 592eff0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 19 22:26:34 2013 -0800

    Merge pull request #89 from shadlaws/fix_1942
    
    #1942 - Make data_rest and file_proxy more consistent

commit 2c584d5d23a346b085259a717055fbbb6c737da4
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Jan 19 22:42:00 2013 -0700

    Automated update of .build_number to 273 for branch master
    Last update: 79acf3abe8b3ab55b084e9c2ff2624d5ad7971e6 (1 commits ago)

commit f215a417f1604f3831dc1a2c15818f496c9609b3
Merge: 79acf3a ea8219e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 19 21:41:45 2013 -0800

    Merge pull request #88 from shadlaws/fix_1941
    
    #1941, 1948 - Fix possible warnings in movie and graphics helpers, add functions to convert between seconds and hh:mm:ss.dd (and their unit tests).

commit 79acf3abe8b3ab55b084e9c2ff2624d5ad7971e6
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Jan 19 22:40:48 2013 -0700

    Automated update of .build_number to 272 for branch master
    Last update: 9359e75ca3e54e0a88ef2e5c82592406952d71fa (3 commits ago)

commit 37f269d667c1c8e9003739d1374aa112982df29c
Merge: a06abe3 d28f8b1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 20 00:40:17 2013 -0500

    Merge branch 'master' of github.com:gallery/gallery3

commit a06abe32b0d12b83a5b1b1d5bd10b112a1e50465
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 20 00:39:58 2013 -0500

    Simplify get_photo_types_by_extension_test and get_movie_types_by_extension_test.

commit d28f8b173a066b0c2a3c81a4b079b92fa977c970
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Jan 19 22:35:12 2013 -0700

    Automated update of .build_number to 271 for branch master
    Last update: 9359e75ca3e54e0a88ef2e5c82592406952d71fa (1 commits ago)

commit 35bb5c4a1ca89fc4cc64555df47294caa64e3839
Merge: 9359e75 e2a2a5c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 19 21:34:39 2013 -0800

    Merge pull request #93 from shadlaws/fix_1944
    
    #1944 - Fix possible warnings in legal_file::get_photo_types_by_extension and legal_file::get_movie_types_by_extension.

commit 9359e75ca3e54e0a88ef2e5c82592406952d71fa
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Jan 19 22:32:17 2013 -0700

    Automated update of .build_number to 270 for branch master
    Last update: 3a3c21dfc42b94a5340634d9c0b19acf83b1fedb (6 commits ago)

commit 3a71813f35857faf1f8a6a68cc8dd3e8d6982a7e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 20 00:24:08 2013 -0500

    Change the logic for finding controllers to use glob() but drop anything
    that we can find is git-ignore'd.

commit 592eff0e5a8af6f74eff4806dc6e7de56ca02761
Author: shadlaws <shad@shadlaws.com>
Date:   Sat Jan 19 08:40:19 2013 +0100

    #1942 - Make data_rest and file_proxy more consistent - several minor documentation/formatting changes.
    No actual functionality changed here.

commit ea8219e1d462362985b526260cd71230a5db2afb
Author: shadlaws <shad@shadlaws.com>
Date:   Sat Jan 19 00:59:55 2013 +0100

    #1941, 1948 - Fix possible warnings in movie and graphics helpers, add functions to convert between seconds and hh:mm:ss.dd.
    Also add unit tests for new movie helper functions.

commit e2a2a5ce812c249b46d56ed2f738162e3f4cd09b
Author: shadlaws <shad@shadlaws.com>
Date:   Sat Jan 19 00:52:13 2013 +0100

    #1944 - Fix possible warnings in legal_file::get_photo_types_by_extension and legal_file::get_movie_types_by_extension.
    Added unit tests for these two functions, too.

commit 93afe52ae16b5f01a1bd9966af061ea0d6224370
Merge: 61724f7 3a90094
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 18 13:35:33 2013 -0800

    Merge pull request #92 from shadlaws/fix_1943
    
    #1943 - Make legal_file::change_extension more robust.

commit 3a9009492e6d05fe657e3aacf34cf40ca3495db5
Author: shadlaws <shad@shadlaws.com>
Date:   Fri Jan 18 20:06:05 2013 +0100

    #1943 - Make legal_file::change_extension more robust.
    Previously would fail with dots in the directory but no extension.  Added unit tests to verify the new change works.

commit 61724f78da98d192cc86db6b3a12cdac506a916e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 17 15:22:50 2013 -0500

    Update golden files.

commit d04080c7be7c8a06bd81a9747943600812339f40
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 17 15:05:46 2013 -0500

    Follow-on to 94b26e506c339f50b8d094057bffc1877a79afa9 - make the new legal_file
    functions more robust when passed an unknown extension.  Fixes Item_Model_Test.

commit 9d684b7b83f0aa026e9d6f06228294f179a3bcaa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 14 12:52:47 2013 -0500

    Fix up some indentation.

commit 2d010c07d3a0c1491f4e2fe0ee370f0d0116fdef
Merge: 3a3c21d f92982c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 13 13:21:48 2013 -0800

    Merge pull request #86 from mikeage/tag_name
    
    Tags by name (includes a G2 mapping)
    
    Fixes #1940.

commit f92982c59c0db3d86a6a05231c720a39bbbb3d2d
Author: Mike Miller <github@mikeage.net>
Date:   Wed Jan 9 06:42:32 2013 +0200

    Tags by name (includes a G2 mapping)

commit 3a3c21dfc42b94a5340634d9c0b19acf83b1fedb
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Jan 2 10:15:15 2013 -0700

    Automated update of .build_number to 269 for branch master
    Last update: dc3fd9d037871a3ac8b28ab859302ee6ceca3844 (1 commits ago)

commit 20496cff64771ce532317c9bb03d0b0942c86334
Merge: dc3fd9d ff6688b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 2 09:14:58 2013 -0800

    Merge pull request #84 from shadlaws/master
    
    #1919 - change `convert -v` to `convert -version`

commit ff6688b48b2eb083f82d803249f61dc08efb5b92
Author: shadlaws <shad@shadlaws.com>
Date:   Tue Jan 1 15:47:04 2013 +0100

    #1919 - change `convert -v` to `convert -version`

commit 0c213a55137153e8b57e616b35a2dd403d8fb64f
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Dec 31 11:35:05 2012 -0700

    Automated update of .build_number to 243 for branch 3.0.x
    Last update: aba474b799f29d1569cc0dc5148fdeeb76ea20f0 (1 commits ago)

commit 82ed2c1e590cdcf615dcfcc405c72e3ec1fb4217
Merge: aba474b dc3fd9d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 31 10:34:27 2012 -0800

    Merge branch 'master' into 3.0.x

commit dc3fd9d037871a3ac8b28ab859302ee6ceca3844
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Dec 31 11:33:18 2012 -0700

    Automated update of .build_number to 268 for branch master
    Last update: 7777baa156c2fbc65ca93b9533212ef22ed90105 (1 commits ago)

commit 009f15820fca313186272bcf88c2df22d39e3b10
Merge: 7777baa 8300c86
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 31 10:32:57 2012 -0800

    Merge pull request #83 from shadlaws/master
    
    #1931, #1932, #1933, #1934 - movieplayer view and movie_img function in items model

commit 8300c867a1eb2a709aa0a0c019dfa47a670024dc
Author: shadlaws <shad@shadlaws.com>
Date:   Sun Dec 30 10:03:36 2012 +0100

    #1931, #1932, #1933, #1934 - movieplayer view and movie_img function in items model
    
    Many changes to movieplayer view and movie_img function in items model:
    - include control bar height when dimensioning movie player
    - provide a default "guess" at height and width when they are set as zero in items table
    - resize movie player once the video is loaded based on its actual metadata
    - add get_movie_img event to provide flexibility for altering/replacing the default Flowplayer v3
    
    --HG--
    extra : rebase_source : 5d1e9bb66ebf3e3fed5e1b9ee63790a204f21450

commit 7777baa156c2fbc65ca93b9533212ef22ed90105
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Dec 20 16:37:57 2012 -0700

    Automated update of .build_number to 267 for branch master
    Last update: 22ba4f1df3774d56c81ea627eb3d0cc9c4320c23 (1 commits ago)

commit 58ced4d25d711a058f6befd4291d5c3e4b3bac94
Merge: 22ba4f1 05bd832
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 20 15:37:37 2012 -0800

    Merge pull request #74 from mikemayer67/master
    
    Correction of event sent from Users_Controller::_get_change_email_form
    
    Fixes #1930

commit 22ba4f1df3774d56c81ea627eb3d0cc9c4320c23
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Dec 18 14:57:33 2012 -0700

    Automated update of .build_number to 266 for branch master
    Last update: 594611b1009b88ddfb0ec0ee3f24229a8f0030af (1 commits ago)

commit 7910084224315b2d26b447381863603ea3e4e649
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 18 13:56:28 2012 -0800

    Check for "add" instead of "edit" in item_rest::post.  Fixes #1929.

commit 594611b1009b88ddfb0ec0ee3f24229a8f0030af
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Dec 18 11:58:35 2012 -0700

    Automated update of .build_number to 265 for branch master
    Last update: f2a32526be0a307005052105ed09bc337e29d333 (1 commits ago)

commit da3d37cdb1f40c3673e1eb787112c07b3165da07
Merge: f2a3252 ce68177
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 18 10:58:05 2012 -0800

    Merge pull request #81 from shadlaws/master
    
    [#1928 - Make thumbnail generation more flexible for movies (graphics and movie helpers)]

commit ce68177ba0dc27010435e55b79cbea453751f8ee
Author: shadlaws <shad@shadlaws.com>
Date:   Tue Dec 18 15:58:13 2012 +0100

    [#1928 - Make thumbnail generation more flexible for movies (graphics and movie helpers)]
    - graphics helper: add movie_extract_frame event to generate function
    (allows modules to add to the options sent to movie::extract_frame or to
    generate the thumbnail on their own without movie::extract_frame)
    - movie helper: add extra optional argument to movie::extract_frame
    (can add ffmpeg arguments and/or change the frame extract time)
    - gallery_installer: add movie_extract_time module variable, update to v53
    - module.info: update to v53
    - install.sql: update to v53

commit aba474b799f29d1569cc0dc5148fdeeb76ea20f0
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Dec 17 09:15:17 2012 -0700

    Automated update of .build_number to 242 for branch 3.0.x
    Last update: 94e1e4396eb1167d173f44fe3c234480e676bca7 (1 commits ago)

commit eb3acd246a4f216c9ca451748e8f05c0499c5bdc
Merge: 94e1e43 7567f03
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 17 08:14:58 2012 -0800

    Merge branch 'master' into 3.0.x

commit f2a32526be0a307005052105ed09bc337e29d333
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Dec 17 09:14:04 2012 -0700

    Automated update of .build_number to 264 for branch master
    Last update: 1f351c16d397012c83d193a76ccffd4030aba17b (1 commits ago)

commit 7567f0395a94d2abfdcda955b0c2db851c4fc452
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 17 08:13:39 2012 -0800

    Minor whitespace fix.

commit 1f351c16d397012c83d193a76ccffd4030aba17b
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Dec 17 09:10:32 2012 -0700

    Automated update of .build_number to 263 for branch master
    Last update: 989c24eea3bf01ec621ff3e6ad8a3d58debe0513 (1 commits ago)

commit 98753bc6aa6baee2b90af31acabb27f206ebe527
Merge: 989c24e 768e6fa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 17 08:10:02 2012 -0800

    Merge pull request #80 from shadlaws/master
    
    [#1924, #1925, #1927 - enhance compatibility with movies (movie helper) and file types (legal_file helper)]

commit 768e6fae09c941443e1004e1dfcc42ead9ad9498
Merge: 94b26e5 989c24e
Author: shadlaws <shad@shadlaws.com>
Date:   Sun Dec 16 18:56:54 2012 +0100

    Merge builds 261 and 262 from origin.

commit 94b26e506c339f50b8d094057bffc1877a79afa9
Author: shadlaws <shad@shadlaws.com>
Date:   Sun Dec 16 18:11:01 2012 +0100

    [#1924, #1925, #1927 - enhance compatibility with movies (movie helper) and file types (legal_file helper)]
    bug fix: modify movie.php helper to take DAR (display aspect ratio) into account in get_file_metadata
    bug fix / enhancement: add duration to get_file_metadata output
    bug fix: modify movie.php helper to use correct resolution and duration from get_file_metadata in extract_frame
    bug fix: modify movie.php helper to be more robust against ffmpeg failures and limitations, including adding "-threads 1" argument if needed
    enhancement: modified to include ordered maps of extensions to MIME types (get_photo_types_by_extension and get_movie_types_by_extension functions), modified get_file_metadata in movie and photo helpers to use them
    gallery_installer, module.info, install.sql: updated to v52 with m4v mime correction code (was video/mp4)

commit 989c24eea3bf01ec621ff3e6ad8a3d58debe0513
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Dec 14 10:47:26 2012 -0700

    Automated update of .build_number to 262 for branch master
    Last update: b0618aab7a72eb0e5495e3c5f4d2a57f343c0076 (1 commits ago)

commit 5905dc554ae79c6249768d323d73e5acf74916ef
Merge: b0618aa f5420b4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 14 09:46:53 2012 -0800

    Merge pull request #76 from chilversc/search-filter-album
    
    Search within current album.  Resolves #1402

commit b0618aab7a72eb0e5495e3c5f4d2a57f343c0076
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Dec 14 10:43:59 2012 -0700

    Automated update of .build_number to 261 for branch master
    Last update: 7c62c67d56e854f69a411dd56c48ef066f951c48 (1 commits ago)

commit 003ba116c8e909a76e2445c56b82833acee1cdbc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 14 09:43:27 2012 -0800

    Bugfix follow-on to a74e3aea6f0bdde210c91622535af3e58aa1e9fd - thanks to chilversc.

commit f5420b4eab76b9846528dfee507cacce93a29ecb
Author: Chris Chilvers <chilversc@gmail.com>
Date:   Fri Dec 14 17:28:13 2012 +0000

    fix, use $current->score

commit a529a55e0b365309b4796edd291af3de4f80c110
Author: Chris Chilvers <chilversc@gmail.com>
Date:   Fri Dec 14 17:34:26 2012 +0000

    search within the current album by default
    
    When searching, limit search results to the current album.
    In the search results screen, display which album was searched and provide
    a link to search the whole gallery.

commit 94e1e4396eb1167d173f44fe3c234480e676bca7
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Dec 10 12:24:27 2012 -0700

    Automated update of .build_number to 241 for branch 3.0.x
    Last update: 329622ad56d0805dfb73394018a16ce3f468090c (1 commits ago)

commit cede633eaaca5bc7d202a5acfa5d49ed71b7922e
Merge: 329622a 7c62c67
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 10 11:23:47 2012 -0800

    Merge branch 'master' into 3.0.x

commit 7c62c67d56e854f69a411dd56c48ef066f951c48
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Dec 10 12:15:56 2012 -0700

    Automated update of .build_number to 260 for branch master
    Last update: de101829d1f79742bec7a8e1afa01eb416dda211 (1 commits ago)

commit 549630219f8f43abab68f1e63944facedfabe776
Author: shadlaws <shad@shadlaws.com>
Date:   Sun Dec 9 10:01:43 2012 +0100

    bug fix: updated file_proxy.php to use legal_file helper instead of hard-coded list of movie file extensions.
    bug fix: updated uploader.php to use legal_file helper instead of hard-coded list of movie file extensions.
    
    Fixes #1926

commit 329622ad56d0805dfb73394018a16ce3f468090c
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Dec 9 21:28:08 2012 -0700

    Automated update of .build_number to 240 for branch 3.0.x
    Last update: bbcee5f75b132881868cfab273c97ef215691e29 (1 commits ago)

commit d97b87ccfa3c14299bfa4c14040c65bb95bf49f6
Merge: bbcee5f a74e3ae
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 9 20:27:35 2012 -0800

    Merge branch 'master' into 3.0.x

commit de101829d1f79742bec7a8e1afa01eb416dda211
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Dec 9 21:27:28 2012 -0700

    Automated update of .build_number to 259 for branch master
    Last update: f457cd283cdfd9011d76ae96872e1f08bb219baf (1 commits ago)

commit a74e3aea6f0bdde210c91622535af3e58aa1e9fd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 9 20:26:16 2012 -0800

    Eliminate the search context if we encounter an item that cannot be
    found in the search results.  Fixes #1923.

commit f457cd283cdfd9011d76ae96872e1f08bb219baf
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Nov 15 02:41:12 2012 -0700

    Automated update of .build_number to 258 for branch master
    Last update: 1ac8c883ab0db973659228f351d5b608200e6a56 (1 commits ago)

commit bcdf2b56c62c63644cc6fa6796def559d7b18be8
Merge: 1ac8c88 ce9199a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 15 01:40:53 2012 -0800

    Merge pull request #75 from chalbertgit/master
    
    Ticket #1907, Add lock timeout as an editable variable in admin=>settings=>advanced

commit ce9199a955c6f3446de6892f5dfed0035d326123
Author: chalbertgit <christopherhalbert@yahoo.com>
Date:   Tue Nov 13 13:17:45 2012 -0500

    [#1907] Added code needed for the case when a user upgrades.

commit b50768142745dc4bfd8a9460c7490ddd00e3b06a
Author: chalbertgit <christopherhalbert@yahoo.com>
Date:   Tue Nov 13 11:51:03 2012 -0500

    [#1907] Added administrative variable to set lock timeout.

commit 1ac8c883ab0db973659228f351d5b608200e6a56
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Nov 6 12:55:21 2012 -0700

    Automated update of .build_number to 257 for branch master
    Last update: 31681bf834d5dc560b9898d9c30903f08ecb1966 (3 commits ago)

commit c5e1086636a354adcb58fa49073263c8dcef1097
Merge: 50f5286 fd3a671
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 6 11:54:37 2012 -0800

    Merge branch 'master' of github.com:gallery/gallery3

commit 50f5286ffbc6a675f97faf629893d2e248382396
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 6 11:51:44 2012 -0800

    Elevate X-Frame-Options from all admin and user pages to all PHP
    responses.  Fixes #1922.

commit fd3a67199bcb0a18f69c98f4e93f46292790fe3a
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Nov 1 09:53:01 2012 -0700

    Automated update of .build_number to 256 for branch master
    Last update: 31681bf834d5dc560b9898d9c30903f08ecb1966 (1 commits ago)

commit 7a53cebd29c00afbc53ab5c60f8980d8b6d204a0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 1 09:51:35 2012 -0700

    Don't show the sidebar on error pages - it just increases the chances
    that we'll compound the error.  Instead, focus on the error or the
    login form.  Fixes #1921.

commit 05bd83220e3f39c0322fbf64f9f45c3bf1e60b36
Author: Michael A Mayer <mikemayer67@vmwishes.com>
Date:   Thu Oct 25 01:04:06 2012 -0400

    Fixed event sent from User_Controller::_get_change_email_form
       incorrect event: user_change_password_form
       corrected event: user_change_email_form

commit 381bd0e569140ebc74eaf7971771d34a5a625f62
Merge: eb32966 31681bf
Author: Mike Mayer <mikemayer67@vmwishes.com>
Date:   Thu Oct 18 22:32:49 2012 -0700

    Merge pull request #2 from gallery/master
    
    Retrofit gallery/master into mikemayer67/gallery3

commit 31681bf834d5dc560b9898d9c30903f08ecb1966
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Oct 8 14:51:18 2012 -0700

    Automated update of .build_number to 255 for branch master
    Last update: 304d8ce2ac1094a8528dad127a5958f7c57acc84 (1 commits ago)

commit 10c2ea408bf261e8de6a11c413286285d5c5bed4
Merge: 304d8ce d8dce1e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Oct 8 14:51:15 2012 -0700

    Merge pull request #73 from epeay/master
    
    [#1875] Active area of upload photo button less than 40% of text area only - not button

commit 304d8ce2ac1094a8528dad127a5958f7c57acc84
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Oct 8 14:46:35 2012 -0700

    Automated update of .build_number to 254 for branch master
    Last update: 8fc9e903747e11e64fad2ab88e3ad51e6f3ed785 (1 commits ago)

commit e81bb34327a026b787cdd5eee5335deed12471e7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Oct 8 14:45:10 2012 -0700

    Fix the delete function on item_tags and tag_items collections to
    remove all tags from an item, or remove all items from a tag as
    appropriate (ie, empty the collection).  Fixes #1902.

commit 8fc9e903747e11e64fad2ab88e3ad51e6f3ed785
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Oct 8 14:06:04 2012 -0700

    Automated update of .build_number to 253 for branch master
    Last update: d882c1ba78b6ae811abd226dd46446c914e74dd0 (5 commits ago)

commit 64ac3f2a3fb250d2912745e5ad271bc36daf3aba
Merge: b7e8961 2f8215a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Oct 8 14:05:49 2012 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit b7e89613fc47a52016abb0377b15f6844bd08c06
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Oct 8 14:04:40 2012 -0700

    Installer for comment module version 6 still set rss_visible to "both"
    not "all".  Fix that now and rebuild the installer package.  Fixes #1917.

commit bbcee5f75b132881868cfab273c97ef215691e29
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Oct 8 13:53:09 2012 -0700

    Automated update of .build_number to 239 for branch 3.0.x
    Last update: 9c2c29f8057df8b0c5df8a9538537f23423bdb34 (1 commits ago)

commit 2f8215adaa0213b92a8bb9af7fe5fd7ebd8239b9
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Oct 8 13:53:01 2012 -0700

    Automated update of .build_number to 252 for branch master
    Last update: d882c1ba78b6ae811abd226dd46446c914e74dd0 (2 commits ago)

commit 8855847df26cc431a1ff74e0edcc2c370b8f94f6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Oct 8 13:50:33 2012 -0700

    Fix the recaptcha signup url.  Fixes #1888.

commit d8dce1e3e5bd6ed3976222fed2063b96f0569bc9
Author: epeay <elliottp@inmotionhosting.com>
Date:   Mon Oct 8 16:41:02 2012 -0400

    Updated Select Photos button hitbox to cover full visible button area.

commit 71a67ebb9f685c4f7347c9a9744e3267bd2aa4f9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Sep 28 11:44:46 2012 -0700

    Add locale for Thai.  Fixes #1916.

commit d8ba66177fbb9c637670d0149f391f8e732125d7
Merge: 9c2c29f d882c1b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 10 17:03:56 2012 -0700

    Merge branch 'master' into 3.0.x

commit 4001c1088c51f53a57ddcaa9a56e94f000dd7cdb
Merge: d882c1b a62e1aa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Aug 13 20:23:50 2012 -0700

    Merge pull request #72 from gertschi83/https
    
    Allow browsers to cache resources served over HTTPS
    
    Fixes #1910

commit a62e1aaf9d4cf8dfe66e21e8f642fc1b93abc460
Author: Gerhard Schlager <mail@gerhard-schlager.at>
Date:   Sat Aug 11 18:09:03 2012 +0200

    the HTTP header Cache-Control must contain "public" in order to allow caching of resources when HTTPS is used

commit 9c2c29f8057df8b0c5df8a9538537f23423bdb34
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Aug 2 12:59:33 2012 -0700

    Automated update of .build_number to 238 for branch 3.0.x
    Last update: 50dd4864a231235accf54c02044336ebc41a5420 (1 commits ago)

commit b4bd491dd40d9db19cb2d9cc6dc43e4d6f38eaf5
Merge: 50dd486 71e33d9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Aug 2 12:59:07 2012 -0700

    Merge branch 'master' into 3.0.x

commit d882c1ba78b6ae811abd226dd46446c914e74dd0
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Aug 2 12:58:52 2012 -0700

    Automated update of .build_number to 251 for branch master
    Last update: eb32966d4bc670d89eac1ccf9f0e3be202b52ef1 (1 commits ago)

commit 71e33d9cb6e0b58bc20c96c121b6dfa92357f418
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Aug 2 12:58:28 2012 -0700

    Fix up per item feed urls.  Fixes #1906.

commit 50dd4864a231235accf54c02044336ebc41a5420
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Jul 24 13:44:05 2012 -0700

    Automated update of .build_number to 237 for branch 3.0.x
    Last update: 2e79cb7eb8db4e00c0108bbf87ca0be305cb706e (1 commits ago)

commit 0f6746d464e80e6b9b2058453f703dc0f47c0eb0
Merge: 2e79cb7 eb32966
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 24 13:42:38 2012 -0700

    Merge branch 'master' into 3.0.x

commit 2e79cb7eb8db4e00c0108bbf87ca0be305cb706e
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Jul 23 13:44:59 2012 -0700

    Automated update of .build_number to 236 for branch 3.0.x
    Last update: 0665b5770888e3f34b688513a729c902c5c185b5 (1 commits ago)

commit 12d9de602b2ad4588d68e54f44600a234f1ad786
Merge: 0665b57 0875844
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jul 23 13:44:25 2012 -0700

    Merge branch 'master' into 3.0.x

commit eb32966d4bc670d89eac1ccf9f0e3be202b52ef1
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Jul 23 13:43:11 2012 -0700

    Automated update of .build_number to 250 for branch master
    Last update: eaff1ffbada9ef46865e1f7aa1a5cea681caa1d2 (1 commits ago)

commit 087584478482f6c0578e64f2d21f3d8e6197ad8f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jul 23 13:38:59 2012 -0700

    Update Flowplayer to 3.2.12 along with all associated files.  Also
    switch over to the byte-range version of pseudostreaming, let's see if
    that works better than what we have currently.  Fixes #1899.

commit eaff1ffbada9ef46865e1f7aa1a5cea681caa1d2
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Jul 21 16:17:25 2012 -0700

    Automated update of .build_number to 249 for branch master
    Last update: 27e253401678b28527444c7e4e0faa5afc95d708 (3 commits ago)

commit 984dcb38b75a2a82e70e778924af738e238b36b7
Merge: a98f757 9f3b63b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 21 16:16:50 2012 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit a98f7577bae0ab31b295ccab3d0a9bb9d307c8c4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 21 16:16:36 2012 -0700

    Avoid chaining after .gallery_autocomplete() - there are reports that
    it doesn't work with later versions of jQuery.  Fixes #1889.

commit 9f3b63b158425ae4c383b8d5f42fd035d5e16027
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Jul 21 15:43:45 2012 -0700

    Automated update of .build_number to 248 for branch master
    Last update: 27e253401678b28527444c7e4e0faa5afc95d708 (1 commits ago)

commit 8524fba15a4cbabe1d6c4e60bdfe9e766eca1fdc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 21 15:42:52 2012 -0700

    Sanitize the module name and don't allow storing values for illegal
    module names.  Fixes #1898.

commit 27e253401678b28527444c7e4e0faa5afc95d708
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Jul 21 15:13:57 2012 -0700

    Automated update of .build_number to 247 for branch master
    Last update: 024e2c0cd42e6c12904f4da43a9c16134cac0cc6 (10 commits ago)

commit 467a032f8e4927590a9860adbf3f9a25dd599657
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 21 15:11:27 2012 -0700

    Rename any files that have two dots in them to a legal name.  This
    fixes the bug where we made those files invalid in 3.0.4 without
    providing a clean upgrade path.  Bump gallery module to 50. Fixes

commit 6d9d6a2e5d4fae49942e78e4e812c44934513f4a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 21 15:01:31 2012 -0700

    Allow albums to have two (or more) dots in the name.  Fixes #1897.

commit a98afdb32ce3f625ad52467e09970b91923a5b98
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 21 11:12:51 2012 -0700

    Refill the path and url caches in the item model at the end of this task.  Fixes #1896.

commit 3e99c37c35f00f98d4159edbc86da25dd2794a6e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 21 11:11:16 2012 -0700

    Fix comment typo.

commit 26b817917c32ddeedc225175ee20cb7e42e0fb74
Merge: f9e77c4 c48df3b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 21 10:38:45 2012 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit f9e77c4c14c3a213ed8407495d4f71949a3a2339
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 21 10:38:23 2012 -0700

    Fix the access_cache rebuilding code to not load all missing access caches into the stack, if you're missing
    enough it'll blow the stack (like, if you truncate the access_caches table).  Fixes #1895.

commit 0665b5770888e3f34b688513a729c902c5c185b5
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Jun 11 14:08:41 2012 -0700

    Automated update of .build_number to 235 for branch 3.0.x
    Last update: b227c772536ac5d4646dcc5fd63094070c2f1e27 (3 commits ago)

commit c48df3b8199802a75f30f38c6f7b3440f9fde4ca
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Jun 11 14:08:35 2012 -0700

    Automated update of .build_number to 246 for branch master
    Last update: 024e2c0cd42e6c12904f4da43a9c16134cac0cc6 (4 commits ago)

commit 9b245c664b9dc7acdde69ab02f8fac2d835c6ace
Merge: 21e0097 e4daa42
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 11 14:06:00 2012 -0700

    Merge branch 'master' into 3.0.x

commit e4daa4283035197136850ae2c409dffc79fa8459
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 11 14:02:23 2012 -0700

    Rename the comparator to something that makes more sense (to me), and make it static.
    Follow-on to 5d9e71741754809ebe5f543eb874634e6fc8cc9d for #1859.

commit 8e74750dc22ea959261db5b424c8e5ab157c39e8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 11 13:54:33 2012 -0700

    Checkpoint XSS golden file

commit 37a0e9a710254602ab7f0f3bc29cdfb7ba6f130e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 11 13:47:00 2012 -0700

    Follow-on to 3caf3cc323cd25b002aa8e44d871d4677da7a029 for #1866 - harden one
    more place and update the test.

commit edb17db8cf6c747e89b3139aec738bb39a7999dc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 11 12:47:44 2012 -0700

    Added access check - not really necesssary because we're only doing a
    redirect, but it's nice to be consistent.  Follow-on for #1837.

commit 21e0097bde90585c5ef609728300e90a65d469d7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 11 09:56:08 2012 -0700

    Update README for 3.0.4

commit caf9055134e663438b50c0626585266dca946521
Merge: b227c77 b91d284
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 9 11:12:48 2012 -0700

    Merge branch 'master' into 3.0.x

commit 024e2c0cd42e6c12904f4da43a9c16134cac0cc6
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Jun 5 22:04:17 2012 -0700

    Automated update of .build_number to 245 for branch master
    Last update: 8a01de1d3bda9060beb660caba4e703a538037bc (1 commits ago)

commit b91d28474759c6183d06f93ab1ff7231d792449f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 5 22:03:11 2012 -0700

    Do a better job of displaying errors to the user on AJAX failures
    in dialogs.  Fixes #236.

commit b227c772536ac5d4646dcc5fd63094070c2f1e27
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Jun 5 21:49:04 2012 -0700

    Automated update of .build_number to 234 for branch 3.0.x
    Last update: da902e01943c22a72b095c1f3877b09087496834 (1 commits ago)

commit 4dde76c26a0a2d1e665b95037746374292ee3ddb
Merge: da902e0 c508880
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 5 21:48:44 2012 -0700

    Merge branch 'master' into 3.0.x

commit 8a01de1d3bda9060beb660caba4e703a538037bc
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Jun 5 21:36:02 2012 -0700

    Automated update of .build_number to 244 for branch master
    Last update: e901645d59274e7d51281520f4ec0db437d7ae69 (1 commits ago)

commit c5088801598dba3a63034871cdf1073d4a288e80
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 5 21:35:48 2012 -0700

    Prevent Gallery from running on Windows.  Fixes #1883.

commit e901645d59274e7d51281520f4ec0db437d7ae69
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Jun 5 21:29:08 2012 -0700

    Automated update of .build_number to 243 for branch master
    Last update: b29b3c91e77c2eda48de0a223ff77a6785c8d3e4 (10 commits ago)

commit 69e7614271dbc3e9cd27bd7ce69440503f4d79bf
Merge: 03d55d2 a3d8f76
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 5 21:28:33 2012 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 03d55d25307054547378db123e30c59bebb6944f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 5 21:25:56 2012 -0700

    Encode urls in 404 log entries.  Fixes #1882.

commit b416d7e3d58d8d1510e12bbbe5363218c41ee902
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 5 21:15:21 2012 -0700

    Follow on to a9be0691d9efd84cbf5a9f05236caf4df23bcfdb for #1872.

commit b7074ee59588b74ff4ebb77dd1281941a3c99778
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 5 20:50:08 2012 -0700

    Clean file paths in Kohana_Exception::debug_path().  Fixes #1880.

commit 713a06f234837f7f79977ca08f3514ef763f572f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 5 20:20:21 2012 -0700

    Do a better job of escaping filenames when uploading.  Fixes #1881.

commit af45d870d8207b08b4eb9408ba9a618185d72075
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 5 16:25:09 2012 -0700

    rawurlencode the directory path components to avoid breaking the page layout.
    Fixes #1880.

commit 6104e924aa10f75de919f3b68717188b3912b5dc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 5 16:09:29 2012 -0700

    Clean up the path location.  Fixes #1880.

commit a3d8f76fb693fd2419e3048a2db8426eb79351ba
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Jun 5 16:03:22 2012 -0700

    Automated update of .build_number to 242 for branch master
    Last update: b29b3c91e77c2eda48de0a223ff77a6785c8d3e4 (3 commits ago)

commit 81ecb219d45fd8573f997e0b3dfd7f6a40f47bd0
Merge: 9e1f975 ec400cb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 5 16:03:07 2012 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 9e1f975e7bdd68d80492d418ad908d1367923aaa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 5 14:08:15 2012 -0700

    Fix up syntax in the last change.  Follow-on for #1879.

commit ec400cbb7fced80c38ac8fcff017ad75aba61d01
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Jun 5 14:06:13 2012 -0700

    Automated update of .build_number to 241 for branch master
    Last update: b29b3c91e77c2eda48de0a223ff77a6785c8d3e4 (1 commits ago)

commit a8034fe7b352e49b8f43c2c159626770740433a6
Merge: b29b3c9 6fbea19
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 5 14:05:40 2012 -0700

    Merge pull request #68 from ffchung/patch-3
    
    Force Turn off the compress as most image file already compressed.
    
    Preliminary change for #1879 - more coming.

commit b29b3c91e77c2eda48de0a223ff77a6785c8d3e4
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Jun 5 13:58:47 2012 -0700

    Automated update of .build_number to 240 for branch master
    Last update: 2097053b62295fad9cee9f3c3239f0c5a1be0500 (1 commits ago)

commit 44d5f22d8d85285c9a43b8182da73c051594cf02
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 5 13:57:45 2012 -0700

    Remove <h2> added in last commit, it's unclear why that's necessary.  The last commit had
    the wrong ticket #, this actually resolves 1878.

commit 2097053b62295fad9cee9f3c3239f0c5a1be0500
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Jun 5 13:52:30 2012 -0700

    Automated update of .build_number to 239 for branch master
    Last update: 46925cd22725ef4948ae4cb87d5c4420b381cf80 (1 commits ago)

commit 3e7133c970e60d4b810cf99327627fc19dada431
Merge: 46925cd 3286271
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 5 13:52:26 2012 -0700

    Merge pull request #70 from ffchung/patch-5
    
    Show "Movie info" on movie page.  Fixes #1877.

commit 46925cd22725ef4948ae4cb87d5c4420b381cf80
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Jun 5 13:49:37 2012 -0700

    Automated update of .build_number to 238 for branch master
    Last update: 79c00f080ea193ef88f601a6523926d281c39cf0 (1 commits ago)

commit d0e51faa9a4ea8b9c9d108a8c89fe33714111e6c
Merge: 79c00f0 3fd5f4c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 5 13:49:16 2012 -0700

    Merge pull request #69 from ffchung/patch-4
    
    CSS Style Update to match with other view
    
    Fixes #1877

commit 32862713760406ffdf534583cbe35b3844e1dce7
Author: Tony Fung <ffchung2002@yahoo.com.hk>
Date:   Tue Jun 5 11:24:13 2012 +0800

    Show "Movie info" on movie page

commit 3fd5f4cc87603d7de773bb44f498d5d8ffa94986
Author: Tony Fung <ffchung2002@yahoo.com.hk>
Date:   Tue Jun 5 11:20:31 2012 +0800

    CSS Style Update to match with other view

commit 6fbea19b352f880a6241dd359336ace5a4f26d22
Author: Tony Fung <ffchung2002@yahoo.com.hk>
Date:   Tue Jun 5 11:16:37 2012 +0800

    Force Turn off the compress as most image file already compressed.

commit da902e01943c22a72b095c1f3877b09087496834
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Jun 4 19:55:19 2012 -0700

    Automated update of .build_number to 233 for branch 3.0.x
    Last update: 16f774a9bc642ba687d512e0da60df7d3900719b (1 commits ago)

commit 255310419963a0ae0b1f3709475443b37070daa4
Merge: 16f774a 3fbe070
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 4 19:54:45 2012 -0700

    Merge branch 'master' into 3.0.x

commit 79c00f080ea193ef88f601a6523926d281c39cf0
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Jun 4 19:54:41 2012 -0700

    Automated update of .build_number to 237 for branch master
    Last update: 4c98b218316df00c8bf3eeb28a8324ec64348bff (1 commits ago)

commit 3fbe07078fa57abe82b9584e11075a83ce15265a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 4 19:54:01 2012 -0700

    Second attempt to fix #1821 - first attempt caused an infinite loop in some cases
    when zlib.output_compression is enabled.

commit 16f774a9bc642ba687d512e0da60df7d3900719b
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat May 19 11:51:55 2012 -0700

    Automated update of .build_number to 232 for branch 3.0.x
    Last update: f5de683a84f8d7f7edcf19bb2b97611effa72325 (1 commits ago)

commit 4c98b218316df00c8bf3eeb28a8324ec64348bff
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat May 19 11:51:50 2012 -0700

    Automated update of .build_number to 236 for branch master
    Last update: f89888f46c80deebd5b2fd634cc8b658ff8c0bbf (2 commits ago)

commit 21ceea65e4cf9e11716580f3a8f77ee94c9cb3b7
Merge: f5de683 648d9a4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 19 11:51:30 2012 -0700

    Merge branch 'master' into 3.0.x

commit 648d9a4de8420f0cec037041bb77c39beaa42ac6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 19 11:51:10 2012 -0700

    Remove accidental double encoding.

commit d095022c601539258940a1774a477c20becd5b0f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 19 11:47:27 2012 -0700

    Filter out all style attributes - we don't want them.  Further fix for #1849.

commit f5de683a84f8d7f7edcf19bb2b97611effa72325
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat May 19 11:42:20 2012 -0700

    Automated update of .build_number to 231 for branch 3.0.x
    Last update: 64a3989c5257a3b91ba6db3486a711c0b9a958d9 (1 commits ago)

commit da56a2cddcd3ca2c016850a2853e0a07b923973a
Merge: 64a3989 a9be069
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 19 11:42:07 2012 -0700

    Merge branch 'master' into 3.0.x

commit f89888f46c80deebd5b2fd634cc8b658ff8c0bbf
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat May 19 11:32:13 2012 -0700

    Automated update of .build_number to 235 for branch master
    Last update: 85536f4ffcb8a7a20f69c8b011d3cf06b9ec68f3 (2 commits ago)

commit a9be0691d9efd84cbf5a9f05236caf4df23bcfdb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 19 11:28:46 2012 -0700

    Create an ajax response framework that inserts <meta> tags to guard
    against UTF-7, and create a $.gallery_autocomplete variant of jQuery's
    autocomplete that expects the first line to be a <meta> tag and
    discards it.  More complete fix for #1871.

commit 74fa9422db01fbc017ddbc847333cc7847f185ab
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 19 11:20:47 2012 -0700

    Revert "Prevent server_add autocomplete from being interpreted as UTF-7.  Fixes #1871."
    
    This only fixes server_add, we need to fix it more systemically.
    
    This reverts commit 88c0363344860ff87bb7fa2d084b8ab190b364cb.

commit 85536f4ffcb8a7a20f69c8b011d3cf06b9ec68f3
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat May 19 10:54:44 2012 -0700

    Automated update of .build_number to 234 for branch master
    Last update: 0e97072ad241fc6af93e889aa7a064374ede6a14 (1 commits ago)

commit 68437993b90bb9cc02ca1134e73c754e1f0d8273
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 19 10:54:02 2012 -0700

    Differentiate between photos and movies in album children.  Fixes #1861.

commit 64a3989c5257a3b91ba6db3486a711c0b9a958d9
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu May 17 20:31:51 2012 -0700

    Automated update of .build_number to 230 for branch 3.0.x
    Last update: 49a6a9eb6dfc33e8903aba220dfd8e5870c90802 (1 commits ago)

commit 06eae6ccd38ba0ef17a4406117fd7b22391750e2
Merge: 49a6a9e 9e2ea2f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 17 20:31:15 2012 -0700

    Merge branch 'master' into 3.0.x

commit 0e97072ad241fc6af93e889aa7a064374ede6a14
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu May 17 20:26:34 2012 -0700

    Automated update of .build_number to 233 for branch master
    Last update: 931da5f2ff68e3e4414583c39a22d62f13f87960 (1 commits ago)

commit 9e2ea2ffedb22f83137db4e5ba4c06b91f11e09d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 17 20:25:27 2012 -0700

    Smash multiple extensions down into a single one when accepting file
    uploads.  Fixes #1872.

commit 49a6a9eb6dfc33e8903aba220dfd8e5870c90802
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed May 16 12:31:27 2012 -0700

    Automated update of .build_number to 229 for branch 3.0.x
    Last update: 3e741799f2e090911bd9cc10a95881187f818160 (1 commits ago)

commit f83ca693871422acfaa2fa8a4d81911fd71a6281
Merge: 3e74179 88c0363
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 16 12:30:41 2012 -0700

    Merge branch 'master' into 3.0.x

commit 931da5f2ff68e3e4414583c39a22d62f13f87960
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed May 16 12:28:32 2012 -0700

    Automated update of .build_number to 232 for branch master
    Last update: 790f64cbcffec7ded74fb0b023968c1732a2506e (1 commits ago)

commit 88c0363344860ff87bb7fa2d084b8ab190b364cb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 16 12:26:09 2012 -0700

    Prevent server_add autocomplete from being interpreted as UTF-7.  Fixes #1871.

commit 790f64cbcffec7ded74fb0b023968c1732a2506e
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed May 16 12:06:27 2012 -0700

    Automated update of .build_number to 231 for branch master
    Last update: 0a8325bae872cc311a4563a32b4b012fd81374b7 (1 commits ago)

commit 355679fa55bfa21e8475f52fb26efa0ff2a1bf0d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 16 12:01:41 2012 -0700

    Revert "Convert any UTF-7 to UTF-8 so that fragment pages (like AJAX replies)"
    This will break many legal UTF-8 strings.
    
    This reverts commit 1c5c2e7de42f9e59932c81fb26c8416b2fef3fda.

commit 0a8325bae872cc311a4563a32b4b012fd81374b7
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed May 16 11:35:25 2012 -0700

    Automated update of .build_number to 230 for branch master
    Last update: 6f6797afb2ace053e835754b7cf8e8a66e36de12 (2 commits ago)

commit 1c5c2e7de42f9e59932c81fb26c8416b2fef3fda
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 16 11:32:28 2012 -0700

    Convert any UTF-7 to UTF-8 so that fragment pages (like AJAX replies)
    won't be mistakenly interpreted as UTF-7.  Fixes #1869.

commit 91e87cb811769dc9490549ca4c01a3830ee6da37
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 16 11:32:11 2012 -0700

    Oops, fix indentation in 99af395a01edac438cef4e42af1f4c26a3532acc

commit 6f6797afb2ace053e835754b7cf8e8a66e36de12
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed May 16 11:11:04 2012 -0700

    Automated update of .build_number to 229 for branch master
    Last update: fd14d29a3691945432180809746014dc91d43db8 (1 commits ago)

commit 99af395a01edac438cef4e42af1f4c26a3532acc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 16 11:07:26 2012 -0700

    Force the error page to UTF-8.  Fixes #1868.

commit 3e741799f2e090911bd9cc10a95881187f818160
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue May 15 16:11:37 2012 -0700

    Automated update of .build_number to 228 for branch 3.0.x
    Last update: d9b61dead23b96e61037f04cfa5b4015d3158d10 (1 commits ago)

commit 2cd11d849d0d719eef7eb9e797255dd7e78885a8
Merge: d9b61de ce209b9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 15 16:11:12 2012 -0700

    Merge branch 'master' into 3.0.x

commit fd14d29a3691945432180809746014dc91d43db8
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue May 15 16:10:58 2012 -0700

    Automated update of .build_number to 228 for branch master
    Last update: b63db2e5dbf924636a0ce47260d5ccfa2df0692a (1 commits ago)

commit ce209b9eaac301b8494d7d6faa72d013ed1c6cb9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 15 16:10:49 2012 -0700

    Fix a typo leading to notification module not sending any text.  Fixes #1862.

commit b63db2e5dbf924636a0ce47260d5ccfa2df0692a
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue May 15 16:01:16 2012 -0700

    Automated update of .build_number to 227 for branch master
    Last update: 82be903527a679f296be58916b6c68a5c410d010 (1 commits ago)

commit 891652b233df120464d8fe7d3ca80c5091681dea
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 15 16:00:46 2012 -0700

    Send back form errors wrapped in JSON.  Fixes #1867.

commit 82be903527a679f296be58916b6c68a5c410d010
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue May 15 15:56:41 2012 -0700

    Automated update of .build_number to 226 for branch master
    Last update: 05b50f2edfdc24d23e5e072ee3831ca12c003543 (3 commits ago)

commit b23b0c0c6c7ec1b5a764d8a096677ed65f8ddc60
Merge: aac18ef 10fdc33
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 15 15:56:24 2012 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit aac18ef8339054e134fa3e52788a80e6907dfba5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 15 15:53:38 2012 -0700

    Don't allow new albums with a slug that matches a controller - put up a
    message telling the user that it's a reserved address.  Partial fix for #95.

commit d9b61dead23b96e61037f04cfa5b4015d3158d10
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue May 15 10:55:56 2012 -0700

    Automated update of .build_number to 224 for branch 3.0.x
    Last update: 38795b654849953aadb7b19129b1ad29609b7106 (1 commits ago)

commit a882b8f92a9e2d02cf8759ba97206e8601e6b9f6
Merge: 38795b6 3caf3cc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 15 10:55:16 2012 -0700

    Merge branch 'master' into 3.0.x

commit 10fdc3386107b2c845b37276066c68380f5096c7
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue May 15 10:55:13 2012 -0700

    Automated update of .build_number to 225 for branch master
    Last update: 05b50f2edfdc24d23e5e072ee3831ca12c003543 (1 commits ago)

commit 3caf3cc323cd25b002aa8e44d871d4677da7a029
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 15 10:54:18 2012 -0700

    Harden installer against bad characters in the database name or prefix.  Fixes #1866.

commit 05b50f2edfdc24d23e5e072ee3831ca12c003543
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue May 15 10:52:22 2012 -0700

    Automated update of .build_number to 224 for branch master
    Last update: ebc55f208e6966496044ea097cab0121d1841539 (1 commits ago)

commit 3d03ea697f18d6e779ac88024f5e6a12bff6788f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 15 10:50:21 2012 -0700

    Follow-on to ce34e89c899a3fca6d647e99742c39b8b7a4f3e0 for #1865 -
    allow strings and coerce them to integers.  It might be easier to just
    cast whatever comes in, but I'm worried that we'll accidentally cast
    an array to an int(1) without realizing it.

commit 38795b654849953aadb7b19129b1ad29609b7106
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue May 15 09:53:58 2012 -0700

    Automated update of .build_number to 223 for branch 3.0.x
    Last update: 2412c486fc1512b82e0ed3d1d8773a4ad4649e3f (1 commits ago)

commit ebc55f208e6966496044ea097cab0121d1841539
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue May 15 09:53:19 2012 -0700

    Automated update of .build_number to 223 for branch master
    Last update: 1ffc3b1df084355d4e1f7aeab8555df07801b885 (2 commits ago)

commit 96c9526a593712264a70260bca0ccb9ddb8b6370
Merge: 2412c48 ce34e89
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 15 09:53:19 2012 -0700

    Merge branch 'master' into 3.0.x

commit ce34e89c899a3fca6d647e99742c39b8b7a4f3e0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 15 09:50:57 2012 -0700

    Different approach to resolving #1865, this replaces 6a6b3f90f36293a40cba091c3ac387abb64f3c1a
    which was rolled back.

commit 0d5187eadf3e19729c6aa25c3bf30d2787fd66a3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 15 09:33:43 2012 -0700

    Revert "Verify that where() clauses are well formed.  Fixes #1865."
    
    This reverts commit 6a6b3f90f36293a40cba091c3ac387abb64f3c1a.

commit 2412c486fc1512b82e0ed3d1d8773a4ad4649e3f
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue May 15 09:30:03 2012 -0700

    Automated update of .build_number to 222 for branch 3.0.x
    Last update: cd7df786796cdc4ae91c4d28a24ff6ccff575164 (2 commits ago)

commit 739caa9a056abf55c96f6cef5ed41dec9ab953a9
Merge: f06c227 4e7bd99
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 15 09:29:12 2012 -0700

    Merge branch '3.0.x' of github.com:gallery/gallery3 into 3.0.x

commit 1ffc3b1df084355d4e1f7aeab8555df07801b885
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue May 15 09:27:41 2012 -0700

    Automated update of .build_number to 222 for branch master
    Last update: cd7df786796cdc4ae91c4d28a24ff6ccff575164 (1 commits ago)

commit f06c2275052f638ffaf671dda4604d3fb35dfe8c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 15 09:26:13 2012 -0700

    Oops dropped a semicolon in e3d50dd8be9cd4bdefb42f41aa6ed96b6fece676

commit 4e7bd99814c942e274641b184eedf121e0f8ceb0
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon May 14 22:02:46 2012 -0700

    Automated update of .build_number to 66 for branch 3.0.x
    Last update: b7e001f5a854d1264e7baf6cb7182b4bbc6cd6b1 (1 commits ago)

commit 29512c474b940965d55015071b62d673eef7a84a
Merge: b7e001f 6a6b3f9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 14 22:02:26 2012 -0700

    Merge branch 'master' into 3.0.x

commit cd7df786796cdc4ae91c4d28a24ff6ccff575164
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon May 14 21:55:24 2012 -0700

    Automated update of .build_number to 221 for branch master
    Last update: 9408074eb42e0d56a1626f4d08b1fdbd19e79fa4 (1 commits ago)

commit 6a6b3f90f36293a40cba091c3ac387abb64f3c1a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 14 21:54:41 2012 -0700

    Verify that where() clauses are well formed.  Fixes #1865.

commit b7e001f5a854d1264e7baf6cb7182b4bbc6cd6b1
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon May 14 20:54:06 2012 -0700

    Automated update of .build_number to 65 for branch 3.0.x
    Last update: b672d06f6c24417db78329c43ab73a2db51cf210 (1 commits ago)

commit 61149f3d1f7f7d556ae5bd0c35601f602a1ca400
Merge: b672d06 e3d50dd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 14 20:53:23 2012 -0700

    Merge branch 'master' into 3.0.x

commit 9408074eb42e0d56a1626f4d08b1fdbd19e79fa4
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon May 14 20:52:53 2012 -0700

    Automated update of .build_number to 220 for branch master
    Last update: 4b170b65d19d7699a87d6ecfe28741627f206b48 (2 commits ago)

commit e3d50dd8be9cd4bdefb42f41aa6ed96b6fece676
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 14 20:51:27 2012 -0700

    Simplify dialog title for editing advanced settings.  Fixes #1864.

commit 1531c3898fde620abfa9e306dc6efc73e520bd1c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 14 20:50:36 2012 -0700

    Force uploader status messages to be integers.  Fixes #1863.

commit b672d06f6c24417db78329c43ab73a2db51cf210
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun May 13 21:11:23 2012 -0700

    Automated update of .build_number to 64 for branch 3.0.x
    Last update: 88763f21b9526a2bb4afccd2e3274ccdea9cf752 (1 commits ago)

commit 4b170b65d19d7699a87d6ecfe28741627f206b48
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun May 13 21:10:46 2012 -0700

    Automated update of .build_number to 219 for branch master
    Last update: d1390bd87db1a7e59bbd72f5991fbbc6374c98b4 (1 commits ago)

commit 60ab7e95c408a1cdd3fb0cd9869162a1595b1d62
Merge: 88763f2 ffbaa7b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 13 21:10:44 2012 -0700

    Merge branch 'master' into 3.0.x

commit ffbaa7bf82750814b6b31c8c83ee11ad25a41196
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 13 21:09:26 2012 -0700

    Follow on for #1845 - handle paths with dots in them properly.

commit d1390bd87db1a7e59bbd72f5991fbbc6374c98b4
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri May 11 17:15:03 2012 -0700

    Automated update of .build_number to 218 for branch master
    Last update: 2d652ed9da31dd0aeb49dbf0b7e8de5e7228a13f (2 commits ago)

commit 5d9e71741754809ebe5f543eb874634e6fc8cc9d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri May 11 17:14:41 2012 -0700

    Sort modules by visible name, not id.  Fixes #1859.

commit 6aebc2598e0b76e560a68d6ea78bd59012ae0805
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri May 11 17:11:52 2012 -0700

    Fix canonical name for this module.  Fixes #1858.

commit 2d652ed9da31dd0aeb49dbf0b7e8de5e7228a13f
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri May 11 16:52:48 2012 -0700

    Automated update of .build_number to 217 for branch master
    Last update: 4fcfe75cbb559e5654794a0111bb701d0493589e (1 commits ago)

commit 88763f21b9526a2bb4afccd2e3274ccdea9cf752
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri May 11 15:59:29 2012 -0700

    Automated update of .build_number to 63 for branch 3.0.x
    Last update: e6161b04cf69950b5357fe4ac3c7fab5a35e8fa1 (1 commits ago)

commit a01cede0d1d1e6582a2ea8f9f5357615a429650f
Merge: e6161b0 ca037dc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri May 11 15:59:19 2012 -0700

    Merge branch 'master' into 3.0.x

commit ca037dc9550590d19a2d25d23391c6ddf48203cd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri May 11 15:58:33 2012 -0700

    Improve the way server add deals with wacky directory names.  Fixes #1857.

commit 4fcfe75cbb559e5654794a0111bb701d0493589e
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri May 11 15:14:00 2012 -0700

    Automated update of .build_number to 216 for branch master
    Last update: 41c880244e65c94b99c160256e112232bce4c369 (1 commits ago)

commit 34ac1a466d1ad9e1ba23bf9b7265c6b2b2376ad9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri May 11 15:12:30 2012 -0700

    Verify that theme names are well formed.  Fixes #1856.

commit e6161b04cf69950b5357fe4ac3c7fab5a35e8fa1
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri May 11 14:40:15 2012 -0700

    Automated update of .build_number to 62 for branch 3.0.x
    Last update: bd5cd1153e7b650c26c7ccb3393c0e9ba6faa9ed (1 commits ago)

commit 8fa3669fd35b994e651860fa66a228202c2b5243
Merge: bd5cd11 fd4296c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri May 11 14:39:39 2012 -0700

    Merge branch 'master' into 3.0.x

commit 41c880244e65c94b99c160256e112232bce4c369
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri May 11 14:39:37 2012 -0700

    Automated update of .build_number to 215 for branch master
    Last update: b41ac7a3b6b228ef0a9977cdb93f0da39dba11a3 (1 commits ago)

commit fd4296c70ffe9c274a1e4215191955a41c4e98e2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri May 11 14:34:27 2012 -0700

    Inject some sanity into watermark file extensions.

commit b41ac7a3b6b228ef0a9977cdb93f0da39dba11a3
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue May 8 19:04:47 2012 -0700

    Automated update of .build_number to 214 for branch master
    Last update: 4998113484ea91fcdeb1368b638080e39b29837e (1 commits ago)

commit 3191f0f18b606a93bb6ae9e05a95cc505660ba96
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 8 19:02:58 2012 -0700

    Fix up a title that I overlooked in 581d9a58db6a18a2597ee5487e57716f367c884b

commit 4998113484ea91fcdeb1368b638080e39b29837e
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue May 8 18:24:27 2012 -0700

    Automated update of .build_number to 213 for branch master
    Last update: 7c868ee71e728c78080ee37aa690510387feea8c (1 commits ago)

commit b512734b9d202807eb7fbc2830f37a1c867c790a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 8 18:23:09 2012 -0700

    Close all buffers, not just the ones that Kohana opened.  Fixes #1821,
    thanks to pvalsecc.

commit 7c868ee71e728c78080ee37aa690510387feea8c
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon May 7 21:42:13 2012 -0700

    Automated update of .build_number to 212 for branch master
    Last update: be860f5c4a1ea3eb3ac02cf1a7e38793c65f7c3b (1 commits ago)

commit a563dcdfb32d34d4cd22c5c75fa7f02f7b7b08d9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 7 21:40:43 2012 -0700

    Convert the missing movie placeholder over to a JPG for consistency.  Fixes #1828.

commit be860f5c4a1ea3eb3ac02cf1a7e38793c65f7c3b
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon May 7 21:28:09 2012 -0700

    Automated update of .build_number to 211 for branch master
    Last update: 42463582bd5fc896e3b623313082531aeabf4720 (2 commits ago)

commit 1ea6210303357b6c50379d2b929853a3c6a0566c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 7 21:26:38 2012 -0700

    Use legal_file::get_extensions() and variants where appropriate.  Fixes #1815.

commit 2a4903c0e724adadf0a7f1cf97c147595914bf51
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 7 21:17:51 2012 -0700

    Fix typo in call to Kohana_Exception::getMessage, thanks to Serge.
    Fixes #1780.

commit 42463582bd5fc896e3b623313082531aeabf4720
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon May 7 13:48:40 2012 -0700

    Automated update of .build_number to 210 for branch master
    Last update: ce3530100fb9279001f2918955e943c7cc97d590 (3 commits ago)

commit f205d240ee9c722b97318a912b3444227cb3d6d5
Merge: 5400c4b a836a49
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 7 13:47:26 2012 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 5400c4be26a809be8b0571f1291aa528ef39b743
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 7 13:45:13 2012 -0700

    Oops, fix up a bug originally added in
    7d66ab2e949bc915f108737f08cac2f9057ef729 when I tweaked the name of
    the rss_available variable to be rss_visible, but got it wrong.  Bump
    the comment module to 6 so that we run the installer and clean up old
    vars.
    
    Fixes #1854.

commit a836a49fe73ef85d4bd7ef38e97ce0537382b0c2
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon May 7 13:31:08 2012 -0700

    Automated update of .build_number to 209 for branch master
    Last update: ce3530100fb9279001f2918955e943c7cc97d590 (1 commits ago)

commit 6effd5f75ee6a0972b0fbad5a15c6b7e8bf5ce8e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 7 13:29:52 2012 -0700

    Update date format to make it RFC822 compliant.  Thanks to moullas.  Fixes #1798.

commit ce3530100fb9279001f2918955e943c7cc97d590
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon May 7 12:10:23 2012 -0700

    Automated update of .build_number to 208 for branch master
    Last update: c44ae2a6b8efd8dcccd467d054599333a2caabfe (2 commits ago)

commit 834fb3db10abbf5fcaf0c53b5055ec5bfe5bd7e7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 7 12:09:00 2012 -0700

    Oops, add in a file missed in 11ee6d50acf8849347c2c37dc15697830ff854d0

commit a23fed4ce1331ebd15530a66b51933eec8edb6a8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 7 11:55:23 2012 -0700

    Improve IdentityProvider switching code, patch thanks to Reklov
    Nesalk.  Fixes #1834.

commit c44ae2a6b8efd8dcccd467d054599333a2caabfe
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon May 7 11:58:49 2012 -0700

    Automated update of .build_number to 207 for branch master
    Last update: dc998c9fc78e3304ef896d3ab3356d2a22a68103 (2 commits ago)

commit 447e76f6f35919f5402566674795f2fa5b387b9b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 7 11:55:23 2012 -0700

    Improve IdentityProvider switching code, patch thanks to Reklov
    Nesalk.  Fixes #1834.

commit 11ee6d50acf8849347c2c37dc15697830ff854d0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 7 11:47:19 2012 -0700

    Fix a database error caused by trying to view a non-search-result in a
    search context.  Patch thanks to sermoro.  Fixes #1837.

commit dc998c9fc78e3304ef896d3ab3356d2a22a68103
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon May 7 11:46:57 2012 -0700

    Automated update of .build_number to 206 for branch master
    Last update: 62623a84d0228e3851e7cca99cc84e34d572dce0 (1 commits ago)

commit e722e5d5d4fbd8a70cc67c4d545390120ed00608
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 7 11:38:51 2012 -0700

    Fix missing date.timezone which results in a crash on startup in I18n
    code.  Fill in missing field and log it 25% of the time. Fixes #1853.

commit bd5cd1153e7b650c26c7ccb3393c0e9ba6faa9ed
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun May 6 10:31:19 2012 -0700

    Automated update of .build_number to 61 for branch 3.0.x
    Last update: 9005ae51b1ec9e2e4b03df713073164cd88fb084 (1 commits ago)

commit 216efe997c9a5e6a4d22ab5aebd40561545e6dc6
Merge: 9005ae5 e5dd9f6
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun May 6 10:31:18 2012 -0700

    Merge branch '3.0.x' of github.com:gallery/gallery3 into 3.0.x

commit e5dd9f685826e708f22b5623b606e94bf046d448
Merge: 54d1671 62623a8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 6 10:31:05 2012 -0700

    Merge branch 'master' into 3.0.x

commit 9005ae51b1ec9e2e4b03df713073164cd88fb084
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun May 6 10:30:42 2012 -0700

    Automated update of .build_number to 60 for branch 3.0.x
    Last update: b763609134e4d5b1dfc69dd339a364ed59830018 (1 commits ago)

commit 54d16713687b279f54e9dcc585eead0bb3b9e275
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 6 10:30:16 2012 -0700

    I hereby dub the 3.0.4 release "Ricochet".

commit 62623a84d0228e3851e7cca99cc84e34d572dce0
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun May 6 10:11:06 2012 -0700

    Automated update of .build_number to 205 for branch master
    Last update: b8e8819d3f0d0e48f6c3c7c2acdc1d6e73eb5ddd (1 commits ago)

commit 02de0bdc280d8aec841353d87cb6af4bcacea8bd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 6 10:03:25 2012 -0700

    Update the installer bundle for the comment module.  Fixes #1852.

commit b8e8819d3f0d0e48f6c3c7c2acdc1d6e73eb5ddd
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun May 6 09:45:51 2012 -0700

    Automated update of .build_number to 204 for branch master
    Last update: 1050bf02233e7a03c0b4e330b84f0d070f5d407d (1 commits ago)

commit 3fe3c09ec31b46b1ed57f4d92074dbf3caa4b294
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 6 09:44:12 2012 -0700

    Use html::anchor consistently.  Fixes #1851.

commit 1050bf02233e7a03c0b4e330b84f0d070f5d407d
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat May 5 21:25:20 2012 -0700

    Automated update of .build_number to 203 for branch master
    Last update: b9b06b2383f943fdb9e4bef5c2ebd0d0d26c2d1f (4 commits ago)

commit 64e5d7ab2420d6959b4c8318b859099acedd1cc4
Merge: b839be3 3a23609
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 5 21:25:01 2012 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit b839be36bf2b43643b156cb26aa29d0ade80bdd3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 5 21:24:25 2012 -0700

    Add "X-Frame-Options: SAMEORIGIN" to all pages.  Fixes #1850.

commit fd152956426f93c4b5231f89f9c6375a2d4dda4a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 5 21:09:30 2012 -0700

    Clean up comments.

commit 3a2360993e212e2e17e3e608d33416026a6b68c0
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat May 5 20:55:00 2012 -0700

    Automated update of .build_number to 202 for branch master
    Last update: b9b06b2383f943fdb9e4bef5c2ebd0d0d26c2d1f (1 commits ago)

commit 41962c0916edb5a1f18e95e9fd0d836f4cd2e142
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 5 20:54:15 2012 -0700

    Wrap the loop around all regexes for better efficiency.  Fixes #1849.

commit b9b06b2383f943fdb9e4bef5c2ebd0d0d26c2d1f
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat May 5 19:56:08 2012 -0700

    Automated update of .build_number to 201 for branch master
    Last update: 83efbc000f2b3ac3d5f858d76378f959691f254d (1 commits ago)

commit 916f5c7d3b6d3b57255e760949c78f0dbc2abf92
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 5 19:55:29 2012 -0700

    Clean up message to preserve page formatting. Fixes #1848.

commit 83efbc000f2b3ac3d5f858d76378f959691f254d
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat May 5 19:44:55 2012 -0700

    Automated update of .build_number to 200 for branch master
    Last update: 0a811f9a4ebabf50081402d611b7cb3ccceb3e7f (9 commits ago)

commit 4ca5a18902f51a56f1d2ceb737b875a10a289d00
Merge: a16b465 2d55278
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 5 19:44:23 2012 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit a16b46545115b1b5fd963282c487e078f7eb5eb0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 5 19:44:11 2012 -0700

    Remove debug line added in 581d9a58db6a18a2597ee5487e57716f367c884b

commit 2d552787f98c234a63b0e022dcd7b909d7f71966
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat May 5 19:42:39 2012 -0700

    Automated update of .build_number to 199 for branch master
    Last update: 0a811f9a4ebabf50081402d611b7cb3ccceb3e7f (7 commits ago)

commit 4b827e52b4388391ee81fe993df624b263343f33
Merge: 581d9a5 396d049
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 5 19:39:54 2012 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 581d9a58db6a18a2597ee5487e57716f367c884b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 5 19:38:31 2012 -0700

    Clean up title handling code in organize and wind theme for consistency.
    Fixes #1847.

commit 396d049571ab91be93206628e104a309ab7a4986
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat May 5 19:35:21 2012 -0700

    Automated update of .build_number to 198 for branch master
    Last update: 0a811f9a4ebabf50081402d611b7cb3ccceb3e7f (5 commits ago)

commit 1a328271e13e886f47debf32ab184c060cce4fac
Merge: ef4dbd1 a72f927
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 5 19:35:12 2012 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit ef4dbd18af218a3c68a776122108af4b0d0191a4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 5 19:34:01 2012 -0700

    Fix extension-swapping code for files that have extensions that are
    not 3 characters long.  Fixes #1845.

commit a72f927ef5bf87aaf4f4d0c59bac4b4f715870a0
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat May 5 19:20:11 2012 -0700

    Automated update of .build_number to 197 for branch master
    Last update: 0a811f9a4ebabf50081402d611b7cb3ccceb3e7f (3 commits ago)

commit 4e3bcf52162d83a06c5e6f932fefea4f29b5135d
Merge: d5a445b a9f8932
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 5 19:20:02 2012 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit d5a445b7797a8f46a171bb94f3fd9d48d95494e1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 5 19:19:04 2012 -0700

    Improve the dimensions-detecting regex, thanks to cchiappa.
    Fixes #1844.

commit a9f89325d518a7f2dba00d2b0901038fa6fc68ed
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat May 5 18:53:22 2012 -0700

    Automated update of .build_number to 196 for branch master
    Last update: 0a811f9a4ebabf50081402d611b7cb3ccceb3e7f (1 commits ago)

commit 801c9a98e438a9c6a072630c3a051435986f6cf0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 5 18:52:44 2012 -0700

    Fix #1846.

commit 0a811f9a4ebabf50081402d611b7cb3ccceb3e7f
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Apr 30 15:24:35 2012 -0700

    Automated update of .build_number to 195 for branch master
    Last update: b47f56c6a9ea7686a3d7ecf0fd9d981fa3871ccc (2 commits ago)

commit 608d8f663672f7b273177efb49844df532f43408
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Apr 30 15:20:40 2012 -0700

    Fix #1843.

commit f488384a7b56b1e9511fa23d3ac359de64901213
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Apr 30 15:04:45 2012 -0700

    Guard reparent/rearrange against bad values in source_id.  Fixes #1843.

commit b47f56c6a9ea7686a3d7ecf0fd9d981fa3871ccc
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Apr 23 20:32:07 2012 -0700

    Automated update of .build_number to 194 for branch master
    Last update: a6a07c8580aa09063e39c407922a2cc197b4f05c (1 commits ago)

commit 6b306cddc1f25ecfe054b0a1c9d0dc3536da51f6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Apr 23 20:31:36 2012 -0700

    Don't call ob_end_clean() if PHP >= 5.4.  Fixes #1839.  Thanks to
    Christopher Kunz and Avuton Olrich for the info.

commit b763609134e4d5b1dfc69dd339a364ed59830018
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Apr 1 14:09:41 2012 -0700

    Automated update of .build_number to 59 for branch 3.0.x
    Last update: 40ca7eb5627f1705816b3d4b7a49accc610c98fb (1 commits ago)

commit a6a07c8580aa09063e39c407922a2cc197b4f05c
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Apr 1 14:09:34 2012 -0700

    Automated update of .build_number to 193 for branch master
    Last update: b138024c06bb2e83101b417f5a4bb64d9060e6d1 (2 commits ago)

commit 7d5c23d76f198660f59119e449e0d4db87aba04a
Merge: 40ca7eb 75492b9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 1 14:09:33 2012 -0700

    Merge branch 'master' into 3.0.x

commit 75492b9dd6e229ae7fbc60ebc5e1beb5cf4411a2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 1 14:09:08 2012 -0700

    "public static" -> "static"

commit daea22c6b3ed760177b51fbdd28c197f9d928274
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 1 14:07:50 2012 -0700

    Exclude modules/gallery/vendor/joomla from some structure tests

commit 40ca7eb5627f1705816b3d4b7a49accc610c98fb
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Apr 1 12:41:15 2012 -0700

    Automated update of .build_number to 58 for branch 3.0.x
    Last update: 7eeca92eb75e00c4ecdd32c346f38bf130008a34 (1 commits ago)

commit cb4d71ef37562270429901b8b2f5e55db3d446ff
Merge: 7eeca92 b90134e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 1 12:40:42 2012 -0700

    Merge branch 'master' into 3.0.x

commit b138024c06bb2e83101b417f5a4bb64d9060e6d1
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Apr 1 12:40:36 2012 -0700

    Automated update of .build_number to 192 for branch master
    Last update: b167a3c50a3cecfaf726469ad7b0ee108fe32b00 (9 commits ago)

commit b90134ef8a135920e5021a2b22d8c4bdd8dc7c1c
Merge: cd46dc4 62b40da
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 1 12:40:17 2012 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit cd46dc479cf975cbb843c360f1240203aebfcb32
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 1 12:39:48 2012 -0700

    Beef up the random number generator by using Joomla's new implementation.

commit 7eeca92eb75e00c4ecdd32c346f38bf130008a34
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Apr 1 11:56:21 2012 -0700

    Automated update of .build_number to 57 for branch 3.0.x
    Last update: 10b5314f9e28ceaa43c25fff91130c37bb4ab7d9 (1 commits ago)

commit 62b40da77f91233353673001cc4de8fb223d0b1c
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Apr 1 11:55:10 2012 -0700

    Automated update of .build_number to 191 for branch master
    Last update: b167a3c50a3cecfaf726469ad7b0ee108fe32b00 (7 commits ago)

commit 6db018b7e274401bcad6d9032f8f012de94f4ced
Merge: 10b5314 b9d7ad2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 1 11:55:04 2012 -0700

    Merge branch 'master' into 3.0.x

commit b9d7ad24481412ca2bfda11a3b1659535f29df43
Merge: f6dac70 df055ee
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 1 11:54:02 2012 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit f6dac703eceb95ee6af66983e1a77e052446ac2f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 1 11:53:34 2012 -0700

    Try a different approach at filtering.  Fixes #1831.

commit df055ee699d0c1e35b442e84f79c09723c1a1297
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Apr 1 11:38:21 2012 -0700

    Automated update of .build_number to 190 for branch master
    Last update: b167a3c50a3cecfaf726469ad7b0ee108fe32b00 (5 commits ago)

commit 76d4139cdbe998c0a8da838b3edfcab79a490956
Merge: 7ba0b1b 1b04b43
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 1 11:37:52 2012 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 7ba0b1b75ca2b3ff720f7ddf0e03db882a65353d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 1 11:36:16 2012 -0700

    Restrict valid urls to having a http:// or https:// prefix.  Fixes #1830.

commit 1b04b433971de4dd961e95e38c3ae92be8f32409
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Mar 29 13:12:08 2012 -0700

    Automated update of .build_number to 189 for branch master
    Last update: b167a3c50a3cecfaf726469ad7b0ee108fe32b00 (3 commits ago)

commit 7d66ab2e949bc915f108737f08cac2f9057ef729
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Mar 29 13:06:44 2012 -0700

    Improve comment RSS feed visibility, initially added by Thomas E. Horner in
    fc942aacda07346fa9af04853659eaeac1e766d3.
    
    Change some variable names, refactor out visibility checking code, actually
    check visibility at generation time instead of just suppressing the UI,
    update module.info
    
    Fixes #1829.

commit 60286bfba3939974088dcdc8935525f571eaa0eb
Merge: c567d4f fc942aa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Mar 29 06:37:00 2012 -0700

    Merge commit 'fc942aa'

commit c567d4fb2beedcd250fe7c3121e8da3ab8dbb164
Merge: b167a3c 2475bcd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 27 06:55:49 2012 -0700

    Merge pull request #65 from siburny/master
    
    Server Add module

commit 2475bcd60cb89a40306d3bd4eac4406cfcbac82f
Author: Maxim Rubis <siburny@gmail.com>
Date:   Mon Mar 26 21:19:36 2012 -0400

    Fixed Delete button

commit 10b5314f9e28ceaa43c25fff91130c37bb4ab7d9
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Feb 27 10:59:05 2012 -0700

    Automated update of .build_number to 56 for branch 3.0.x
    Last update: 4dd3511b5eb0271ad48b041c2a8a3974b36935bd (1 commits ago)

commit b167a3c50a3cecfaf726469ad7b0ee108fe32b00
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Feb 27 10:58:57 2012 -0700

    Automated update of .build_number to 188 for branch master
    Last update: b52fa3302670930077298d1df603740916f98055 (2 commits ago)

commit 18d1fb831785c3838c8fc2e6ff624b5b12ff6784
Merge: 4dd3511 bf2bb3e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Feb 27 09:49:04 2012 -0800

    Merge branch 'master' into 3.0.x

commit bf2bb3e1ea26571229cf16d0790f75cc947d7293
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Feb 27 09:46:39 2012 -0800

    Update copyright to 2012.  #1822

commit 6d530991f21a62527a82e41ca1daf4d7b0a8bd5e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Feb 27 09:19:43 2012 -0800

    Updated for #1764 and #1790

commit 4dd3511b5eb0271ad48b041c2a8a3974b36935bd
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Feb 6 21:03:39 2012 -0700

    Automated update of .build_number to 55 for branch 3.0.x
    Last update: 77e17f3a18c736af8d8e475e2f00d6bd60630e8c (1 commits ago)

commit b52fa3302670930077298d1df603740916f98055
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Feb 6 21:03:34 2012 -0700

    Automated update of .build_number to 187 for branch master
    Last update: 3a3b154b317814dcbd4ea0c1641b64e386cf85a9 (4 commits ago)

commit a977921db141f3d08666e797159cbcf052e1538b
Merge: 77e17f3 c5ed5f7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Feb 6 20:03:11 2012 -0800

    Merge branch 'master' into 3.0.x

commit c5ed5f75b23d70953ce2303fcb0786a3a246d7e4
Merge: cdbd9b5 d1b3112
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Feb 6 20:03:01 2012 -0800

    Merge branch 'master' of github.com:gallery/gallery3

commit cdbd9b5a9dbaba0cd9e2a1204f5cc2a28b994737
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Feb 6 20:02:32 2012 -0800

    Don't support display contexts for robots.  Fixes #1819.

commit 77e17f3a18c736af8d8e475e2f00d6bd60630e8c
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Feb 6 20:49:38 2012 -0700

    Automated update of .build_number to 54 for branch 3.0.x
    Last update: 702f6bb8379568349ec7014a4a2baf451b2a2e5a (2 commits ago)

commit d1b311291ac188b8f060d4f52c10ec18dc48be84
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Feb 6 20:49:32 2012 -0700

    Automated update of .build_number to 186 for branch master
    Last update: 3a3b154b317814dcbd4ea0c1641b64e386cf85a9 (2 commits ago)

commit e1699b7329d24c538b933aca46062656befef20a
Merge: dcf7885 065dd32
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Feb 6 19:49:12 2012 -0800

    Merge branch 'master' into 3.0.x

commit 065dd32f3168edc06ca235301c728ede8db849e6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Feb 6 19:47:49 2012 -0800

    Add tags for all Cache::instance()->set calls that don't have one.
    Fixes #1818.

commit dcf78850bc0a34a733ab7bfe8411d61b0c3c738f
Merge: 702f6bb 1bbaafc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 5 17:08:58 2012 -0800

    Merge branch 'master' into 3.0.x

commit 1bbaafcc1fc1c4997860706219a628343694e44b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 5 17:01:12 2012 -0800

    Add Baidu, Bing and Ezooms to the robits list.  Fixes #1817.

commit 702f6bb8379568349ec7014a4a2baf451b2a2e5a
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Dec 25 17:52:00 2011 -0700

    Automated update of .build_number to 53 for branch 3.0.x
    Last update: c37e15b892a472354c0712adf7605ea30bae11a5 (1 commits ago)

commit 9698b3be228ebf8c3471c9643dac21adf9083527
Merge: c37e15b 3a3b154
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 25 16:51:23 2011 -0800

    Merge branch 'master' into 3.0.x

commit c37e15b892a472354c0712adf7605ea30bae11a5
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Dec 25 17:50:49 2011 -0700

    Automated update of .build_number to 52 for branch 3.0.x
    Last update: 8dbbfe15c65871a0dbdcfc05260c408a02d286a3 (1 commits ago)

commit 3a3b154b317814dcbd4ea0c1641b64e386cf85a9
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Dec 25 17:50:43 2011 -0700

    Automated update of .build_number to 185 for branch master
    Last update: 2d911974d751334f4c6ca1bc3b0f3f98e220436e (4 commits ago)

commit 29d16f7f9f8646e7b0a691c0292f9dbd5b5c093a
Merge: 4839c84 b07b475
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 25 16:49:55 2011 -0800

    Merge pull request #64 from ophian/patch-1
    
    added 	  if (nh < 1) { var nh = 0; }
    
    Fixes #1813

commit 4839c841e252b915b55be995743826d2eff013a3
Merge: 2725d30 25019ad
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 23 11:23:09 2011 -0800

    Merge branch 'master' of github.com:gallery/gallery3

commit 1e32f19cf6b0a565db72cb98b87842f17217e717
Merge: 8dbbfe1 2725d30
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 23 11:22:59 2011 -0800

    Merge branch 'master' into 3.0.x

commit 2725d30c341c722e3ec52a2922a3c6cdcace2bf7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 23 11:22:43 2011 -0800

    Use Albums_Controller::get_display_context as the default display context.  Fixes #1812.

commit 8dbbfe15c65871a0dbdcfc05260c408a02d286a3
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Dec 17 20:19:55 2011 -0700

    Automated update of .build_number to 51 for branch 3.0.x
    Last update: 9fde3027c160babbd06122a5ee2fea65d55625e9 (1 commits ago)

commit 25019ad8263708acf8ec888b2d351387cde5fb1f
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Dec 17 20:19:14 2011 -0700

    Automated update of .build_number to 184 for branch master
    Last update: 2d911974d751334f4c6ca1bc3b0f3f98e220436e (1 commits ago)

commit e73e12b6123577f17b71d58a11f27f730d7676e8
Merge: 9fde302 67f6896
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 17 19:18:38 2011 -0800

    Merge branch 'master' into 3.0.x

commit 67f689646b9e12db300d34017f2dbf97676978f4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 17 19:17:00 2011 -0800

    Follow-on fix for #1790 - the last fix broke rearranging for everything
    *but* IE9.  Oops!

commit 2d911974d751334f4c6ca1bc3b0f3f98e220436e
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Nov 24 12:22:07 2011 -0700

    Automated update of .build_number to 183 for branch master
    Last update: 94eef9eaecbdcc98f4b5adb0da939480a324b0ad (2 commits ago)

commit 47fdf1e35abbc37bbb24fcda4222e92202d2d0e4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 24 11:21:32 2011 -0800

    Move the Content-Length header into the main block, fix some formatting.
    Follow-on to 5b969fd069e239e4126b52377518ac98968b1aab which is a fix for
    #1802.

commit cb98db1bcf794c07166e0c198a6b20dbac8756a0
Merge: 94eef9e 5b969fd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 24 11:14:45 2011 -0800

    Merge branch 'patch-1' of git://github.com/ffchung/gallery3

commit b07b4759c4f48d24343a53e1b2ca85e2d39811d2
Author: Ian <aristophian@googlemail.com>
Date:   Sat Nov 5 12:50:19 2011 +0100

    added 	  if (nh < 1) { var nh = 0; }
    to start album upper border not as nh = -n

commit 9fde3027c160babbd06122a5ee2fea65d55625e9
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Nov 3 21:28:16 2011 -0700

    Automated update of .build_number to 50 for branch 3.0.x
    Last update: cbede1d2e9a4f84d18839ab84723f4140b4840ca (1 commits ago)

commit 3f7c78d1f8cc6ce035d351b7ae021313229d068c
Merge: cbede1d 94eef9e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 3 21:27:57 2011 -0700

    Merge branch 'master' into 3.0.x

commit 94eef9eaecbdcc98f4b5adb0da939480a324b0ad
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Nov 3 21:25:35 2011 -0700

    Automated update of .build_number to 182 for branch master
    Last update: 8a88a64b9a953ec810514df772c8ba877afb6768 (1 commits ago)

commit eab12774fbe828b295c8ec0b440df8151df74fa1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 3 21:24:35 2011 -0700

    In get_position() don't try to truncate the score if it's empty.  Follow-on to ce43f29e2ceaac3d638061f81dc6037b5e0018d3

commit cbede1d2e9a4f84d18839ab84723f4140b4840ca
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Nov 3 21:16:39 2011 -0700

    Automated update of .build_number to 49 for branch 3.0.x
    Last update: 63880942728b74d60fc86fc99839c01d9ac7c1eb (1 commits ago)

commit a28c1691c9d3593bfa3e98936cbdb5f3c6c2df47
Merge: 6388094 5020f21
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 3 21:16:06 2011 -0700

    Merge branch 'master' into 3.0.x

commit 8a88a64b9a953ec810514df772c8ba877afb6768
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Nov 3 21:16:00 2011 -0700

    Automated update of .build_number to 181 for branch master
    Last update: 7b65a292ce991c676899ac1e4920b8ce1534c3bd (2 commits ago)

commit 5020f2184ca02cebc64f9c1cd7c93f50dd917ce6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 3 21:15:10 2011 -0700

    Better fix for dc21cf36b606048dc24532407d39bc8f5b4211fa - let's just fix up
    the root album thumbnail when the proportions change so that we avoid
    this problem altogether.

commit 1189ced2ce688bc41f3866e59f86eb4799757890
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 3 21:11:15 2011 -0700

    Revert "Fix a bug introduced in dc21cf36b606048dc24532407d39bc8f5b4211fa where"
    
    It doesn't work for search because there are no children.  And this
    just feels clunky to me - we should arrange for the root album to have
    the right dimensions of thumbnail instead.
    
    This reverts commit 4cb49b9152e82d0ab53b1038c7a7d7203c8bf97d.

commit 63880942728b74d60fc86fc99839c01d9ac7c1eb
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Nov 3 20:08:26 2011 -0700

    Automated update of .build_number to 48 for branch 3.0.x
    Last update: 153f43ef53f4f6eb6b5dd4379bf9fb9b489da938 (1 commits ago)

commit c9c4b01d00084e50fc5cf3b0b57032ba2b951adb
Merge: 153f43e 7b65a29
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 3 20:08:01 2011 -0700

    Merge branch 'master' into 3.0.x

commit 7b65a292ce991c676899ac1e4920b8ce1534c3bd
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Nov 3 20:07:48 2011 -0700

    Automated update of .build_number to 180 for branch master
    Last update: 4f370b6c237e85d5daa84edcc7d46990ea473b19 (1 commits ago)

commit 4cb49b9152e82d0ab53b1038c7a7d7203c8bf97d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 3 20:05:53 2011 -0700

    Fix a bug introduced in dc21cf36b606048dc24532407d39bc8f5b4211fa where
    we're basing the thumb proportions on the album's thumbnail, but this
    will be messed up in the case of the root album which may not have a
    properly update thumbnail, so its proportions may not be
    representative of the album's contents.  So instead, base the thumb
    proportions on the first child of the album.

commit 5b969fd069e239e4126b52377518ac98968b1aab
Author: ffchung <ffchung2002@yahoo.com.hk>
Date:   Sat Oct 29 23:03:06 2011 +0800

    gzip stream problem on Google Chrome

commit 153f43ef53f4f6eb6b5dd4379bf9fb9b489da938
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Oct 26 12:51:33 2011 -0700

    Automated update of .build_number to 47 for branch 3.0.x
    Last update: 1fc3d7b1122f276fce20b60283b36c0e811e88f9 (1 commits ago)

commit 4f370b6c237e85d5daa84edcc7d46990ea473b19
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Oct 26 12:51:29 2011 -0700

    Automated update of .build_number to 179 for branch master
    Last update: 5639ff342195ec80f125f4b09ccc5ae5932c2197 (9 commits ago)

commit 71e5bad1ebe098f89cb452ae3d9f9bbbaaaf7ba2
Merge: 1fc3d7b 5c9c770
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Oct 26 12:50:59 2011 -0700

    Merge branch 'master' into 3.0.x

commit 5c9c77016ad1a3c56bd714007e079244e3dff3c8
Merge: 80f24e8 5a11684
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Oct 26 12:50:45 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 80f24e8bcb9e7f280a1c831f4134dd0cc6862c86
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Oct 26 12:49:45 2011 -0700

    Follow on to 7f62f09cf377b92b615e456ec4539300b331fd4b for #1663 to fix bad
    query syntax, pointed out by Singularis in http://gallery.menalto.com/gallery_3.0.2_feedback#comment-383135

commit 1fc3d7b1122f276fce20b60283b36c0e811e88f9
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Oct 4 09:57:35 2011 -0700

    Automated update of .build_number to 46 for branch 3.0.x
    Last update: 7799f5c816571f3cae8ac65bb2571c7908dfea76 (1 commits ago)

commit ee9d272fad553d4758edcd14600a389cff0d87cd
Merge: 7799f5c 2956d40
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Oct 4 09:57:15 2011 -0700

    Merge branch 'master' into 3.0.x

commit 5a11684486e82758a9ea0764e779726252c17dea
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Oct 3 23:20:57 2011 -0700

    Automated update of .build_number to 178 for branch master
    Last update: 5639ff342195ec80f125f4b09ccc5ae5932c2197 (7 commits ago)

commit 2956d407279e9f2426d0328feb3276b9f9f26b09
Merge: e5175fd 0e10151
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Oct 3 23:20:21 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit e5175fd277d597acce1d824c8c82da08d15b407a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Oct 3 23:19:44 2011 -0700

    Fix the standard and REST uploaders to use a callback function to
    delete temporary files during shutdown.  Fixes #1788.

commit 0e10151eb4c92bca13ae415ccd03cce1109682fa
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Oct 3 22:31:01 2011 -0700

    Automated update of .build_number to 177 for branch master
    Last update: 5639ff342195ec80f125f4b09ccc5ae5932c2197 (5 commits ago)

commit 0a8678d0cbbb11a1544b2a0474d77ebba72c8a9b
Merge: 948bfef 1410ba4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Oct 3 22:30:33 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 948bfeff210325fa9b0ca189030ebb9ac53063c5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Oct 3 22:30:14 2011 -0700

    Work around a JS bug in IE9 that breaks the organize module.
    Fixes #1790.

commit 1410ba44eac7d65f2fb21ab259e4df01482e81d0
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Oct 3 21:48:28 2011 -0700

    Automated update of .build_number to 176 for branch master
    Last update: 5639ff342195ec80f125f4b09ccc5ae5932c2197 (3 commits ago)

commit 5ca5a97a2367d2bbb4a26cd049ed0ebf4dce1cd3
Merge: 79a2e3f 519b1ff
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Oct 3 21:47:45 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 79a2e3f1a7debdf62c66797446b2615e0a55000c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Oct 3 21:47:18 2011 -0700

    Use a stdClass wrapper around the data in the before_combine and
    after_combine events so that event handlers can modify the data.
    Fixes #1789.

commit 519b1ff11b3cde136e6091e244c5840e0629a0b9
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Oct 2 15:34:37 2011 -0700

    Automated update of .build_number to 175 for branch master
    Last update: dfbfe090168ee4ed44e2c8208e79d3fe40f90437 (1 commits ago)

commit 91bdcfe1c50e775d46b58c3815eb30874ad3a96e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Oct 2 15:34:37 2011 -0700

    Close the breadcrumb list

commit dfbfe090168ee4ed44e2c8208e79d3fe40f90437
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Aug 30 20:49:35 2011 -0700

    Automated update of .build_number to 174 for branch master
    Last update: 5639ff342195ec80f125f4b09ccc5ae5932c2197 (1 commits ago)

commit 1ed54ab5dc6e09044d9757eb31f1e0d58e3d9fb1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Aug 30 20:49:23 2011 -0700

    Make the Theme_View::thumb_proportion() API call backwards compatible to
    the API before dc21cf36b606048dc24532407d39bc8f5b4211fa.
    
    Fixes #1775

commit 5639ff342195ec80f125f4b09ccc5ae5932c2197
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Aug 30 20:04:35 2011 -0700

    Automated update of .build_number to 173 for branch master
    Last update: 246f5b59cb0e525a5ff6eaffce6b13e9af7e70b2 (2 commits ago)

commit 044309cb50c0301c19c89f15bb280307b338c16c
Merge: 96a4a26 8970e50
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Aug 30 20:05:00 2011 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 96a4a261a450c8b7117f98cb5f670eb4ebd4b482
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Aug 30 20:04:31 2011 -0700

    Patch for #1774

commit 7799f5c816571f3cae8ac65bb2571c7908dfea76
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Aug 27 20:58:41 2011 -0700

    Automated update of .build_number to 45 for branch 3.0.x
    Last update: 8b58663255175a7c838863568d6edf520d253611 (3 commits ago)

commit 485f3e9ada46ad7cac4b92e554c2c71101c04cc5
Merge: 4d2defb 8231294
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 27 20:58:34 2011 -0700

    Merge branch '3.0.x' of github.com:gallery/gallery3 into 3.0.x

commit 4d2defb175c026522918b0f4b06723a75b418bf4
Merge: bffe562 8970e50
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 27 20:58:31 2011 -0700

    Merge branch 'master' into 3.0.x

commit 8970e50c6a2ec709e32210158aa863e8bb1690f3
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Aug 27 20:56:54 2011 -0700

    Automated update of .build_number to 172 for branch master
    Last update: e4d4a89a1bd54164fb62d95ac62a44957d124e68 (2 commits ago)

commit 084c2717c0ddff6c5caa79c62abb3cdb9b4aea31
Merge: dc21cf3 246f5b5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 27 20:56:03 2011 -0700

    Merge branch 'master' into bharat_dev

commit 8231294745d21af588560833c4e7369d17527571
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Aug 27 20:49:38 2011 -0700

    Automated update of .build_number to 44 for branch 3.0.x
    Last update: 8b58663255175a7c838863568d6edf520d253611 (1 commits ago)

commit bffe56225094df056379d474b9c6aa6250436419
Merge: 8b58663 246f5b5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 27 20:49:01 2011 -0700

    Merge branch 'master' into 3.0.x

commit 246f5b59cb0e525a5ff6eaffce6b13e9af7e70b2
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Aug 27 14:56:04 2011 -0700

    Automated update of .build_number to 171 for branch master
    Last update: a5b1972bbe9676479886ca94bb23f09407a87561 (2 commits ago)

commit ce43f29e2ceaac3d638061f81dc6037b5e0018d3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 27 11:18:07 2011 -0700

    Refactor the display context code a bit:
    1) Move the display context code into the controller themselves so that it's
       more logically a continuation callback from the original controller
       rendering code.
    2) Simplify the display context set/get code and put it in the item helper,
       it's just a couple of lines of code now.
    3) Add more descriptive breadcrumb strings

commit 8b58663255175a7c838863568d6edf520d253611
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Aug 20 22:10:37 2011 -0700

    Automated update of .build_number to 43 for branch 3.0.x
    Last update: cdbd4014ab5be96166534c391ad3079607697393 (1 commits ago)

commit b6fb806c167bdaa5749ab37296e1a27633bada4f
Merge: cdbd401 da523de
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 20 22:09:45 2011 -0700

    Merge branch 'master' into 3.0.x

commit c92d34a86b0515363f790056293cea2b0a738782
Merge: a5b1972 933a349
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 11 22:11:24 2011 -0700

    Merge branch 'displayContext' into display_context_compressed
    
    Conflicts:
    	modules/gallery/controllers/movies.php
    	modules/gallery/controllers/photos.php
    	modules/tag/controllers/tag.php

commit 933a34986dbca248f388e8aa3c3aea4a6d71a94b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 11 22:04:20 2011 -0700

    Patch for tickets #1428 and #1760
    Create the concept of a Photo_Display_Context.  If the user is browsing a dynamic album (i.e. tags) and chooses to
    look at an image in that album.  The display of the image happens correctly, but the 'next' and 'previous' buttons
    are no longer consistent.  When one of these is clicked, Gallery  will open the adjacent image in the actuall album,
    not the dynamic album.

commit b78f87cb80c1ee4b8608508cb8a9bf8be71c511d
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Aug 8 21:30:38 2011 -0700

    Automated update of .build_number to 170 for branch master
    Last update: 8fd319918b8cafb48781fee02d2075473eb42267 (1 commits ago)

commit 67719c6f610a71c1bc12d5126e0adac84d7b85c6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Aug 8 20:28:31 2011 -0700

    Simplification of 59b04b897b8a664cd7334b017fac8158a6281434 for #1764:
    - Breadcrumb::build_from_item becomes Breadcrumb::array_from_item_parents
    - Eliminate Breadcrumb::$id -- it's no longer necessary
    - Fold Breadcrumb::generate_show_query_strings into Breadcrumb::array_from_item_parents
    - Create Breadcrumb::set_first() and Breadcrumb::set_last()
    - Breadcrumb::build_from_list goes away, we just use arrays for this
    - Change Search_Controller and Tag_Controller to just create an array
      of Breadcrumb instances with the first/last marked appropriately
    - Breadcrumb_Test loses a bunch of complexity.

commit 23b1ed4108e439bec6ea9594d7918d846630061d
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Aug 8 20:20:31 2011 -0700

    Automated update of .build_number to 169 for branch master
    Last update: c986b45931c8c168de478c48db0a8024ce99b7b8 (1 commits ago)

commit a246b6fe450e21f735824d5a089a8e652b12885f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Aug 7 13:27:27 2011 -0700

    Initial commit of a patch for Ticket #1764. as discussed here: https://github.com/gallery/gallery3/pull/58/files#r72949.
    
    Create a Breadcrumb library which has two static methods for_item (which takes a an item and builds the entire
    breadcrumb for the item) or build (which takes a variable number of Breadcrumb elements and creates a breadcrumb
    based on the specified elements).
    
    Used tag->url() to build the tag album url. Escaped the query string for the search. Tightened up the breadcrumb code
     in page.html.php.
    
    When adding the show query parameter, we can't blindly concatenate using the ? separator.  We have to check that we
    use a & if a query parameter already exists.

commit b1d5104ed64997fe3e2e2e7e60b7c43fd1bd010a
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Aug 4 21:00:26 2011 -0700

    Automated update of .build_number to 168 for branch master
    Last update: 71560f1fcd5d968fc9b3a9372bda03b4262b5728 (4 commits ago)

commit eb5c7e5e18076eeeff0193da4add214433ccb4a1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 4 21:00:21 2011 -0700

    Patch for ticket #1765. Provide the full site url for the the gallery link instead of trying to use url_base for the hidden link and the presentation text.

commit 66a6986d37f79d82ef56b0d666d504e0895feaaa
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 4 20:29:06 2011 -0700

    Patch for ticket #1769. Remove the rows in groups_users when the user or the group is deleted.

commit 3b8bd84629548ab7b2677324be4df52e57249a1b
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Aug 4 20:28:57 2011 -0700

    Automated update of .build_number to 167 for branch master
    Last update: 71560f1fcd5d968fc9b3a9372bda03b4262b5728 (2 commits ago)

commit a5b1972bbe9676479886ca94bb23f09407a87561
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Aug 8 21:30:38 2011 -0700

    Automated update of .build_number to 170 for branch master
    Last update: 8fd319918b8cafb48781fee02d2075473eb42267 (1 commits ago)

commit da523de77727a3d529a88b8ca1abec5ec4d2a4cc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Aug 8 20:28:31 2011 -0700

    Simplification of 59b04b897b8a664cd7334b017fac8158a6281434 for #1764:
    - Breadcrumb::build_from_item becomes Breadcrumb::array_from_item_parents
    - Eliminate Breadcrumb::$id -- it's no longer necessary
    - Fold Breadcrumb::generate_show_query_strings into Breadcrumb::array_from_item_parents
    - Create Breadcrumb::set_first() and Breadcrumb::set_last()
    - Breadcrumb::build_from_list goes away, we just use arrays for this
    - Change Search_Controller and Tag_Controller to just create an array
      of Breadcrumb instances with the first/last marked appropriately
    - Breadcrumb_Test loses a bunch of complexity.

commit 8fd319918b8cafb48781fee02d2075473eb42267
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Aug 8 20:20:31 2011 -0700

    Automated update of .build_number to 169 for branch master
    Last update: c986b45931c8c168de478c48db0a8024ce99b7b8 (1 commits ago)

commit 59b04b897b8a664cd7334b017fac8158a6281434
Merge: c986b45 dd0b622
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Aug 8 20:20:20 2011 -0700

    Merge pull request #60 from gallery/breadcrumb_final
    
    Initial commit of a patch for Ticket #1764. as discussed here: https://github.com/gallery/gallery3/pull/58/files#r72949.
    
    Create a Breadcrumb library which has two static methods for_item (which takes a an item and builds the entire
    breadcrumb for the item) or build (which takes a variable number of Breadcrumb elements and creates a breadcrumb
    based on the specified elements).
    
    Used tag->url() to build the tag album url. Escaped the query string for the search. Tightened up the breadcrumb code
    in page.html.php.
    
    When adding the show query parameter, we can't blindly concatenate using the ? separator. We have to check that we
    use a & if a query parameter already exists.

commit dd0b622ae9e269e828699928fa8bddcd17d66225
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Aug 7 13:27:27 2011 -0700

    Initial commit of a patch for Ticket #1764. as discussed here: https://github.com/gallery/gallery3/pull/58/files#r72949.
    
    Create a Breadcrumb library which has two static methods for_item (which takes a an item and builds the entire
    breadcrumb for the item) or build (which takes a variable number of Breadcrumb elements and creates a breadcrumb
    based on the specified elements).
    
    Used tag->url() to build the tag album url. Escaped the query string for the search. Tightened up the breadcrumb code
     in page.html.php.
    
    When adding the show query parameter, we can't blindly concatenate using the ? separator.  We have to check that we
    use a & if a query parameter already exists.

commit c986b45931c8c168de478c48db0a8024ce99b7b8
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Aug 4 21:00:26 2011 -0700

    Automated update of .build_number to 168 for branch master
    Last update: 71560f1fcd5d968fc9b3a9372bda03b4262b5728 (4 commits ago)

commit 0bab6e0a9cc7e1c1d6227ac5a875da31dab1d465
Merge: e736d98 5b4913c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 4 21:00:44 2011 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit e736d98eaa37df24122c746c21c473f0988d58f2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 4 21:00:21 2011 -0700

    Patch for ticket #1765. Provide the full site url for the the gallery link instead of trying to use url_base for the hidden link and the presentation text.

commit 11c76572f0875e69f513e236a4c65e2d103d56c4
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 4 20:29:06 2011 -0700

    Patch for ticket #1769. Remove the rows in groups_users when the user or the group is deleted.

commit 5b4913ca11a27d6275937d50dcf5e651812f24d8
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Aug 4 20:28:57 2011 -0700

    Automated update of .build_number to 167 for branch master
    Last update: 71560f1fcd5d968fc9b3a9372bda03b4262b5728 (2 commits ago)

commit 7f8056b593d04a9abd070399c0d4d176c650a309
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 4 19:44:19 2011 -0700

    fix for ticket #1759. correct parameter names to match usage.

commit 71560f1fcd5d968fc9b3a9372bda03b4262b5728
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Jul 24 17:11:13 2011 -0700

    Automated update of .build_number to 166 for branch master
    Last update: 4d7105d89ee286698d2f20e9261d21c6626984d3 (1 commits ago)

commit de1b4082cd99337242287889e56edc15a9fe9cda
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jul 24 17:11:04 2011 -0700

    Patch for ticket #1763.  Where offset could be converted to a null string.  It's not really a problem in the current release, but will cause isses when we serialize the offset as part of the display context.

commit cdbd4014ab5be96166534c391ad3079607697393
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Jul 24 08:38:27 2011 -0700

    Automated update of .build_number to 42 for branch 3.0.x
    Last update: 2a41c04e59539a69dfe9c8c9832453e6e6492d0f (2 commits ago)

commit 1910d99e55317b0b306812a6cbdb31d0f61e9bac
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jul 24 08:38:07 2011 -0700

    Bump version to 3.0.3

commit 219a673499f26cf917963083b8bef8bee35eceb6
Merge: 2a41c04 281768f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jul 24 08:35:52 2011 -0700

    Merge branch 'master' into 3.0.x

commit 4d7105d89ee286698d2f20e9261d21c6626984d3
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Jul 24 08:34:28 2011 -0700

    Automated update of .build_number to 165 for branch master
    Last update: 403f64bf2a91fe3ac2496a0a6a6180ece26afd82 (4 commits ago)

commit 281768fa24317aac5564f81f41170f3b2a46ecbc
Merge: ce0b9bc 98fb814
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jul 24 08:34:21 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit ce0b9bcc140eb5132307953c8a9c316c02b5a1d0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jul 24 08:32:14 2011 -0700

    Update golden file.

commit 458c6316e7810cb430b5e00b22808175f3134bc2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jul 24 08:31:39 2011 -0700

    Assign copyright to Bharat Mediratta as trustee for Gallery, per
    https://github.com/gallery/gallery3/pull/51/files

commit 98fb81458411551489804d07fceff7af8f990fca
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Jul 24 08:26:35 2011 -0700

    Automated update of .build_number to 164 for branch master
    Last update: 403f64bf2a91fe3ac2496a0a6a6180ece26afd82 (1 commits ago)

commit ad47d826cf3b1a083449287975958cb2e2f2a3c2
Merge: 403f64b 0672c8f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jul 24 08:25:57 2011 -0700

    Merge pull request #51 from chadparry/rawphoto-squash
    
    Chad Parry's framework enhancement to support replacing an image with a new version of a different mime type.  This includes code that centralizes file type management and fixes some latent issues around the relative url and path caching getting out of date.

commit 0672c8f83f068c546454bacefac123b5acb508cc
Author: Chad Parry <github@chad.parry.org>
Date:   Thu Jul 21 01:12:26 2011 -0600

    Polishing the rawphoto changes, including adding some tests.
    
    Squashed commit of the following:
    
    commit 945316a8c220b12adb687c896bcc5e86f99f46a4
    Author: Chad Parry <github@chad.parry.org>
    Date:   Thu Jul 21 01:11:13 2011 -0600
    
        Add a test for the sunny-day scenario where a rule changes a data file's MIME type.
    
    commit 4ee1ee000c8f4d8ebaae66f637bc71080486fd73
    Author: Chad Parry <github@chad.parry.org>
    Date:   Thu Jul 21 00:49:47 2011 -0600
    
        Ensure that a third-party cannot swap out a legitimate photo with an unsafe file type.
    
    commit 7dd0105bfc59c150e5640e693778f51bbaa44eab
    Author: Chad Parry <github@chad.parry.org>
    Date:   Thu Jul 21 00:48:19 2011 -0600
    
        Update the MIME type and other meta-data when a new data file is provided.
    
    commit 5a8844c7947b21cf658f22cc61f20ffa9e8f07f2
    Author: Chad Parry <github@chad.parry.org>
    Date:   Thu Jul 21 00:30:01 2011 -0600
    
        Remove a unit test that no longer applies. Replacement data files are allowed to have different MIME types.
    
    commit 0de9c6283ce4f5773cad8e92b6785d6a1f7b5e46
    Author: Chad Parry <github@chad.parry.org>
    Date:   Thu Jul 21 00:27:45 2011 -0600
    
        If one rule fails, then abort processing, rather than trying to proceed to subsequent rules.
    
    commit 41d379c2b777ae7b3a11f528971228e234f8976f
    Author: Chad Parry <github@chad.parry.org>
    Date:   Thu Jul 21 00:10:10 2011 -0600
    
        Replace an overly-complicated regular expression with a simple in_array, at Bharat's suggestion.
    
    commit 1b3f7111d4c2607baaa2da0aab3b501f2d9a1426
    Merge: 8f7904a 403f64b
    Author: Chad Parry <github@chad.parry.org>
    Date:   Wed Jul 20 21:02:56 2011 -0600
    
        Merge branch 'master' into rawphoto
    
    commit 8f7904ab62c71a7e4ee68762f936030b4dcb4ea1
    Merge: e950573 771de0a
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sat Jun 25 14:12:39 2011 -0600
    
        Merge branches 'master' and 'rawphoto' into rawphoto
    
    commit e95057337996351e49915d9f85d007d50103a4be
    Author: Chad Parry <github@chad.parry.org>
    Date:   Wed Jun 15 20:24:18 2011 -0600
    
        Merge branches 'rawphoto-squash' and 'rawphoto' into rawphoto

commit fc32b9fd472b874e79d39af35cad677b8e0bdfc2
Merge: 44b624f 403f64b
Author: Chad Parry <github@chad.parry.org>
Date:   Thu Jul 21 00:12:51 2011 -0600

    Merge branch 'master' into rawphoto-squash

commit 44b624f6fbc34cbc638afa1c2a1f6cb0ae154a03
Author: Chad Parry <github@chad.parry.org>
Date:   Thu Jul 21 00:11:52 2011 -0600

    Squashed commit of the following:
    
    commit 41d379c2b777ae7b3a11f528971228e234f8976f
    Author: Chad Parry <github@chad.parry.org>
    Date:   Thu Jul 21 00:10:10 2011 -0600
    
        Replace an overly-complicated regular expression with a simple in_array, at Bharat's suggestion.
    
    commit 1b3f7111d4c2607baaa2da0aab3b501f2d9a1426
    Merge: 8f7904a 403f64b
    Author: Chad Parry <github@chad.parry.org>
    Date:   Wed Jul 20 21:02:56 2011 -0600
    
        Merge branch 'master' into rawphoto
    
    commit 403f64bf2a91fe3ac2496a0a6a6180ece26afd82
    Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
    Date:   Tue Jul 12 21:44:14 2011 -0700
    
        Automated update of .build_number to 163 for branch master
        Last update: e8382b960a3c19bb28140833e348e6c9c9db8a8a (1 commits ago)
    
    commit 51726f9e4b8372c40b27f843fca7b783e6db9623
    Author: Tim Almdal <tnalmdal@shaw.ca>
    Date:   Tue Jul 12 21:44:40 2011 -0700
    
        Fix for ticket #1752.  Add an RSS field link for the current album. Or, in the case of a photo or movie, add a link to the rss field of the parent album.
    
    commit e8382b960a3c19bb28140833e348e6c9c9db8a8a
    Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
    Date:   Mon Jun 27 22:27:04 2011 -0700
    
        Automated update of .build_number to 162 for branch master
        Last update: 40cda7fa3fa8d9ede1f24bfa8460aab1ac681c34 (1 commits ago)
    
    commit 1afbcafe0e556ac571a5282f8b481fb90f5fb05a
    Merge: 40cda7f fc6c139
    Author: Bharat Mediratta <bharat@menalto.com>
    Date:   Mon Jun 27 22:26:41 2011 -0700
    
        Merge pull request #56 from alindeman/alindeman/1758
    
        [Fixes #1758] Link to themes codex page instead of modules codex page
    
    commit 40cda7fa3fa8d9ede1f24bfa8460aab1ac681c34
    Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
    Date:   Mon Jun 27 22:25:54 2011 -0700
    
        Automated update of .build_number to 161 for branch master
        Last update: 771de0a3746ac0d780cb5dce2a14aa5a6ddf06d7 (1 commits ago)
    
    commit aa08df7f0a839c95d268853cd745f622c98cadd0
    Merge: 771de0a 784c429
    Author: Bharat Mediratta <bharat@menalto.com>
    Date:   Mon Jun 27 22:25:46 2011 -0700
    
        Merge pull request #55 from alindeman/alindeman/1757
    
        [Fixes #1757] Redirect to root album if path comes in as main.php or index.php
    
    commit fc6c1390d3d5f3d99d75b04acf208ae3729c11ce
    Author: Andy Lindeman <alindeman@gmail.com>
    Date:   Mon Jun 27 08:25:50 2011 -0400
    
        [Fixes #1758] Link to themes codex page instead of modules codex page
    
    commit 784c429070db54e183feb3e0ea6f2726b6507081
    Author: Andy Lindeman <alindeman@gmail.com>
    Date:   Mon Jun 27 07:24:37 2011 -0400
    
        [Fixes #1757] Redirect to root album if path comes in as main.php or index.php
    
    commit 8f7904ab62c71a7e4ee68762f936030b4dcb4ea1
    Merge: e950573 771de0a
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sat Jun 25 14:12:39 2011 -0600
    
        Merge branches 'master' and 'rawphoto' into rawphoto
    
    commit e95057337996351e49915d9f85d007d50103a4be
    Author: Chad Parry <github@chad.parry.org>
    Date:   Wed Jun 15 20:24:18 2011 -0600
    
        Merge branches 'rawphoto-squash' and 'rawphoto' into rawphoto

commit 403f64bf2a91fe3ac2496a0a6a6180ece26afd82
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Jul 12 21:44:14 2011 -0700

    Automated update of .build_number to 163 for branch master
    Last update: e8382b960a3c19bb28140833e348e6c9c9db8a8a (1 commits ago)

commit 51726f9e4b8372c40b27f843fca7b783e6db9623
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jul 12 21:44:40 2011 -0700

    Fix for ticket #1752.  Add an RSS field link for the current album. Or, in the case of a photo or movie, add a link to the rss field of the parent album.

commit fc942aacda07346fa9af04853659eaeac1e766d3
Author: Thomas E. Horner <github.com@t-horner.com>
Date:   Fri Jul 8 09:33:51 2011 +0200

    availability of rss is now configurable

commit e8382b960a3c19bb28140833e348e6c9c9db8a8a
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Jun 27 22:27:04 2011 -0700

    Automated update of .build_number to 162 for branch master
    Last update: 40cda7fa3fa8d9ede1f24bfa8460aab1ac681c34 (1 commits ago)

commit 1afbcafe0e556ac571a5282f8b481fb90f5fb05a
Merge: 40cda7f fc6c139
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 27 22:26:41 2011 -0700

    Merge pull request #56 from alindeman/alindeman/1758
    
    [Fixes #1758] Link to themes codex page instead of modules codex page

commit 40cda7fa3fa8d9ede1f24bfa8460aab1ac681c34
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Jun 27 22:25:54 2011 -0700

    Automated update of .build_number to 161 for branch master
    Last update: 771de0a3746ac0d780cb5dce2a14aa5a6ddf06d7 (1 commits ago)

commit aa08df7f0a839c95d268853cd745f622c98cadd0
Merge: 771de0a 784c429
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 27 22:25:46 2011 -0700

    Merge pull request #55 from alindeman/alindeman/1757
    
    [Fixes #1757] Redirect to root album if path comes in as main.php or index.php

commit fc6c1390d3d5f3d99d75b04acf208ae3729c11ce
Author: Andy Lindeman <alindeman@gmail.com>
Date:   Mon Jun 27 08:25:50 2011 -0400

    [Fixes #1758] Link to themes codex page instead of modules codex page

commit 784c429070db54e183feb3e0ea6f2726b6507081
Author: Andy Lindeman <alindeman@gmail.com>
Date:   Mon Jun 27 07:24:37 2011 -0400

    [Fixes #1757] Redirect to root album if path comes in as main.php or index.php

commit 521a682837ab5b035d63160ea7b22540f3adf7b1
Merge: 20d7bfd 771de0a
Author: Chad Parry <github@chad.parry.org>
Date:   Sat Jun 25 14:13:25 2011 -0600

    Merge branch 'master' into rawphoto-squash

commit 771de0a3746ac0d780cb5dce2a14aa5a6ddf06d7
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Jun 25 10:28:13 2011 -0700

    Automated update of .build_number to 160 for branch master
    Last update: 71b5412627662ee04d34844b0f90ded712ad2ec7 (1 commits ago)

commit 8aa2f1fb84c4e94fe1ffa172992d43c1125f1090
Merge: 71b5412 142088a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 25 10:27:44 2011 -0700

    Merge pull request #53 from chadparry/missing_photo
    
    Gracefully handle rule failures with a broken image icon.  Fixes #1755.

commit 71b5412627662ee04d34844b0f90ded712ad2ec7
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Jun 22 19:04:23 2011 -0700

    Automated update of .build_number to 159 for branch master
    Last update: a19554f96cbec458fb8a009ba4e126bf50cd7a52 (1 commits ago)

commit c113a0a8da901455e0a49be8a1a35f669021df3d
Merge: a19554f 1889e6d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jun 22 19:04:17 2011 -0700

    Merge pull request #54 from mamouneyya/master
    
    RTL improvements for Admin WInd theme

commit 1889e6d3cb4eb0d3f268710a18084709b2f2295f
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Thu Jun 23 01:35:50 2011 +0300

    Yet another RTL review for the admin theme

commit e2cdd769029d48e96af5418b6c0df39a216bc54a
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Thu Jun 23 01:05:39 2011 +0300

    RTLing the comment admin section tabs (the right one)

commit 017251c33a2c9986af6aa1c64c4b82852651c618
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Thu Jun 23 01:04:24 2011 +0300

    revert 4650347a672296e4d1ac, it sould be applied to the admin theme

commit 76551d7bfefe1acdd8b90e7126a84497bac7c7a8
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Thu Jun 23 00:27:50 2011 +0300

    Add RTL paginator for Admin Wind (copied from Wind CSS)

commit 4650347a672296e4d1ac3d1a992945e36920303d
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Thu Jun 23 00:10:31 2011 +0300

    RTLing the tabs of admin comment section

commit 142088a6353dfd051e0dc72e1e30fa51fb6d7f2b
Author: Chad Parry <github@chad.parry.org>
Date:   Wed Jun 15 20:46:23 2011 -0600

    Gracefully handle rule failures with a broken image icon.
    This will be especially useful as third-party modules start supporting a larger variety of image types, and as errors creep into their image processing.

commit 20d7bfd6b904053c2bc27b69d32c71a321e0dae9
Author: Chad Parry <github@chad.parry.org>
Date:   Wed Jun 15 20:21:06 2011 -0600

    Write more PHP docs

commit c76c4e654880a6e03d70522ed8427154d53c1590
Author: Chad Parry <github@chad.parry.org>
Date:   Wed Jun 15 20:15:20 2011 -0600

    Refer to "rules" not "filters"

commit 2a41c04e59539a69dfe9c8c9832453e6e6492d0f
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Jun 14 20:05:17 2011 -0700

    Automated update of .build_number to 41 for branch 3.0.x
    Last update: f1642eebe5185252a3c42c0283de3b38b56821fe (2 commits ago)

commit ce1e3e6a6444bbe7c3c3c73e1f49ad28eec5bd84
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 14 20:03:20 2011 -0700

    Mark this branch as 3.0.3 and christen the release "Hotlanta"

commit efda022884ab90b998eccd9d076459dfadacb236
Merge: f1642ee 61691fd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 14 19:59:49 2011 -0700

    Merge branch 'master' into 3.0.x

commit a19554f96cbec458fb8a009ba4e126bf50cd7a52
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Jun 5 18:13:42 2011 -0700

    Automated update of .build_number to 158 for branch master
    Last update: 4a208226edbd3aeb8352b068f6f774ce410a3b3d (1 commits ago)

commit 61691fdf713950f704427640bc30776990768d98
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 5 17:16:07 2011 -0700

    Use the strict form of mb_detect_encoding for best results.
    Thanks to guthy in https://github.com/gallery/gallery3/commit/fa6f233603267505c216abc4f12663d245cd23e7#commitcomment-403145  Fixes #1745.

commit f1642eebe5185252a3c42c0283de3b38b56821fe
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue May 24 20:49:34 2011 -0700

    Automated update of .build_number to 40 for branch 3.0.x
    Last update: e6c635bd73ca34a812da55afa261ecb86552c759 (1 commits ago)

commit 4a208226edbd3aeb8352b068f6f774ce410a3b3d
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue May 24 20:49:30 2011 -0700

    Automated update of .build_number to 157 for branch master
    Last update: 84c40285276c3d9854a4e61c7f0fa8cf25b6b981 (1 commits ago)

commit 12ee4ee7d5642b84678af86f0276852e49584839
Merge: e6c635b 5e6a6d5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 24 20:49:29 2011 -0700

    Merge branch 'master' into 3.0.x

commit 5e6a6d58c2946caf54af9bb4b67f6f9a12d7449f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 24 20:48:23 2011 -0700

    Follow on to c101151616033d53587d1435881dae0fa45aeefa -- delete all
    tags in setup so that we have a blank slate, otherwise create_tag()
    will fail because sometimes there'll be other tags in the system. #1628

commit 84c40285276c3d9854a4e61c7f0fa8cf25b6b981
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue May 24 20:38:49 2011 -0700

    Automated update of .build_number to 156 for branch master
    Last update: 637e56fe45f061bdbcf8c22df257bf85733db115 (4 commits ago)

commit 050e399c480a6ef8b7e83fe55040c6060989496e
Merge: 44247fb 4a756a2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 24 20:38:03 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 44247fb2d1698286e558cd6f5ee5bb87a8612f9b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 24 20:37:51 2011 -0700

    Allow password reset even when we're in maintenance or private gallery
    mode, otherwise you can't reset your password if you forgot it when the
    Gallery is locked down.  #1735.

commit 4a756a2414e105aa15f7053f8745592b402ff0f5
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue May 24 20:34:18 2011 -0700

    Automated update of .build_number to 155 for branch master
    Last update: 637e56fe45f061bdbcf8c22df257bf85733db115 (2 commits ago)

commit 46666837f3e6c996423e4baf48513c36f0f55f28
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 24 20:33:36 2011 -0700

    Checkpoint

commit c71bb5418557c4a6ac4ff3101f7dca296a4dced5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 24 20:32:43 2011 -0700

    Reassign the copyright to the standard custodian (Bharat).  #1732.

commit e6c635bd73ca34a812da55afa261ecb86552c759
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun May 22 21:37:16 2011 -0700

    Automated update of .build_number to 39 for branch 3.0.x
    Last update: 4d98a89b92a9e3c55bf24ecf0164fe8c94637a60 (1 commits ago)

commit 637e56fe45f061bdbcf8c22df257bf85733db115
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun May 22 21:37:12 2011 -0700

    Automated update of .build_number to 154 for branch master
    Last update: db734130c5fe10408040b2326b28b102f3131271 (2 commits ago)

commit 0307d1e7d41de40c7933796e55417f39b8f0e3b6
Merge: 4d98a89 f567bdd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 22 21:36:39 2011 -0700

    Merge branch 'master' into 3.0.x

commit f567bdde2817a52afbd436421b61adad8f4a9fd8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 22 21:36:16 2011 -0700

    Clear any existing, matching g2_map rows before mapping new rows.
    This is an extra query, but should keep duplicate rows out of the
    database and let new rows supercede old ones.  Fixes #1737.

commit 784ebe75321304fe3f83cddaf3cb1030410fb5ed
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 22 21:24:27 2011 -0700

    Leave the "updated" field alone when importing comments so that if
    Akismet marks them as spam, we don't immediately flush them out of the
    database on the next visit to Admin > Content > Comments.
    
    Also warn the user about Akismet, and fix up the G2 import code to
    reimport deleted comments.

commit 4d98a89b92a9e3c55bf24ecf0164fe8c94637a60
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun May 22 21:04:09 2011 -0700

    Automated update of .build_number to 38 for branch 3.0.x
    Last update: 66ede479347c5a901278ae48646107377a238da3 (1 commits ago)

commit d8de3bdc6677fcb73bd5e218420368cd3ec8eb76
Merge: 66ede47 db73413
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 22 21:03:40 2011 -0700

    Merge branch 'master' into 3.0.x

commit 1f464cb7d84a9c701f88ca3c8efb4c92e8de1151
Author: Chad Parry <github@chad.parry.org>
Date:   Wed May 18 22:12:41 2011 -0600

    Removing an unused file.

commit 7de029d455a886c361a5bc57d50448f968143e30
Merge: 6e565a8 3a89dbb
Author: Chad Parry <github@chad.parry.org>
Date:   Wed May 18 22:10:56 2011 -0600

    Merge branch 'rawphoto' into rawphoto-squash

commit 3a89dbb359310c100a66604528376f29a4ad04a1
Author: Chad Parry <github@chad.parry.org>
Date:   Wed May 18 22:10:38 2011 -0600

    Removing an unused file.

commit 6e565a83a9549f000a88ab4b43ea976867293f2e
Merge: 1807e10 db73413
Author: Chad Parry <github@chad.parry.org>
Date:   Wed May 18 22:07:53 2011 -0600

    Merge branch 'master', remote-tracking branch 'origin' into rawphoto-squash

commit 1807e10a56be504b11900f3ffe3cfb28b7bca5ed
Author: Chad Parry <github@chad.parry.org>
Date:   Wed May 18 22:05:40 2011 -0600

    Merging some changes from rawphoto

commit 97c3ded2bae24fa18801c94548d1cfd97e19cf2a
Author: Chad Parry <github@chad.parry.org>
Date:   Wed May 18 22:01:51 2011 -0600

    Better validation for uploaded files, especially where third-party modules might make a mistake.
    
    Squashed commit of the following:
    
    commit f2336a5aaa0eb797f252388ecd7b93a82f9646fd
    Author: Chad Parry <github@chad.parry.org>
    Date:   Wed May 18 21:56:10 2011 -0600
    
        Behave reasonably if the image cannot be resized.
    
    commit e06b20738d0e0bdb80bae68b7fec2b3746192f6e
    Author: Chad Parry <github@chad.parry.org>
    Date:   Wed May 18 21:10:08 2011 -0600
    
        Adding an image representing a broken thumbnail.
        This image was derived from the equivalent Gallery2 icon. It uses the same washed-out gray color scheme as the Gallery3 missing_movie icon.
    
    commit 4e3964527b66d8ccd76fb261d549cd9861a7a780
    Author: Chad Parry <github@chad.parry.org>
    Date:   Wed May 18 20:30:28 2011 -0600
    
        Initialize legal file arrays correctly.
    
    commit e9862d8fbc4d6fd06abf157f48dce671a7283993
    Author: Chad Parry <github@chad.parry.org>
    Date:   Wed May 18 20:20:19 2011 -0600
    
        Correction for the merge conflict markers I accidentally committed.
    
    commit 5e62d327a8dc477d3edea99826183548aca3e7f3
    Author: Chad Parry <github@chad.parry.org>
    Date:   Wed May 18 20:17:36 2011 -0600
    
        Expand the legal_file events to include separate photo and movie events, and to support MIME types.
    
    commit f0bfd1fef0b6d17da9a491f7c724ae53491926a2
    Merge: 72f3fc4 db73413
    Author: Chad Parry <github@chad.parry.org>
    Date:   Wed May 18 19:49:25 2011 -0600
    
        Merge branch 'master' of https://github.com/gallery/gallery3 into rawphoto
    
        Conflicts:
        	modules/gallery/helpers/system.php
        	modules/gallery/tests/System_Helper_Test.php
    
    commit db734130c5fe10408040b2326b28b102f3131271
    Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
    Date:   Mon May 16 21:38:07 2011 -0700
    
        Automated update of .build_number to 153 for branch master
        Last update: 9aeb824aa1d15bd94bd7cef0a322c4e8a667e67b (1 commits ago)
    
    commit 8549ba30ca5045211d2efcf8e1c4f98f8a1e9f25
    Author: Chad Kieffer <ckieffer@gmail.com>
    Date:   Mon May 16 22:37:09 2011 -0600
    
        Stop IE 9 album grid craziness. Thanks floridave. Fixes #1430.
    
    commit 9aeb824aa1d15bd94bd7cef0a322c4e8a667e67b
    Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
    Date:   Sun May 8 11:43:38 2011 -0700
    
        Automated update of .build_number to 152 for branch master
        Last update: 7c80e6ef84b460dcade80c4dd5a65b41b0523505 (1 commits ago)
    
    commit 57f7e42a128848d73ad2a7ac0bf9df2fee6ba8b8
    Author: Bharat Mediratta <bharat@menalto.com>
    Date:   Sun May 8 11:42:40 2011 -0700
    
        Add the item id to the print_proxy line so that we have a little more info
        about what the original was, and extend the timeout to 90 days from 10.
        Fixes #1733.
    
    commit 7c80e6ef84b460dcade80c4dd5a65b41b0523505
    Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
    Date:   Fri May 6 11:48:43 2011 -0700
    
        Automated update of .build_number to 151 for branch master
        Last update: 5d09cbff048fc2f457c8b19adb2177a12445890a (1 commits ago)
    
    commit 80dda6f64fd26f373cc138a199652099accceb26
    Merge: 5d09cbf 46da011
    Author: Bharat Mediratta <bharat@menalto.com>
    Date:   Fri May 6 11:48:13 2011 -0700
    
        Merge pull request #52 from chadparry/tempnam
    
        Fixes #1732
    
    commit 5d09cbff048fc2f457c8b19adb2177a12445890a
    Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
    Date:   Thu May 5 21:53:39 2011 -0700
    
        Automated update of .build_number to 150 for branch master
        Last update: 011eaa6480cbee8d328a31c9ac5c8e0ddc1f8a84 (1 commits ago)
    
    commit d5a31ceedee5841531f57342266746bb62d7d923
    Author: Tim Almdal <tnalmdal@shaw.ca>
    Date:   Thu May 5 21:53:10 2011 -0700
    
        Fix for ticket 1275. Do the same checking as Kohana uses and don't worry about calling the utf8_encode routine.
        Corrected the error messages and also added a check to insure the XML Parser extension is loaded as we still need the utf8_encode function from it.
    
    commit 011eaa6480cbee8d328a31c9ac5c8e0ddc1f8a84
    Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
    Date:   Thu May 5 14:53:06 2011 -0700
    
        Automated update of .build_number to 149 for branch master
        Last update: 05ecfda36b7acee7f8d36df8391ba960097178a8 (1 commits ago)
    
    commit 5bae21864f54a03b557ab349cf97ba5f1d4276dc
    Author: Bharat Mediratta <bharat@menalto.com>
    Date:   Thu May 5 14:52:47 2011 -0700
    
        Follow-on to 6f916e49d5b431c2c1961a13d1a61fef8c02d628 -- don't make
        database calls if Gallery isn't installed, else we fail to bounce the
        user to the installer on fresh packages.  #1637.
    
    commit 46da011bf69bbc4e45757feda8f0d28e91e7fb6a
    Author: Chad Parry <github@chad.parry.org>
    Date:   Wed May 4 17:51:00 2011 -0600
    
        Remove a newline I accidentally introduced.
    
    commit 5c6c71ffcdea354b5b9b30aaea2c1f92c8860d42
    Merge: d2331bf 05ecfda
    Author: Chad Parry <github@chad.parry.org>
    Date:   Wed May 4 17:49:42 2011 -0600
    
        Merge branch 'master' into tempnam
    
    commit d2331bf43457a8d33491921f106879f087438171
    Author: Chad Parry <github@chad.parry.org>
    Date:   Wed May 4 17:48:25 2011 -0600
    
        Simplified the temp_filename implementation and removed the mocks.
    
    commit 72f3fc46f6c7c9043e730063051ecfd88bf314c8
    Author: Chad Parry <github@chad.parry.org>
    Date:   Wed May 4 17:22:15 2011 -0600
    
        Avoid "self::" because Kohana can't override it.
    
    commit 05ecfda36b7acee7f8d36df8391ba960097178a8
    Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
    Date:   Mon May 2 21:38:50 2011 -0700
    
        Automated update of .build_number to 148 for branch master
        Last update: 97400b78153620262120868b37545170416413c9 (2 commits ago)
    
    commit 229bfc5c7c760c53d1357503fd61bf9a165acf6e
    Author: Bharat Mediratta <bharat@menalto.com>
    Date:   Mon May 2 21:37:04 2011 -0700
    
        Track and redirect core.DownloadItem requests properly.  This can
        happen if the G2 was imported with rewrite on, so the g2_url in the
        g2_map table has a shortened url, but then rewrite is disabled and the
        .htaccess mod_rewrite rules are sending over a &g2_view=core.DownloadItem
        request.  Fixes #1728.
    
    commit 68370b92f5f6fa68744655f8c68b4b0ca59bf4fd
    Author: Bharat Mediratta <bharat@menalto.com>
    Date:   Mon May 2 21:36:17 2011 -0700
    
        Map the G2 album highlight thumbnail derivative id to the G3 album's
        thumbnail.  Fixes #1729.
    
    commit 13dbd3515bfb5324cfbcb3bbeafc179771b54f75
    Merge: f0f094c 97400b7
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sat Apr 30 20:33:02 2011 -0600
    
        Merge branch 'master' of https://github.com/gallery/gallery3 into rawphoto
    
    commit f0f094c3f79b09536f58083681c28f73271c506d
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sat Apr 30 20:22:49 2011 -0600
    
        Explain the conditional rename in item::save() with a comment.
    
    commit 1b3a6b85c156e4777d2aa8205b130984f55dc66d
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sat Apr 30 18:29:34 2011 -0600
    
        Improve the comment explaining why the data_file extension is important.
    
    commit c3e8c1e3b5e3cb1046acd4c923bb0ae9dbcd603a
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sat Apr 30 18:12:56 2011 -0600
    
        The data_file field is public, so we don't need to supply an accessor method.
    
    commit 0e844766baf3b3875cbb2d84579626e05e879420
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sat Apr 30 16:40:55 2011 -0600
    
        Change the signature of system::tempnam to something more appropriate for Gallery.
    
    commit 5c9a3b3f39f6ff0d5c84c2cf283d27eaebe2e66e
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sat Apr 23 21:19:47 2011 -0600
    
        Create a tempnam substitute that safely creates files with a given extension.
    
    commit 2375a02e2cdbd1ccaf7dc4d3db9d85119972e3a9
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sat Apr 30 16:40:55 2011 -0600
    
        Change the signature of system::tempnam to something more appropriate for Gallery.
    
    commit a8ca9dcf9edd54633c0c78b3af76aa974d38fc64
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sat Apr 30 16:10:06 2011 -0600
    
        Change the name of the extensions helper to legal_file.
    
    commit 7e61a01a96f5eab7212dba754ac64fdfb4d9e8ab
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sat Apr 30 16:08:49 2011 -0600
    
        Change the name of the extensions helper to legal_file.
    
    commit 4c2b2ebd3f2052898fbfb175650ed4cf49c8006e
    Author: Chad Parry <github@chad.parry.org>
    Date:   Wed Apr 27 20:52:35 2011 -0600
    
        Remove a newline at the end of the file that I accidentally introduced.
    
    commit 6d564f185e5279d6cca9a7385066514ff18a2455
    Merge: 7ff485f 4060640
    Author: Chad Parry <github@chad.parry.org>
    Date:   Wed Apr 27 20:35:58 2011 -0600
    
        Merge branch 'master' of https://github.com/gallery/gallery3 into rawphoto
    
    commit 7ff485fa48c392bbbb0370f67cb1bd6fcc00c2a4
    Author: Chad Parry <github@chad.parry.org>
    Date:   Wed Apr 27 20:29:06 2011 -0600
    
        Move the extensions helpers out of the Kohana system directory and into their own Gallery Extensions class.
    
    commit 26585fed03236f0f70a75959e1d3002025f4e15e
    Merge: 809567f c8f90e8
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sun Apr 24 08:28:39 2011 -0600
    
        Merge branch 'master' of https://github.com/gallery/gallery3 into rawphoto
    
    commit 809567f12850f59bdeb47a2963f6968b99b5a201
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sun Apr 24 08:10:04 2011 -0600
    
        Expose the data file field.
    
    commit fcb06bf175bb9eeff36d9c294e97ace9374ef0f3
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sun Apr 24 00:45:12 2011 -0600
    
        Don't assign to the item->name field if the name is unchanged, because the save method will crash.
    
    commit c6ef706d70c7e48bea1145eec1b13fb5683e023f
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sat Apr 23 22:55:59 2011 -0600
    
        Preserve old data files long enough for them to be available to event handlers.
    
    commit 0d6a3a3cfc4f38f450db9e18da47a5e2ad826af8
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sat Apr 23 21:19:47 2011 -0600
    
        Create a tempnam substitute that safely creates files with a given extension.
    
    commit e149cf7238a1f8eaddfc68580f2d636dd8255795
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sat Apr 23 16:39:25 2011 -0600
    
        Support data files that change their extension and MIME type.
    
    commit 6702104f571413e4d57db3515b2070c48d3e9b55
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sat Apr 23 16:35:00 2011 -0600
    
        Resolve an infinite recursion that happens when the path caches are updated during saving.
    
    commit 944cb72eea946f4c45a04b7e4c7c33929fa8b9f3
    Merge: 567522b 5af74d4
    Author: Chad Parry <github@chad.parry.org>
    Date:   Fri Apr 22 14:10:42 2011 -0600
    
        Merge remote branch 'origin/master' into rawphoto
    
    commit 567522bfa08c370bb5baf8454afc5b04bc9e49b4
    Author: Chad Parry <github@chad.parry.org>
    Date:   Thu Apr 21 20:12:32 2011 -0600
    
        Add an event for when a new graphics toolkit is chosen.
    
    commit 31ba081b793141ca36866a6dd349cd2eac5af68e
    Author: Chad Parry <github@chad.parry.org>
    Date:   Thu Apr 21 02:06:53 2011 -0600
    
        Add an event that will collect all valid filename extensions.

commit f2336a5aaa0eb797f252388ecd7b93a82f9646fd
Author: Chad Parry <github@chad.parry.org>
Date:   Wed May 18 21:56:10 2011 -0600

    Behave reasonably if the image cannot be resized.

commit e06b20738d0e0bdb80bae68b7fec2b3746192f6e
Author: Chad Parry <github@chad.parry.org>
Date:   Wed May 18 21:10:08 2011 -0600

    Adding an image representing a broken thumbnail.
    This image was derived from the equivalent Gallery2 icon. It uses the same washed-out gray color scheme as the Gallery3 missing_movie icon.

commit 4e3964527b66d8ccd76fb261d549cd9861a7a780
Author: Chad Parry <github@chad.parry.org>
Date:   Wed May 18 20:30:28 2011 -0600

    Initialize legal file arrays correctly.

commit e9862d8fbc4d6fd06abf157f48dce671a7283993
Author: Chad Parry <github@chad.parry.org>
Date:   Wed May 18 20:20:19 2011 -0600

    Correction for the merge conflict markers I accidentally committed.

commit 5e62d327a8dc477d3edea99826183548aca3e7f3
Author: Chad Parry <github@chad.parry.org>
Date:   Wed May 18 20:17:36 2011 -0600

    Expand the legal_file events to include separate photo and movie events, and to support MIME types.

commit f0bfd1fef0b6d17da9a491f7c724ae53491926a2
Merge: 72f3fc4 db73413
Author: Chad Parry <github@chad.parry.org>
Date:   Wed May 18 19:49:25 2011 -0600

    Merge branch 'master' of https://github.com/gallery/gallery3 into rawphoto
    
    Conflicts:
    	modules/gallery/helpers/system.php
    	modules/gallery/tests/System_Helper_Test.php

commit db734130c5fe10408040b2326b28b102f3131271
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon May 16 21:38:07 2011 -0700

    Automated update of .build_number to 153 for branch master
    Last update: 9aeb824aa1d15bd94bd7cef0a322c4e8a667e67b (1 commits ago)

commit 8549ba30ca5045211d2efcf8e1c4f98f8a1e9f25
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Mon May 16 22:37:09 2011 -0600

    Stop IE 9 album grid craziness. Thanks floridave. Fixes #1430.

commit 66ede479347c5a901278ae48646107377a238da3
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun May 8 21:48:18 2011 -0700

    Automated update of .build_number to 37 for branch 3.0.x
    Last update: f541b479f2c46246596c2da5b833f73c3c70a444 (1 commits ago)

commit 1969a662e89224ee226d8cf7c680ee5e0b0bbcbd
Merge: f541b47 9aeb824
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 8 21:47:54 2011 -0700

    Merge branch 'master' into 3.0.x

commit 9aeb824aa1d15bd94bd7cef0a322c4e8a667e67b
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun May 8 11:43:38 2011 -0700

    Automated update of .build_number to 152 for branch master
    Last update: 7c80e6ef84b460dcade80c4dd5a65b41b0523505 (1 commits ago)

commit 57f7e42a128848d73ad2a7ac0bf9df2fee6ba8b8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 8 11:42:40 2011 -0700

    Add the item id to the print_proxy line so that we have a little more info
    about what the original was, and extend the timeout to 90 days from 10.
    Fixes #1733.

commit 7c80e6ef84b460dcade80c4dd5a65b41b0523505
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri May 6 11:48:43 2011 -0700

    Automated update of .build_number to 151 for branch master
    Last update: 5d09cbff048fc2f457c8b19adb2177a12445890a (1 commits ago)

commit 80dda6f64fd26f373cc138a199652099accceb26
Merge: 5d09cbf 46da011
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri May 6 11:48:13 2011 -0700

    Merge pull request #52 from chadparry/tempnam
    
    Fixes #1732

commit 5d09cbff048fc2f457c8b19adb2177a12445890a
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu May 5 21:53:39 2011 -0700

    Automated update of .build_number to 150 for branch master
    Last update: 011eaa6480cbee8d328a31c9ac5c8e0ddc1f8a84 (1 commits ago)

commit d5a31ceedee5841531f57342266746bb62d7d923
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu May 5 21:53:10 2011 -0700

    Fix for ticket 1275. Do the same checking as Kohana uses and don't worry about calling the utf8_encode routine.
    Corrected the error messages and also added a check to insure the XML Parser extension is loaded as we still need the utf8_encode function from it.

commit f541b479f2c46246596c2da5b833f73c3c70a444
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu May 5 14:56:00 2011 -0700

    Automated update of .build_number to 36 for branch 3.0.x
    Last update: 5114c31647c06dc0379fb170c7b72e7ec8a7cb40 (1 commits ago)

commit 0416df5715db96af4189a335ff7d841e7aca5bd4
Merge: 5114c31 5bae218
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 5 14:55:38 2011 -0700

    Merge branch 'master' into 3.0.x

commit 011eaa6480cbee8d328a31c9ac5c8e0ddc1f8a84
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu May 5 14:53:06 2011 -0700

    Automated update of .build_number to 149 for branch master
    Last update: 05ecfda36b7acee7f8d36df8391ba960097178a8 (1 commits ago)

commit 5bae21864f54a03b557ab349cf97ba5f1d4276dc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 5 14:52:47 2011 -0700

    Follow-on to 6f916e49d5b431c2c1961a13d1a61fef8c02d628 -- don't make
    database calls if Gallery isn't installed, else we fail to bounce the
    user to the installer on fresh packages.  #1637.

commit 46da011bf69bbc4e45757feda8f0d28e91e7fb6a
Author: Chad Parry <github@chad.parry.org>
Date:   Wed May 4 17:51:00 2011 -0600

    Remove a newline I accidentally introduced.

commit 5c6c71ffcdea354b5b9b30aaea2c1f92c8860d42
Merge: d2331bf 05ecfda
Author: Chad Parry <github@chad.parry.org>
Date:   Wed May 4 17:49:42 2011 -0600

    Merge branch 'master' into tempnam

commit d2331bf43457a8d33491921f106879f087438171
Author: Chad Parry <github@chad.parry.org>
Date:   Wed May 4 17:48:25 2011 -0600

    Simplified the temp_filename implementation and removed the mocks.

commit 72f3fc46f6c7c9043e730063051ecfd88bf314c8
Author: Chad Parry <github@chad.parry.org>
Date:   Wed May 4 17:22:15 2011 -0600

    Avoid "self::" because Kohana can't override it.

commit 5114c31647c06dc0379fb170c7b72e7ec8a7cb40
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon May 2 21:40:02 2011 -0700

    Automated update of .build_number to 35 for branch 3.0.x
    Last update: 3c6dfa61d40fdf88c17574855bf4451f0308a775 (1 commits ago)

commit b0ebf50a0531ac42cfecd0709bfe2fe9ba6f0b70
Merge: 3c6dfa6 229bfc5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 2 21:39:42 2011 -0700

    Merge branch 'master' into 3.0.x

commit 05ecfda36b7acee7f8d36df8391ba960097178a8
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon May 2 21:38:50 2011 -0700

    Automated update of .build_number to 148 for branch master
    Last update: 97400b78153620262120868b37545170416413c9 (2 commits ago)

commit 229bfc5c7c760c53d1357503fd61bf9a165acf6e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 2 21:37:04 2011 -0700

    Track and redirect core.DownloadItem requests properly.  This can
    happen if the G2 was imported with rewrite on, so the g2_url in the
    g2_map table has a shortened url, but then rewrite is disabled and the
    .htaccess mod_rewrite rules are sending over a &g2_view=core.DownloadItem
    request.  Fixes #1728.

commit 68370b92f5f6fa68744655f8c68b4b0ca59bf4fd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 2 21:36:17 2011 -0700

    Map the G2 album highlight thumbnail derivative id to the G3 album's
    thumbnail.  Fixes #1729.

commit d2d37fe3f2e550dff0c62afa9faa3100f305df0e
Author: Chad Parry <github@chad.parry.org>
Date:   Sat Apr 30 21:33:20 2011 -0600

    Results from a round of feedback with Bharat.
    
    Squashed commit of the following:
    
    commit 13dbd3515bfb5324cfbcb3bbeafc179771b54f75
    Merge: f0f094c 97400b7
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sat Apr 30 20:33:02 2011 -0600
    
        Merge branch 'master' of https://github.com/gallery/gallery3 into rawphoto
    
    commit f0f094c3f79b09536f58083681c28f73271c506d
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sat Apr 30 20:22:49 2011 -0600
    
        Explain the conditional rename in item::save() with a comment.
    
    commit 1b3a6b85c156e4777d2aa8205b130984f55dc66d
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sat Apr 30 18:29:34 2011 -0600
    
        Improve the comment explaining why the data_file extension is important.
    
    commit c3e8c1e3b5e3cb1046acd4c923bb0ae9dbcd603a
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sat Apr 30 18:12:56 2011 -0600
    
        The data_file field is public, so we don't need to supply an accessor method.
    
    commit 2375a02e2cdbd1ccaf7dc4d3db9d85119972e3a9
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sat Apr 30 16:40:55 2011 -0600
    
        Change the signature of system::tempnam to something more appropriate for Gallery.
    
    commit a8ca9dcf9edd54633c0c78b3af76aa974d38fc64
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sat Apr 30 16:10:06 2011 -0600
    
        Change the name of the extensions helper to legal_file.
    
    commit 7e61a01a96f5eab7212dba754ac64fdfb4d9e8ab
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sat Apr 30 16:08:49 2011 -0600
    
        Change the name of the extensions helper to legal_file.
    
    commit 4c2b2ebd3f2052898fbfb175650ed4cf49c8006e
    Author: Chad Parry <github@chad.parry.org>
    Date:   Wed Apr 27 20:52:35 2011 -0600
    
        Remove a newline at the end of the file that I accidentally introduced.
    
    commit 6d564f185e5279d6cca9a7385066514ff18a2455
    Merge: 7ff485f 4060640
    Author: Chad Parry <github@chad.parry.org>
    Date:   Wed Apr 27 20:35:58 2011 -0600
    
        Merge branch 'master' of https://github.com/gallery/gallery3 into rawphoto
    
    commit 7ff485fa48c392bbbb0370f67cb1bd6fcc00c2a4
    Author: Chad Parry <github@chad.parry.org>
    Date:   Wed Apr 27 20:29:06 2011 -0600
    
        Move the extensions helpers out of the Kohana system directory and into their own Gallery Extensions class.
    
    commit 26585fed03236f0f70a75959e1d3002025f4e15e
    Merge: 809567f c8f90e8
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sun Apr 24 08:28:39 2011 -0600
    
        Merge branch 'master' of https://github.com/gallery/gallery3 into rawphoto
    
    commit 809567f12850f59bdeb47a2963f6968b99b5a201
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sun Apr 24 08:10:04 2011 -0600
    
        Expose the data file field.
    
    commit fcb06bf175bb9eeff36d9c294e97ace9374ef0f3
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sun Apr 24 00:45:12 2011 -0600
    
        Don't assign to the item->name field if the name is unchanged, because the save method will crash.
    
    commit c6ef706d70c7e48bea1145eec1b13fb5683e023f
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sat Apr 23 22:55:59 2011 -0600
    
        Preserve old data files long enough for them to be available to event handlers.
    
    commit 0d6a3a3cfc4f38f450db9e18da47a5e2ad826af8
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sat Apr 23 21:19:47 2011 -0600
    
        Create a tempnam substitute that safely creates files with a given extension.
    
    commit e149cf7238a1f8eaddfc68580f2d636dd8255795
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sat Apr 23 16:39:25 2011 -0600
    
        Support data files that change their extension and MIME type.
    
    commit 6702104f571413e4d57db3515b2070c48d3e9b55
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sat Apr 23 16:35:00 2011 -0600
    
        Resolve an infinite recursion that happens when the path caches are updated during saving.
    
    commit 944cb72eea946f4c45a04b7e4c7c33929fa8b9f3
    Merge: 567522b 5af74d4
    Author: Chad Parry <github@chad.parry.org>
    Date:   Fri Apr 22 14:10:42 2011 -0600
    
        Merge remote branch 'origin/master' into rawphoto
    
    commit 567522bfa08c370bb5baf8454afc5b04bc9e49b4
    Author: Chad Parry <github@chad.parry.org>
    Date:   Thu Apr 21 20:12:32 2011 -0600
    
        Add an event for when a new graphics toolkit is chosen.
    
    commit 31ba081b793141ca36866a6dd349cd2eac5af68e
    Author: Chad Parry <github@chad.parry.org>
    Date:   Thu Apr 21 02:06:53 2011 -0600
    
        Add an event that will collect all valid filename extensions.

commit 3a6b7438660520a725fb79a2cd360b7302aff7a9
Merge: b875368 97400b7
Author: Chad Parry <github@chad.parry.org>
Date:   Sat Apr 30 21:32:33 2011 -0600

    Merge branch 'master' into rawphoto-squash

commit 13dbd3515bfb5324cfbcb3bbeafc179771b54f75
Merge: f0f094c 97400b7
Author: Chad Parry <github@chad.parry.org>
Date:   Sat Apr 30 20:33:02 2011 -0600

    Merge branch 'master' of https://github.com/gallery/gallery3 into rawphoto

commit f0f094c3f79b09536f58083681c28f73271c506d
Author: Chad Parry <github@chad.parry.org>
Date:   Sat Apr 30 20:22:49 2011 -0600

    Explain the conditional rename in item::save() with a comment.

commit 1b3a6b85c156e4777d2aa8205b130984f55dc66d
Author: Chad Parry <github@chad.parry.org>
Date:   Sat Apr 30 18:29:34 2011 -0600

    Improve the comment explaining why the data_file extension is important.

commit c3e8c1e3b5e3cb1046acd4c923bb0ae9dbcd603a
Author: Chad Parry <github@chad.parry.org>
Date:   Sat Apr 30 18:12:56 2011 -0600

    The data_file field is public, so we don't need to supply an accessor method.

commit 0e844766baf3b3875cbb2d84579626e05e879420
Author: Chad Parry <github@chad.parry.org>
Date:   Sat Apr 30 16:40:55 2011 -0600

    Change the signature of system::tempnam to something more appropriate for Gallery.

commit 5c9a3b3f39f6ff0d5c84c2cf283d27eaebe2e66e
Author: Chad Parry <github@chad.parry.org>
Date:   Sat Apr 23 21:19:47 2011 -0600

    Create a tempnam substitute that safely creates files with a given extension.

commit 97400b78153620262120868b37545170416413c9
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 30 15:44:54 2011 -0700

    Automated update of .build_number to 147 for branch master
    Last update: c2f20c0c4a0337b45b2eb803170572b067e18dd9 (1 commits ago)

commit 9e080efff3cf9c706dfb2c69dacc19328196ec01
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 30 15:43:57 2011 -0700

    Differentiate between invalid, missing and broken G2 configs and
    present the user with feedback in the form.  Fixes #1727.

commit 2375a02e2cdbd1ccaf7dc4d3db9d85119972e3a9
Author: Chad Parry <github@chad.parry.org>
Date:   Sat Apr 30 16:40:55 2011 -0600

    Change the signature of system::tempnam to something more appropriate for Gallery.

commit a8ca9dcf9edd54633c0c78b3af76aa974d38fc64
Author: Chad Parry <github@chad.parry.org>
Date:   Sat Apr 30 16:10:06 2011 -0600

    Change the name of the extensions helper to legal_file.

commit 7e61a01a96f5eab7212dba754ac64fdfb4d9e8ab
Author: Chad Parry <github@chad.parry.org>
Date:   Sat Apr 30 16:08:49 2011 -0600

    Change the name of the extensions helper to legal_file.

commit b875368167658fd7992812504674afeb61c64831
Author: Chad Parry <github@chad.parry.org>
Date:   Thu Apr 28 19:41:44 2011 -0600

    This patch helps provide raw photo support with some small changes to the framework. Items can now change their extension and MIME type.
    
    Squashed commit of the following:
    
    commit 4c2b2ebd3f2052898fbfb175650ed4cf49c8006e
    Author: Chad Parry <github@chad.parry.org>
    Date:   Wed Apr 27 20:52:35 2011 -0600
    
        Remove a newline at the end of the file that I accidentally introduced.
    
    commit 6d564f185e5279d6cca9a7385066514ff18a2455
    Merge: 7ff485f 4060640
    Author: Chad Parry <github@chad.parry.org>
    Date:   Wed Apr 27 20:35:58 2011 -0600
    
        Merge branch 'master' of https://github.com/gallery/gallery3 into rawphoto
    
    commit 7ff485fa48c392bbbb0370f67cb1bd6fcc00c2a4
    Author: Chad Parry <github@chad.parry.org>
    Date:   Wed Apr 27 20:29:06 2011 -0600
    
        Move the extensions helpers out of the Kohana system directory and into their own Gallery Extensions class.
    
    commit 26585fed03236f0f70a75959e1d3002025f4e15e
    Merge: 809567f c8f90e8
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sun Apr 24 08:28:39 2011 -0600
    
        Merge branch 'master' of https://github.com/gallery/gallery3 into rawphoto
    
    commit 809567f12850f59bdeb47a2963f6968b99b5a201
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sun Apr 24 08:10:04 2011 -0600
    
        Expose the data file field.
    
    commit fcb06bf175bb9eeff36d9c294e97ace9374ef0f3
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sun Apr 24 00:45:12 2011 -0600
    
        Don't assign to the item->name field if the name is unchanged, because the save method will crash.
    
    commit c6ef706d70c7e48bea1145eec1b13fb5683e023f
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sat Apr 23 22:55:59 2011 -0600
    
        Preserve old data files long enough for them to be available to event handlers.
    
    commit 0d6a3a3cfc4f38f450db9e18da47a5e2ad826af8
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sat Apr 23 21:19:47 2011 -0600
    
        Create a tempnam substitute that safely creates files with a given extension.
    
    commit e149cf7238a1f8eaddfc68580f2d636dd8255795
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sat Apr 23 16:39:25 2011 -0600
    
        Support data files that change their extension and MIME type.
    
    commit 6702104f571413e4d57db3515b2070c48d3e9b55
    Author: Chad Parry <github@chad.parry.org>
    Date:   Sat Apr 23 16:35:00 2011 -0600
    
        Resolve an infinite recursion that happens when the path caches are updated during saving.
    
    commit 944cb72eea946f4c45a04b7e4c7c33929fa8b9f3
    Merge: 567522b 5af74d4
    Author: Chad Parry <github@chad.parry.org>
    Date:   Fri Apr 22 14:10:42 2011 -0600
    
        Merge remote branch 'origin/master' into rawphoto
    
    commit 567522bfa08c370bb5baf8454afc5b04bc9e49b4
    Author: Chad Parry <github@chad.parry.org>
    Date:   Thu Apr 21 20:12:32 2011 -0600
    
        Add an event for when a new graphics toolkit is chosen.
    
    commit 31ba081b793141ca36866a6dd349cd2eac5af68e
    Author: Chad Parry <github@chad.parry.org>
    Date:   Thu Apr 21 02:06:53 2011 -0600
    
        Add an event that will collect all valid filename extensions.

commit c2f20c0c4a0337b45b2eb803170572b067e18dd9
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Apr 28 11:36:19 2011 -0700

    Automated update of .build_number to 146 for branch master
    Last update: 406064087662184ec7f85297b9cdf83a77976616 (1 commits ago)

commit a486ce9f988092b3988b1dace9223f6d953e2a2a
Merge: 4060640 4ca2c5f
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Apr 28 11:36:10 2011 -0700

    Merged pull request #50 from mamouneyya/master.
    
    As of ckieffer request

commit 4ca2c5fbad1dc984fcbaaf02295e1c8db7b6215a
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Thu Apr 28 19:46:01 2011 +0300

    remove .rtl class from properties as they're now separated in a different file that is being called after screen.css. Also reset the left margin for list elements

commit 4c2b2ebd3f2052898fbfb175650ed4cf49c8006e
Author: Chad Parry <github@chad.parry.org>
Date:   Wed Apr 27 20:52:35 2011 -0600

    Remove a newline at the end of the file that I accidentally introduced.

commit 6d564f185e5279d6cca9a7385066514ff18a2455
Merge: 7ff485f 4060640
Author: Chad Parry <github@chad.parry.org>
Date:   Wed Apr 27 20:35:58 2011 -0600

    Merge branch 'master' of https://github.com/gallery/gallery3 into rawphoto

commit 406064087662184ec7f85297b9cdf83a77976616
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Apr 27 19:30:28 2011 -0700

    Automated update of .build_number to 145 for branch master
    Last update: b57dd202db3c4b007e83aff3df9da7920691d76d (2 commits ago)

commit 4e20e71d0375ed65d75dbdb12113f737db90b3e7
Merge: 7f48671 7577d02
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Apr 27 19:30:00 2011 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 7ff485fa48c392bbbb0370f67cb1bd6fcc00c2a4
Author: Chad Parry <github@chad.parry.org>
Date:   Wed Apr 27 20:29:06 2011 -0600

    Move the extensions helpers out of the Kohana system directory and into their own Gallery Extensions class.

commit 7577d02fe2f2c37a79caf6a32b246f5a046c917a
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Apr 26 21:45:28 2011 -0700

    Automated update of .build_number to 144 for branch master
    Last update: 192cb124aa0f38ed804299bf39c15538cc768d7a (3 commits ago)

commit 77d5c86699e5d948ef46a398d206760a1fde7fa1
Merge: 2e6967e b7bc8f4
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Apr 26 22:44:50 2011 -0600

    Merge branch 'master' of github.com:gallery/gallery3

commit 2e6967e8a0d061e6a0da0e34d1e94690654e120f
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Apr 26 22:44:21 2011 -0600

    Add right padding to list elements in the new g-text class.

commit 3c6dfa61d40fdf88c17574855bf4451f0308a775
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Apr 26 21:43:14 2011 -0700

    Automated update of .build_number to 34 for branch 3.0.x
    Last update: b804655f17d6b25f382e2f9f444b2513711e9962 (1 commits ago)

commit a4689063be23ea49686588c497a8791451508651
Merge: b804655 b7bc8f4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Apr 26 21:42:44 2011 -0700

    Merge branch 'master' into 3.0.x

commit b7bc8f4818b93b60e511e8d0a79b227158d03eda
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Apr 26 21:39:14 2011 -0700

    Automated update of .build_number to 143 for branch master
    Last update: 192cb124aa0f38ed804299bf39c15538cc768d7a (1 commits ago)

commit 4fa46d6a0433347e456be8c0d309d2da59dcecd5
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Apr 26 22:38:53 2011 -0600

    Move wind and admin_wind RTL style definitions out to their own file. Call that file when an RTL language is selected.

commit 192cb124aa0f38ed804299bf39c15538cc768d7a
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Apr 26 21:05:12 2011 -0700

    Automated update of .build_number to 142 for branch master
    Last update: c6d1d6a6aed96f772690b74ac0be482bc2128a8d (5 commits ago)

commit cd166c20707998d9aa6982d6746b14eb6c2cebfc
Merge: 743e2f8 ebdc97b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Apr 26 21:04:56 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 743e2f88d8cbba7ea5f7b3b78ab721c141d1ec99
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Apr 26 21:02:43 2011 -0700

    Overhaul the Admin > Content > Comments page.  Use a tabbed interface
    for consistency with other parts of the admin UI (ie: G2 import).
    
    The UI is now Ajax driven because that's how jQuery tabs works best in
    this case.  This requires a little finagling in JS to get the
    paginator links to load properly.  While I'm in there, add a paginator
    at the top of the table, make the buttons in the delete tab sane and
    smooth scroll back to the top of the tab when switching pages.
    
    Fixes #1702

commit 77875e2fab86c9fc74c775545cd7df6b9a0fbc40
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Apr 26 21:01:58 2011 -0700

    Include jquery.scrollTo.js.  Fixes #1720.

commit 466b24307c4ac827cd4075a07a5fff567b6f4093
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Apr 26 21:01:36 2011 -0700

    Hide the paginator when there are no children.  #1721.

commit ebdc97b140fc5fce83d25da43b8bfcd595315ce4
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Apr 26 09:49:52 2011 -0700

    Automated update of .build_number to 141 for branch master
    Last update: c6d1d6a6aed96f772690b74ac0be482bc2128a8d (1 commits ago)

commit 5cf38ed816006af52fa08475d2957a6f18846887
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Apr 26 09:48:21 2011 -0700

    Stop using Pagination() and instead use $theme->pager() in views.
    Move the pager() function up to Gallery_View and replace
    themes/admin_wind/views/pager.html.php (Pagination based) with a
    modified version from the wind theme in
    themes/admin_wind/views/paginator.html.php.  Fixes #1718.

commit c6d1d6a6aed96f772690b74ac0be482bc2128a8d
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Apr 25 23:27:54 2011 -0700

    Automated update of .build_number to 140 for branch master
    Last update: 10f117238a4302092fdfb71a02542281f2b2d356 (10 commits ago)

commit 0b37e442cec3a0a45e63091e8c44b298eb10e808
Merge: cbd04e1 8665988
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Apr 25 23:27:25 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit cbd04e1ae02491ab4c213fe03d62d12ca1546251
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Apr 25 23:26:43 2011 -0700

    Move random::string() to be test::random_string() and have it return a
    random string of any length.  Also introduce test::lorem_ipsum() and
    use that in places where we want strings of words.  Fixes #1713.

commit 8665988ff37a36fef5042310d196de6250111456
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Apr 25 22:16:29 2011 -0700

    Automated update of .build_number to 139 for branch master
    Last update: 10f117238a4302092fdfb71a02542281f2b2d356 (8 commits ago)

commit 8814d7742d6689ce03bc3393e9ff436f31f2b58b
Merge: 91c8387 b2327f9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Apr 25 22:15:58 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 91c83874e518b9106a4d54d8c3bbe28e4c055123
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Apr 25 22:15:34 2011 -0700

    Fix a bug introduced in 526859d9605d137ebe053ecbd80f46ca6a331194 where
    we changed the behavior of the slug code and included the file
    extension, not just the name.  This broke
    Item_Model_Test::move_photo_with_conflicting_target_gets_uniqified_test
    so yay for unit tests!  #1668

commit b2327f97b47eab849a88652bdfe2106c430288df
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Apr 25 22:09:12 2011 -0700

    Automated update of .build_number to 138 for branch master
    Last update: 10f117238a4302092fdfb71a02542281f2b2d356 (6 commits ago)

commit 858e3a15b9615d1f0131261310d3ec9846f5e44c
Merge: 11af2bc 3c63494
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Apr 25 22:08:48 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 11af2bc93f5966c4851d6752ded1da5de8450626
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Apr 25 22:06:44 2011 -0700

    Update test golden files.

commit b0285f770e72a03591939533485c90c63af00f1b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Apr 25 22:06:36 2011 -0700

    Add appropriate preamble.  #1696, #1698

commit 3c63494a2edff31eaae0259ce80c6ced6a618a4f
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Apr 24 23:08:19 2011 -0700

    Automated update of .build_number to 137 for branch master
    Last update: 10f117238a4302092fdfb71a02542281f2b2d356 (3 commits ago)

commit 27bfa6a3383486b3ca5f963f9724f5bb6119b574
Merge: 4e75246 4ad9463
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 24 23:07:47 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 4e7524664a24dd2ca2309c9d67843a19e74b48e0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 24 23:04:50 2011 -0700

    Show the tabs after the page has loaded to prevent Firefox from rendering the
    unstyled page and then flashing.  Fixes #1705.

commit 4ad94639a638c38db7fcd9c89f8f3f241a529c83
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Apr 24 22:59:55 2011 -0700

    Automated update of .build_number to 136 for branch master
    Last update: 10f117238a4302092fdfb71a02542281f2b2d356 (1 commits ago)

commit 41bc967808bff9add8f75b441169a4ba46213f24
Merge: 10f1172 1950f9c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 24 22:57:24 2011 -0700

    Merge branch 'master' of git://github.com/ckieffer/gallery3

commit 10f117238a4302092fdfb71a02542281f2b2d356
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Apr 24 22:55:59 2011 -0700

    Automated update of .build_number to 135 for branch master
    Last update: 15f4657452795c2852c58c9f1840ce4e1f58d401 (5 commits ago)

commit 751b9be6742ff5ef7106fa0a56387e69f26f489b
Merge: 8533420 8440764
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 24 22:55:31 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 8533420f5d307e81a90c3d26a75b666350aee0f2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 24 22:55:01 2011 -0700

    Look for and return embed.php files in the autocomplete list if we can
    find them.  Fixes #1708.

commit 84407648fe0115875908ebd8c68fc1755d3ecd2b
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Apr 24 22:52:02 2011 -0700

    Automated update of .build_number to 134 for branch master
    Last update: 15f4657452795c2852c58c9f1840ce4e1f58d401 (3 commits ago)

commit 729b62abec87a96767ef19c38e77919714c04541
Merge: 953be78 ded13a9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 24 22:51:54 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 953be781dc91254599224fa6e95fcc435e787975
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 24 22:51:14 2011 -0700

    Refactor the meat of g2_import::import_album() off into a separate
    function so taht we can call it on the root album as well.  Fixes

commit ded13a931a1e3f12649969bf7188febeb19ceb51
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Apr 24 22:46:26 2011 -0700

    Automated update of .build_number to 133 for branch master
    Last update: 15f4657452795c2852c58c9f1840ce4e1f58d401 (1 commits ago)

commit 701c1fb12f2f254d8d7e7756a09cb5e825123a2f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 24 22:45:45 2011 -0700

    Ignore the presort when transferring over sort orders.  Fixes #1710.

commit 1950f9c46652d76b8734df3b08bfcf4a4ffeb6fb
Merge: 8e7a8fd 15f4657
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Apr 24 23:05:03 2011 -0600

    Merge branch 'master' of git://github.com/gallery/gallery3

commit 15f4657452795c2852c58c9f1840ce4e1f58d401
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Apr 24 21:03:16 2011 -0700

    Automated update of .build_number to 132 for branch master
    Last update: 6100de33ac9ec61350301b4c1f45bcaf383e4841 (1 commits ago)

commit ea2127c3b2ddef5709e02b4804c074bd1f942159
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 24 21:02:34 2011 -0700

    Fix a bug introduced in f2477703faa7cd05ff1aa16da3ecef7b666bef40 which
    was a fix for #1581 that caused us to skip adding highlights for any
    albums that had no sub-albums.

commit 8e7a8fd2dc3245c2d236a2cd33d8c1a61ef9963c
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Apr 24 14:09:03 2011 -0400

    Add a bit of space below progress bars. Fixes #1703.

commit f4d76a8abe04612efe01f146617d760ffdd4b69f
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Apr 24 13:56:39 2011 -0400

    Don't put the Admin > Theme Options Save button in a fieldset.

commit ce5a2532ebcd5131056df908d2da831e91407e9d
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Apr 24 13:41:12 2011 -0400

    Extend .g-text list styles to ordered lists to admin_wind theme. Add .g-text list styles to wind theme.

commit 6100de33ac9ec61350301b4c1f45bcaf383e4841
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Apr 24 09:01:18 2011 -0700

    Automated update of .build_number to 131 for branch master
    Last update: bbd5417fef9c3ad28c6e57cb787e86684f49a71b (1 commits ago)

commit f8493a1df26f242959e931d862c5f1282dd324e8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 24 08:57:09 2011 -0700

    Revert my two "fixes" on top of Andy's tag combine change.  Leave Tag_Model::items() calling
    Item_Model::viewable() because it's too dangerous to separate that out, and it's fragile to
    rely on only admins doing tag combines.
    
    Revert "Undo the change made in 5ce85636329b14673718836b3631a3e46efdc3bb because it messes up tag counts"
    - This reverts commit 67d2e8081c6e5f0b679881bca3fdc81fe1e78ccc.
    Revert "Move the calculation for item_related_update ahead of the duplicate"
    - This reverts commit 5ce85636329b14673718836b3631a3e46efdc3bb.

commit 90458673f41ede656b6e2ad07c8545b2450c8e41
Merge: b4cdd01 bbd5417
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Apr 24 11:56:12 2011 -0400

    Merge branch 'master' of git://github.com/gallery/gallery3

commit b4cdd016dc97f2df608bb14d2088cb4ddbd32c35
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Apr 24 11:53:29 2011 -0400

    Third times the charm. Rethink unordered lists and bullets. Revert to turning them off by default and provide a new class, g-text, to define a list or a section of text as needing to display bullets.

commit bbd5417fef9c3ad28c6e57cb787e86684f49a71b
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Apr 24 07:50:19 2011 -0700

    Automated update of .build_number to 130 for branch master
    Last update: ce14f5fb906335c35bdb2754bb0cd482e7526f09 (10 commits ago)

commit 09fae16e760e439747eedea95aa4ec8ff4f404a8
Merge: b89c402 c8f90e8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 24 07:49:50 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit b89c40242f85ecb49393e4fe6aeb3659550f60a4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 24 07:49:41 2011 -0700

    Sentence-case the url.  Fixes #1706.

commit 26585fed03236f0f70a75959e1d3002025f4e15e
Merge: 809567f c8f90e8
Author: Chad Parry <github@chad.parry.org>
Date:   Sun Apr 24 08:28:39 2011 -0600

    Merge branch 'master' of https://github.com/gallery/gallery3 into rawphoto

commit 7f48671186a4bf3a4745cd7a31b48a891dd83078
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Apr 24 07:15:30 2011 -0700

    For ticket #1701. Remove unused variable.

commit c8f90e861b866d0caa86343a6c7213e923023d39
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Apr 24 07:14:38 2011 -0700

    Automated update of .build_number to 129 for branch master
    Last update: ce14f5fb906335c35bdb2754bb0cd482e7526f09 (8 commits ago)

commit 33d29bb790b04138f3c2d624f32e168595491985
Merge: bbb2a3a b57dd20
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 24 07:12:34 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 809567f12850f59bdeb47a2963f6968b99b5a201
Author: Chad Parry <github@chad.parry.org>
Date:   Sun Apr 24 08:10:04 2011 -0600

    Expose the data file field.

commit b57dd202db3c4b007e83aff3df9da7920691d76d
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Apr 24 07:06:14 2011 -0700

    Automated update of .build_number to 128 for branch master
    Last update: aba51feb3d330f30f0e3b68e16c31f6bb250ef02 (1 commits ago)

commit 41f90e669f75e8e93bd31bf649011d5d315ac326
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Apr 24 07:04:11 2011 -0700

    Clarify the meaning of variable names.

commit fcb06bf175bb9eeff36d9c294e97ace9374ef0f3
Author: Chad Parry <github@chad.parry.org>
Date:   Sun Apr 24 00:45:12 2011 -0600

    Don't assign to the item->name field if the name is unchanged, because the save method will crash.

commit c6ef706d70c7e48bea1145eec1b13fb5683e023f
Author: Chad Parry <github@chad.parry.org>
Date:   Sat Apr 23 22:55:59 2011 -0600

    Preserve old data files long enough for them to be available to event handlers.

commit aba51feb3d330f30f0e3b68e16c31f6bb250ef02
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 23 20:30:32 2011 -0700

    Automated update of .build_number to 127 for branch master
    Last update: 4c7f27a1a6a4fc71873093dd787de05a8ee6c079 (1 commits ago)

commit c01a0eac9a09e0fc2ef4ba45a74c23a8a70f51b7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Apr 23 20:30:30 2011 -0700

    Allow the tag rename function to split a tag into multiple tags if a comma is used to delinate the seperate tags.

commit bbb2a3a30c57592b1baed17533bc3a2e7edb2e8a
Merge: 342be98 4c7f27a
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Apr 23 23:26:40 2011 -0400

    Merge branch 'master' of git://github.com/gallery/gallery3

commit 342be9818f8c35dd13c8159960a9f71ae33d4c72
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Apr 23 23:26:28 2011 -0400

    Turn off bullets on the tag admin list.

commit 0d6a3a3cfc4f38f450db9e18da47a5e2ad826af8
Author: Chad Parry <github@chad.parry.org>
Date:   Sat Apr 23 21:19:47 2011 -0600

    Create a tempnam substitute that safely creates files with a given extension.

commit 4c7f27a1a6a4fc71873093dd787de05a8ee6c079
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 23 20:00:52 2011 -0700

    Automated update of .build_number to 126 for branch master
    Last update: 5d4d8a893bef935a47b04e72fffa113eba99dd71 (1 commits ago)

commit c3b0c96460da336bf720db0de2b396517004f514
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 19:59:54 2011 -0700

    Revert 0235c2062e9d980a4778c4b22678238c525e1cd7 and instead apply the fix from
    iptox.net listed here: http://gallery.menalto.com/node/98768#comment-372398
    
    Fixes for #1681, #1625

commit 5d4d8a893bef935a47b04e72fffa113eba99dd71
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 23 16:12:29 2011 -0700

    Automated update of .build_number to 125 for branch master
    Last update: d835c06b5e2c4b718a9269ee22c6079cc0769365 (1 commits ago)

commit 67d2e8081c6e5f0b679881bca3fdc81fe1e78ccc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 16:12:10 2011 -0700

    Undo the change made in 5ce85636329b14673718836b3631a3e46efdc3bb because it messes up tag counts
    (and makes the test fail-- I should have run that!).
    
    Also, use Tag_Model::items() in save() to avoid code duplication.  Follow-on for #1628.

commit e149cf7238a1f8eaddfc68580f2d636dd8255795
Author: Chad Parry <github@chad.parry.org>
Date:   Sat Apr 23 16:39:25 2011 -0600

    Support data files that change their extension and MIME type.

commit d835c06b5e2c4b718a9269ee22c6079cc0769365
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 23 15:36:39 2011 -0700

    Automated update of .build_number to 124 for branch master
    Last update: d3992b9983015ca584709478e06f2579283fdc8c (1 commits ago)

commit 11a5e4d4b3ccf0e974772d315c8591463d144736
Merge: d3992b9 6d9f2f8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 15:36:26 2011 -0700

    Merge branch 'master' of git://github.com/alindeman/gallery3

commit 6702104f571413e4d57db3515b2070c48d3e9b55
Author: Chad Parry <github@chad.parry.org>
Date:   Sat Apr 23 16:35:00 2011 -0600

    Resolve an infinite recursion that happens when the path caches are updated during saving.

commit b804655f17d6b25f382e2f9f444b2513711e9962
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 23 15:28:17 2011 -0700

    Automated update of .build_number to 33 for branch 3.0.x
    Last update: 51be401519ef73b840fc6d3a42a3b6bcecadd49f (3 commits ago)

commit bb05ab85aeadef5d42b0f313db4470802f8bb723
Merge: 163df51 9d0190d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 15:27:45 2011 -0700

    Merge branch '3.0.x' of github.com:gallery/gallery3 into 3.0.x

commit 163df518d0499544eca96bdc64cc066deebfce33
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 15:27:39 2011 -0700

    Rename 3.0.2 to "Coollanta" in honor of the weather in Atlanta during the 2011 meetup.

commit 9d0190d342c5df92afa08b28182ddbb29326d71e
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 23 15:27:08 2011 -0700

    Automated update of .build_number to 32 for branch 3.0.x
    Last update: 51be401519ef73b840fc6d3a42a3b6bcecadd49f (1 commits ago)

commit 42892f328d5303a7e549aaa4cbb5987c44928ea9
Merge: 51be401 d3992b9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 15:25:49 2011 -0700

    Merge branch 'master' into 3.0.x

commit d3992b9983015ca584709478e06f2579283fdc8c
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 23 15:19:16 2011 -0700

    Automated update of .build_number to 123 for branch master
    Last update: c1779a9e8f1a2c3cbda576815a37fd9b67b3c82c (12 commits ago)

commit 3ceeddde7cdf2b042230a6e65a7174b5753b804a
Merge: dfd50a6 f45835e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 15:19:13 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit dfd50a6c1f2afc4b4e971ab6899aa69f43397e1c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 15:18:23 2011 -0700

    Partially revert the CSS change in 76a7ad3161be0994d7ba98e9dff9b317b2430bb3
    to center the "Select..." button because it was causing the SWF object to
    vanish in Firefox.  #1638.

commit f45835e6e1204ac9b05d4c9eb7c59521230c59d4
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 23 15:10:17 2011 -0700

    Automated update of .build_number to 122 for branch master
    Last update: aa0d98e515983799c370fabf749d6c502a7bac8c (1 commits ago)

commit 92c23ea92d7c943d330c12a1c84fdcbdf2678202
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Apr 23 15:10:04 2011 -0700

    Set the width of the information column to 60px to prevent icon wrap

commit aa0d98e515983799c370fabf749d6c502a7bac8c
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 23 15:01:51 2011 -0700

    Automated update of .build_number to 121 for branch master
    Last update: c1779a9e8f1a2c3cbda576815a37fd9b67b3c82c (10 commits ago)

commit 09be5e6fb88b2b8814f4327764f0c3e61f587819
Merge: c07af35 ed21bbc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 14:53:50 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit c07af35a19905f3241fb77662e8b7c84e41e9a62
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 14:53:34 2011 -0700

    Oops, fix broken codex urls.  For #1698.

commit ed21bbcb742b0a1fb763a048e15f025c2c4b715c
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 23 14:46:42 2011 -0700

    Automated update of .build_number to 120 for branch master
    Last update: c1779a9e8f1a2c3cbda576815a37fd9b67b3c82c (8 commits ago)

commit 176ac0508b39508e03638383a370dbf420fa8901
Merge: ba20d5a 7cbcab6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 14:46:29 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit ba20d5a500fbc724376a2fc749ee2c645041a6e1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 14:46:07 2011 -0700

    Oops, this is the rest of the modules and themes for #1696 and #1698.

commit 7cbcab601f6e30096ae8c3ecf198401eef824327
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 23 14:45:32 2011 -0700

    Automated update of .build_number to 119 for branch master
    Last update: c1779a9e8f1a2c3cbda576815a37fd9b67b3c82c (6 commits ago)

commit 923b5ae20a6deed2f1069913143dc1ad9605d5d1
Merge: a469146 4f27df4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 14:44:48 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit a469146084e7ba064f171609849c4d8590424f88
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 14:43:33 2011 -0700

    module.info and theme.info files now support author name, author url,
    info url and discussion url fields.  Those fields show up in the Admin
    > Modules and Admin > Appearance > Theme Choice pages.  All official
    modules and themes updated to contain these values.  Fixes #1696, #1698.

commit 4f27df48da62383ce7ea0a70d5866d2279c49b74
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 23 13:56:57 2011 -0700

    Automated update of .build_number to 118 for branch master
    Last update: f5a9abc26a14dda6c2dce4aaf5ab139d2663808b (1 commits ago)

commit 7ec0cc748ac4c2a3b3d11abfbfd0ba50eb63f182
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Apr 23 13:55:23 2011 -0700

    Fix for ticket #1699.  Make the link to return to the gallery installation clearer.

commit 6d9f2f835dbafc0795d5c018493b430af1062112
Author: Andy Lindeman <andy@highgroove.com>
Date:   Sat Apr 23 16:44:23 2011 -0400

    Correct path for fix-ie.css in admin_wind theme
    
    * Fixes #1651

commit f5a9abc26a14dda6c2dce4aaf5ab139d2663808b
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 23 13:29:33 2011 -0700

    Automated update of .build_number to 117 for branch master
    Last update: c1779a9e8f1a2c3cbda576815a37fd9b67b3c82c (4 commits ago)

commit cab5f15c319c4ae1ebf261fb1b5c172032957733
Merge: 22e6542 1690d30
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 13:29:09 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 22e6542fa6bde7f6c2f27ae701a0bb76e35c62fb
Merge: 5ce8563 cc8d881
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 13:28:36 2011 -0700

    Merge branch 'upgrade_flowplayer' of git://github.com/alindeman/gallery3 into andy

commit 1690d30916997b64cd0cc4f104b1ed84c5a2ecaa
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 23 13:22:15 2011 -0700

    Automated update of .build_number to 116 for branch master
    Last update: c1779a9e8f1a2c3cbda576815a37fd9b67b3c82c (2 commits ago)

commit cc8d881973cf82dc4681ad4ceeae9b6eaa139f86
Author: Andy Lindeman <andy@highgroove.com>
Date:   Sat Apr 23 15:48:10 2011 -0400

    Add iPad/iPhone support for video playback
    
    * Resolves #1634

commit 5ce85636329b14673718836b3631a3e46efdc3bb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 13:20:22 2011 -0700

    Move the calculation for item_related_update ahead of the duplicate
    tag merge so that we don't trigger an item_related_update on items
    who semantically have the same tag after the merge.  Follow-on for #1628.

commit b57b229543aeab096e8574e9f27cff5d6a9ed07c
Merge: c1779a9 c101151
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 13:16:27 2011 -0700

    Merge branch 'alindeman/1628' of git://github.com/alindeman/gallery3 into andy

commit c1779a9e8f1a2c3cbda576815a37fd9b67b3c82c
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 23 13:11:37 2011 -0700

    Automated update of .build_number to 115 for branch master
    Last update: 1da0551b3c7067da43334ba2afeaad5aca6e364e (3 commits ago)

commit 9362db66fe97485910acdd33b34991c70135ec57
Merge: e241002 f8b2777
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 13:11:31 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit e241002008a3a708851abf6d6e17859901ee66d5
Merge: c1df782 07f654c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 13:11:01 2011 -0700

    Merge branch 'master' of git://github.com/ckieffer/gallery3 into chad

commit f8b2777fc7fb3be7a120e271123b3d7ad335ba69
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 23 13:05:57 2011 -0700

    Automated update of .build_number to 114 for branch master
    Last update: 1da0551b3c7067da43334ba2afeaad5aca6e364e (1 commits ago)

commit c1df782a75193d4ee33ec1d0be10739f9320705f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 13:04:23 2011 -0700

    Use an absolute url for the upgrader link.  Also, clear the upgrade_now
    site status message every time we go to Admin > Modules.
    Fixes #1695.

commit 1da0551b3c7067da43334ba2afeaad5aca6e364e
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 23 12:56:58 2011 -0700

    Automated update of .build_number to 113 for branch master
    Last update: e0f4002c58714cf87fc9172f557258148c3dea88 (1 commits ago)

commit 4d38c505cb0412eb4b470bdf95c6b317ef5a691d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 12:55:30 2011 -0700

    Further cleanup for minimum_password_length -- update
    user_installer::initialize() with the right module version number for
    the user module and fix the misspelling there then rebuild the
    installer.sql.  #1694.

commit e0f4002c58714cf87fc9172f557258148c3dea88
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 23 12:50:15 2011 -0700

    Automated update of .build_number to 112 for branch master
    Last update: dbdc3f088661826a56e62b85398dd795a9abb063 (1 commits ago)

commit 59d5ddc8abe882c3cc3994ca2478d8dd0915f0fe
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 12:48:04 2011 -0700

    Set the default value for gallery.timezone to null so that each install uses
    date_default_timezone_get() in modules/gallery/config/locale.php but it's
    still overrideable in Admin > Settings > Advanced.  Follow on fix for #1637.

commit dbdc3f088661826a56e62b85398dd795a9abb063
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 23 12:27:50 2011 -0700

    Automated update of .build_number to 111 for branch master
    Last update: fb45d1a2ec468b523ea709d90361caeb174d5599 (1 commits ago)

commit b30afaeab7d931f4d380a96c4aadd6deb86df5e2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Apr 23 12:27:46 2011 -0700

    Fix ticket #1694 (continued). Reset the corrected user module variable to the value of the incorrect spelling (don't assume that the original value was still 5.

commit fb45d1a2ec468b523ea709d90361caeb174d5599
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 23 12:16:39 2011 -0700

    Automated update of .build_number to 110 for branch master
    Last update: a9eb995dd2b64667c300c6193656b6cdfeb4e2a5 (1 commits ago)

commit 466f2a657ef4b22346e2232f50bc5cca4ab6e540
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Apr 23 12:16:06 2011 -0700

    Fix ticket #1694. Correct Spelling of mininum_password_length to minimum_password_length

commit 268f9425d918d14e1839b3e22203a8869093f3f0
Merge: 07f654c a9eb995
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Apr 23 15:02:29 2011 -0400

    Merge branch 'master' of git://github.com/gallery/gallery3

commit a9eb995dd2b64667c300c6193656b6cdfeb4e2a5
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 23 10:09:27 2011 -0700

    Automated update of .build_number to 109 for branch master
    Last update: 7a4ff2fea194829eac38c6293b43cfa55d4637e1 (7 commits ago)

commit 01055fb54f717b811474592a22d82ba66a4f1865
Merge: 76a7ad3 563a25f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 10:08:48 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 76a7ad3161be0994d7ba98e9dff9b317b2430bb3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 10:07:32 2011 -0700

    Overhaul of the uploader code:
    - Propagate size limits (including detecting memory limits from GD) down to the
      Flash so that we don't even start uploads that won't work
    - Improve the error messages to be more user meaningful and provide links to the
      codex for errors
    - Tell the user up front what the file size limit is.
    
    Fixes #1638

commit ce2c6c3ada2854777891a7a8edec66b7b5be72ad
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 10:06:17 2011 -0700

    Add convert_to_human_readable and tests for both.  Resolves #1693.

commit c101151616033d53587d1435881dae0fa45aeefa
Author: Andy Lindeman <andy@highgroove.com>
Date:   Sat Apr 23 12:04:12 2011 -0400

    Allow tags to be merged by renaming
    
    * Fixes #1628

commit 563a25f559a0247b2e3f4e96b191e7138c8e8ea5
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 23 08:14:14 2011 -0700

    Automated update of .build_number to 108 for branch master
    Last update: 09030d527b2b107006b10b0541492c8e7ad6071b (2 commits ago)

commit 84462d1f8202e7c5ff0641559cb43cf282b5763b
Merge: 0235c20 f07935d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Apr 23 08:13:42 2011 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 0235c2062e9d980a4778c4b22678238c525e1cd7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Apr 23 08:13:01 2011 -0700

    Fix for ticket #1681 (and maybe #1625). Change the parameter from -v to -version.

commit 07f654c8d9918608c8229404585874ce5aba7ab2
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Apr 23 11:11:48 2011 -0400

    Remove list styles from additional widgets.

commit f07935daefe7769be79ede25eecb6b6f5ecd3b32
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 23 08:09:10 2011 -0700

    Automated update of .build_number to 107 for branch master
    Last update: 7a4ff2fea194829eac38c6293b43cfa55d4637e1 (4 commits ago)

commit 993e49adda302c89ae84f8667fd2169f71b635d4
Merge: 3312009 09030d5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 08:08:43 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 3312009319d69dc834e705166ac08ad8bdc4c18e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 08:07:58 2011 -0700

    Revive server_add.js which I accidentally removed in 80af9f0f17ce5ac10ceefc9d3d0736b3d4c1c2aa
    as part of #1686.

commit 09030d527b2b107006b10b0541492c8e7ad6071b
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 23 07:47:20 2011 -0700

    Automated update of .build_number to 106 for branch master
    Last update: 7a4ff2fea194829eac38c6293b43cfa55d4637e1 (3 commits ago)

commit 9e97741ac40e119543e8ea4b8ff201ed20a87d5f
Merge: 0ec819d e86a46d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Apr 23 07:46:54 2011 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 0ec819d38161ead063c4dbd953b4b55a33a42f80
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Apr 23 07:46:38 2011 -0700

    Insure that the tag count to display is always greater than 0.  Refixes #1649.

commit e86a46d440a253aeb436b848e2c7e1370212ded0
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 23 07:43:24 2011 -0700

    Automated update of .build_number to 105 for branch master
    Last update: 7a4ff2fea194829eac38c6293b43cfa55d4637e1 (2 commits ago)

commit aa949003545c50c1d2175167b8f69ae65d6dc217
Merge: 171e4fd 6b90b8e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 07:42:54 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 6b90b8e7f6ac2b641aa5a1da173ea3191c1921e3
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 23 07:42:48 2011 -0700

    Automated update of .build_number to 104 for branch master
    Last update: 7a4ff2fea194829eac38c6293b43cfa55d4637e1 (1 commits ago)

commit 9dd91b55b03923ef3058fb965b0c927d101a396f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Apr 23 07:42:28 2011 -0700

    Insure that the tag count to display is always greater than 1.  Refixes #1649.

commit 171e4fd0ee6493bb82bb1de3017b83319e7fc5e4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 07:41:44 2011 -0700

    Remove displayed blocks from the admin block list.  If there are no
    available blocks to add, just hide the block adder block.  Fixes #1689.

commit c2abd476c74e37f8efbbcef58f6cb41bb3dca7d2
Merge: bb23e28 7a4ff2f
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Apr 23 10:29:06 2011 -0400

    Merge branch 'master' of git://github.com/gallery/gallery3

commit bb23e28035293174f935345178f32638c09d0421
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Apr 23 10:28:39 2011 -0400

    Remove enumeration unordered list class, it's no longer needed.

commit 7a4ff2fea194829eac38c6293b43cfa55d4637e1
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 23 07:27:40 2011 -0700

    Automated update of .build_number to 103 for branch master
    Last update: 16ffc81faf863559d788cff1b3b16a8d961fa208 (2 commits ago)

commit a1f419435c755500bbd11cb6c48a5bb31f8e6421
Merge: 4b01676 33e4a99
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Apr 23 07:27:02 2011 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit a2d66213c4e813b87da1a4f8876c18bafaac5a61
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Apr 23 10:26:56 2011 -0400

    YUI reset turns off bullets, indent. This restores those for regular text lists.

commit 4b01676f323fb280ebaa4c041e6894cbb464d8fe
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Apr 23 07:25:33 2011 -0700

    Fix for ticket #541
    
    Added a theme_info variable to the theme globals.  The properties in the theme.info file are now contained in this theme_info structure.
    
    Access is:
      <?= $theme_info->author ?>
    will display the theme author.

commit 33e4a995aa844ebb523ee85a1584ab0386129f7d
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 23 07:22:04 2011 -0700

    Automated update of .build_number to 102 for branch master
    Last update: 9b993f6e687649dc092ff21c99098e3bfc809f31 (1 commits ago)

commit 07c266b973cd65d44bb769c19d86b1245ed2c9e5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 07:20:58 2011 -0700

    Enable autocomplete for the embed path.  Fixes #1687.

commit 9b993f6e687649dc092ff21c99098e3bfc809f31
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 23 07:14:14 2011 -0700

    Automated update of .build_number to 101 for branch master
    Last update: 5af74d4714005c565fc9550dbf1f0689c18429a7 (15 commits ago)

commit 336cdd70e641fb1c6cb5e32faa399a55a0c7f293
Merge: efa3466 88dcfd8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 07:14:05 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit efa3466a75856a219e4c282f21037aa186a806b0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 07:13:55 2011 -0700

    Oops, forgot to remove the reference to admin.js.  Follow-on for #1686.

commit 80af9f0f17ce5ac10ceefc9d3d0736b3d4c1c2aa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 07:05:15 2011 -0700

    Inline admin JS into admin_server_add.html.php.  Fixes #1686.

commit 88dcfd8aaf6869658c115bf7dfa40920f1311686
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 23 06:51:12 2011 -0700

    Automated update of .build_number to 100 for branch master
    Last update: 5af74d4714005c565fc9550dbf1f0689c18429a7 (12 commits ago)

commit cfa96d34e86d52dcbb81288782f14832e4e9dbc2
Merge: fa4fb20 ce14f5f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 06:50:58 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit fa4fb20f8036745a4999d05ccb2fe285a891f3a8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 06:50:47 2011 -0700

    If we've cleared out the last group in a combine_queue for a given
    type, unset the combine_queue for that type entirely.  This way future
    calls to css() and script() emit an element until there's a new call
    to start_combining().  Fixes 1685.

commit ce14f5fb906335c35bdb2754bb0cd482e7526f09
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 23 06:17:07 2011 -0700

    Automated update of .build_number to 99 for branch master
    Last update: 5af74d4714005c565fc9550dbf1f0689c18429a7 (10 commits ago)

commit ea72cf15f0718bbe067efa0b6ff0f9bc2a3bc493
Merge: b8dcaf2 9e85562
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 06:12:42 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit b8dcaf218b4117254e667ce4c3526a69ebdcd69f
Merge: c6f1bc7 3cee760
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 23 06:12:32 2011 -0700

    Merge branch 'master' of git://github.com/mamouneyya/gallery3

commit 9e85562fa084502ccffd0d561ecd3ca263570a49
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Apr 22 16:54:47 2011 -0700

    Automated update of .build_number to 98 for branch master
    Last update: 5af74d4714005c565fc9550dbf1f0689c18429a7 (8 commits ago)

commit c6f1bc7d249ac0fb6bdbefc40d7499bf5b193821
Merge: c2a3808 aedfe72
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Apr 22 16:54:33 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit c2a38087dcd77bf8c1e7a5ff81692502bdb3ff59
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Apr 22 16:52:48 2011 -0700

    A few more fixes for #1637:
    - Update gallery_installer::install() to set the version to 48 and
      set the timezone
    - Rebuild installer.sql

commit fcbb4eef23e05261efd4e6a840f2abdef8055fc6
Merge: f2009fa 6f916e4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Apr 22 16:44:12 2011 -0700

    Merge branch 'time-zone-improvements' of https://github.com/alindeman/gallery3 into alindeman-time-zone-improvements

commit aedfe7246af1e1740163abb793007d495f39d3f5
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Apr 22 16:40:15 2011 -0700

    Automated update of .build_number to 97 for branch master
    Last update: 5af74d4714005c565fc9550dbf1f0689c18429a7 (5 commits ago)

commit f2009fa21e6dc0eea970ba354169a6e0f52c0f2a
Merge: 351174f 16ffc81
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Apr 22 16:39:30 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 351174f858119770642c6af39164202fd2eb35b5
Merge: 5b9c47a 100218e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Apr 22 16:39:18 2011 -0700

    Merge branch 'ie9' of https://github.com/alindeman/gallery3 into alindeman-ie9

commit 16ffc81faf863559d788cff1b3b16a8d961fa208
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Apr 22 16:31:52 2011 -0700

    Automated update of .build_number to 96 for branch master
    Last update: 5af74d4714005c565fc9550dbf1f0689c18429a7 (3 commits ago)

commit 5b9c47ae6a39a650188d2653801631daf3f7519a
Merge: 5040ade e14b954
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Apr 22 16:31:12 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 5040adebb5c4e1e491fbb6c3b98783f5809020a3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Apr 22 16:30:37 2011 -0700

    Totally revamp the G2 Import UI to make it sexxxy.  Fixes #1683.

commit 100218e3ec0590f16edbf530a76539c386be907c
Author: Andy Lindeman <andy@highgroove.com>
Date:   Fri Apr 22 19:24:47 2011 -0400

    Patch jQuery UI to fix drag-and-drop events in IE9
    
    * Fixes #1642

commit e14b954f1857ffc122ff9d61833fee16f8c02c26
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Apr 22 16:16:14 2011 -0700

    Automated update of .build_number to 95 for branch master
    Last update: 151d5c3f354894d63e334e43cb79917ef3017568 (1 commits ago)

commit b07bc1af082ea097adb77d2e78e69af3e20d8d29
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Apr 22 16:15:56 2011 -0700

    Allow the administrator to set the number of tags to display in the cloud via the advanced settings. Fixes ticket #1649.

commit 3cee76070128627783bb72169ed5c1f1ceef3df1
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Sat Apr 23 01:33:03 2011 +0300

    remove a redundant declaration, and add rule for RTL

commit 6f916e49d5b431c2c1961a13d1a61fef8c02d628
Author: Andy Lindeman <andy@highgroove.com>
Date:   Fri Apr 22 18:15:17 2011 -0400

    Allow timezone to be configurable
    
    * Fixes #1637
    * New advanced setting gallery/timezone
    * Default setting comes from PHP

commit 151d5c3f354894d63e334e43cb79917ef3017568
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Apr 22 15:02:24 2011 -0700

    Automated update of .build_number to 94 for branch master
    Last update: 5af74d4714005c565fc9550dbf1f0689c18429a7 (2 commits ago)

commit b10e6f66710c25fe2ed71880e9aaffbf41ecb5a4
Merge: d7e2990 b9a720e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Apr 22 15:02:38 2011 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit d7e299015222ba20ed6df7c572fb8bca7e252010
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Apr 22 15:02:30 2011 -0700

    Insure that the number of items for a page is greater than zero.  Fixes ticket 1644.

commit b9a720e86bcaeab19aca81ee2af2b5c12fda1c55
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Apr 22 13:58:37 2011 -0700

    Automated update of .build_number to 93 for branch master
    Last update: 5af74d4714005c565fc9550dbf1f0689c18429a7 (1 commits ago)

commit 526859d9605d137ebe053ecbd80f46ca6a331194
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Apr 22 13:56:32 2011 -0700

    Do simple transliteration when converting filenames to slugs, but check
    to see if the transliteration module is available and use a more complex
    transliteration if possible.  Fixes #1668.

commit 944cb72eea946f4c45a04b7e4c7c33929fa8b9f3
Merge: 567522b 5af74d4
Author: Chad Parry <github@chad.parry.org>
Date:   Fri Apr 22 14:10:42 2011 -0600

    Merge remote branch 'origin/master' into rawphoto

commit 5af74d4714005c565fc9550dbf1f0689c18429a7
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Apr 22 11:48:17 2011 -0700

    Automated update of .build_number to 92 for branch master
    Last update: 2fcd53052b4824642d56f0ff0e1f3598a8250cc3 (1 commits ago)

commit 05e031d403c8f55811701e57d709ad77da9a4346
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Apr 22 11:47:38 2011 -0700

    Follow on fix for #1645 to update the installer.sql

commit 2fcd53052b4824642d56f0ff0e1f3598a8250cc3
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Apr 22 11:43:13 2011 -0700

    Automated update of .build_number to 91 for branch master
    Last update: 14eadea2c26e2f284b43bfe73e920dcd07837c1b (4 commits ago)

commit 7deed8654549690ec7d5c7d9dd5ad479d9f0fdd8
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Apr 22 12:54:25 2011 -0400

    Removed incomplete jquery carousel code

commit 3bce5d00eef5cd6c255ab63bd7391de4557a1784
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Apr 22 12:50:21 2011 -0400

    Renamed apple_touch_url to apple_touch_icon_url.

commit fbf02970e1c454ad99b2fc01a897a8de834d7e7c
Merge: 4a9b45c 55da59c
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Apr 22 12:38:10 2011 -0400

    Merge branch 'master' of git://github.com/gallery/gallery3

commit 4a9b45c9c3bbd574103e01debcd84cab1a18352a
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Apr 22 12:37:28 2011 -0400

    Created apple-touch-icon and added to wind and admin_wind themes.

commit 55da59c942c0f7171b515f0718fea8506ed4b116
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Apr 22 09:30:33 2011 -0700

    Automated update of .build_number to 90 for branch master
    Last update: 463014d3361e237e13bb91cc92b5afc4b3bb8306 (11 commits ago)

commit 4e95804854f182aad36b1c53c3ee4e3b154b132c
Merge: deb7db6 d4354c9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Apr 22 09:30:09 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit deb7db6486988ce3e41b2fffd010487fbb67a91f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Apr 22 09:29:25 2011 -0700

    Clear the site status for missing themes when we view this page -- if
    something goes wrong we'll just add it back again anyway.  Follow-on
    for #1655.

commit d4354c927d8cc1ca4ada13f2a1764889a9d29f50
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Apr 22 09:29:23 2011 -0700

    Automated update of .build_number to 89 for branch master
    Last update: 463014d3361e237e13bb91cc92b5afc4b3bb8306 (9 commits ago)

commit 84e4cba00bca52bf3d433ba919b05e3559ab5788
Merge: 11703b2 e1f6c7c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Apr 22 09:28:24 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 11703b24ffdf38443ac46afbfa65e6f07ec5648e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Apr 22 09:28:19 2011 -0700

    Detect if the users theme is missing (or missing a theme.info) and in
    that case fall back to the wind theme.  Fixes #1655.

commit e1f6c7c81633fea8ca61d6feebed82ffc65b2d49
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Apr 22 08:12:51 2011 -0700

    Automated update of .build_number to 88 for branch master
    Last update: 463014d3361e237e13bb91cc92b5afc4b3bb8306 (7 commits ago)

commit 1d9afcf441d0f9684e298fd7c18991731e16a93d
Merge: 72149b8 7102c26
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Apr 22 08:12:01 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 72149b8c68a488e4f935603e6bbf91d2536c2dee
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Apr 22 08:11:56 2011 -0700

    Urlencode the tag name so that our html is compliant.  Fixes #1672.

commit 99fd65ff02d17cbb3ec936b4bdbf2a8c6b0b73e3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Apr 22 07:55:34 2011 -0700

    Catch the item_updated_data_file() event and rescan.  Fixes #1679.

commit 567522bfa08c370bb5baf8454afc5b04bc9e49b4
Author: Chad Parry <github@chad.parry.org>
Date:   Thu Apr 21 20:12:32 2011 -0600

    Add an event for when a new graphics toolkit is chosen.

commit 7102c26f8000e9c37576ae42902ebdc1d4df6ad2
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Apr 21 15:51:25 2011 -0700

    Automated update of .build_number to 87 for branch master
    Last update: 463014d3361e237e13bb91cc92b5afc4b3bb8306 (4 commits ago)

commit b385d458b095bf40571963bd3402b6efef89e069
Merge: 08a6df2 9aa1d9d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Apr 21 15:50:59 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 08a6df2274ea196056eb7441d4aff050dc3531fa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Apr 21 15:50:53 2011 -0700

    Normally Router::find_uri() strips off the url suffix for us, but when
    we make the theme::$is_admin determination we're working off of the
    PATH_INFO so we need to strip it off manually.  Fixes #1631.

commit 9aa1d9d5792a60cc0c523fc7e928117d71581f0e
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Apr 21 15:44:43 2011 -0700

    Automated update of .build_number to 86 for branch master
    Last update: 463014d3361e237e13bb91cc92b5afc4b3bb8306 (2 commits ago)

commit 8cf066b838a98ace3cfa81e02ccc7a8570d1ba7f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Apr 21 15:43:48 2011 -0700

    Use Tag_Model::url() instead of hand creating tag urls, since the API
    changed and that broke.  Fixe #1680.

commit 5bc0da365221eea08b1525d4cf71371853aa4d15
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Apr 21 14:33:08 2011 -0700

    Create before_combine and after_combine events to allow modules and themes to
    interact with the combine list ahead of time, and to be able to do things like
    minification after it's combined.  Fixes #1653.

commit 51be401519ef73b840fc6d3a42a3b6bcecadd49f
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Apr 21 14:02:51 2011 -0700

    Automated update of .build_number to 31 for branch 3.0.x
    Last update: f84416084dc8e0c515dcc8a5d0c1061a2378213e (1 commits ago)

commit 742fd96b047a4640dc2be31c74d7e95c835e855b
Merge: f844160 29450bd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Apr 21 14:02:25 2011 -0700

    Merge branch 'master' into 3.0.x

commit 463014d3361e237e13bb91cc92b5afc4b3bb8306
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Apr 21 14:02:13 2011 -0700

    Automated update of .build_number to 85 for branch master
    Last update: 14eadea2c26e2f284b43bfe73e920dcd07837c1b (3 commits ago)

commit 29450bdd41e36ecac5dacadb93902529b36b27ee
Merge: 1af4f99 69cefb1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Apr 21 14:01:46 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 1af4f99108ffe1ffc2a3ff723c68c5a12dde0223
Author: Chris Kelly <ckdake@ckdake.com>
Date:   Thu Apr 21 15:57:18 2011 -0400

    Add missing CSS tag so tables get aligned.  Fixes #1678.

commit 69cefb14ff4000ce015f6bcd815fee11fdff0106
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Apr 21 14:00:31 2011 -0700

    Automated update of .build_number to 84 for branch master
    Last update: 14eadea2c26e2f284b43bfe73e920dcd07837c1b (1 commits ago)

commit 9fe20561068fec04c57f7769aaf9ca5025bdc6ac
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Apr 21 13:59:03 2011 -0700

    Use window.location = "url" instead of window.location.reload() so
    that we pop back up to the top of the page so that you see the status
    message.  Fixes #1676.

commit f84416084dc8e0c515dcc8a5d0c1061a2378213e
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Apr 21 12:57:49 2011 -0700

    Automated update of .build_number to 30 for branch 3.0.x
    Last update: daeab0413be8b2b1ad21647d1eae01547c68e625 (1 commits ago)

commit 7547d1c0c381ac2929116c932a1a505c596d87fa
Author: Chris Kelly <ckdake@ckdake.com>
Date:   Thu Apr 21 15:57:18 2011 -0400

    Add missing CSS tag so tables get aligned

commit 31ba081b793141ca36866a6dd349cd2eac5af68e
Author: Chad Parry <github@chad.parry.org>
Date:   Thu Apr 21 02:06:53 2011 -0600

    Add an event that will collect all valid filename extensions.

commit daeab0413be8b2b1ad21647d1eae01547c68e625
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Apr 10 13:48:31 2011 -0700

    Automated update of .build_number to 29 for branch 3.0.x
    Last update: 0395be689d94407c0291daf41cd122990ed3d6d3 (4 commits ago)

commit 14eadea2c26e2f284b43bfe73e920dcd07837c1b
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Apr 10 13:48:27 2011 -0700

    Automated update of .build_number to 83 for branch master
    Last update: 717d580b43b15d88b5bda010adc4fec2dd3b52b5 (1 commits ago)

commit 6cc3cc86a3802a3bf9a0bb92a20be593ceccb0f2
Merge: f717b95 916b754
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 10 13:47:39 2011 -0700

    Merge branch 'master' into 3.0.x

commit f717b95114796b7912590ef5a30e1683bc296eca
Merge: 78f57c1 7eacdd1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 10 13:47:26 2011 -0700

    Merge branch '3.0.x' of github.com:gallery/gallery3 into 3.0.x

commit 916b7543d13bf33ca704dab18ba3d1eca13d9624
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 10 13:46:28 2011 -0700

    Gracefully degrade in the case where the .build_number file is
    missing.  Fixes #1673.

commit 717d580b43b15d88b5bda010adc4fec2dd3b52b5
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Apr 4 17:46:10 2011 -0700

    Automated update of .build_number to 82 for branch master
    Last update: 527e651cda4ec4b230e43e8f4611b4a3fd292427 (1 commits ago)

commit 78f57c1bbfc536125bba613bc56f00026998d0d2
Merge: b15fa64 5b927a7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Apr 4 17:45:32 2011 -0700

    Merge branch 'master' into 3.0.x

commit 5b927a7083c8886a42519f9199666431bac0b650
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Apr 4 17:45:09 2011 -0700

    Guard against registered users removing tags from items they don't own.  Fixes #1671.

commit 7eacdd1f560b0f949d9bcf0ccc91525d2d8d09c6
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Apr 4 17:39:26 2011 -0700

    Automated update of .build_number to 28 for branch 3.0.x
    Last update: 0395be689d94407c0291daf41cd122990ed3d6d3 (1 commits ago)

commit b15fa64d21d2958e8911d3ab8f50fb6275935509
Merge: 0395be6 1d0f4b7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Apr 4 17:38:41 2011 -0700

    Merge branch 'master' into 3.0.x

commit 527e651cda4ec4b230e43e8f4611b4a3fd292427
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Apr 4 17:38:15 2011 -0700

    Automated update of .build_number to 81 for branch master
    Last update: e89b0b867c2354fe56818878026e7f1f5df00f4e (1 commits ago)

commit 1d0f4b7a430e6c7d8d715a42fb391b8e1afbdf19
Author: Andy Lindeman <alindeman@gmail.com>
Date:   Sun Apr 3 15:44:28 2011 -0500

    [Fixes #1574] Render the login form in the same way in every action
    
    This makes sure the "Forgot Your Password?" link appears when the HTML form
    is initially rendered.

commit 0395be689d94407c0291daf41cd122990ed3d6d3
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 2 16:21:02 2011 -0700

    Automated update of .build_number to 27 for branch 3.0.x
    Last update: 987c13d5ea6c162144e33353568ff36e532f75c0 (1 commits ago)

commit e89b0b867c2354fe56818878026e7f1f5df00f4e
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 2 16:20:58 2011 -0700

    Automated update of .build_number to 80 for branch master
    Last update: f6c5cec1451d23897f0b99b6a3cee90974f2764c (1 commits ago)

commit 38556749aa28a2bf726ed20a9560407259128a1d
Merge: 987c13d 213e652
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 2 16:20:38 2011 -0700

    Merge branch 'master' into 3.0.x

commit 213e6529558ea9ed027a1817df6dc9128a6512cc
Merge: f6c5cec 074f801
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 2 16:20:07 2011 -0700

    Merge branch 'Ticket#1666_reset' of git://github.com/Joe7/gallery3

commit 987c13d5ea6c162144e33353568ff36e532f75c0
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 2 16:08:06 2011 -0700

    Automated update of .build_number to 26 for branch 3.0.x
    Last update: 0c0466d32c94299b9b1d14de61275500a04c9f74 (1 commits ago)

commit c2626ed2f20273da0139eede1abd49110a4e3869
Merge: 0c0466d efd28d9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 2 16:07:34 2011 -0700

    Merge branch 'master' into 3.0.x

commit f6c5cec1451d23897f0b99b6a3cee90974f2764c
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 2 16:07:29 2011 -0700

    Automated update of .build_number to 79 for branch master
    Last update: 6d1377e9e9f232e1db3a7d1fc2a9409e5248fdda (3 commits ago)

commit efd28d95e5bc0aca614895f985674127fa21cb59
Merge: 531baea 2232a2e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 2 16:07:23 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 531baea2d974993d963094cb91975233e40ca495
Merge: 5931cc8 f10648f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 2 16:07:13 2011 -0700

    Merge branch 'Ticket#1667' of git://github.com/Joe7/gallery3

commit 0c0466d32c94299b9b1d14de61275500a04c9f74
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 2 16:01:55 2011 -0700

    Automated update of .build_number to 25 for branch 3.0.x
    Last update: a8f93f913dee58cf4c2b11c7e9a65c7cc246e5ff (3 commits ago)

commit 2232a2e131b09ba8b288d338639acadb09926f5a
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 2 16:01:50 2011 -0700

    Automated update of .build_number to 78 for branch master
    Last update: 6d1377e9e9f232e1db3a7d1fc2a9409e5248fdda (1 commits ago)

commit 1341b5bb57821f7b3e768bdbcd247edcf62bbe69
Merge: 2c05a73 2cebdcb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 2 16:01:36 2011 -0700

    Merge branch '3.0.x' of github.com:gallery/gallery3 into 3.0.x

commit 2c05a73b043283a03c9cf042033d6a25b6b37367
Merge: 54ad1c7 5931cc8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 2 16:01:32 2011 -0700

    Merge branch 'master' into 3.0.x

commit 5931cc872d9ed33467712cb4a970bdbaac798ef9
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Wed Mar 30 22:18:06 2011 +0200

    proposed fix for ticket #1664

commit 6d1377e9e9f232e1db3a7d1fc2a9409e5248fdda
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 2 15:40:00 2011 -0700

    Automated update of .build_number to 77 for branch master
    Last update: 073650192c094080b689cd8ee202554b992223dc (1 commits ago)

commit 2cebdcb1ebfb22042e03d6891f9c868e5184e6cf
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Apr 2 15:39:26 2011 -0700

    Automated update of .build_number to 24 for branch 3.0.x
    Last update: a8f93f913dee58cf4c2b11c7e9a65c7cc246e5ff (1 commits ago)

commit 54ad1c7b0957d2a2b25348b57b66de899ea6e0df
Merge: a8f93f9 9d8eef1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 2 15:39:12 2011 -0700

    Merge branch 'master' into 3.0.x

commit 9d8eef143d781c36870532b48599b3da1ad9dd44
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 2 15:36:50 2011 -0700

    Fix an outdated reference to $entry->file which went away in v4 of the
    module.  Fixes #1669.

commit f10648fe0af7c2ae682290812cc78568aea23829
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Sat Apr 2 20:56:11 2011 +0200

    Sanitize page value before setting offset based on it

commit 074f801acdd7d7b1a0a0a5e4ac8c5badfc253cad
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Sat Apr 2 18:52:54 2011 +0200

    Fix against Ticket #1666

commit 030ce9961ba20362d443ac7fc1919289d1295dd4
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Wed Mar 30 22:18:06 2011 +0200

    proposed fix for ticket #1664

commit a8f93f913dee58cf4c2b11c7e9a65c7cc246e5ff
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Mar 27 13:18:37 2011 -0700

    Automated update of .build_number to 23 for branch 3.0.x
    Last update: 2a7d45683b084784d33962bb00244732d846f705 (3 commits ago)

commit 7ba08bfc79c78763b0ae2f2e99142953b987ea28
Merge: 272df7d 2dcd257
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Mar 27 13:18:10 2011 -0700

    Merge branch '3.0.x' of github.com:gallery/gallery3 into 3.0.x

commit 272df7d614cd40347997dd0570bdba98ec7ba42d
Merge: d46cacc 876565c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Mar 27 13:18:07 2011 -0700

    Merge branch 'master' into 3.0.x

commit 073650192c094080b689cd8ee202554b992223dc
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Mar 27 13:17:58 2011 -0700

    Automated update of .build_number to 76 for branch master
    Last update: ab6050b02023b94a600d41747080aa280eed5043 (3 commits ago)

commit 876565cd34bf9396e45cf247ed184b14148c2408
Merge: 7f62f09 9c4fcab
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Mar 27 13:17:21 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 7f62f09cf377b92b615e456ec4539300b331fd4b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Mar 27 13:16:41 2011 -0700

    Improve search to use wildcard matching, thanks to some code from tempg.
    Fixes #1663.

commit 2dcd2572e441a56f3cfb3aaad69838066c03de86
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Mar 27 11:51:44 2011 -0700

    Automated update of .build_number to 22 for branch 3.0.x
    Last update: 2a7d45683b084784d33962bb00244732d846f705 (1 commits ago)

commit 9c4fcab0b9486a0b2c4a94760c89d249af7838ac
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Mar 27 11:51:37 2011 -0700

    Automated update of .build_number to 75 for branch master
    Last update: ab6050b02023b94a600d41747080aa280eed5043 (1 commits ago)

commit d46caccb17a9d0231df9ea5e55e0a560dfd40a07
Merge: 2a7d456 87ce71e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Mar 27 11:51:21 2011 -0700

    Merge branch 'master' into 3.0.x

commit 87ce71eb90588a443c05a6b7e378aca8d0e7b3b3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Mar 27 11:49:36 2011 -0700

    Sort users in group box by name.  Thanks edisonnews!  Fixes #1662.

commit 2a7d45683b084784d33962bb00244732d846f705
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Mar 27 11:44:17 2011 -0700

    Automated update of .build_number to 21 for branch 3.0.x
    Last update: 7064a02514ac7af2e547fd29f8ed6c85f667bf14 (1 commits ago)

commit 8d75dabf61d1ce287da273f0eadb17e307146f77
Merge: 7064a02 ab6050b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Mar 27 11:42:48 2011 -0700

    Merge branch 'master' into 3.0.x

commit ab6050b02023b94a600d41747080aa280eed5043
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Mar 27 11:40:05 2011 -0700

    Automated update of .build_number to 74 for branch master
    Last update: d2c77fd0590501f7b6b51d9f4cc033ed9485b082 (6 commits ago)

commit 0bbdb94f84b1e13fe3e85e87b5c718dc9aba5123
Merge: c12c43a fdb85ee
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Mar 27 11:39:20 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit c12c43a415cbbe172687f888c1ae388b7f4e4451
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Mar 27 11:38:37 2011 -0700

    A little more work on kandsten's fix for IPv6 support in
    10785b1e820c5e10d982c6b49125903886f7b889:
    
    - some style cleanup
    - bump the module version in module.info
    - rebuild the installer.sql

commit 10785b1e820c5e10d982c6b49125903886f7b889
Author: Kriss Andsten <kriss@sverok.se>
Date:   Thu Jan 27 03:05:40 2011 +0100

    Extend comment module field lenghts to fit IPv6 remote host addresses and long (but legally so) hostnames.

commit fdb85ee2425903887b73c26dfe7358216fd7d952
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Mar 27 11:33:06 2011 -0700

    Automated update of .build_number to 73 for branch master
    Last update: d2c77fd0590501f7b6b51d9f4cc033ed9485b082 (3 commits ago)

commit fa6f233603267505c216abc4f12663d245cd23e7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Mar 27 11:31:34 2011 -0700

    Centralize our encoding code into a new helpers and use
    mb_convert_encoding if possible.  Build on the work in
    c791ae96d5bb28f39b26a0e556e10e636f97436c by momo-i.  Fixes #1660.

commit 65825c572a0db24036c855de01714c613a979550
Merge: c791ae9 12e81d0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Mar 27 11:25:27 2011 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 12e81d081d412a052860f04902b28da4a460c3fa
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sun Mar 27 11:20:40 2011 -0700

    Automated update of .build_number to 72 for branch master
    Last update: e4d4a89a1bd54164fb62d95ac62a44957d124e68 (1 commits ago)

commit 06d1a5221cf87056c1008ed0bd9f7eee31857c85
Merge: e4d4a89 e90493a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Mar 27 11:20:10 2011 -0700

    Merge branch 'master' of git://github.com/ckieffer/gallery3

commit 97fa88e2690ca68eef47576676530690ff3288fc
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Sat Mar 26 22:59:10 2011 +0200

    fix width value of dialogue status messages. it should be exactly 434px and not 400px
    http://grab.by/9Ht4
    http://grab.by/9Ht5

commit 371cc8cdb22027a668563bea788ecc70c2f29d81
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Sat Mar 26 22:40:49 2011 +0200

    cleanup file + fix the path of rtl-separator image

commit 7aa1c0878b6ecd058e9198609f31797b46f2d4f7
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Sat Mar 26 22:35:53 2011 +0200

    cleanup file

commit 9c784a740a6fe5849c465e0ebd2e1a197d281bf9
Merge: 5a966e4 e4d4a89
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Sat Mar 26 13:15:12 2011 +0200

    Merge remote-tracking branch 'gallery3/master'

commit dc21cf36b606048dc24532407d39bc8f5b4211fa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Mar 20 10:25:59 2011 -0700

    Change the $thumb_proportions variable to be a theme callback which
    takes an item as an argument.  This will let us figure out proportions
    in the case where a module has defined custom thumbnail sizes.

commit 7064a02514ac7af2e547fd29f8ed6c85f667bf14
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Mar 15 00:55:52 2011 -0700

    Automated update of .build_number to 20 for branch 3.0.x
    Last update: 85dc139f2619271cdacab007e69773a11537944b (1 commits ago)

commit 3793ff07395281d0c6f68af3a5be0410c5c3a463
Merge: 85dc139 e4d4a89
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 15 00:55:30 2011 -0700

    Merge branch 'master' into 3.0.x

commit e4d4a89a1bd54164fb62d95ac62a44957d124e68
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Mar 15 00:54:08 2011 -0700

    Automated update of .build_number to 71 for branch master
    Last update: 1e3bf7e6eb51ac550bdc5388f1664f9b4f4dd393 (1 commits ago)

commit 3fd7debd2f5d3e05ffd23d0e1f90119ff50c001b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 15 00:53:35 2011 -0700

    Fix a bug where the placeholder %hide-url didn't match the variable in the assoc. array.  Follow on for #1624

commit 85dc139f2619271cdacab007e69773a11537944b
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Mar 5 18:07:28 2011 -0700

    Automated update of .build_number to 19 for branch 3.0.x
    Last update: 435d0bd0a5f7a718bdd3a5c69a6dc225f98e73c1 (1 commits ago)

commit 1e3bf7e6eb51ac550bdc5388f1664f9b4f4dd393
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Mar 5 18:06:17 2011 -0700

    Automated update of .build_number to 70 for branch master
    Last update: 7e569a21e35ad2461709c5487d37d5a2824cca3d (5 commits ago)

commit 96b715cbd26fbc2905227f5443d7eccdb5e7921e
Merge: 435d0bd 32cd28d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Mar 5 17:06:11 2011 -0800

    Merge branch 'master' into 3.0.x

commit 32cd28dd192ca7d60d9dee3928e70e7be0d29d55
Merge: 9073778 99a817d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Mar 5 17:05:50 2011 -0800

    Merge branch 'master' of github.com:gallery/gallery3

commit 907377835bb34ca395dc5c6ab5a53f0fd2f6392b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Mar 5 17:05:29 2011 -0800

    When we're not auto-fitting the image, pin it to the top of the page.
    This way small images on pages with a ton of comments don't get pushed
    way down.  Fixes #1626.

commit 99a817dd9583ec736177a1ce6245e0f793fd4d47
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Mar 5 17:54:34 2011 -0700

    Automated update of .build_number to 69 for branch master
    Last update: 7e569a21e35ad2461709c5487d37d5a2824cca3d (3 commits ago)

commit e5e50196211a041efcb3ce3ae56d48f88873c0de
Merge: 451ef39 1437ce7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Mar 5 16:54:08 2011 -0800

    Merge branch 'master' of github.com:gallery/gallery3

commit 451ef39d58c64b5387b835b5a8c11b98a5c9659b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Mar 5 16:51:20 2011 -0800

    PATH_INFO mangles apostrophe (and other symbols, I'm sure) into a
    question mark, so any tags containing an apostrophe won't display
    their contents.
    
    Take the simple fix here and change the tag urls to also contain the
    tag id, which avoids having to add a slug for the tag and all kinds of
    validation code.
    
    Fixes #1636.

commit 1437ce7542a344cd7fe08facb5972126d0eff957
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Mar 5 17:14:58 2011 -0700

    Automated update of .build_number to 68 for branch master
    Last update: 7e569a21e35ad2461709c5487d37d5a2824cca3d (1 commits ago)

commit bda14f29eac2c7471d4e5e554493dd21728199e2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Mar 5 15:59:52 2011 -0800

    Put external CSS before external JS, per:
    http://code.google.com/speed/page-speed/docs/rtt.html#PutStylesBeforeScripts
    
    ref:
    http://gallery.menalto.com/node/100693
    
    Thanks Serge!
    
    Fixes #1633.

commit 435d0bd0a5f7a718bdd3a5c69a6dc225f98e73c1
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Mar 5 16:55:24 2011 -0700

    Automated update of .build_number to 18 for branch 3.0.x
    Last update: 8fcd7ce06f6512571986a2d8ce522a8e577d6036 (4 commits ago)

commit d05a55872297446d27f092267f1dd692bbfddc01
Merge: f843b3d 51a16b1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Mar 5 15:54:59 2011 -0800

    Merge branch '3.0.x' of github.com:gallery/gallery3 into 3.0.x

commit f843b3d842580fc77d977a3594e481eef3a24424
Merge: a9a6416 7e569a2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Mar 5 15:51:45 2011 -0800

    Merge branch 'master' into 3.0.x

commit a9a641652237663b31809f7fa633b4ee823da429
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Mar 5 15:51:39 2011 -0800

    Advanced README to 3.0.2

commit 51a16b128a56a16e0f58c2b65f4f2e0f60cebb9a
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Mar 5 16:50:21 2011 -0700

    Automated update of .build_number to 17 for branch 3.0.x
    Last update: 8fcd7ce06f6512571986a2d8ce522a8e577d6036 (1 commits ago)

commit 752a7c5489070ff853f9bfb935b76c3d16cbe234
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Mar 5 15:50:09 2011 -0800

    Advance to version 3.0.2, code name "Mountain View"

commit 7e569a21e35ad2461709c5487d37d5a2824cca3d
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Mar 5 16:46:57 2011 -0700

    Automated update of .build_number to 67 for branch master
    Last update: 3e80fe9228bcbfa01bf87da67a47cd3f284dff01 (2 commits ago)

commit c38d4695a01c939840357d7f59aa836169571048
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Mar 5 15:46:04 2011 -0800

    Add missing phpDoc for the extra Item_Model argument to graphics calls
    and make the param optional.  #1646.

commit 5ff6409a0856134a113c64768e4474e14a6c86ea
Merge: 3e80fe9 ca47b88
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Mar 5 15:31:16 2011 -0800

    Merge branch 'master' of git://github.com/colings/gallery3

commit e90493aab36e42e0a69a24a8b1f27e4736e32d20
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Mar 2 21:11:49 2011 -0700

    Translate user Web Site label. Link web site on user profile page.

commit 5a966e40831da1d113b126dafb9a2112b637211b
Merge: 00772aa 3e80fe9
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Sun Feb 27 17:53:49 2011 +0200

    Merge remote-tracking branch 'gallery3/master'

commit 3e80fe9228bcbfa01bf87da67a47cd3f284dff01
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Feb 25 00:02:57 2011 -0700

    Automated update of .build_number to 66 for branch master
    Last update: d2c77fd0590501f7b6b51d9f4cc033ed9485b082 (3 commits ago)

commit e4d0f7701200b48213dfa852a2cc23537aed6eb4
Merge: 443e49b 8ecbd5b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 24 23:02:40 2011 -0800

    Merge branch 'master' of github.com:gallery/gallery3

commit 443e49b2ae88545f5a56842f2283f4f98dc7b65f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 24 22:52:32 2011 -0800

    Revert overeager escaping introduced in
    https://github.com/gallery/gallery3/commit/bb35aefffbc287efc9823abd4b0e451b86c37378
    in an attempt to resolve #797.
    
    Fixes #1640.

commit 8ecbd5b32f4ee5217f844b1a046bc0e36bb21e21
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Thu Feb 24 23:47:45 2011 -0700

    Automated update of .build_number to 65 for branch master
    Last update: d2c77fd0590501f7b6b51d9f4cc033ed9485b082 (1 commits ago)

commit ca47b887f5bb8ad311c4ab7e4c71aace37ba88e9
Author: colings <colings@example.com>
Date:   Wed Feb 23 20:31:07 2011 -0600

    Added extra arg to gallery_graphics calls and updated users

commit 68edb2454dcd2044a82d8e8f8a1b96330e6d3b8c
Author: colings <colings@example.com>
Date:   Mon Feb 21 15:40:58 2011 -0600

    Added 'item' to parameters passed to graphics rules

commit 00772aaa62e6bce14e58e163ea72f386136c731d
Merge: 3e2610e d2c77fd
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Wed Feb 16 18:25:18 2011 +0300

    Merge remote-tracking branch 'gallery3/master'

commit d759d47ef99ebde158620f43ab46a83f445d9e53
Merge: 02a349f d2c77fd
Author: colings <colings@example.com>
Date:   Sun Feb 13 10:46:43 2011 -0600

    Merge remote branch 'upstream/master'

commit c791ae96d5bb28f39b26a0e556e10e636f97436c
Author: momo-i <webmaster@momo-i.org>
Date:   Tue Feb 1 07:32:44 2011 +0900

    fixed tag broken

commit 8437a85ac87f8fc6b4ee420bde59eda683140063
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 29 08:37:12 2011 -0800

    AUTO_CHECK_INTERVAL --> upgrade_checker::AUTO_CHECK_INTERVAL
    Fixes #1624

commit 8fcd7ce06f6512571986a2d8ce522a8e577d6036
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Jan 22 21:39:44 2011 -0700

    Automated update of .build_number to 16 for branch 3.0.x
    Last update: ea9b9aaf06707b656d9214243fb46c1903fcb489 (1 commits ago)

commit 4ab8fdbdb406862dddc06f75fed7c581225402a2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 22 20:39:24 2011 -0800

    Relabel as "Gallery 3.0.1"

commit ea9b9aaf06707b656d9214243fb46c1903fcb489
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Jan 22 00:10:58 2011 -0700

    Automated update of .build_number to 15 for branch 3.0.x
    Last update: d8715ff99081553c78508ae1ab7a72a7c15dac39 (1 commits ago)

commit 7930e6a70ee7758838acf913b73427ac09ba6b36
Merge: d8715ff 4bbef36
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 21 23:10:22 2011 -0800

    Merge branch 'master' into 3.0.x

commit d2c77fd0590501f7b6b51d9f4cc033ed9485b082
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Sat Jan 22 00:10:20 2011 -0700

    Automated update of .build_number to 64 for branch master
    Last update: 52aef6c8fd4b41688417bb0197df85dba3d27325 (4 commits ago)

commit 4bbef36b1ad696eb318b93da84181e0649b85495
Merge: bc49680 5ac74cc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 21 23:09:42 2011 -0800

    Merge branch 'master' of github.com:gallery/gallery3

commit bc496809389c6d6d2842155aa2c177f037772fa6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 21 23:09:27 2011 -0800

    Update XSS golden file

commit 423daa52d55a5298b461384baedc995eee09a0d1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 21 23:01:06 2011 -0800

    Update copyright to 2011.

commit d8715ff99081553c78508ae1ab7a72a7c15dac39
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Jan 21 10:33:40 2011 -0700

    Automated update of .build_number to 14 for branch 3.0.x
    Last update: 9c59254f401ea5d8184753343a669e84e87d73b6 (1 commits ago)

commit 5ac74cc268a52305514bd4dff68b28847542521f
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Jan 21 10:33:37 2011 -0700

    Automated update of .build_number to 63 for branch master
    Last update: 52aef6c8fd4b41688417bb0197df85dba3d27325 (1 commits ago)

commit e14141f2c5441ef046e7c8c005120312496c6b8c
Merge: 9c59254 6b4ccc5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 21 09:33:29 2011 -0800

    Merge branch 'master' into 3.0.x

commit 6b4ccc56ceabd5721c7ff996e01be719880564f9
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Fri Jan 21 15:39:38 2011 +0100

    Fix: photos get added as albums in case only some photos are selected via server ad
    Fixes #1619

commit 9c59254f401ea5d8184753343a669e84e87d73b6
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Jan 21 02:15:57 2011 -0700

    Automated update of .build_number to 13 for branch 3.0.x
    Last update: 3feb6d2e552b30e8592f92ed9e12c24982c5c211 (1 commits ago)

commit 35fb3a75499e1f08ca31ab9c24c25950cbb74724
Merge: 3feb6d2 52aef6c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 21 01:15:37 2011 -0800

    Merge branch 'master' into 3.0.x

commit 3feb6d2e552b30e8592f92ed9e12c24982c5c211
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Jan 21 01:09:26 2011 -0700

    Automated update of .build_number to 12 for branch 3.0.x
    Last update: db8a0bea4fcf2f6f47425ab69ba7288e77ca9817 (1 commits ago)

commit 52aef6c8fd4b41688417bb0197df85dba3d27325
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Jan 21 01:09:22 2011 -0700

    Automated update of .build_number to 62 for branch master
    Last update: 09a593c832cc768f7e2496273eff4b9b0f77afe0 (1 commits ago)

commit 0dcfdd027747a6847baa61ae7b75c2374d96aa1b
Merge: db8a0be 08c41f2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 21 00:08:58 2011 -0800

    Merge branch 'master' into 3.0.x

commit 08c41f2976cb49b85ec896b11735edb008d53881
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 21 00:07:00 2011 -0800

    Add "html_attributes" theme callback to allow modules to inject attributes into
    the <html> element, including things like namespaces.   Fixes #1615.

commit db8a0bea4fcf2f6f47425ab69ba7288e77ca9817
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Jan 21 00:49:16 2011 -0700

    Automated update of .build_number to 11 for branch 3.0.x
    Last update: 968e9a9391bb19a5d760c63c9097fd9f1ca9421d (1 commits ago)

commit 09a593c832cc768f7e2496273eff4b9b0f77afe0
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Fri Jan 21 00:49:13 2011 -0700

    Automated update of .build_number to 61 for branch master
    Last update: f25c1fab32d603ee0a835caabb6ccc52451f4891 (1 commits ago)

commit 12521e61e239ea2bc34078e846bef4c88e319cad
Merge: 968e9a9 029fa60
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 20 23:43:08 2011 -0800

    Merge branch 'master' into 3.0.x

commit 029fa606be07c6fab0c1de6326a26f0ee442523a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 20 23:42:36 2011 -0800

    Fix a bug introduced in the refactor in
    65448548637f462ad17c12b149cdb2a169d07026 for #1547.  By skipping the
    staging dirs, we wind up scanning the entire filesystem because the
    first model is blank so there's no leading path before the /*.

commit 968e9a9391bb19a5d760c63c9097fd9f1ca9421d
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Jan 19 20:52:41 2011 -0700

    Automated update of .build_number to 10 for branch 3.0.x
    Last update: c30b7e9a09a6b41d486a718842c84640106a7e74 (1 commits ago)

commit f25c1fab32d603ee0a835caabb6ccc52451f4891
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Wed Jan 19 20:52:37 2011 -0700

    Automated update of .build_number to 60 for branch master
    Last update: 265e39fb57537d73302da620c1be542f3246dfcc (1 commits ago)

commit 4cf352460820b36ca34f1bab8f43f1666064084b
Merge: c30b7e9 0126a03
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 19 19:51:12 2011 -0800

    Merge branch 'master' into 3.0.x

commit 0126a0385d5a763b4920bc9ffe63ed9ec03d64f0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 19 19:50:50 2011 -0800

    Fix a bug introduced in 65ff2470a505fbc18211093ac131c29b1e820c3e,
    clearly I didn't test this enough.  Further fix for #1460.

commit c30b7e9a09a6b41d486a718842c84640106a7e74
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Jan 18 22:43:53 2011 -0700

    Automated update of .build_number to 9 for branch 3.0.x
    Last update: 205c211396a7a2cb67b312c25cbde3b2947faf07 (1 commits ago)

commit 265e39fb57537d73302da620c1be542f3246dfcc
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Jan 18 22:43:49 2011 -0700

    Automated update of .build_number to 59 for branch master
    Last update: 412f8f73e33d2f8b02eeedc69bc8a486b2d8e2e8 (4 commits ago)

commit e36e8170a612c7f0a66845b712bec157b0f3520b
Merge: 205c211 174f9d2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 18 21:27:10 2011 -0800

    Merge branch 'master' into 3.0.x

commit 174f9d21d705e7669470e9d038d0bc999cc4abbd
Merge: b78fd8e b9f04ec
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 18 21:26:43 2011 -0800

    Merge branch 'master' of github.com:gallery/gallery3

commit b78fd8eeff0c952d48a886698153c42209eb52b9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 18 21:25:58 2011 -0800

    Create a hidden anchor containing the tag cloud autocomplete url.  This way validates.  Fix for #1577.

commit c06017991636c21582926c0977896c63bbefd85f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 18 21:22:24 2011 -0800

    Revert "Temporarily removed ref tag to get the page validated. (Was also pointing at a rather semi-finished looking page)"
    
    This was breaking the tag autocomplete code, which depends on this value.
    
    This reverts commit 5e8d92552b1384d99d5fef56333deb7eb67a8f92.

commit 205c211396a7a2cb67b312c25cbde3b2947faf07
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Jan 18 11:12:05 2011 -0700

    Automated update of .build_number to 8 for branch 3.0.x
    Last update: 6fd897a4e4def9d2733c43fad69728c64a664d03 (1 commits ago)

commit b9f04ecadd4c996da317940d7fe1ca9462d5dfe8
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Tue Jan 18 11:12:01 2011 -0700

    Automated update of .build_number to 58 for branch master
    Last update: 412f8f73e33d2f8b02eeedc69bc8a486b2d8e2e8 (1 commits ago)

commit 98eae4f7193cdd796114d0d4e6c34856841190e7
Merge: 6fd897a f657a05
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 18 10:09:25 2011 -0800

    Merge branch 'master' into 3.0.x

commit f657a05d7ed21423afb925755bacbb07a1384044
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 18 10:06:29 2011 -0800

    Get rid of the "organize needs rest" message when upgrading to the
    new organize; it may be hanging around from a prior version.  Reinstate
    the installer for this.  Bump organize module to v4.  Follow-on for #1584.

commit 6fd897a4e4def9d2733c43fad69728c64a664d03
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Jan 17 22:40:07 2011 -0700

    Automated update of .build_number to 7 for branch 3.0.x
    Last update: c75e1b1cd2081475b12310b2e409344b0ce62dbc (1 commits ago)

commit ef62b8fe2b00ec325e85fb930a5b54cb77077c49
Merge: c75e1b1 56e6cb9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 17 21:39:12 2011 -0800

    Merge branch 'master' into 3.0.x

commit 412f8f73e33d2f8b02eeedc69bc8a486b2d8e2e8
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Jan 17 22:38:48 2011 -0700

    Automated update of .build_number to 57 for branch master
    Last update: 2999d38beb71b068f8e5f27ba6b01bf81e558e0a (1 commits ago)

commit 56e6cb998f9b2f55af88fef426f8a69cc0058cb2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 17 21:37:51 2011 -0800

    Change the [x] close box to "(remind me later)".  #1605.

commit c75e1b1cd2081475b12310b2e409344b0ce62dbc
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Jan 17 22:20:10 2011 -0700

    Automated update of .build_number to 6 for branch 3.0.x
    Last update: 6536365c6d370afcfb19ebf79626cc02502c326e (1 commits ago)

commit 5a705fcec9cfe7fc10b1eb0b1b6ec0d0028a4781
Merge: 6536365 83bf1d7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 17 21:19:24 2011 -0800

    Merge branch 'master' into 3.0.x

commit 2999d38beb71b068f8e5f27ba6b01bf81e558e0a
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Jan 17 22:19:03 2011 -0700

    Automated update of .build_number to 56 for branch master
    Last update: f985adad586cd4140afdadc88eda519cce7b79da (4 commits ago)

commit 83bf1d767b9dac33ca1c2f01141358cd0b657523
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 17 21:18:24 2011 -0800

    Fix typo: upgrade_check -> upgrade_checker
    #1605.

commit 897bf969181daedeb9bdbbcf5bc2f90e28003701
Merge: 20ae106 0dfd7eb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 17 21:16:57 2011 -0800

    Merge branch 'master' of github.com:gallery/gallery3

commit 20ae106c22b9528d34fb85d09a7ab542e6c6c880
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 17 21:15:33 2011 -0800

    Display a message in the "Check for Gallery upgrades" block when
    there's a newer version available, even if the user has dismissed the
    site status message.  #1605.

commit 6536365c6d370afcfb19ebf79626cc02502c326e
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Jan 17 21:08:00 2011 -0700

    Automated update of .build_number to 5 for branch 3.0.x
    Last update: e50e4872f73c0633f53b4aa392167d774c152dac (3 commits ago)

commit 0dfd7eb614a8b9b4db5b79742b25f5ff20db9534
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Jan 17 21:07:57 2011 -0700

    Automated update of .build_number to 55 for branch master
    Last update: f985adad586cd4140afdadc88eda519cce7b79da (1 commits ago)

commit 2bd7d2b3ef44c2078295dcdc156b45a5883d1450
Merge: 40722df 34b3f8b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 17 20:07:17 2011 -0800

    Merge branch '3.0.x' of github.com:gallery/gallery3 into 3.0.x

commit 40722df3ec0a9d3867f15ae67a292d93377318cc
Merge: 8c15f59 df703fb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 17 20:07:13 2011 -0800

    Merge branch 'master' into 3.0.x

commit df703fbd5cf8f3c5152cd6448dd0e08b3e48ea93
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 17 20:06:54 2011 -0800

    Update installer for #1612 and #1605.

commit 34b3f8b3c6e6e808b7f0917a96e112b526cc2a76
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Jan 17 21:04:45 2011 -0700

    Automated update of .build_number to 4 for branch 3.0.x
    Last update: e50e4872f73c0633f53b4aa392167d774c152dac (1 commits ago)

commit f985adad586cd4140afdadc88eda519cce7b79da
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Jan 17 21:04:41 2011 -0700

    Automated update of .build_number to 54 for branch master
    Last update: 2b190c055922bbf37620bc104a6e06f3dd6f2b82 (1 commits ago)

commit 8c15f592eef8cd544f1425065db030f13c7c06c8
Merge: e50e487 45caba0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 17 20:04:38 2011 -0800

    Merge branch 'master' into 3.0.x

commit 45caba09f81e53dfa4264bc74c4e6ed7935bd5f9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 17 20:03:11 2011 -0800

    Move the code that clears the upgrade_check site status message to the
    upgrader so that it's cleared any time we run an upgrade.  Part of

commit e50e4872f73c0633f53b4aa392167d774c152dac
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Jan 17 20:25:29 2011 -0700

    Automated update of .build_number to 3 for branch 3.0.x
    Last update: 24334032a427d71785dfb514900d7c502bf1992d (1 commits ago)

commit 42de9ed17130e098133f52a396106c45584c8fb1
Merge: 2433403 548627a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 17 19:24:21 2011 -0800

    Merge branch 'master' into 3.0.x

commit 2b190c055922bbf37620bc104a6e06f3dd6f2b82
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Jan 17 20:22:37 2011 -0700

    Automated update of .build_number to 53 for branch master
    Last update: 548627a9fd55cb6a2b3ece8ba261cbee7d721231 (0 commits ago)

commit 24334032a427d71785dfb514900d7c502bf1992d
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Jan 17 19:18:04 2011 -0800

    Revert "Automated update of .build_number to 3 for branch 3.0.x"
    the automated script got it wrong.
    
    This reverts commit babfb319e88e48f0b3dac62ab00f30e5561bbd02.

commit 548627a9fd55cb6a2b3ece8ba261cbee7d721231
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Jan 17 19:17:36 2011 -0800

    Revert "Automated update of .build_number to 53 for branch master"
    the automated script got it wrong.
    
    This reverts commit d5e7e1d52199221ad7d37aa5212cc960e8818778.

commit babfb319e88e48f0b3dac62ab00f30e5561bbd02
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Jan 17 19:05:37 2011 -0700

    Automated update of .build_number to 3 for branch 3.0.x
    Last update: 19461701c59bf948524e0211cc3c62e584bc7560 (2 commits ago)

commit d5e7e1d52199221ad7d37aa5212cc960e8818778
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Jan 17 19:05:33 2011 -0700

    Automated update of .build_number to 53 for branch master
    Last update: 29be21bb0deaf70558b1aa02a115e67daefea0bd (2 commits ago)

commit 898b2fe6cdb08a41bb46332141e0af32520b2392
Merge: 40c9c63 c46d5f3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 17 17:36:13 2011 -0800

    Merge branch 'master' into 3.0.x

commit c46d5f3da9dafb55045d9535ec5f9e09b9926c1a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 17 17:35:57 2011 -0800

    Rename BUILD_NUMBER->.build_number

commit 40c9c635fdd1e26243ed5e421a065a5670b98578
Merge: 1946170 76411d7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 17 17:34:32 2011 -0800

    Merge branch 'master' into 3.0.x

commit 76411d7d6d481bc2ab51e24ec2dbf003f43ce40b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 17 17:33:10 2011 -0800

    Rename BUILD_NUMBER to .build_number so it's not so loud.

commit 19461701c59bf948524e0211cc3c62e584bc7560
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 17 17:30:26 2011 -0800

    Update BUILD_NUMBER format

commit 72633b328138a81affab369c05a7756639e19aaa
Merge: 5695e73 29be21b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 17 17:30:07 2011 -0800

    Merge branch 'master' into 3.0.x

commit 29be21bb0deaf70558b1aa02a115e67daefea0bd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 17 17:27:16 2011 -0800

    Add BUILD_NUMBER to the security check in .htaccess
    Change BUILD_NUMBER to be .ini format and add a big "do not edit" comment.

commit c1c67ecf8df8084ed0381b1fcbfa749500af5840
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Jan 17 18:12:15 2011 -0700

    Updating BUILD_NUMBER to 52 for branch master
    Last update: e22c2e64ba9ba18706083710de7b15401fc4c9da (10 commits ago)

commit 29efbea12a56d81ec828a99308f6765e097c5803
Merge: 14ae5d8 33c2140
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 17 17:08:15 2011 -0800

    Merge branch 'master' of github.com:gallery/gallery3

commit 14ae5d854400d632b63a331f541f180b8d1f3ea1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 17 17:07:32 2011 -0800

    Update version checking code to expect "branch_" as the prefix for
    all branch related lines.  For #1605.

commit 5695e73e1a07165dc5a838534338776462dea3d0
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Jan 17 14:22:22 2011 -0700

    Updating BUILD_NUMBER to 2 for branch 3.0.x
    Last update: e22c2e64ba9ba18706083710de7b15401fc4c9da (9 commits ago)

commit a8a619b5a52084a1ea6ff7d259adf3369c318487
Merge: fdb1127 19d8002
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Jan 17 13:22:22 2011 -0800

    Merge branch '3.0.x' of github.com:gallery/gallery3 into 3.0.x

commit 33c21406ebab0c481cfbcf0e5564dd67626f6ae0
Author: Automatic Build Number Updater <bharat+gallery3_build_number_updater@menalto.com>
Date:   Mon Jan 17 14:22:20 2011 -0700

    Updating BUILD_NUMBER to 51 for branch master
    Last update: e22c2e64ba9ba18706083710de7b15401fc4c9da (8 commits ago)

commit fdb1127d7c46013c918678f6466cf3081cca481f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 17 12:51:36 2011 -0800

    Cosmetic improvements to the README

commit 19d8002eefd13fd605d1d252f591db581d17f05e
Merge: fa95c9f 66bb496
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 16 23:19:41 2011 -0800

    Merge branch 'master' into 3.0.x

commit 66bb496b6c2ad9c5341644b2e303e694078374d1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 16 23:14:57 2011 -0800

    If the logged in user is an admin and it's been more than 7 days since
    the last check and auto upgrade checking is enabled, fire off an XHR
    to check for a possible upgrade.  Finishes off #1605.

commit 167f635a6ce5a71b35450844f9b5c647aa14bcc1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 16 23:06:19 2011 -0800

    Add arguments to random::int() to match mt_rand().  Follow on to cd48b89f3166e7fa732b5cb06d33fba018af9127
    for #1527.

commit fa95c9f6c32d9d5fab76f5102ce361110d3f2d2f
Merge: edc2e64 70abfb2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 16 22:18:20 2011 -0800

    Merge branch 'master' into 3.0.x

commit 70abfb2a20734802c922c0e9917d2a1778aef3f2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 16 22:16:09 2011 -0800

    Upgrade checking code is now here, along with a bump of the Gallery
    module to v46.  There's a new block in the admin dashboard which
    controls whether automatic checking happens, and lets you check
    immediately.  If a newer version is detected, a site status message
    appears for admins providing upgrade instructions.
    
    Automatic checking is not yet implemented (even though the UI claims
    that it exists).  This is all for #1605.

commit 84d576606d709dcccef2549fdb926d47494a876c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 16 21:46:03 2011 -0800

    Change the value column of the messages table from a varchar(255) to a
    text.  Fixes #1612.

commit b78b1090184dd863c984e54652935963cc502eb8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 16 17:10:30 2011 -0800

    Fix indentation.

commit edc2e646d4b6a836a35edd8b7cb07a82c107c401
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 16 17:05:10 2011 -0800

    Arbitrarily set the 3.0.x branch to build number 1.

commit be808823f207d7c59729487ccd1a28f9945ccc55
Merge: 7c026b0 4f5aed5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 16 17:04:30 2011 -0800

    Merge branch 'master' into 3.0.x
    
    Conflicts:
    	modules/gallery/helpers/gallery.php

commit 4f5aed5b55d54959907ca5d9505be01cde355846
Merge: 6849581 3e04535
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 16 17:03:47 2011 -0800

    Merge branch 'master' of github.com:gallery/gallery3

commit 684958144817a724b41db9637486b9ced853c020
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 16 16:01:30 2011 -0800

    Specify that we don't want the BUILD_NUMBER changes that happen in other branches
    by using a custom merge-keep-ours merge algorithm.

commit e22c2e64ba9ba18706083710de7b15401fc4c9da
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 16 16:08:58 2011 -0800

    Arbitrarily set the build number for master to 50

commit ac44e9c930ec83545b37e1e31381919fbd849d26
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 16 15:49:34 2011 -0800

    First step in setting up version checking.
    
    We now have two types of packages (release, git).  Instead of using
    constants, we now have gallery::version_string() which returns the
    current version string.  If you're on a release package, then the
    version string looks like:
    
      3.0 (Santa Fe)
    
    If you're on a git package, then the version string looks like this:
    
      3.0.1 (branch 3.0.x build 3)
    
    We track the build number in a new file in the gallery3 root called
    BUILD_NUMBER which we will update periodically with the latest
    build number for each branch.

commit 0020f87d6a23ce00200074b678a9293d055e27a3
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Sat Jan 15 21:49:22 2011 +0100

    Fixed paging for albums ordered by random.
    MySql has problems when comparing float values against -seemingly same- float input, see http://dev.mysql.com/doc/refman/5.0/en/problems-with-float.html for details.
    Fixes #1610

commit 7c026b052af52335f4ffad9fc079ab6f8fc3f5d2
Merge: 1861a73 3e04535
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 16 14:27:31 2011 -0800

    Merge branch 'master' into 3.0.x

commit 3e0453503919a36ef93b3d17ef44d67e2473488e
Merge: 44da46a 375e3b1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 16 14:16:26 2011 -0800

    Merge branch 'Ticket#1610' of git://github.com/Joe7/gallery3

commit 1861a731e8b70143214510cbb840ef47b88ace7f
Merge: 3eb6e25 44da46a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 15 15:12:00 2011 -0800

    Merge branch 'master' into 3.0.x

commit 44da46abd4aa2e210300d1d54c1d6896988fd71b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 15 15:11:37 2011 -0800

    Golden file updates for xss and controller authentication.

commit 8583c1d259e33ab8c85ade70ee521bb21452cff5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 15 15:10:27 2011 -0800

    Style fixes.

commit 3eb6e259e203b88dd9cc94565c27210e122f468a
Merge: 834c304 f0dd16e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 15 14:59:45 2011 -0800

    Merge branch 'master' into 3.0.x

commit f0dd16efc428d372cca6ec90ca31251e3ce24382
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 15 14:59:25 2011 -0800

    Revive the code from Cache_Driver::exists and put it into a helper
    function in the test so that we can keep our tests functioning.
    Follow on to 66fd8c7518ab71466aca72d20fb7bcd5f374af26 for #1559.

commit 834c3049d29e6f400a5e0f021f8fd87407d67d02
Merge: 9fb833e 02f30b9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 15 14:20:38 2011 -0800

    Merge branch 'master' into 3.0.x

commit 02f30b91bf8f68118a578de2194e66a7a16a291a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 15 14:20:26 2011 -0800

    Follow on to 966dee8628293f78fbf9431281709ceba011d3c2 for #1586 --
    don't try to update the tag item count if we didn't change any items
    with this change (ie: a tag rename).  In that case, we haven't loaded
    the related items so we don't have any idea what the count is going to
    be.

commit 9fb833ed873e327ae534f2817506a123268de4ba
Merge: 09ea593 ee13b93
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 15 14:00:08 2011 -0800

    Merge branch 'master' into 3.0.x

commit ee13b934f46d67982e5eeea21f81ac58f166741c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 15 13:14:43 2011 -0800

    Fix all the head() and admin_head() theme callbacks to return the
    results of the $theme->css() and $theme->script() calls.  This handles
    the case where combining scripts/css returns HTML instead of putting
    it in the queue for combination.  Fixes #1611.

commit 38b74932878e8e0c7eb071552568bbb014355996
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 15 13:07:14 2011 -0800

    whitespace fix.

commit 375e3b1fa4616c77fd37764c3812f6e03b20b95d
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Sat Jan 15 21:49:22 2011 +0100

    Fixed paging for albums ordered by random.
    MySql has problems when comparing float values against -seemingly same- float input, see http://dev.mysql.com/doc/refman/5.0/en/problems-with-float.html for details.
    Fixes #1610

commit 376f09c4e171e03a5b3764e51e0d28f1f57a233b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 15 12:47:15 2011 -0800

    Reorganize the url() function out from in the middle of the script/css combining functions.

commit 09ea593d4894fc6465b50a4e5c2937f7a80b1657
Merge: 229f8a7 d511fc7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 15 12:35:59 2011 -0800

    Merge branch 'master' into 3.0.x

commit d511fc77adfa628b04968d153e397425e3a93358
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 15 12:33:51 2011 -0800

    Tweake Joe's change to admin_users to revert the code that joins against the items
    table; it's not clear that this is going to be efficient for large data sets.

commit a7d4f87bdee174dbd9baf65ba99cf5cda16758b5
Merge: e4a43c9 df802de
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 15 11:31:43 2011 -0800

    Merge branch 'Ticket#1557' of git://github.com/Joe7/gallery3

commit 229f8a7658ecbddc2112b2ef52d29378d40ee8ed
Merge: cd4ce5a e4a43c9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 11 21:42:12 2011 -0800

    Merge branch 'master' into 3.0.x

commit e4a43c99e421c830e569eaae6294286ed51e0ad8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 11 21:41:20 2011 -0800

    Mirror .htaccess PHP settings into php.ini for hosts that have
    per-dir php.ini support configured, but don't use .htaccess.
    Fixes #1603.

commit cd4ce5affc06ba0dc0ba06ff7dd893d8c524159a
Merge: 489db86 7eabf6c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 11 21:23:28 2011 -0800

    Merge branch 'master' into 3.0.x

commit 7eabf6c1c27c2c0e98895f663bb2853d72976e01
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 11 21:21:59 2011 -0800

    Use Math.round() instead of Number() to convert floating point numbers
    to integer.  Fixes overflow probelm that causes #1490.  Thanks to
    nkinkade for the fix.

commit 489db8667203112c71f169b6f0eba7db469418c6
Merge: c902994 09d3469
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 11 17:56:45 2011 -0800

    Merge branch 'master' into 3.0.x

commit 09d34696a12ae15f6c7378a64b2359465b2d7277
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 11 17:54:33 2011 -0800

    Update comments to annotate what data is where during the process.
    Follow-on for #1518.

commit e3df9c1611861cc5a294d4c758b6220712d1e698
Merge: ee53744 7f6d871
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 11 17:53:16 2011 -0800

    Merge branch 'Ticket#1518' of git://github.com/Joe7/gallery3

commit c902994ac9d396c9986187b49f0f3995ae935589
Merge: 08a8d7b ee53744
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 11 17:01:30 2011 -0800

    Merge branch 'master' into 3.0.x

commit ee53744aa73b06f262122b6236014618fe6d742c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 11 16:59:57 2011 -0800

    Two improvements to Joe's fix for #1504:
    1) Trap all exceptions, eg dns or connectivity issues and
       report back in the form (but put the stack trace in the logs)
    2) Rename "noconn" to "no_connection"

commit f80b5959f1bd3a015d55e10709040a35d6850090
Merge: 92db7f4 049f2af
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 11 15:38:03 2011 -0800

    Merge branch 'Ticket#1504' of git://github.com/Joe7/gallery3

commit 08a8d7b584522f954fa19ef5f549a7fd5a8ee56b
Merge: 92283ec 92db7f4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 11 15:29:46 2011 -0800

    Merge branch 'master' into 3.0.x

commit 92db7f42181f6582763e7b5c56b18b989b061e21
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 11 15:23:20 2011 -0800

    Update some comments.

commit 252aba9eaec7d1aace5e1052b1c7ccf82ab3a2d5
Merge: 84e08a6 24c0b69
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 11 15:17:05 2011 -0800

    Merge branch 'fix-viewable2_master' of git://github.com/BigMadWolf/gallery3

commit 049f2af1c982bb12fee6e5512e4830f63d06d343
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Wed Jan 12 00:05:11 2011 +0100

    Returning 2 flags from l10n_client::validate_api_key(), 1 to reflect if connection was built up properly (just a boolean, not distuingishing between reasons in case of a failure), the other to reflect API validating success status.
    Using this presenting a slightly more meaningfull error msg to user in case the connection would fail.
    Fixes Ticket #1504

commit 7f6d87166df138073d85dd5201de8b9d19bc6cd2
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Tue Jan 11 23:16:05 2011 +0100

    Removed check as input value is compared against dataset of validated values, and request is only processed further in case of a match. => this is unnecessary

commit df802de6ae3cc0c294a1a3dc76db29ff21949b9f
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Tue Jan 11 21:28:25 2011 +0100

    Making good use of Pagination class to reduce code (removed MY_Controller which duplicated some functionality available in Pagination as well)

commit 00b520fffd867389b5a030ddefee9f468cad044c
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Tue Jan 11 20:53:48 2011 +0100

    coding style

commit 92283ec33d5d6116795843c09041942b3dcf1f0c
Merge: dd2f17b 84e08a6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 11 01:04:44 2011 -0800

    Merge branch 'master' into 3.0.x

commit 84e08a62838b0299a5daa7c9cac4be3eca6d0cb1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 11 01:04:10 2011 -0800

    Don't resize if the target size is the same as the original. Fixes #1602.

commit dd2f17b860bd77d977470b0708b09a426c372c7f
Merge: 3cf330b 5ac49d4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 10 22:21:27 2011 -0800

    Merge branch 'master' into 3.0.x

commit 5ac49d497f51a3828c1254b5024a4aa898f86530
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 10 22:20:12 2011 -0800

    Create new APIs for allowing themers to control what CSS/JS get
    combined and when.  Backwards compatible in that old themes will work,
    but their CSS/JS will no longer be combined unless they make some
    changes.  Fixes #1600.

commit 3cf330b9b34a2439fe0268871f167430ae81efb0
Merge: 1132e61 9dfb733
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 10 19:24:56 2011 -0800

    Merge branch 'master' into 3.0.x

commit 9dfb733ad7d5e7e5aa002833d52d1b8642609161
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 10 19:24:38 2011 -0800

    New albums should take the sort order from their parent.  Fixes #1599.

commit 1132e614c3c55aeccf3fe5c58c4b080709343301
Merge: f282ba6 23eaec7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 10 15:50:31 2011 -0800

    Merge branch 'master' into 3.0.x

commit 23eaec7063b81d4dae04ec3f5c311a0a2f228a05
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 10 15:49:15 2011 -0800

    Stop using "which" to find binaries.  Create system::find_binary()
    which traverses the $PATH and returns any executable binary of the
    appropriate name that it can find.  Fixes #1555.

commit f282ba60983cc818e1096cca2ee84daf7af87f32
Merge: 47bb93a d557b2a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 10 14:51:07 2011 -0800

    Merge branch 'master' into 3.0.x

commit d557b2a63e2ea424965fb53be9f6b76ad3f18015
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 10 14:50:30 2011 -0800

    Allow File_Proxy_Controller to run in private gallery mode since it
    does all the right permission checks.  This prevents a hotlink to a
    private photo in a private gallery from kicking the user out to a
    login page.  Fixes #1594.

commit 47bb93a50a9737438f384a47acb4c03fc8280330
Merge: 4f520a7 2826b70
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 10 14:36:53 2011 -0800

    Merge branch 'master' into 3.0.x

commit 2826b70bec2fa6d9c852bf62f6ecc440839679ad
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 10 14:36:23 2011 -0800

    Use CSS not JS to determine the full size of the full size overlay.  Fixes #1541.

commit 4f520a70d4a6cad399a783c4de2792cab877e7e6
Merge: b005f5a bd6bd02
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 10 14:08:00 2011 -0800

    Merge branch 'master' into 3.0.x

commit bd6bd029a7c2e0247d4da931c49f3731498cd303
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 10 14:04:15 2011 -0800

    Fix up the version detecting regex for GraphicsMagick and don't crash
    if the regex doesn't return properly.  Follow on to
    3ec0ba956dced01a97f2ee7bd943d326c42350e3 for ticket #1595.

commit 20ba7b6bee3f5800e73e88e1543856a646a3a973
Merge: cdd09a8 eecb244
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 10 13:54:20 2011 -0800

    Merge branch 'graphics/detect_toolkits()_refactoring' of git://github.com/Joe7/gallery3

commit cdd09a86629912a4fe3f820ab12736daa99ec87f
Merge: 65ff247 b2897b4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 10 11:46:12 2011 -0800

    Merge branch 'Ticket#1593' of git://github.com/Joe7/gallery3

commit b005f5a6bd5c7c3c52341a90e256280ff2ef715f
Merge: 58ef68c 65ff247
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 9 22:36:40 2011 -0800

    Merge branch 'master' into 3.0.x

commit 65ff2470a505fbc18211093ac131c29b1e820c3e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 9 22:34:44 2011 -0800

    Use eeldivad's fallback code from http://gallery.menalto.com/node/96806#comment-358404
    instead of relying solely on preg_quote.  Fixes #1460.

commit 58ef68c3ab1bbafe099ed6c4f377541041a187e8
Merge: b297120 6544854
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 9 22:30:00 2011 -0800

    Merge branch 'master' into 3.0.x

commit 65448548637f462ad17c12b149cdb2a169d07026
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 9 22:29:26 2011 -0800

    Move the directory queue into the database as well, otherwise if you
    have too many directories it blows out the task queue and the whole
    thing falls over.  Fixes #1547.

commit b2971201c250468dda44edeb9201f775e7cda75c
Merge: c83e063 fca6d12
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 9 18:49:52 2011 -0800

    Merge branch 'master' into 3.0.x

commit fca6d1254a2aeb95bee15fea4c503e4588fc9f1b
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Sun Jan 9 14:20:30 2011 +0100

    Fixed offset sanitizing code - Fixes Ticket#1593

commit c83e063f3615bad986cb6825e147f12d27193a26
Merge: c3d12aa b7ffb05
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 9 18:38:27 2011 -0800

    Merge branch 'master' into 3.0.x

commit b7ffb0501e09878b7d95f46a2b678678e0e60fa6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 9 18:38:09 2011 -0800

    Replace preg_quote with a more targeted regex to fix the problem where
    directories get skipped.  Fixes #1460, I think.

commit 97fc535411478f939b303c75a067b7dad9123112
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Sun Jan 9 21:19:55 2011 +0100

    Minor css mod to make it obvious paging belongs to user block

commit 89737c09d572efe35014e668cdd06407c2c19d62
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Sun Jan 9 20:52:31 2011 +0100

    Paginator for user manager admin view
    Closes ticket #1557
    Note: also optimizes the way item count is retrieved for users, saving <user_count>-1 queries when displaying this page

commit 02a349f68ac480d5b1a630e14b4f2e3558328673
Merge: c2a1ea6 de5b06a
Author: colings <colings@example.com>
Date:   Sun Jan 9 11:43:45 2011 -0600

    Merge remote branch 'upstream/master'

commit b2897b49225982b83335a212c5cf16812d95f911
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Sun Jan 9 14:20:30 2011 +0100

    Fixed offset sanitizing code - Fixes Ticket#1593

commit 24c0b69847d4144c29e557fa654c30247e628a9c
Author: Jérémy Subtil <bigmadwolf@gmail.com>
Date:   Sun Jan 9 00:22:46 2011 +0100

    Fixed item controllers so that any item position is computed correctly, when some other items belonging to the same parent album are not viewable.
    Changed depracated calls to item_Model::get_position() to item::get_position().

commit 0d7e951aa5f7329edb25e821de95051668789bcd
Author: Jérémy Subtil <bigmadwolf@gmail.com>
Date:   Sat Jan 8 22:57:09 2011 +0100

    Moved item_Model::get_position() method to the Item helper.  It now calls the viewable() method on every query.

commit c3d12aa9867d383130d90dce3875dfac56d69619
Merge: 9c3b010 de5b06a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 9 02:21:43 2011 -0800

    Merge branch 'master' into 3.0.x

commit de5b06ae7442db2c7a8999c0c806997248ddb151
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 9 02:19:59 2011 -0800

    Add an icon for the delete button so that it stands out a little bit more,
    and disable the button when nothing is selected. Fixes #1592.

commit 9c3b01084be3212e27760b82046cda31ce86f3a9
Merge: c727c46 fc2733a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 9 00:17:05 2011 -0800

    Merge branch 'master' into 3.0.x

commit fc2733a2d1aa06cda3415b624aeb28e62deabb95
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 9 00:16:40 2011 -0800

    Rename delete_items() to delete_selected_items().

commit a495419b9159592386a3766ad0417631447e24c5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 9 00:00:16 2011 -0800

    Center the image inside the outer thumb div.

commit 1a1a05ed9446bb57a0ef457a8cbf8beca5619c31
Merge: b78a131 4c80ed5
Author: Beckett Madden-Woods <beckett@beckettmw.com>
Date:   Sun Jan 9 04:03:31 2011 +0000

    Merge commit 'upstream/master'

commit b78a1319ae10841ff6be00d041b3d8d6967ca7a3
Author: Beckett Madden-Woods <beckett@beckettmw.com>
Date:   Sun Jan 9 03:59:25 2011 +0000

    Add item delete support to the organize module. Fixes #1588.

commit c727c46bc50fda010e9b3fc9a5fe03b506d785b7
Merge: c154a01 4c80ed5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 8 19:29:30 2011 -0800

    Merge branch 'master' into 3.0.x

commit 4c80ed53d2a3fa3392d2da61c730b6d30de9f2be
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 8 19:27:08 2011 -0800

    Put up a more visually pleasing placeholder for items that are
    missing a thumbnail.  Fixes #1591.

commit c154a01596a5158b33718807a77d515f9370d85a
Merge: 6daaf8b d0df489
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 8 18:54:19 2011 -0800

    Merge branch 'master' into 3.0.x

commit d0df4896b0c96099709b10fa8cbb7d15a4f20461
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 8 18:49:07 2011 -0800

    Specify a width for the sort order dropdowns so that they don't
    get squeezed on smaller screens.

commit 6daaf8b066cfe2f54eb4357d1eb74bab97e19557
Merge: 252dc2f 8f5a3fd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 8 18:45:34 2011 -0800

    Merge branch 'master' into 3.0.x

commit 8f5a3fd0c269745e2d540a85bfe54fcde66a6687
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 8 18:45:10 2011 -0800

    Update the dialog title to reflect the album we're currently
    organizing.

commit 252dc2f9ea035349699fd0f01efdb81e0f986b01
Merge: 4c96e81 249ca99
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 8 18:21:16 2011 -0800

    Merge branch 'master' into 3.0.x

commit 249ca99c69da1af7663a63ebf82034dafd51eb5d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 8 18:20:13 2011 -0800

    Updated with new bundle that has Ext.Msg in it.

commit 4c96e81fc1e3878f8b8913b0d77f3b8069692c5b
Merge: 4e94e5a 713bd4e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 8 18:20:53 2011 -0800

    Merge branch 'master' into 3.0.x

commit 4e94e5a3277bbec34406b6a51199605a93013264
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 8 18:20:13 2011 -0800

    Updated with new bundle that has Ext.Msg in it.

commit 713bd4eb6a9bc91a244680828ce881ee8ea5f836
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 8 18:10:43 2011 -0800

    Improve gallery::find_file() to do a better job of detecting the modules/themes directories.
    Fixes #1590.

commit 8e32e66f76d45dc88dcf968deb64e139f908a067
Merge: 99ece4a e8bbf53
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 8 17:10:04 2011 -0800

    Merge branch 'master' into 3.0.x

commit e8bbf537083a8f2ce6d70beb11057e41917f3499
Merge: 92f6605 5e8d925
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 8 17:09:32 2011 -0800

    Merge branch 'Ticket#1577' of git://github.com/Joe7/gallery3

commit eecb24429115b5f1883971befe0de18ac718fc2a
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Sun Jan 9 02:06:35 2011 +0100

    Made t() calls parsable by localization scanner

commit 99ece4a94fcb2b3a2fd75468c5422944aa7643e7
Merge: 5208a01 92f6605
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 8 17:02:04 2011 -0800

    Merge branch 'master' into 3.0.x

commit 92f66058d30a04681a01b886bdc652a70652cbfa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 8 16:58:52 2011 -0800

    Revert "Warn admins after login if their PHP install has the"
    
    This reverts commit 612ddd7050889974fc1f7e449e715b4c1129c0bb.

commit 7d07190af1bda3ae1ec0e899a9997c659532ed29
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 8 16:58:04 2011 -0800

    Turn off session.use_trans_sid -- that feature attempts to inject session ids
    into generated URLs and forms, but it doesn't interoperate will with Gallery's
    Ajax code.

commit 5208a01739f0535e126c7ba75253de68b9335f5b
Merge: 3b4bf6c e1e1e86
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 8 16:52:02 2011 -0800

    Merge branch 'master' into 3.0.x

commit e1e1e860cd1b19ebef491f0c0f82a3cd18e63721
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 8 16:51:25 2011 -0800

    Use the code version when installing a module that has no installer,
    instead of hardcoding version 1.  Fixes #1589.

commit 3b4bf6c07bf0e986db3ada84371daddd2de58b8a
Merge: b09b034 4fc5d50
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 8 12:59:52 2011 -0800

    Merge branch 'master' into 3.0.x

commit 4fc5d50eb83f29c0a28ce16b9ff22179fd3f2c98
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 8 12:59:12 2011 -0800

    Bump the organize module to version 3 and get rid of the code that
    makes sure that it depends on the REST module.

commit 7dd63630d8f7fc46847388c307ecf160a729aafb
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Sat Jan 8 19:44:46 2011 +0100

    Minor coding style fix

commit 3ec0ba956dced01a97f2ee7bd943d326c42350e3
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Sat Jan 8 19:39:23 2011 +0100

    Refactored graphics::detect_toolkits() so ImageMagick and GraphicsMagick shares the same loop. Just as premarked as todo.
    Will make https://sourceforge.net/apps/trac/gallery/ticket/1555#comment:3 an even quicker task

commit 5e8d92552b1384d99d5fef56333deb7eb67a8f92
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Wed Jan 5 23:05:23 2011 +0100

    Temporarily removed ref tag to get the page validated. (Was also pointing at a rather semi-finished looking page)

commit b09b03463394319868c6c4fb0f22af348bddb8b7
Merge: 96f5eee 7b382b3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 8 00:20:13 2011 -0800

    Merge branch 'master' into 3.0.x

commit 7b382b363dfd3002cb1f10089c7a1e9e82eb804a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 8 00:19:57 2011 -0800

    Use the appropriate protocol for the reCAPTCHA script (so use https when the page is https).
    Fixes #1445.

commit 96f5eee645b636d03f9ad643ef942762806b615e
Merge: 425ee70 966dee8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 7 23:38:36 2011 -0800

    Merge branch 'master' into 3.0.x

commit 966dee8628293f78fbf9431281709ceba011d3c2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 7 23:38:08 2011 -0800

    Move tag count management into the model.  Fixes #1586.

commit 425ee70a6f565bc5b84031e342200eba5d38dbe9
Merge: 1fae615 7bbbe30
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 7 21:53:12 2011 -0800

    Merge branch 'master' into 3.0.x

commit 7bbbe307ac3979b3e540d379c45a88046e4ff0e4
Merge: d17ba03 07acd2b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 7 21:44:03 2011 -0800

    Merge branch 'Ticket#1154' of git://github.com/Joe7/gallery3

commit 07acd2b750db4a8f77015474254cb1d9f8307d25
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Thu Jan 6 06:57:55 2011 +0100

    Set video player to keep the aspect ratio of the video when playing in fullscreen
    Fixes ticket #1154 - credit goes to floridave

commit 1fae615745448b603ea23243bc989ea4033cc539
Merge: a09c9d5 d17ba03
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 7 20:45:19 2011 -0800

    Merge branch 'master' into 3.0.x

commit d17ba036ee2a4cadb5d1fa03397bbf975d6c254b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 7 20:40:24 2011 -0800

    Don't enable the REST module by default (fixes #1585).
    Bump the info module per changes for #662.

commit a09c9d55861420d694e174f0ea7998053f23da49
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 7 20:40:24 2011 -0800

    Don't enable the REST module by default (fixes #1585).
    Bump the info module per changes for #662.

commit 32bf1ef1cbd2ea9b700bfb5f08ab56b6a7f35a16
Merge: 6c54ec8 e1e2d94
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 7 20:37:46 2011 -0800

    Merge branch 'master' into 3.0.x

commit e1e2d9448fa28eec508d889c2f56da2084e0ac07
Merge: 89597e7 edcb3b6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 7 20:29:06 2011 -0800

    Merge branch 'master' into organize_dev

commit 6c54ec80fb37f781a12a8a09179bd728c8194ba9
Merge: 4ae2e15 edcb3b6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 7 20:27:16 2011 -0800

    Merge branch 'master' into 3.0.x

commit edcb3b665690acc85067bc43e1900390be228a4e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 7 20:23:49 2011 -0800

    Make the CSS for the organize menu consistently g-organize-link.  Fixes #1070.

commit 4ae2e15da20a1fcfcca123b32beb3a435cf79ff3
Merge: 09c7f7a 85ae320
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 7 20:18:49 2011 -0800

    Merge branch 'master' into 3.0.x

commit 85ae3202886d2bd132f6cd327cc2d9f0650ca911
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 5 21:05:20 2011 -0800

    Keep Item_Model::scale_dimensions from upscaling.  Fixes #1579.

commit 09c7f7aab0b440c409b4e4197b2742297c42ce29
Merge: 704136c 4756db4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 7 20:17:00 2011 -0800

    Merge branch 'master' into 3.0.x

commit 4756db435c1b934137f0ca2f169f74ab509ab72f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 7 20:09:27 2011 -0800

    Minor style cleanup

commit e4c6662daeab45e9d05841e58d66ac68d4511375
Merge: e86e8b8 06d9406
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 7 20:03:26 2011 -0800

    Merge branch 'master' of git://github.com/ckieffer/gallery3

commit 9364f0d931883bb5f17f22c4003ee59256f9efb6
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Wed Jan 5 23:31:50 2011 +0100

    Allow '..' segment in photo/album paths through file_proxy (as is not forbidden in other places like add album/item) and explitely look for /../ instead
    Note: directory path can't end in '.' forcibly so this shall be fine
    Fixes Ticket #1518

commit e86e8b8bd1d828d81080c63f9a063254145115e4
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Fri Jan 7 17:53:37 2011 +0100

    Added missing spaces (manual merging from 0d36b97aca3b5ed53ea3ea398ce28b0f6198e577)

commit 5bfb7fb96a5dc2e0bc511c998a7c055b83b2915a
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Thu Jan 6 04:49:50 2011 +0100

    Added batch importer for groups
    Added missing ordering for comments and tags retrieving queries
    (One might gets the same output without ordering especially if column is the primary key, but the only way to go for sure it by setting it)

commit c338d3138e2c93bfb219a8d32ba9110138fcf9c2
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Thu Jan 6 02:31:50 2011 +0100

    Importing Gallery2 users in batches
    Fixes Ticket #1554

commit f2477703faa7cd05ff1aa16da3ecef7b666bef40
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Fri Jan 7 17:33:37 2011 +0100

    Fix against ticket #1581 - based on https://github.com/Joe7/gallery3/commit/0d36b97aca3b5ed53ea3ea398ce28b0f6198e577

commit 89597e7e703dddef8a2379f822772f9fd205d03b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 6 23:43:26 2011 -0800

    Add a spinner to the dialog when loading the iframe so that it's not
    just a blank dialog.  Create separate CSS for dialog vs. frame.
    Don't show the Loading message for the first load.

commit 24b8e9b060c77523cf557f7a8ffc94f72a7e0b42
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 6 23:15:07 2011 -0800

    Make the sort column combobox wider.

commit 8ece1e3a1906685055e17175a25050397dba8423
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 6 23:10:42 2011 -0800

    Create a custom bundle of ExtJS for organize.  It's 18% smaller, but
    still pretty large.

commit 0c9dbc96631a95938abfd77586de017549ee2901
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 6 21:40:16 2011 -0800

    Adjust CSS for IE compatibility while keeping the grid tight on non-IE.

commit 06d94065ce0919f34151da05b32642a95397044f
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Jan 6 21:03:19 2011 -0700

    Updates per Bharat's pull request review. Renamed info_block_metadata event to info_block_get_metadata.

commit a897a9d53f7df79f55888141444a22f38665dce6
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Jan 6 21:00:28 2011 -0700

    Also missed commiting this in a1e3b1ed17177cf7e0ef.

commit 740a6531fc2ea04afa09d652dc0058698c6cfbc8
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Jan 6 20:57:56 2011 -0700

    Missed this commiting this in a1e3b1ed17177cf7e0ef.

commit 600e04b58cb19c53871e60abfe4a4d9deab6dc1e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 6 12:02:01 2011 -0800

    Lock the drag zone if the album is not editable so that users don't
    start illegal drags.

commit fc6907dcfe35f2341528620ccedf2db02a30d065
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 6 11:46:15 2011 -0800

    Switch back to setting nodes as leaves, but fix the drop zone code to
    allow dropping on leaves.

commit 9682b7ea6e2486c2e5dc43799ca215c51dda0baf
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 6 09:59:08 2011 -0800

    Remove unnecessary leaf param from TreeNode results.

commit 0abd77c9e5dd0b7a5d265932490b694238323093
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 6 09:58:21 2011 -0800

    Fix typo.

commit 7600e224338943dbe61372020701d87b7e503ab9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 6 09:58:14 2011 -0800

    Whitespace fix.

commit 514d5affa62f5646ecc7843a39b36d4fad3abbd5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 6 09:49:37 2011 -0800

    When generating the tree, don't mark nodes with no children as a leaf
    because that confuses the TreeDropZone JS into thinking that it can't
    ever have children.

commit 84f287865e5382d7c01c11d1b518c97e8d2bd97b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 6 08:17:01 2011 -0800

    Don't allow moving an item into its own hierarchy.  Just silently skip
    those sources for now.

commit 56c4997663cfc93174bd0b450768b0bffffb5169
Merge: 9e6e213 84f73fb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 6 08:12:54 2011 -0800

    Merge branch 'organize_dev' of github.com:gallery/gallery3 into organize_dev

commit 84f73fbe9e1b7127fb342dc164b066f51b7fa67d
Merge: edf2a46 d74aad0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 6 00:14:59 2011 -0800

    Merge branch 'master' into organize_dev

commit edf2a46b0276ca86e13fcbc66ff1b4aa1edf64fb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 6 00:05:35 2011 -0800

    horizontally center thumbnails

commit 9e6e2138dfd507dbd0ce8835072b7d950855b3d4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 5 23:55:21 2011 -0800

    Only mask the data view on changes, it's a little less jarring.

commit 33b8ec7a6264f91db2639944bc10005c2709f0e3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 5 23:47:14 2011 -0800

    Add a label for the sort order

commit b424cac5c5b05d2238082e986d78dfff7b18fe89
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 5 22:48:27 2011 -0800

    Double clicking on an album switches to that album, selects it in the
    tree and expands it if it's not already expanded.

commit 2167168f5112fe9337c544578baa51cc5aed7652
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 5 22:32:33 2011 -0800

    Get rid of the expando caret in front of empty folders

commit aebcd445135648603590e2ab99f40b72ee8ed097
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 5 22:19:33 2011 -0800

    Swap organize_frame and organize_dialog since they were semantically
    reversed.  organize_dialog contains the stuff that pops up in the dialog,
    organize_frame contains the stuff that's in the embedded iframe.

commit e6b3886f8f6a3a526876a80470420501bdb25612
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 5 22:15:13 2011 -0800

    Functional improvements:
    - Add support for dragging a selection box.
    
    Visual improvements;
    - The "ghost" selection now has minimized thumbnails so that
      you're dragging a smaller div around the screen.

commit 986374300191892ae5672ea545977831d7a0b807
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 5 21:22:41 2011 -0800

    Only refresh the tree when we move albums around.

commit ce70669b8f09a9154723df80992ab6afe02c1d5c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 5 21:17:11 2011 -0800

    Visual tweaks for IE8 compatibility.
    
    Set the min width and min height to what IE8 wants the thumbnail's box
    to be when the inner image maxes out at 120 pixels (specified in
    Organize_Controller::album_info()).
    
    Avoid using inline-block.

commit e2b0f92007eb9ef2fad994c9f8957df0bfcbeccf
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 5 21:05:20 2011 -0800

    Keep Item_Model::scale_dimensions from upscaling.  Fixes #1579.

commit b8124efbd8f068758e70e53cc94fb1ea6c2b9ffb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 5 20:37:14 2011 -0800

    Refactor generic error handling code.  It still shows a pretty lame error message.
    Add a comment explaining the TreeLoader preload hack.

commit 28760daaefebf802dbe28ac171ea16aef3007418
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 5 20:11:32 2011 -0800

    Improve IE grid compatibility by forcing a regular width/height for
    thumbnails and using float: left.

commit a1e3b1ed17177cf7e0ef6b443afdea6a676f65b2
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Jan 5 16:00:35 2011 -0700

    Added info module show metadata options and set all to true. Admins may turn off display of items from the Advanced Settings list.

commit 372905bd1310fc446db795661e1eb013674e5a75
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 5 02:00:40 2011 -0800

    Support moving an item before or after the target.

commit c590f881ebbb005390f6e4f8a37a6252a5796f51
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 5 01:25:17 2011 -0800

    single -> double quotes.

commit 3a11e0d825d1f7d2698bd5c7b6b812236c7626a3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 4 22:21:02 2011 -0800

    This was left out of 31652eae44bdd93b45d965a8288a3069e37d1934.

commit bd5e71ba6a84b4cda484bb4e4a8a77889bb0a02d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 4 22:20:24 2011 -0800

    More drag/drop tweaks.
    - Fix a bug in the prior commit where we could no longer drag/drop in
      the thumb_data_view.
    - Change the CSS class when dropping items in the tree panel to be a
      check box, not a plus symbol.

commit 31652eae44bdd93b45d965a8288a3069e37d1934
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 4 22:00:30 2011 -0800

    Drag/drop improvements:
    - Restrict drag and drop to albums where the user has edit permissions.
    - Use the existing TreeDropZone instead of making a new DropZone to take
      advantage of TreeDropZone features.
    - Properly use dropConfig in TreePanel.

commit 2e5d4a59b119fecce4f647eaa49565b024678cf9
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Jan 4 19:52:25 2011 -0700

    Display an item's tags in the info block.

commit 1d2e583c3177aa498abd70dde442d767efc4e99e
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Jan 4 19:25:02 2011 -0700

    Pass the whole item, not just it's ID, to the info_block_metadata event.

commit e921c3c5b5b8f963f121601d346c50a24bc0cf15
Merge: dbff45c d74aad0
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Jan 4 15:59:26 2011 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit dbff45cc91ac44f18ef02b8abdd220a2864f050f
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Jan 4 15:56:16 2011 -0700

    Add an info_block_metadata event to allow other modules to add to the item info block.

commit b692d55ad47842371c38c61f3c16af36d06dca3a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 4 11:50:25 2011 -0800

    Convert "\w-" in regexes to "\w\-" for compatibility with some versions
    of Chrome 10.x.
    
    references:
     http://www.sencha.com/forum/showthread.php?117836-3.3.1-Invalid-regular-expression
     http://code.google.com/p/v8/source/detail?r=5911
     http://trac.webkit.org/changeset/73594
     http://codereview.chromium.org/5703001/
    
    This change has been reverted in Chrome, and the regex was fixed in ExtJS so
    this patch should be short lived.

commit caf454f32650e654ddf77592f4e083352a576415
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 4 00:15:56 2011 -0800

    Add missing images

commit 51d66df1924b9fb835ed741042beddce4f6e899f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 4 00:14:53 2011 -0800

    Switch to using Ext.Element.mask for a custom busy message that looks
    a little cleaner.

commit 798c876ba1cb5b83f6cd6616b90321e9e527b864
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Jan 4 00:40:12 2011 -0700

    Convert the metadata array to be associative. Replaced single with double-quotes. Indenting fixes.

commit f7f6cbf04ff2b19535b0d3b9dbd5f4ab41395bfc
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Jan 4 00:28:44 2011 -0700

    First info module refactor step: Load item metadata into an array. Loop through this array in the info block view to display loaded data.

commit 79f27ea1ecefd6e0fdf725f218cc66c18b568fb4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 3 22:59:07 2011 -0800

    Remove a bunch of trailing commas from arrays to make IE happy.

commit 3928058ba5897eb2c6a2f3fb76664012db014a89
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 3 22:31:20 2011 -0800

    Fix a few small visual issues:
    - Let the thumb data view scroll on drag/drop
    - Switch the album panel to be a FitLayout and use a title and
      bbar instead of nested panels.
    - Set the tree_panel width to be 200px to start.

commit 0cd1ccfdc27b082b1f792f8d65f47f35fa5ce678
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 3 21:45:37 2011 -0800

    missing image

commit 90852b192970173042ac34191b12be725021897a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 3 21:23:21 2011 -0800

    whitespace fix.

commit 8e21dda195015a3c9420553f874c10d3ebfa5dfa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 3 20:24:21 2011 -0800

    Complete rewrite of the organize module in Javascript using the Sencha
    JavaScript library.  It's got all the functionality from the Flash
    version except it doesn't support creating new albums or uploading
    photos.
    
    Only tested in Chrome 10.0.x so far.

commit 704136cb620fdebefe2300e327d81c7963136d28
Merge: aef9062 d74aad0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 3 12:27:25 2011 -0800

    Merge branch 'master' into 3.0.x

commit d74aad072d8ccca70efb1c8b673e8368566a1974
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 3 12:25:51 2011 -0800

    Some small follow on fixes for #1559 and #1568:
    1) Make database changes in gallery_installer::install() instead of
       in installer/install.ql
    2) Bump the version number in modules/gallery/module.info

commit aef9062a7aa9390e18005644b988f86165482a17
Merge: 793034e 21ad2c6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 3 11:43:22 2011 -0800

    Merge branch 'master' into 3.0.x

commit 21ad2c64ff8add478352a0ee7800d87328594ee0
Merge: 4a88210 8263cb0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 3 11:42:45 2011 -0800

    Merge branch 'master' of github.com:gallery/gallery3

commit 4a882108259f9542a6c8f2ffe95c9ee0e1c102cd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 3 11:41:25 2011 -0800

    Follow on to cfaa62370ecbdb3badf4ab68bbefa7cfedaea154 to fix indentation.
    Fixes #1569.

commit f364e8a96b47f0e4f674c8b36317fc80184b219a
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Mon Jan 3 20:28:54 2011 +0100

    Using array support introduced in 8295201adf948ea35f21f75801b7a8bf36c27569

commit cfaa62370ecbdb3badf4ab68bbefa7cfedaea154
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Sun Jan 2 18:59:23 2011 +0100

    Reimplemented Kohana 2.3's View::set_global() with array support.
    Allows for cleaner code and fewer function calls.

commit 793034eab35e90e992987ccafca5e4ca2e425888
Merge: ae7a309 8263cb0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 3 11:15:41 2011 -0800

    Merge branch 'master' into 3.0.x

commit 8263cb023fb4fe0b6fdc9fc61b35518dcf09946e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 3 11:14:58 2011 -0800

    Updated installer for the bump of the gallery module to v43.  Fixes #1568.

commit e6a5f39b9113fa9cfc526b873947e365793d4e3e
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Mon Jan 3 20:07:12 2011 +0100

    case fix

commit 70ac063c5590572d1a074632e9e06558951eaf52
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Mon Jan 3 19:49:13 2011 +0100

    case fix

commit b26eff7f23b970a7983baf5e211ba88968effb9d
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Mon Jan 3 15:44:36 2011 +0100

    Bugfix: input validation validates description up to length of 65535 chars, but DB trimmed data over 2048 chars. Converting column into TEXT type.
    Note: The effective maximum length of a VARCHAR in MySQL 5.0.3 and later is subject to the maximum row size (65,535 bytes, which is shared among all columns) and the character set used.
    In contrast to CHAR, VARCHAR values are stored as a one-byte or two-byte length prefix plus data. The length prefix indicates the number of bytes in the value. A column uses one length byte if values require no more than 255 bytes, two length bytes if values may require more than 255 bytes.

commit ae7a309782f9ef04ad5c698bd8af54387447af07
Merge: e665507 7ce902d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 3 11:02:57 2011 -0800

    Merge branch 'master' into 3.0.x

commit 7ce902d373ac67d2267a886c18238eb53dd98093
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Mon Jan 3 15:14:32 2011 +0100

    Removed accidental whitespace

commit 336632fea0a955d74099cd169b3178c01f250ff5
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Mon Jan 3 13:21:54 2011 +0100

    Keep view counters of all item types accurate
    Added common increment_view_count() func in item model for reuse

commit c2a1ea64eda2bf3e22ecaf4df4714c091bc5d7c4
Author: colings <colings@example.com>
Date:   Sun Jan 2 09:48:23 2011 -0600

    Tweak to include parent_id in resize call, for custom albums.

commit e6655078ec0e022d3e401a907812c4c497c43022
Merge: 9c3f8a7 e760200
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 31 22:50:42 2010 -0800

    Merge branch 'master' into 3.0.x

commit e760200eeec2f003f95072118a6cc52971c76dad
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 31 22:49:57 2010 -0800

    Identify the case where the active sidebar blocks didn't produce any
    content and print out a more informative message in that case.  Fixes

commit 9c3f8a73b62c5adbd4a903cffde00f10a96350a4
Merge: b3f06af affbc28
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 31 22:29:35 2010 -0800

    Merge branch 'master' into 3.0.x

commit affbc28876901058810d9fd26a8f7795084f2efd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 31 22:29:00 2010 -0800

    Update gallery module to v42 to reflect key changes in the cache
    table in 440597356d8719bdc6733d2d86aaef5f86d05a1e for #1559.

commit 866a7a87b71febe4ffbd3b708c4775f1ee3df9e1
Merge: a8b0254 c5473ec
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 30 01:38:21 2010 -0800

    Merge branch 'master' of git://github.com/Joe7/gallery3

commit b3f06af145d7a3b986cfccb1f284645443b89997
Merge: 7a7c158 a8b0254
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 29 17:32:12 2010 -0800

    Merge branch 'master' into 3.0.x

commit a8b0254e4a64b46bef303fbf2dafc4d9553ae38f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 29 17:31:28 2010 -0800

    Improve the solution for #1545 by sorting the settings menu properly
    to be naturally ordered and case insensitive.

commit 7a7c1586e8ebccddfa0be09ecf20ed19fe50d223
Merge: d50e541 dd6da5e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 29 12:57:21 2010 -0800

    Merge branch 'master' into 3.0.x

commit dd6da5e2333023895a4a76786910f4bdf7e395c8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 29 11:59:44 2010 -0800

    Add a minified version of json2.js from https://github.com/douglascrockford/JSON-js/blob/master/json2.js
    by Douglas Crockford at 8d11dc6950eafc7d01f141ce91d4f585caa29f3b.  Fixes #1351.

commit d50e541f7b229c0584972899048d862f8dc858ec
Merge: 5cd8464 3e117fc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 29 11:33:50 2010 -0800

    Merge branch 'master' into 3.0.x

commit 3e117fc2b46f1fc1cb8388486e156312d9f7fde5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 29 11:33:08 2010 -0800

    Remove a stray comma at the end of a JSON array which was breakig IE.   Fixes #1561.

commit 17700b805fad7a74e871366159b4fe1ae4c2d883
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Tue Dec 28 22:28:55 2010 +0100

    Coding style fixes: identation on line 48+removed trailing whitespaces, added spaces around =s

commit 869bba5e132ceb960b72744fc3ebad5e6af14439
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Tue Dec 28 18:42:43 2010 +0100

    Truncating table first againt collides when converting INDEX into Unique

commit 440597356d8719bdc6733d2d86aaef5f86d05a1e
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Mon Dec 27 22:16:29 2010 +0100

    Added changes to installer and upgrader scripts to support INSERT ON DUPLICATE KEY UPDATE SYNTAX in cache lib

commit 66fd8c7518ab71466aca72d20fb7bcd5f374af26
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Mon Dec 27 15:35:33 2010 +0100

    Using ON DUPLICATE KEY UPDATE instead of SELECT+UPDATE/INSERT style method (that does 2 trips to Database server and is less optimal).
    exists() method is not needed anymore thus got removed

commit fda92507964b9521b632a97c9e343b4639a657f7
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Mon Dec 27 14:03:11 2010 +0100

    Added limit on select as for the outcome it doesn't matter if there are 20 rows or just 1. Is sufficient to return straight after reading 1 row.

commit 5cd8464e3a544a35fe0dd66b5ece8bf9b1251963
Merge: 9620ed7 b42fcb9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 28 23:11:10 2010 -0800

    Merge branch 'master' into 3.0.x

commit b42fcb9cda4dafdb9db86770f54965b3fb2fc7ab
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 28 23:10:05 2010 -0800

    Use db::expr instead of "new Database_Expression".  Resolves #1560.

commit 9620ed7acd5366fe27bb9809a83def607bf4eae2
Merge: eafa8bb 9f3c6e4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 28 22:00:55 2010 -0800

    Merge branch 'master' into 3.0.x

commit 9f3c6e4bee9f2ccae04b7b241c07845b9f233cfd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 28 22:00:25 2010 -0800

    Update test to match change in Item_Model::as_restful_array made in
    7e31f97b4cbc5cf1894611de1e9de7a3efc6ad50 for #1536.

commit 5d37d529b060fea06bae68c664bc91b00297bae6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 28 21:56:31 2010 -0800

    Update golden file to reflect the change in
    c989981041e66e336f1410b651173305ab184aba for #1520.

commit c5473ec4c070a4e548b5c2f83c9c0ece372d11d2
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Tue Dec 28 22:28:55 2010 +0100

    Coding style fixes: identation on line 48+removed trailing whitespaces, added spaces around =s

commit 3c31237406a4a55bfc0955ca433a1be0aec210a7
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Tue Dec 28 18:42:43 2010 +0100

    Truncating table first againt collides when converting INDEX into Unique

commit 15792c4ddfec9741324c6968cc3e70fb23cef8ad
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Mon Dec 27 22:16:29 2010 +0100

    Added changes to installer and upgrader scripts to support INSERT ON DUPLICATE KEY UPDATE SYNTAX in cache lib

commit f4ecb939f5f61f16715df2ed5a88f01d85926eb6
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Mon Dec 27 15:35:33 2010 +0100

    Using ON DUPLICATE KEY UPDATE instead of SELECT+UPDATE/INSERT style method (that does 2 trips to Database server and is less optimal).
    exists() method is not needed anymore thus got removed

commit a4100521d7a60a31e2f0c22d12fc0e371c201f8c
Author: Joe7 <jozsef.rnagy@site.hu>
Date:   Mon Dec 27 14:03:11 2010 +0100

    Added limit on select as for the outcome it doesn't matter if there are 20 rows or just 1. Is sufficient to return straight after reading 1 row.

commit eafa8bb5bfca5ebc0d692d10d2c4675b44cc810e
Merge: efc724c d0e78fc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 26 23:10:16 2010 -0800

    Merge branch 'master' into 3.0.x

commit d0e78fc5cf5671d69bd815dd1aff9041616be3f2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 26 23:06:09 2010 -0800

    Fix capitalization to be sentence case.

commit 2d4d6133188b3b0052cce803d7f96b63b78af91f
Author: dmolavi <dmolavi@gmail.com>
Date:   Sat Dec 25 16:09:42 2010 -0500

    Correct image block plurality, fixes 1506

commit efc724c0016dab06357f408c6834fbd5a7863ccf
Merge: d18fe2f 11df9f2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 24 01:11:15 2010 -0800

    Merge branch 'master' into 3.0.x

commit 11df9f204f110ebb1a82e851a668bbaa4b7560ee
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 24 01:10:17 2010 -0800

    Added Croatian as hr_HR.  Fixes #1514.

commit d18fe2fb66a1b6227175c9ab1facf5e7d233872b
Merge: 2381437 c989981
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 24 00:39:01 2010 -0800

    Merge branch 'master' into 3.0.x

commit c989981041e66e336f1410b651173305ab184aba
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 24 00:38:25 2010 -0800

    Use the item title wherever possible as the page title and get rid of
    the "Browse Album" text which shows up way too much.  Fixes #1520.

commit 2381437717f978b12005502f39359d4dbfbdeaf9
Merge: 140e257 b5ba61f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 23 23:37:27 2010 -0800

    Merge branch 'master', remote branch 'origin' into 3.0.x

commit b5ba61fc53e44d55978dd0d35ada80da4c47715d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 23 23:34:04 2010 -0800

    Create a way for controllers to exempty themselves from maintenance
    mode and private gallery mode by setting the following constants in
    the controller to true.
    
      ALLOW_MAINTENANCE_MODE
      ALLOW_PRIVATE_GALLERY
    
    Fixes #1411 and the subsequent refactoring fixes #1551 as well.

commit 2b83918efd387dac1b86667a6c9027758dd4dbef
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 23 23:16:30 2010 -0800

    Fix PHPDoc for composite().

commit 140e25745e415ae672a7eb411826661545dc59a6
Merge: ae6dd18 032e6fd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 21 20:53:49 2010 -0800

    Merge branch 'master' of github.com:gallery/gallery3 into 3.0.x

commit 032e6fde5f99c3150a4ae70e410ce314d8c3877a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 21 20:47:14 2010 -0800

    Change MY_url::parse_url to use item::find_by_relative_url.

commit 98fd1e9957ff0d65d1bbb0eaa2df6c1e59487b25
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 21 20:47:07 2010 -0800

    Implement item::find_by_relative_url with tests.

commit c5ede5881bfdc0544e1ab59984dad7e7dc20a6ac
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 21 19:36:23 2010 -0800

    Updated to use the new item::find_by_path() API.

commit d9299f3b3f4b1a52f5b68399cfcaa96d5b367899
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 21 19:33:47 2010 -0800

    Change item::find_by_path() to check the relative_path_cache first,
    and only fall back the name/level comparison if there's no cached
    entry.  Update tests accordingly.

commit 2a08cbf76da0f9984c0e182e6c448b516d8d7db3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 21 16:58:54 2010 -0800

    Return an empty Item_Model when item::find_by_path fails

commit f493130e59f26d41f090c5ca40e95b416b9b154b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 21 16:55:01 2010 -0800

    Tighten up item::find_by_path slightly.  Augment the tests to cover
    special characters in the file name ("+" is an edge case differentiator
    between rawurlencode and urlencode).

commit c7096cc9ebe4b737c06629b975317aaa9806297f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 21 16:32:02 2010 -0800

    Fix assertion order to be (expected,actual)
    Change strinct concatenation to be variable interpolation to tighten it up.

commit addd384bbdca6a9f066403c1d2919f3e863e072e
Author: Kriss Andsten <kriss@sverok.se>
Date:   Wed Dec 22 07:55:26 2010 +0800

    Minor changes to satisfy the G3 code standards.

commit 48640005a4edac955d9087f62fed1ab5f756b686
Author: Kriss Andsten <kriss@sverok.se>
Date:   Tue Dec 21 09:03:46 2010 +0800

    Packaging + tests of Bharat's find_by_path routine.

commit ae6dd18b68d6566db24df8d732491bee827f5f08
Merge: 6f432bc 612ddd7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 18 11:56:30 2010 -0800

    Merge branch 'master' into 3.0.x

commit 612ddd7050889974fc1f7e449e715b4c1129c0bb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 18 11:55:04 2010 -0800

    Warn admins after login if their PHP install has the
    session.use_trans_sid feature enabled, since this will cause random
    logouts.  Partial fix for #1316.

commit 6f432bc8def1cd39d0011763760c62e2d1729f5c
Merge: 8073c6a dbb9b8b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 17 22:21:05 2010 -0800

    Merge branch 'master' into 3.0.x

commit dbb9b8b1c8ee5395a65b6329c793e7a2c398ef00
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 17 22:19:46 2010 -0800

    Sort the Admin > Settings menu instead of relying on module activation order.
    Requires making Menu::get() return a reference.  Fixes #1545.

commit 8073c6aaf7dfd659ebfd92a74ae9b3287e5e3f17
Merge: 5ce201d e60edcd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 17 17:30:22 2010 -0800

    Merge branch 'master' into 3.0.x

commit e60edcdeba577e8cdbdbbc700cb3dfe9d0dd9443
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 17 17:30:00 2010 -0800

    Include the root in the tree output.

commit 5ce201d2a4d5af75da55d1bca17fd17582b72940
Merge: 15d19c1 b6c202d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 16 22:18:31 2010 -0800

    Merge branch 'master' into 3.0.x

commit b6c202d572a2abd5fdd0205bc4d0127d3291ec24
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 16 22:18:04 2010 -0800

    Swap the order of the CSS and JS for performance.  Fixes #1540.

commit 15d19c16575cf76f1ebe668c65fa94523b66c9c8
Merge: a0b99e7 6e58fce
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 16 21:02:38 2010 -0800

    Merge branch 'master' into 3.0.x

commit 6e58fced201705d73f5e080f16f482ae0f15e333
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 16 21:01:51 2010 -0800

    Follow on to 16555935ee45a09b8d5b5b351222631ba2ce2132 to clean up the
    style a bit.  Tracked in #1539.

commit 16555935ee45a09b8d5b5b351222631ba2ce2132
Author: Kriss Andsten <kriss@sverok.se>
Date:   Fri Dec 17 11:32:58 2010 +0800

    Fetch permissions for non-albumbs by parent rather than by item, allowing the result to be cached.

commit a0b99e72e472f1c3f76da7786492ec3bcf507945
Merge: db88f6b 7eaf49a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 16 20:40:00 2010 -0800

    Merge branch 'master' into 3.0.x

commit 7eaf49a6ca97afbe6c82fc830602e7006d53f704
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 16 20:38:01 2010 -0800

    Create a "tree" rest resource that can return the entire album tree in
    a single fast request, among other operations.  Fixes #1538.

commit 161a85d3f5a6e8ed5835b901eb1d08e07e40be81
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 16 20:37:44 2010 -0800

    Enable profiling output in the HTML output for REST.  Fixes #1535.

commit 7e31f97b4cbc5cf1894611de1e9de7a3efc6ad50
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 16 20:37:00 2010 -0800

    Improve Item_Model::as_restful_array() to take an array of fields so
    that we only return the fields we care about.  This improves
    performance when retrieving large numbers of items.  Fixes #1536.

commit 53a2652fd6ba652b1b6604f8a4930403376a3ef5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 16 20:36:00 2010 -0800

    Create url::merge_querystring() which merges a query string into an
    existing url.  Fixes #1537.

commit db88f6bd108d089c6ff95b8dee5e1a2a0509cebc
Merge: 6e83e5a 6ac82bc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 16 14:53:12 2010 -0800

    Merge branch 'master' into 3.0.x
    
    Conflicts:
    	modules/gallery/helpers/gallery.php

commit 6e83e5a3e70ab50f6a108491d364943b5074424d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 16 11:33:41 2010 -0800

    Detect safe_mode and abort the install.  Fixes #1534.

commit 6ac82bc6b72e94466787e291e15968f15f33089d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 16 11:33:41 2010 -0800

    Detect safe_mode and abort the install.  Fixes #1534.

commit 3db22c69210e6525f8d191f36311c4a229544b38
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 15 19:57:09 2010 -0800

    Follow on to 1057436b7c483c60b3c128fab993a3b78fac7093 -- cache the
    users and groups as an array so that multiple calls will not call
    ORM_Iterator->current() repeatedly.

commit 8a5bbc896b2b281039a5e34a5fc330b826825dd2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 15 19:57:09 2010 -0800

    Follow on to 1057436b7c483c60b3c128fab993a3b78fac7093 -- cache the
    users and groups as an array so that multiple calls will not call
    ORM_Iterator->current() repeatedly.

commit c260f4386a2cafbc200b2bb8a235fbb78e01aa11
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 15 16:28:18 2010 -0800

    Cache the result of User_Model::groups() and Group_Model::users() and
    invalidate it on save/delete for efficiency.  Fixes #1529.

commit 1057436b7c483c60b3c128fab993a3b78fac7093
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 15 16:28:18 2010 -0800

    Cache the result of User_Model::groups() and Group_Model::users() and
    invalidate it on save/delete for efficiency.  Fixes #1529.

commit c77cf83eefe430ef5808b4d8f944c7b339ee1dbb
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Dec 9 21:59:23 2010 -0700

    Fixed path to loading-small.gif. Thanks serged!

commit b9e11a6f93077a2b012e0a4314667c5b0cf06291
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 15 15:15:48 2010 -0800

    Don't show the "can't find ffmpeg" message to non-admins.  Fixes #1528.

commit 19cf03c0d11e8225cbfc9ab48ea742b71b2efaa1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 15 15:15:48 2010 -0800

    Don't show the "can't find ffmpeg" message to non-admins.  Fixes #1528.

commit d9dbd542de02a4572b983b5d17190ed71bbfb41b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 15 14:57:00 2010 -0800

    Consolidate all the random code into a random helper that offers:
      random::hash()
      random::string()
      random::percent()
      random::int()
    
    So that we don't have lots of different ways to get random values all
    over the code.  Follow-on to #1527.

commit cd48b89f3166e7fa732b5cb06d33fba018af9127
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 15 14:57:00 2010 -0800

    Consolidate all the random code into a random helper that offers:
      random::hash()
      random::string()
      random::percent()
      random::int()
    
    So that we don't have lots of different ways to get random values all
    over the code.  Follow-on to #1527.

commit ac90ad143b5705882736e697dac223b367327eba
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 15 12:48:56 2010 -0800

    Use mt_rand() instead of rand() since it provides better portability.
    Fixes #1527.

commit 45c63f4d118bfc99924edb8685442035349af6db
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 15 12:48:56 2010 -0800

    Use mt_rand() instead of rand() since it provides better portability.
    Fixes #1527.

commit 10679dd6d431adc856ae4d8b78f7784720361fa7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 15 12:24:31 2010 -0800

    Follow on to d2be26e407aeb620082bcad2d5a45272868b38a1 to update the
    unit tests to reflect the proper type filtering for #1503.

commit 6fb0eb4e97e3bbfa50029f0b4249c10bd22abe09
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 15 12:24:31 2010 -0800

    Follow on to d2be26e407aeb620082bcad2d5a45272868b38a1 to update the
    unit tests to reflect the proper type filtering for #1503.

commit f4cc85458fd3dd2a0616bcb1b82a840f4517fa9d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 15 12:08:56 2010 -0800

    Clean up golden file as a follow-on to
    3c523bcac6e902973c5891c02842254eaecd33a4 for #1499.

commit ff4c930338a80a7a5eb220f539aac1f06c748bc4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 15 12:08:56 2010 -0800

    Clean up golden file as a follow-on to
    3c523bcac6e902973c5891c02842254eaecd33a4 for #1499.

commit 3f07084b019fdfc187363770eb093322d97f6bc6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 15 12:07:02 2010 -0800

    Clean up xss golden file as a follow-on to
    945e79b17182f7c96eb4b566bd41d26b5f8c4288 for #1478.

commit 18470a60012b8ab48b8c2a6a94673b69500de4a7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 15 12:07:02 2010 -0800

    Clean up xss golden file as a follow-on to
    945e79b17182f7c96eb4b566bd41d26b5f8c4288 for #1478.

commit 45a86241e4e25fb1b25677a1d22f18851e2d7d8e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 15 11:57:46 2010 -0800

    Follow on to d2be26e407aeb620082bcad2d5a45272868b38a1 to convert tabs to spaces.

commit f8890be62b6c1ab14001111f10a8cbcdf973cdc1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 15 11:57:46 2010 -0800

    Follow on to d2be26e407aeb620082bcad2d5a45272868b38a1 to convert tabs to spaces.

commit 5fa9488f4a71429c253cdf2b8fcc44d2aa64450d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 15 11:17:22 2010 -0800

    Move the test time limit code into Unit_Test since some parts of the
    code (like ORM_MPTT) mess with the time limit which interferes with
    the overall time limit set in Gallery_Unit_Test_Controller.

commit 7c06d2195757bd55f88d9d083c412ed1cfbcd90e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 15 11:44:29 2010 -0800

    Amend db00958cee5e7373cf4bc439d65e687e7ef2d985 by extending the system
    user_agents.php instead of replacing it.  This lets us avoid having to
    reformat the file to get File_Structure_Test to pass and will let us
    take advantage of further improvements ot the Kohana version of the file.
    Additional fix for #1436.

commit a0b7d397dd3a1192800c185a929ce871ae744f38
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 15 11:44:29 2010 -0800

    Amend db00958cee5e7373cf4bc439d65e687e7ef2d985 by extending the system
    user_agents.php instead of replacing it.  This lets us avoid having to
    reformat the file to get File_Structure_Test to pass and will let us
    take advantage of further improvements ot the Kohana version of the file.
    Additional fix for #1436.

commit 587284ab38a78580c4ce83735fb563aa9951e701
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 15 11:17:22 2010 -0800

    Move the test time limit code into Unit_Test since some parts of the
    code (like ORM_MPTT) mess with the time limit which interferes with
    the overall time limit set in Gallery_Unit_Test_Controller.

commit c11b7b1d98707d0daa299d7d77b475d07cc5e5e1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 14 21:18:40 2010 -0800

    Move photo/movie file extension validation into the model.  Fixes #1524.

commit 79740a2c77ad5c9b048e094cc164fd0129aba16a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 14 21:18:40 2010 -0800

    Move photo/movie file extension validation into the model.  Fixes #1524.

commit d6866544142506b1ad26d72bc46f8746f7365d7b
Merge: 6c46382 c0f3985
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 14 16:26:30 2010 -0800

    Merge branch 'master' of github.com:gallery/gallery3

commit c0f398554a8c14501a4668eb2e8570f9390e636e
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Dec 9 21:59:23 2010 -0700

    Fixed path to loading-small.gif. Thanks serged!

commit 3e2610ea83c60805d5e727df6509da6c49fd6c7b
Merge: 6aabab4 c3ef892
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Thu Dec 9 18:31:01 2010 +0200

    Merge remote branch 'gallery3/master'

commit fb4d64375e18c2401422379e841c40b3297b15db
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 2 08:38:16 2010 -0800

    Ok, do a real fix for #1499 by creating version 3 of the image_block
    module and creating the image_count variable if it wasn't already set.

commit 6c46382fd01744c20a8fee0e4483b6f99f592740
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 2 08:38:16 2010 -0800

    Ok, do a real fix for #1499 by creating version 3 of the image_block
    module and creating the image_count variable if it wasn't already set.

commit b217ed77c70e97e04c69dc186ecedf1a4d2b5fe7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 2 08:32:59 2010 -0800

    Duh, set the image_block.image_count variable in the installer!  This
    issue was introduced in cdf0f7f765a5bd5e0d5619d345bdc6aba069c555 which
    was a follow-on for 3c523bcac6e902973c5891c02842254eaecd33a4 which
    fixes #1499.

commit c3ef8921260db8e39b6d2a7b4708e3d19f35f8b5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 2 08:32:59 2010 -0800

    Duh, set the image_block.image_count variable in the installer!  This
    issue was introduced in cdf0f7f765a5bd5e0d5619d345bdc6aba069c555 which
    was a follow-on for 3c523bcac6e902973c5891c02842254eaecd33a4 which
    fixes #1499.

commit 648715b60f87b7ca94dcab60d09dffb402e1b6af
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 29 21:02:19 2010 -0800

    In 3c523bcac6e902973c5891c02842254eaecd33a4 (fix for #1499) I left out
    the install() function which should set the image_block module to
    version 2.  Fix that here.

commit cdf0f7f765a5bd5e0d5619d345bdc6aba069c555
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 29 21:02:19 2010 -0800

    In 3c523bcac6e902973c5891c02842254eaecd33a4 (fix for #1499) I left out
    the install() function which should set the image_block module to
    version 2.  Fix that here.

commit 2ad0cba4cd1b757fd652e36adf0bd9b9035b2326
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 28 17:01:51 2010 -0800

    Fix g2_import::g2_url() to only replace the $g2_base_url once at the
    beginning of the url string.  Also, only do this when we're about to
    put it into the map, not when we're getting the g2 url else the url is
    mangled for other purposes.  Fixes #1512.

commit a36c894c636bfb70f0921aa6c7eb9393d61d772b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 28 17:01:51 2010 -0800

    Fix g2_import::g2_url() to only replace the $g2_base_url once at the
    beginning of the url string.  Also, only do this when we're about to
    put it into the map, not when we're getting the g2 url else the url is
    mangled for other purposes.  Fixes #1512.

commit 95eb1133259187c70cffa78821525b4dc3e1dc73
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 28 12:18:08 2010 -0800

    Delete the temporary "user" value from the session when upconverting
    the admin account post-install.  Fixes #1511.

commit 5fb5d10e5aece1726575b8afbac2f7603ea7632e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 28 12:18:08 2010 -0800

    Delete the temporary "user" value from the session when upconverting
    the admin account post-install.  Fixes #1511.

commit cc82eb2700117338648061a9dc8c4f4f41c26fb1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 28 11:27:25 2010 -0800

    Replace self::func() with <helper_name>::func() for all public APIs
    and constants to make overloading easier.  Fixes #1510.

commit eb010554ff963a1f73661bf96d99697abb7dfde4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 28 11:27:25 2010 -0800

    Replace self::func() with <helper_name>::func() for all public APIs
    and constants to make overloading easier.  Fixes #1510.

commit d8f24a9fa9f13e97eb111b1416362ddab036dc38
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 27 20:42:53 2010 -0800

    Clean up phpDoc on get() a little more

commit 76b6daefaa4009fdd8de72b8f25259200a66d477
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 27 20:42:53 2010 -0800

    Clean up phpDoc on get() a little more

commit 7ef750001b96a4888f37304a32aba5ea1da945aa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 27 19:48:16 2010 -0800

    Tighten up the phpDoc for get().

commit f91819441c0f899f34c02264f9cbfdc6281980b9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 27 19:48:16 2010 -0800

    Tighten up the phpDoc for get().

commit d10ece5a6f9c9cf13d7879937219b051d4965d44
Author: Kriss Andsten <kriss@sverok.se>
Date:   Sun Nov 28 10:56:58 2010 +0800

    Slightly more invasive version, but cleaner on the eyes.

commit 3f0d54c088b6ba1b28f4ebd0198839c5b782d2f0
Author: Kriss Andsten <kriss@sverok.se>
Date:   Sat Nov 27 05:36:25 2010 +0800

    Patch from ticket 1503, making rest/items behaviour consisten with rest/item behaviour.

commit d2be26e407aeb620082bcad2d5a45272868b38a1
Author: Kriss Andsten <kriss@sverok.se>
Date:   Sun Nov 28 10:56:58 2010 +0800

    Slightly more invasive version, but cleaner on the eyes.

commit 2ed83fcd95deb8fc41b40b7ae4fe4b9cde0003be
Author: Kriss Andsten <kriss@sverok.se>
Date:   Sat Nov 27 05:36:25 2010 +0800

    Patch from ticket 1503, making rest/items behaviour consisten with rest/item behaviour.

commit 414ea7239762d3b2c0bd3b96629d7f9be951ccd6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 22 22:01:11 2010 -0800

    Take into account the core.url_suffix configuration setting when
    parsing REST urls.  This fixes the problem that setting the url suffix
    breaks REST.  Fixes #1500.

commit 554ca2e683297489251d621e2c959a6a467a6f9c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 22 22:01:11 2010 -0800

    Take into account the core.url_suffix configuration setting when
    parsing REST urls.  This fixes the problem that setting the url suffix
    breaks REST.  Fixes #1500.

commit b176fe4324385d614ed9065a41713294e8e85c8e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 21 13:51:07 2010 -0800

    Create a module setting for the number of random images to show in the
    sidebar. Fixes #1499.

commit 3c523bcac6e902973c5891c02842254eaecd33a4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 21 13:51:07 2010 -0800

    Create a module setting for the number of random images to show in the
    sidebar. Fixes #1499.

commit 5f4ab7fd76d24e3848aa96b3f657fca587d68f72
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 21 13:01:44 2010 -0800

    Shuffle up the way we figure out which image to rebuild next so that
    multiple concurrent tasks actually work in parallel and don't stomp
    on each other.  Fixes #1498.

commit 27bec841cd7df689479f16bd6ffe005225ce874d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 21 13:01:44 2010 -0800

    Shuffle up the way we figure out which image to rebuild next so that
    multiple concurrent tasks actually work in parallel and don't stomp
    on each other.  Fixes #1498.

commit d35024f38a36e23a7cbfb3a070efcab06e0ae0e5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 20 20:54:16 2010 -0800

    Move the sys_getloadavg() call into the template since that's what we're doing for other similar calls

commit 12b77c7ef4bb715df45aa7299872691cc0c4dcef
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 20 20:54:16 2010 -0800

    Move the sys_getloadavg() call into the template since that's what we're doing for other similar calls

commit 94939150cd04cc5abe04776629db5e4ebe43fa5c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Nov 7 19:57:05 2010 -0800

    Return the admin check as part of the block structure as opposed to printing
    it directly to the output.  I had problems with the admin check messing up the
    AJAX calls on the module update page.  And it went away after this fix.

commit ba4603996d3caf92d993ee6e1ebf8776d365a182
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 8 19:52:43 2010 -0800

    Updated item::random_query() PHPdoc to include example usage

commit 51f93c282e78a486c8c19c818b7c96d9b5f8eafe
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 20 20:43:18 2010 -0800

    I don't run these, I doubt anybody does.  Deleting

commit 13cc0087ec135caf67e7c3c2becd9a12b72298b4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 20 20:43:18 2010 -0800

    I don't run these, I doubt anybody does.  Deleting

commit dd2b815ab2f1623540701fa887098a8b9f40de08
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 18 21:31:13 2010 -0800

    Add Bengali (bn_BD).

commit 3efc23d582e79c0f1ac323b94eea626c7ce51574
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 18 21:31:13 2010 -0800

    Add Bengali (bn_BD).

commit 28f7307d54132abcb6b2012f148d400e979d527a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 18 13:09:10 2010 -0800

    Use sys_getloadavg() instead of reading /proc/loadavg.  Fixes #1491.

commit c1573d8ef2e34429a67a69c3ad947505a5772931
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 18 13:09:10 2010 -0800

    Use sys_getloadavg() instead of reading /proc/loadavg.  Fixes #1491.

commit 5921a88da21c2cc1908d143ff8558c964ce53a95
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 14 15:53:30 2010 -0800

    Create a task to clean up tag counts and delete tag with no associated
    items.  Fixes #1488.

commit afbda4874dab453b7828b1cf3654e89ccb532f1f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 18 09:48:50 2010 -0800

    Fix a bug in ORM where calling reload() on an unloaded instance returns the
    first instance in the database, which is super bad.
    
    Kohana ticket:
      http://dev.kohanaframework.org/issues/3397
    
    Related G3 ticket:
      http://sourceforge.net/apps/trac/gallery/ticket/1489

commit c53ebbcae2ce3d71b925305345ab5f8387363e56
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 18 09:52:40 2010 -0800

    Fix a bug where simultaneous deletes of the same item can result in it
    deleting the first item row in the database.  The root issue is a bug
    in Kohana that's addressed in dca9b5f3fc8e80ee0667cac88d688e2287b1e7f4
    but in this change we deal with the fact that reloading an item can
    result in an instance of the item that's unloaded.  In those cases, we
    should just ignore it and move on.  Fixes #1489.

commit 414729b96a6dfe439e6009e50790412903b45299
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 14 15:01:29 2010 -0800

    Fix two issues with item deletion:
    
    1) We're compacting tags on every deletion which is slow.  Since we delete
       albums in batch, we should just do one tag compaction at the end.  Fixes
       #1487.
    
    2) Issue introduced in 3d952f41c8d90b5c217616fb060697f93fb9db07 where
       we trigger an item_related_update in tag::clear_all().  Since
       tag::clear_all() is called when we delete an item, this causes
       the search module to attempt to index a deleted item.  Move that
       triggering upstream.

commit 8d030cea64c0e5934e4dbf5fc56fab87c7e253bb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 18 09:52:40 2010 -0800

    Fix a bug where simultaneous deletes of the same item can result in it
    deleting the first item row in the database.  The root issue is a bug
    in Kohana that's addressed in dca9b5f3fc8e80ee0667cac88d688e2287b1e7f4
    but in this change we deal with the fact that reloading an item can
    result in an instance of the item that's unloaded.  In those cases, we
    should just ignore it and move on.  Fixes #1489.

commit dca9b5f3fc8e80ee0667cac88d688e2287b1e7f4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 18 09:48:50 2010 -0800

    Fix a bug in ORM where calling reload() on an unloaded instance returns the
    first instance in the database, which is super bad.
    
    Kohana ticket:
      http://dev.kohanaframework.org/issues/3397
    
    Related G3 ticket:
      http://sourceforge.net/apps/trac/gallery/ticket/1489

commit add586bbb129280badb484ae0fdaaa10372e4dc7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 14 15:53:30 2010 -0800

    Create a task to clean up tag counts and delete tag with no associated
    items.  Fixes #1488.

commit bf333aa762e061cf655c7c571e9ce5f8b721ba72
Merge: d49a6dc 86790d4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 14 15:48:20 2010 -0800

    Merge branch 'master' of github.com:gallery/gallery3

commit d49a6dcc995d0c0073b3173d81cac7f3eb6ee30f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 14 15:45:30 2010 -0800

    Create a new task to resync tag task counts and delete tags that have
    no associated items.

commit 7efa9a5b87eaa8fe86972376af8c58dc29c44392
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 14 15:01:29 2010 -0800

    Fix two issues with item deletion:
    
    1) We're compacting tags on every deletion which is slow.  Since we delete
       albums in batch, we should just do one tag compaction at the end.  Fixes
       #1487.
    
    2) Issue introduced in 3d952f41c8d90b5c217616fb060697f93fb9db07 where
       we trigger an item_related_update in tag::clear_all().  Since
       tag::clear_all() is called when we delete an item, this causes
       the search module to attempt to index a deleted item.  Move that
       triggering upstream.

commit 86790d4464c9f79e90adbe2cc7c24251371ad416
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Nov 7 19:57:05 2010 -0800

    Return the admin check as part of the block structure as opposed to printing
    it directly to the output.  I had problems with the admin check messing up the
    AJAX calls on the module update page.  And it went away after this fix.

commit f340f6b54973f3c446f805f56faa71effe7d44d9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 9 13:07:40 2010 -0800

    Change VERSION to "3.0.x branch (git)"

commit fc4e6a913ae616ffb7eafaa2288ba8b197afa076
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 9 12:48:07 2010 -0800

    Tie the image cachebuster to the file mtime instead of
    Item_Model::$updated since we want the url to be stable whenever
    possible.  Fixes #1482.

commit e87c502eded374e927c531ad10a78dac8ee70e64
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 9 12:48:07 2010 -0800

    Tie the image cachebuster to the file mtime instead of
    Item_Model::$updated since we want the url to be stable whenever
    possible.  Fixes #1482.

commit f0781a9162129394236ef9c8cd68392d59b52791
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 9 09:16:07 2010 -0800

    Add an extra line break after the RewriteBase line so that the
    RewriteBase and RewriteRule lines don't get merged in the resulting
    textarea.  Fixes #1481.

commit 5245e5a618d920f89b944a8de573dd1b6d5416f7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 9 09:16:07 2010 -0800

    Add an extra line break after the RewriteBase line so that the
    RewriteBase and RewriteRule lines don't get merged in the resulting
    textarea.  Fixes #1481.

commit 51ead444ece803d4941c2878cf08100da29e2501
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 8 11:45:14 2010 -0800

    Implement module::clear_all_vars($module_name)
    
    Also switch from using ORM to Database_Builder for the SQL because it's
    cleaner, and clean up the test.  Fixes #1479.

commit 584b29b2b9a8134051823c813d194f97ce394fc7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 8 22:16:57 2010 -0800

    Fix a bug in the way that we add tags that causes it to be really slow
    when adding a tag to lots of items.  Tag_Model::save() would call
    item_related_update for every tag related to an item upon save which
    is an O(N!) operation.  Fixes ticket #1412.

commit 3d952f41c8d90b5c217616fb060697f93fb9db07
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 8 22:16:57 2010 -0800

    Fix a bug in the way that we add tags that causes it to be really slow
    when adding a tag to lots of items.  Tag_Model::save() would call
    item_related_update for every tag related to an item upon save which
    is an O(N!) operation.  Fixes ticket #1412.

commit dae835449115b322c0ad057230a34a78d530b9a4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 8 19:52:43 2010 -0800

    Updated item::random_query() PHPdoc to include example usage

commit f4f36738d3f20ad52971cfa79055389b083a2e44
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 8 13:51:51 2010 -0800

    Add a pure javascript mechanism for filtering advanced properties.  Partial fix for #1478.

commit 945e79b17182f7c96eb4b566bd41d26b5f8c4288
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 8 13:51:51 2010 -0800

    Add a pure javascript mechanism for filtering advanced properties.  Partial fix for #1478.

commit 853a3acc9b5b017b479fa93e29e1d80c0acc1a50
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 8 11:45:14 2010 -0800

    Implement module::clear_all_vars($module_name)
    
    Also switch from using ORM to Database_Builder for the SQL because it's
    cleaner, and clean up the test.  Fixes #1479.

commit 97a5656296e617e7dd2f55cc1eb3f1d34e7163f5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 8 11:00:39 2010 -0800

    Check for the PHP Ctype extension.  Fixes ticket #1474.

commit d4f98419b00b2a4fa31d1adf8eb57756908d6a25
Merge: fe16079 4865f27
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 8 11:08:35 2010 -0800

    Merge branch '3.0.x' of github.com:gallery/gallery3 into 3.0.x

commit fe16079270fa83ec94cf19a29e6f36eef3ed2945
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 8 11:00:39 2010 -0800

    Check for the PHP Ctype extension.  Fixes ticket #1474.

commit 4865f276fe8c6b252c9918bfa3978e1adbe6b73d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Oct 25 21:04:40 2010 -0700

    Set the unit test timeout to 5 minutes

commit 228a57f47aa7491bac340e53c2950cdd255218c7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Oct 25 21:04:48 2010 -0700

    All modules should be named Xxx_Core for extensibility.  Fixes #1458.

commit 44a524aa51988fcb4bdee93b4ade15dbed9b19ec
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 8 10:06:56 2010 -0800

    Dump something in the logs if GalleryEmbed::init() fails.

commit cc7100ec20b81ca111cf590ab3f4913a08a49c88
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 7 22:08:20 2010 -0800

    Add Malay as 'Bahasa Melayu'

commit a7fd454a6cf007661ee43d946c1cb89c10e99463
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 7 15:38:45 2010 -0800

    Force the new geometry in the ImageMagick crop() function.
    Fixes http://dev.kohanaframework.org/issues/3384

commit ff722a430732f06099b4ac2fd5b8173f03b51fb8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 6 21:54:28 2010 -0700

    Create item_before_create and item_before_update events, and make
    Item_Model::data_file public.  This allows us to intercept and tweak
    data files before saving the model which enables the max_size module.

commit 9ae26b138acf606fce6e76aa9b7a5f2e826706b8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Oct 31 12:21:06 2010 -0700

    Deal in integers when doing aspect ratio operations.  Fixes #1470.

commit d86c0a61871270befa0d229b2de5aa0f0fadfa09
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Oct 24 17:03:40 2010 -0700

    Allow access to the rest module when the gallery is wholly private.  Fixes ticket #1452.

commit dda3c3ecbe20b4a6bdb872560d7c4bd6eb283b0a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Oct 11 21:06:00 2010 -0700

    Add MJ12bot and Speedy Spider to the robot list.

commit 6aaf491193c58f5a45ae0685a35ce78a79eb85f2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Oct 11 21:05:39 2010 -0700

    Copy system/config/user_agents.php over to gallery/config so that we can add to the list

commit af0cb77f8f0b0c70363abe4d4bda9918db5ab04d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Oct 9 16:24:58 2010 -0700

    Identify robots and don't let them save sessions.

commit 44d524e1abfadfda0e2dd1b024f26057cb67aaf6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Oct 9 16:19:45 2010 -0700

    Fix for http://dev.kohanaframework.org/issues/3317 -- don't try to implicitly convert a string into an array.

commit 35d933cf7f8db4cfa79e4985e6b38433f4457a45
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 8 10:06:56 2010 -0800

    Dump something in the logs if GalleryEmbed::init() fails.

commit 359a081f151d36066de1c8bbbf17dd525ef044fe
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 7 22:08:20 2010 -0800

    Add Malay as 'Bahasa Melayu'

commit c1bc59fbb5f31486b9e6040e879d1ea4c255dc91
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 7 15:38:45 2010 -0800

    Force the new geometry in the ImageMagick crop() function.
    Fixes http://dev.kohanaframework.org/issues/3384

commit d503513eca13c9c212d2772e9791744725127a8e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 6 21:54:28 2010 -0700

    Create item_before_create and item_before_update events, and make
    Item_Model::data_file public.  This allows us to intercept and tweak
    data files before saving the model which enables the max_size module.

commit f01fad1cd0661a7fee42d701b0c17dd8f4def576
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Oct 31 12:21:06 2010 -0700

    Deal in integers when doing aspect ratio operations.  Fixes #1470.

commit dff1a536961cd401b8e133e260fcc3cca7c13dc6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Oct 25 21:04:48 2010 -0700

    All modules should be named Xxx_Core for extensibility.  Fixes #1458.

commit 1cc3d130bcb01b65173617e13389556ff80cc1b5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Oct 25 21:04:40 2010 -0700

    Set the unit test timeout to 5 minutes

commit 4dc451629cc46e24b086d500182e4b053ec80b04
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Oct 24 17:03:40 2010 -0700

    Allow access to the rest module when the gallery is wholly private.  Fixes ticket #1452.

commit db00958cee5e7373cf4bc439d65e687e7ef2d985
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Oct 11 21:06:00 2010 -0700

    Add MJ12bot and Speedy Spider to the robot list.

commit c4454f1f07e34410726480a01370ea9b482500c2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Oct 11 21:05:39 2010 -0700

    Copy system/config/user_agents.php over to gallery/config so that we can add to the list

commit 84731437a7b8cac4a5e3b2c382a20f67f563b04f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Oct 9 16:24:58 2010 -0700

    Identify robots and don't let them save sessions.

commit 5d4b683752d8a01628e0d9a5243d58909f8dfcd0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Oct 9 16:19:45 2010 -0700

    Fix for http://dev.kohanaframework.org/issues/3317 -- don't try to implicitly convert a string into an array.

commit 349071f5019581185a62cdd82a9f59455f453b94
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Oct 7 22:16:18 2010 -0700

    Change version to "3.0+ (git)".

commit ea5a4e6cfed888a562216e24125d7b703393bc67
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Oct 5 00:10:17 2010 -0700

    Updated for 3.0 release.

commit 4b4a2f8d8d170e2c42b202865bc4050ac92694cd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Oct 4 23:55:19 2010 -0700

    Set the version to 3.0 final (woot!).

commit 3c40476b34ce9e65ada58bc063a30e5389219811
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Oct 4 23:42:07 2010 -0700

    Not sure why digibug::close_window() changed in the listing, but it looks fine here.

commit df378fcca84bb09a90d640c6a500b02b9b3b9f89
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Oct 3 22:10:05 2010 -0700

    Don't wrap the action in url::site() -- form::open() will do that for us.  Fixes #1417.

commit 6decb90eaf666197627d18eba29c3a0bc1de5dc9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Oct 2 17:15:33 2010 -0700

    Oops, forgot to update installer to match change in
    f84782d6200efb424731c93bd029c7cbeb9f3dad

commit a153ca082971e1eb454aa66199ee0380a9794a6e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Oct 2 17:04:37 2010 -0700

    Detect the case where there are no more broken images and skip to the end.  Fixes #1414.

commit 161bbb9ba3fbc10cada28e4ce384a426cabc02d8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Oct 2 16:44:31 2010 -0700

    Proxy the BasicAuth authentication header in htaccess_works() so that
    if the entire Gallery is behind BasicAuth we share the same
    credentials as the browser.  Fixes #1413.

commit 62f1bb06a21c3b07acf8005c30a5d856199d7424
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Oct 2 13:46:47 2010 -0700

    Set the User-Agent field to "Gallery3" by default.  Fixes #1408.

commit c0022dc3c35024ecfc101171bdccfc3b07227ebb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Oct 1 21:17:08 2010 -0700

    Fix a bug in the way we set the mime type for protected image renders.
    Also whitelist the digibug controller so that it's accessible when the
    gallery is private, and don't expire old proxies right away since
    Digibug may request the full size multiple times for different preview
    operations.
    
    Fixes ticket #1410.

commit 86981c5afb980f744103af8b2e9a229e745d98fb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Oct 1 21:09:14 2010 -0700

    Use the "loading" image from themes/wind since it's no longer in gallery3/lib.

commit 1c1820094083a1011e96d86160185b78c5982ddd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Sep 29 21:34:31 2010 -0700

    Protect ".ini" files in the example security stanza.  Fixes ticket

commit f84782d6200efb424731c93bd029c7cbeb9f3dad
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Sep 29 20:47:43 2010 -0700

    Stop caching all module variables in the vars table using the
    name=_cache row.  If that overflows, it will cause us to be unable to
    load variables, and we can't recover from that.
    
    Instead, use the Cache table.  Bump the gallery module to v40.  Fixes
    ticket #1405.

commit 6aabab4b715ff8ac00cc667e9d0a40c9868410d8
Merge: 61e55be ef87514
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Wed Sep 29 22:01:36 2010 +0300

    Merge remote branch 'gallery3/master'
    
    Conflicts:
    	themes/admin_wind/css/screen.css
    	themes/wind/css/screen.css

commit ef8751468b998baddbc6d5827a392ed6e12e5548
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 25 13:27:35 2010 -0700

    Base64 encode the data result if the encoding param is set to "base64".
    Fixes #1400.

commit 85637a08265cbfef3cc615724b22195439f5afa5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Sep 23 20:45:27 2010 -0700

    Fix a bug introduced recently in
    f84c4a6192ea0e47ca5b2006baa0bfd7e09a682c where we were generating bad
    SQL.  If we're checking for a conflict on a new item, the id is null
    and we were doing a comparison that resulted in "id <> NULL" which
    won't work -- in that case we need "id IS NOT NULL".
    
    Fixes #1393.

commit d2bf5c9d1f28e90223b484addd6969c46f3160b5
Merge: 3a9bdeb 7116f82
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 22 22:09:56 2010 -0700

    Merge branch 'master' into talmdal_dev

commit 7116f820ca2b6338abdca233a4b1d42d29a41150
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Sep 22 21:43:44 2010 -0700

    Remove the 4 character minimum for group name length.  Fixes ticket #1396.

commit 790bf4e871b1a1555dc32287ab222b6694d402a2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Sep 22 21:35:49 2010 -0700

    Prioritize using the value in graphics_toolkit_path over the standard
    path so that if you change that value in Admin > Settings > Advanced
    we prefer it over other paths (which may be restricted by
    open_basedir).  Fixes #1395.

commit 3b8475908feded1a982cf9a7e43e0dd18755c470
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Sep 22 20:55:27 2010 -0700

    Use alternate path to the CoolIris slideshow that fixes the problem
    with Adobe not properly signing TextLayout.swz.  Fixes #1390.

commit 3a9bdebafda1807bb2294c041e655f6464841bf0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Sep 21 21:38:32 2010 -0700

    Override the jQuery autocomplete loading indicator with the theme specific small loading icon.

commit d52d57b617691068c95cca80cb49683c68b79e48
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Sep 21 19:54:38 2010 -0700

    Cleanup links to some of the image links.

commit 960db6d7e5725becedbe3b7d1401bf2e2ed15a60
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Sep 20 22:36:34 2010 -0700

    Move the image files into the themes.  Leave the favicon and logo in lib/images.

commit 61e55becf46ce899632bff7ce26a7208094618f0
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Mon Sep 20 04:59:29 2010 +0300

    follow up the last commit. Add the images to the theme folders

commit 1b59d13d07226587c858c7fddf61bc45844baf96
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Mon Sep 20 04:56:55 2010 +0300

    correct the image location paths, and move those images to the theme folder. The more control you provide to the themers the better, although we can still locating the images in their original place (lib/images)

commit 078a287d62207c8df757cb9f672a7151cf2c7849
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Mon Sep 20 04:43:32 2010 +0300

    Revert the revert of (!):
    93d1a8103e757a87fb00
    f14290f34f097f525a56
    ff8ee5bdfcc0d35e14f3
    
    returning Tim changes to merge gallery.common.css contents with the theme css file

commit ce80259d6939e43aaea34eba7bea4b2a602a5019
Merge: ba950be 93d1a81
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Mon Sep 20 04:30:34 2010 +0300

    Merge remote branch 'gallery3/master'

commit 8b21123493edb72dd02c5fa6d8ff6ad1afe03abb
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Sep 19 07:44:16 2010 -0700

    When the lib/gallery.common.css was combined, the image urls did not point to the correct location.
    So lets fix that up. But first undo the reverts:
    93d1a8103e757a87fb006f2389f0ee24497367a7 "Revert 'Move the contents of lib/gallery.common.css into themes/wind/css/screen.php and themes/admin_wind/css/screen.php.  Most themers seem to copy the contents into their theme's screen.css anyway.'"
    f14290f34f097f525a56bc00070b73fba1fb8e2c "Revert 'Clean up white space'"
    ff8ee5bdfcc0d35e14f3124d349625814ec8771a "Revert 'Add some whitespace.'"

commit 93d1a8103e757a87fb006f2389f0ee24497367a7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 18 17:51:25 2010 -0700

    Revert "Move the contents of lib/gallery.common.css into themes/wind/css/screen.php and themes/admin_wind/css/screen.php.  Most themers seem to copy the contents into their theme's screen.css anyway."
    
    This reverts commit 42517041753d460c337a2086c0346018ad582e8d.

commit f14290f34f097f525a56bc00070b73fba1fb8e2c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 18 17:51:13 2010 -0700

    Revert "Clean up white space"
    
    This reverts commit a1e25313e34b608206d9d1dc8f9b4c01116c9b46.

commit ff8ee5bdfcc0d35e14f3124d349625814ec8771a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 18 17:50:47 2010 -0700

    Revert "Add some whitespace."
    
    This reverts commit 207d848989880edbbbbc852a366bf3bbaf505d2a.

commit fad1f05203f9c45b759fd0f4731e9025bca86114
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 18 17:46:28 2010 -0700

    The Kohana folks removed the cache cleanup code back in
    http://dev.kohanaframework.org/projects/kohana2/repository/revisions/4605
    
    So now our cache entries don't expire.  For now, do cache expiration
    whenever we render Admin > Maintenance, since that's the type of place
    that users will go when they want their cache to expire anyway.

commit a1b1d323af458958c9e06c8160bffb97882b8d41
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 18 16:46:15 2010 -0700

    When looking for G2 urls in the g2_map, try also swapping spaces for +
    in case the url had spaces in it.  Fixes ticket #1388.

commit 6bb75f623e6dbb58e873b5c7f3f2f3238abe99fd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 18 16:34:48 2010 -0700

    Fix a bug in that last commit where I was treating resource_type as a function.

commit 77ec06166320dee631bbffcf3d57b0e2debcb157
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 18 15:12:43 2010 -0700

    Redirect to the root album when there's an empty path and empty id.
    Fixes ticket #1387.

commit c65ce125cb50057b005ce45d8c050f3d2b0492e4
Merge: 8ee2515 38be33e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 18 14:33:04 2010 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 8ee25157ec92662f92e428b8fbbe9e03f87cb036
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 18 14:29:52 2010 -0700

    Fix a bug in the way that we calculate expiration dates for old
    comments by using Database_Expression.  Fixes ticket #1386.

commit 38be33ef35cd5e67bf37aa0101d1948b6dc27ed0
Merge: 207d848 3e1743b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Sep 17 17:48:20 2010 -0700

    Merge branch 'master' into talmdal_dev

commit 207d848989880edbbbbc852a366bf3bbaf505d2a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Sep 17 17:47:12 2010 -0700

    Add some whitespace.

commit 813542943076927485e522e7ea61cef237195c05
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Sep 17 13:39:48 2010 -0700

    Checkpoint.

commit 3e1743b21fd35b9d6d540e827292f1f4f006b531
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Sep 16 20:43:48 2010 -0700

    Add a module variable containing extra paths to search for binaries.
    Fixes ticket #1384.

commit 64dfccc4eddf204a80ce533bad69ac8c0c83c1bd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Sep 16 20:04:22 2010 -0700

    Preserve the image extension on the temp file that we create for
    rotating images.  Some versions of GD won't work if we don't do this.
    Fixes ticket #1375.

commit de2f9baeee0a05968ef0c3809c90e335180cffd0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Sep 16 19:34:42 2010 -0700

    Add a link to
    http://codex.gallery2.org/Gallery3:Choosing_A_Graphics_Toolkit to help
    users choose a graphics toolkit.  Fixes ticket #1372.

commit 5e316f78c6d73fcba9b39c0f9033f1d670de83cb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Sep 16 15:17:00 2010 -0700

    Restrict viewing user profile pages to registered users only, but
    provide a "show_user_profiles_to" setting to allow admins to open it
    up to everybody (choices there are "registered_users", "admin_users"
    or "everybody").  Fixes ticket #1378.

commit 3e3098956c2cd20bef7f1861e58cbe98f9b9de63
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Sep 16 14:19:28 2010 -0700

    Convert the guest_url ORM validation failure back to the url form
    parameter and put in a message requiring a valid url.  Fixes ticket

commit a1e25313e34b608206d9d1dc8f9b4c01116c9b46
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 15 20:12:05 2010 -0700

    Clean up white space

commit 42517041753d460c337a2086c0346018ad582e8d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 15 18:17:35 2010 -0700

    Move the contents of lib/gallery.common.css into themes/wind/css/screen.php and themes/admin_wind/css/screen.php.  Most themers seem to copy the contents into their theme's screen.css anyway.

commit 70f15c6662bbc9827128d553de31461e165fb27d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 14 19:51:43 2010 -0700

    Add ability to sort albums by name.  Fixes ticket #1377.

commit 4b8d6beb5e59402d68b1daf5e4f7220066d1b707
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 14 19:40:54 2010 -0700

    Report the graphics toolkit in the platform block.

commit af24aa5abea99818f5f38592f6294ff88f559723
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 14 11:47:53 2010 -0700

    The full_name field is required to be NOT NULL.  Not really sure why
    this is a hard requirement, but for now in User_Model::save() let's
    use the empty string if the field itself is null.  Fixes ticket #1371.

commit 1a0d76c43e3545771ae3e1c6ad6ba255beeae32d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 13 22:23:09 2010 -0700

    When moving a single item, just copy its permissions from its parent
    album.  This is totally legal since an items permissions must be the
    same as its parent's, and it's much faster for large installs where
    a complete recalculation can be very costly.  Should fix #1360.

commit 19750cb0d5499920bb7786aa4f890dec84fc5a1f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 13 22:00:59 2010 -0700

    When deleting items, choose the first *viewable* peer as the album
    cover.  Normally, all items are equally viewable, but in our unit
    tests we occasionally have the scenario where peers have different
    viewability settings which is internally consistent although only
    possible if you set the fields manually.

commit b08bf26d2db6c78315ef3ddfc2e0191923ecfa42
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Sep 12 14:34:49 2010 -0700

    Ignore the private gallery settings if we're in the cli SAPI.  It
    breaks the upgrader.  Fixes #1361, thanks to Romain LE DISEZ.

commit a98841613a62a27d0a6c157d6f62546e319a08b9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Sep 12 14:30:25 2010 -0700

    LOWER() the slug and name in the find_dupes functions since DISTINCT
    is case sensitive, but our dupe validation is not.  Fixes ticket #1367.

commit 19034d140e79f774826d5a94128b0abe5020d1b3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Sep 12 13:35:50 2010 -0700

    Rename the class to Item_Model_Core so that it can be overloaded.
    Related to ticket #1368.

commit 1ca2780efb26c55ea782f84a147b3a7642be5682
Merge: 0b223d5 bd532f6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Sep 12 12:58:49 2010 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 0b223d5484b7be7db4b527f6d72a6eed9040fc6f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Sep 12 12:58:30 2010 -0700

    Clean up cli default instructions.

commit bd532f6c88ef54bd47c9b1af46bc8d2c80d4407b
Merge: ac64614 f84c4a6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Sep 12 10:57:41 2010 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit ac64614d4da7174c085f257f3b8e39aa7afa9eb5
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Sep 12 10:53:06 2010 -0700

    Path for ticket #1140. Add a size0 to the tag cloud.

commit f84c4a6192ea0e47ca5b2006baa0bfd7e09a682c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 11 23:37:12 2010 -0700

    Uniqify the name and slug when we move an item to a new location with
    a conflict.  This fixes #1364.

commit 9f11d8ad832ef8691398ef12036d40596c8de053
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 11 22:38:47 2010 -0700

    Log the JSON response on errors so that we can figure out what's going
    wrong.  This will help diagnose #1364 which appears to be an
    ORM_Validation_Exception, except the actual output is getting eaten by
    the Organize SWF so we can't see it without snooping network traffic.

commit cc4a54a3d65d5a6772cbf2d9670a0af0d6d52542
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 11 22:18:53 2010 -0700

    Fix bug introduced in b6fa33faf789749f4de3f4eadf8832748372c980.  Don't
    try to use $(this).data("reload.location") if it hasn't been set,
    which can happen if Flash isn't available.  Fixes #1362

commit b4fb11f8d5f06aed612ea9d9c9699ce31e55b957
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 11 21:40:57 2010 -0700

    Only call $theme->item() if we're in a non admin theme.

commit bfd92ac6f2d563106bc5906cc9fddb35bca44b58
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 11 21:38:38 2010 -0700

    Use $theme->item() instead of $theme->item, otherwise
    isset($theme->item) may return true even when we don't have an actual
    Item_Model in there.

commit c9c4f96100c5c8304f337f720da2e96b0a4d524a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 11 21:35:51 2010 -0700

    Tune timeouts to work better on large installs.

commit 14ae1fde25eb8b22a2fc92453ba12c8e74aba433
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 11 10:41:47 2010 -0700

    Use the actual csrf token, not the placeholder (url::site doesn't
    replace that).  Fixes ticket #1361

commit cef7ca9cf27dc7bcdbc92e754cfe9ae3a30ae3b0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 11 10:26:48 2010 -0700

    Change tag url form to be /tag/{name} from /tags/show/{id}.  This is
    a much friendlier url format.  Fixes ticket #1363.

commit 34a71e7cd34bc184abbf9060ec4b316ba1c66bc5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 11 01:48:44 2010 -0700

    Verified.

commit 509b647c65d0b56760952ff886eed06625f4ac5f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 11 01:48:26 2010 -0700

    upgrader/index does not require CSRF

commit 67f45cfa781ef4b446676e199470e421f5463812
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 11 01:46:45 2010 -0700

    Add CSRF protection to the upgrader.  And update the CLI output so
    that it tells you which modules failed to upgrade properly.  Fixes
    ticket #1359.

commit a88b3f580812e7670933a6d695c89ef93f0142d4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 11 00:47:48 2010 -0700

    Implement IdentityProvider_Gallery_Driver::admin_user() properly such
    that it's not hardcoded to return the user with id 2.  Create
    user::admin_user() which finds an appropriate admin and returns it.
    Fixes #1358.

commit 81327641cd4d2d5bf5e1de8438ebf44d0c318314
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 11 00:27:47 2010 -0700

    Fix two bugs with the context menu:
    
    1) Prevent it from "bouncing" which happens when we queue up a lot of
       open and close events.  Stop any running animations before starting
       new ones.  This fixes #1340.
    
    2) Prevent a bug that's not really visible to the user where we wind
       up re-initializing a context menu over and over which results in us
       binding tons of hover events.  I don't think this causes any serious
       damage, but it's probably not good.

commit b35886c0fc6f2d37ee1974a35b0cad50e6729757
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 11 00:08:38 2010 -0700

    Refactor $.fn.gallery_context_menu() to store some variables instead
    of using CSS selector lookups for every operation.  I assume (but have
    not verified) that this is more efficient.

commit 304dd9cb51b3514f2e663674d22f0d73c0f3e583
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Sep 10 23:13:47 2010 -0700

    After replacing thumbnails, resize all .g-item boxes down to just a
    bit larger than the image and then do equal_heights() on them.  This
    tightens the grid back up again when appropriate after a rotation.

commit 6640bd18ca8f22482e6d383f763bf5a2a004663d
Merge: 5892712 3936183
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Sep 10 23:09:52 2010 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 5892712b237cb1e585b2cc7a6820d2cf3a8c1a34
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Sep 10 23:01:47 2010 -0700

    If the user is not an admin, don't 403 -- instead just redirect them
    to the root album.  Fixes ticket #1356.

commit 3936183446375e039cc35eec80e427849336c210
Merge: d698a19 6e62d60
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Sep 10 08:41:12 2010 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit d698a19e0e9acdcb81c5245d1f681546b604a1f3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Sep 10 08:40:30 2010 -0700

    Transfer deleted files to the active user.  Or at least say that's what we're going to do, we actually transfer them to one of the admins

commit 6e62d604a45b9bf1a60d04effb7eb08e7d15463c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Sep 9 21:58:16 2010 -0700

    Resize the .g-item to contain the rotated image, and make all
    .g-item's the same height and realign the photo vertically, both on
    the .g-item and the hover placeholder.  Fixes ticket #1354.

commit 4f058d2ac2d11c9e74c4975bb0844eb7654b51fe
Merge: 6211ed6 91d4ffa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Sep 9 21:35:12 2010 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 6211ed69d7a07d88b18c4db2928663c2cb76b1ba
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Sep 9 21:25:23 2010 -0700

    Vertically realign thumbnails after rotation so that they stay
    centered.  Partial fix for #1354.

commit 32878ebfdce943271824891639ab0384053bbadd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Sep 9 21:04:18 2010 -0700

    Replace the hook function hack I introduced in
    cbba45fffc7368280e9529f55e108d0080175b6a with a namespaced jQuery
    custom event.  This is way more portable.

commit 91d4ffa68068dd194f3b789ab6cbc8f1aabe7627
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Sep 9 20:36:18 2010 -0700

    Change the color of the text in the close button to match the foreground color not the border color.

commit 36f3a0387ddc484ebe867cf284aaf05f6ce6e5e1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Sep 8 21:39:35 2010 -0700

    Tighten up the "your gallery2 has xxx in it" info display.

commit 5cd34160af2fa1d4499d98aaa807712995082a20
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Sep 8 21:34:16 2010 -0700

    Remove unnecessary g2_import CSS (which we were loading on every page
    -- doh!) and replace it with a new "enumeration" list style in the
    admin_wind CSS.  Reshuffle the page a little bit to make it look cleaner.

commit fe3dd6b55d4a820a2b33de5a883c2f64112cfbd4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Sep 8 21:12:20 2010 -0700

    Add information about disabling XCache during the import process.  Fixes ticket #1352.

commit cbb6967405569606de3b67e1f1dcde2ed8d6bb03
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Sep 8 20:59:40 2010 -0700

    Detect out-of-date modules and put up a message for site admins.
    Fixes ticket #1353.

commit 391a90e3cedd1cca7631f9a4d786c6c513b1dd48
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Sep 8 20:36:22 2010 -0700

    Detect when a module fails to upgrade properly and put up an
    informative message to help the user know that she needs to get a
    newer copy of the module.  Fixes ticket #1189.

commit d7edbc211f75acf0214ee554722a4f470d92157b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Sep 8 19:35:10 2010 -0700

    Oops, forgot to update install() with the locale change that I made in
    cc399bf4f07fd7060536f442373a1e9c0ea4a5aa.  No permanent harm done,
    though.

commit 90ba0f9237d67ddf73ca1e3235ffb466f2eb0a69
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Sep 8 00:50:30 2010 -0700

    Show the number of photos/albums the user owns in the Admin > Users
    page, and improve the message to explain what's going to happen to the
    deleted user's items.  Partial fix for #1344, which I can't reproduce
    now.

commit 8fed0fb2e20d72f43f8730b557c044dbe844196f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 7 22:42:01 2010 -0700

    Updated for b6fa33faf789749f4de3f4eadf8832748372c980

commit 4ba93b7cfc2889dc7cef6729681dd779451f90bf
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 7 22:23:54 2010 -0700

    Return the size in bytes of the thumb, resize and full file.
    Don't return thumb info if there's no thumbnail (eg: album w/ no contents)
    Don't return file_url_public for albums
    
    Fixes ticket #1347.

commit afeb3bb8c47b4ffbacf4585946005bb899ef516b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 7 22:13:30 2010 -0700

    Fix typo.

commit 9c721c4da6cbd57c9b60142215ada984c867f59d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 7 21:47:36 2010 -0700

    In the security block, make the "Deny from all" explicit to avoid
    confusion.  Specifically allow robots.txt to be a visible .txt file.
    Fixes ticket #1343.

commit 00c1100d9d6f717b2c8d16600ae978a13b3798fd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 7 21:30:53 2010 -0700

    Add Macedonian.  Fixes ticket #1345.

commit 64f79f069829afc599f4daf926c064e4843bb351
Merge: ab88012 5a26dd5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 7 21:06:50 2010 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit ab880120e69b27bdcfed07d3b0729108326b335d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 7 21:04:38 2010 -0700

    The G2 import sets the sort_order to "asc"/"desc" but
    Item_Model::get_position() expects "DESC".  This breaks navigation in
    any album imported from G2 that has a descending sort order.
    
    Two things:
    1) Use "ASC"/"DESC" in G2 import for consistency
    2) Make Item_Model::get_position() more robust against capitalization
    
    Fixes ticket #1334.

commit 5a26dd542a3cb4974870bcfeec4864d1daa616c4
Merge: b6fa33f d398651
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Sep 7 18:53:25 2010 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit b6fa33faf789749f4de3f4eadf8832748372c980
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Sep 7 18:53:17 2010 -0700

    Create a setLocation javascript callback which is called everytime with the full url of the current album(non-REST). When the dialog is closed the window location is set to this value and the page gets loaded appropriately.

commit d398651c080c18e4f1bf623548091465dac1d528
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 7 00:34:41 2010 -0700

    Disable selectFirst in the autocomplete box, which makes it a little
    harder to select pre-existing tags, but avoids the problem where we
    force the user to pick from existing tags.  Fixes ticket #1339

commit ba950bec0c84a1467aa2545ca815d5af7b0b002b
Merge: 9572c66 7c80bc0
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Tue Sep 7 08:41:25 2010 +0300

    Merge remote branch 'gallery3/master'

commit 7c80bc0c3db1ca20ce424a36a05f1337de9e1e31
Merge: fa1fe47 2f94dfc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 6 22:20:32 2010 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit fa1fe47b6a0a377929a70748406eae589ecf2a00
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 6 22:13:41 2010 -0700

    Use the absolute site url when logging out of the admin site else we
    wind up with weird url doubling effects.  Fixes ticket #1342.

commit 2f94dfc67c809ae356e5d3e1a5ab21c7ba0a2a27
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 6 19:40:36 2010 -0700

    Add "Options +FollowSymLinks" to the example mod_rewrite rules and put
    it in a textarea for easy copying.

commit 2f810ec12624eefa3eb47ad7174dbbe03936135d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 6 19:28:34 2010 -0700

    Add "web_url" with the url to the web version of the item.  Fixes ticket #1341.

commit 886b88fccf5de7fb3b17e1f3a2acd539268d1e8b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 6 18:49:37 2010 -0700

    Revert "change the Setswana locale from tn_ZA to tn_BW since it's mostly"
    
    This reverts commit 2d948cb39fd2da6a5f966a10cbeb4f5d5caec5a3.
    
    Valiant said that tn_ZA is right:
    http://gallery.menalto.com/node/97840#comment-352865

commit 8a36c24f39e7a6111f7872ec443e6efa63580c82
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 6 18:20:46 2010 -0700

    Fix some broken identity APIs:
    - add_user_to_group and remove_user_from_group should take Group_Definition instances
      to be consistent
    - add_user_to_group and remove_user_from_group in drivers/IdentityProvider.php should
      not be static

commit cc399bf4f07fd7060536f442373a1e9c0ea4a5aa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 6 16:20:37 2010 -0700

    Track the language of the user receiving the notification and send the
    email in that user's language.  Incidentally, send one email per
    recipient, else we're leaking email addresses which is bad for
    community sites. Bump notification module to v2 in the process.
    
    Fixes ticket #1287.

commit ec2c9dad64ecb8aca6ab71461e76715f39071c9f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 6 15:20:04 2010 -0700

    Verified checkpoint.

commit 883d8f1e23ba000320daf535d97a2e388cc42cd1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 6 15:06:37 2010 -0700

    Whitespace.

commit cb22f23be64096234197cdb1c97d7a42ba504aa4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 6 14:16:26 2010 -0700

    Show the "view log" button for tasks that are running, in case they're
    paused/abandoned for some reason and we want to know more details.

commit fc856b6abaa24d27cba5273147da11fc2446c1ba
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 6 14:08:05 2010 -0700

    Add retry logic to the task framework.  We retry 4 times with
    increasing backoff and if that fails, we put up a manual "retry" link.
    Fixes ticket #1270.

commit 2d948cb39fd2da6a5f966a10cbeb4f5d5caec5a3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 6 14:05:48 2010 -0700

    change the Setswana locale from tn_ZA to tn_BW since it's mostly
    Botswana anyway according to @sagemaniac in
    http://gallery.menalto.com/node/97840

commit b3b6021b0a70979a1084111ae43c1170a7592b37
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 6 12:41:27 2010 -0700

    Don't bomb on the race condition when we're trying to create the
    gallery/_cache row and it already exists.  Fixes ticket #1338.

commit 4a941829716df412b493d35907e65acc35527583
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 6 11:37:36 2010 -0700

    Stop trying to implode a string.  Fixes ticket #1337.

commit 46b30ce949d6371bc3d2bcfe42221c599c7a85e3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Sep 5 22:00:28 2010 -0700

    Add Setswana (tn_ZA).  Fixes ticket #1336.

commit ca0c3b3e7f154ffceee944049247e15cf0190e48
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Sep 5 21:25:46 2010 -0700

    Force "Options +FollowSymLinks" since that's a requirement for
    mod_rewrite to work.  This is surprisingly obscure in the docs.
    Thanks to bromide for turning this up in
    http://gallery.menalto.com/node/97791!

commit c51b6ab38d7f16d64127fd3a73df38166a698f0f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 4 15:54:07 2010 -0700

    Fix full size dimensions after rotating an image on the photo view page.
    
    The photo view page caches the dimensions of the full size and then
    renders it in Javascript.  But after rotation, those dimensions are no
    longer valid.  Create a new function on the items controller that
    returns the appropriate dimensions, then add a hook on
    $.gallery_replace_image and implement the hook on the photo view page
    to have it make an async call to get the new dimensions.
    
    Fixes ticket #1317

commit b49d2e6e0003c643af1ee440dd61bf3b20396103
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 4 14:01:23 2010 -0700

    Make .g-unavailable a little more legible.

commit db75ac642a6ff62e814929af99e7c9af4d492706
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 4 13:40:39 2010 -0700

    Use the title of the root album as the site title for all RSS feeds.
    Fixes ticket #1307.

commit 32d18920680ee63dc75c3a2b710ef805b31c127c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Sep 2 22:53:06 2010 -0700

    Follow on to 2a86446249c4782287e1e6e472f422b851c2fb47; fix a bug where
    guest access to admin pages fails because we try to go to the login
    page but you can't do that from the admin theme.  Thanks to mamouneyya
    for catching this.
    http://github.com/gallery/gallery3/commit/2a86446249c4782287e1e6e472f422b851c2fb47

commit 077cf537142cc71ca822e35a055dc7e1d40b80b0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Sep 2 22:03:16 2010 -0700

    Don't try to compare ORM instances; compare their ids instead.
    Follow on to the fix for #1318 that caused the show= param to get
    dropped in the breadcrumbs.  See http://gallery.menalto.com/node/97790

commit 9572c664d2bfff0877d4f2062eb0ef6665a109cf
Merge: a0033ce 511826a
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Thu Sep 2 22:32:46 2010 +0300

    Merge remote branch 'gallery3/master'

commit 511826a33cbbf03bf1e3cb151f1a181b8e6723e8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Sep 2 01:10:15 2010 -0700

    Don't show the "(## errors)" part of the status message if there haven't been any errors.

commit 2a86446249c4782287e1e6e472f422b851c2fb47
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Sep 2 00:50:02 2010 -0700

    Handle the case of a completely private Gallery separately and just
    put up a login page, very similar to the way that the maintenance mode
    login page works.  Fixes ticket #1056.

commit 23b566e5921d5b8bd5a957ecd2d601e556f658a0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Sep 1 23:52:19 2010 -0700

    One more adjustment for ticket #1216.  The packaging process forces
    the default email address for admin to be unknown@unknown.com and when
    that happens the gallery_event::user_updated() event listener fires
    and sets the default values.  This is hard to work around, so let's
    just roll with it and use unknown@unknown.com as our default placeholder.
    
    So now, if an admin sets their email address and the current values
    are unknown@unknown.com we adopt the admin's email address for the
    site's mail_from/reply_to fields.

commit 7477f0119c39a71e05d3e6b2caad8418a7d41c83
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Sep 1 23:39:01 2010 -0700

    Explain wtf we're doing in user_updated.

commit 4a7fc1a9815099d64b17133da238ef4470071328
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 1 23:21:56 2010 -0700

    Fix up the test so it works with the changes for ticket #1216. Also note the name change to the first test.  Form a php reflection point of view Sendmail_Test (class name) == sendmail_test (method name) so the method gets treated as a constructor instead of a test method.

commit 545177c648eb2ce98b3ea35688518b9fc7432957
Merge: 04f6646 70c8572
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 1 23:19:50 2010 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 04f6646b0637d9cb221159b4931b184449a4dc1d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 1 23:19:43 2010 -0700

    Hopefully the third and final patch for #1216. Set the default from and reply-to addresses to an empty string.  The first time the user model is saved, set the sendmail from and reply-to addresses. Requires an update to gallery version 38.

commit 70c8572ea1b421458241b9b3b1cc85cb6bf35057
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Sep 1 22:19:44 2010 -0700

    Make RENAME TABLE operations idempotent so that in case there's a
    failure of some kind we can restart the upgrade and it'll continue.
    Fixes ticket #1325.

commit af3d5acbcd5df6da8e532a009d5be6ba6d1cca0d
Merge: 80e9fca 1f621d9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Sep 1 22:00:40 2010 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 80e9fcaf47af6a041db385f18b0be00c15708da7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Sep 1 22:00:26 2010 -0700

    Don't use $.remove() to get rid of items from the uploadify queue;
    that breaks uploadify and causes it to be unable to upload any new
    items.  Fixes ticket #1324.

commit 1f621d9827040d9730946a5804dd3d7269198ccc
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 1 21:24:41 2010 -0700

    Refine the patch for #1216. If the admin user changes their email address update the sendmail from and reply_to fields in advanced settings.  Also change this if the identity provider has changed.

commit 78c590ebaee738435260e3b0bf6cb8fb5431a08d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Aug 31 21:07:43 2010 -0700

    Don't use HTTP_HOST to get the hostname.  We force that to
    "example.com" when we are using the CLI so we'll get inconsistent
    behavior between CLI and the web interface.
    
    For now hardcode it to be example.com so that it's clear.  But to do
    it right we need an after_install step which actually fixes it up.
    And probably an after_upgrade step as well.

commit 35e5d51e28fca21e40e4ae56aa938495cf661e3b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Aug 31 20:59:19 2010 -0700

    Update the install sql to correspond to the change to fix ticket #1216

commit f80aff7434008fa49cdcb273f0615d1948290b8f
Merge: e09c6db 318a94a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Aug 31 20:46:49 2010 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit e09c6dbd5e81c6c56e9c4f386ff431c0cfe9c2b0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Aug 31 20:39:25 2010 -0700

    Patch for ticket #1216.  Move the values that were in the sendmail config file and store them as gallery module variables. Requires a version number bump to 37.

commit 438cea231d93c81adaccb0460327cc703a43da71
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Aug 30 22:43:25 2010 -0700

    Clean up the default case in the OrganizeProperties::getProperty method

commit 318a94a5efcd451c850a9e750e042cb181475ebe
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Tue Aug 31 23:08:01 2010 +0800

    flip the float value for RTL

commit a0033ce75968b3c134c0e439046f135b1e646550
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Tue Aug 31 18:08:01 2010 +0300

    flip the float value for RTL

commit 0b6664e8f9d19df025739bc4a0cf1821563d6b3d
Merge: 0a128ba 23d59de
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Tue Aug 31 18:04:21 2010 +0300

    Merge remote branch 'gallery3/master'

commit 23d59dec7240dfa4bffe9d88f46a848e76ce0134
Merge: db769b7 7819cc1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Aug 31 00:06:32 2010 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit db769b76ab7b7ed54579225fca836defc7afbd11
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Aug 31 00:03:46 2010 -0700

    Expire completed uploads and introduce a text message that says how
    many photos have been uploaded successfully.  This is to pave the way
    for retry code later on.

commit 7819cc1723ef74be2c9d8839b4e7c53f270b4ceb
Merge: 9bc84b6 5568ab2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Aug 30 22:43:42 2010 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 9bc84b69863495a7977f63bf5b60fcb1e9811e49
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Aug 30 22:43:25 2010 -0700

    Clean up the default case in the OrganizeProperties::getProperty method

commit 5568ab24decd31e185fa1b19d29838ec3b30e570
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Aug 30 22:21:00 2010 -0700

    Normalize the "flash missing" message string with the one in the
    uploader for convenient localization.

commit c85b20d6ab055d7419c607903cc641abeca9e91e
Merge: 953d635 866f8ee
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Aug 30 22:20:43 2010 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 953d63555c0ddc387eed08af7f23e4180c13ecc6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Aug 30 22:19:57 2010 -0700

    Detect Flash and put up a reasonable message if your browser doesn't
    have Flash installed.  Fixes ticket #1268.

commit 866f8eefc66f24f9fcfb9f20bdc0add3a654db76
Merge: 0f2daf2 d5ebcb9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Aug 30 22:06:26 2010 -0700

    Fix for ticket #1320.  Hook the loading of the initial albums and check to see if the loaded item is the requested item.

commit 0f2daf29acc051e7fe79abc625406684e9da8196
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Aug 30 22:05:01 2010 -0700

    Fix for ticket #1320.  Hook the loading of the initial albums and check to see if the loaded item is the requested item.

commit d5ebcb91ad8401df8a393f84ade82150467dbf33
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Aug 30 20:49:14 2010 -0700

    Don't put in an <img> tag for non-existent thumbnails.  Fixes ticket #1211.

commit bc0d5e79cbf02a2b51c196c0105677a316e0c8bc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 29 23:09:52 2010 -0700

    Revert "Change the theme option page to display using tabs if the site theme has an admin page."
    
    This reverts commit d66c496fb1007bbd0b1640496808000c573d95fd.
    
    Conflicts:
    
    	modules/gallery/helpers/theme.php
    	modules/gallery/views/admin_theme_options.html.php
    	themes/admin_wind/css/screen.css

commit 3707d4e94fc46fb3b92c399111ef6fc7f351aaba
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 29 21:50:25 2010 -0700

    Properly identify the base G2 url when G2 isn't using the rewrite
    module.  Fixes ticket #1322.

commit e881693798224f150e577f6b71131d712faf6a7c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 29 21:29:36 2010 -0700

    Remember which comments we imported and don't import them a second
    time.  Fixes ticket #1282.

commit fcd4f77bb4a7dcbd90df645e52817f3ff7e87712
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 29 21:26:25 2010 -0700

    Reformat comment.

commit ab598b2931dbff1165e66bc271e6b49166fe0a7e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 29 21:15:58 2010 -0700

    Put the theme CSS at the end of the module CSS so that the theme has
    the final say.  Fixes ticket #1315.

commit 2c717b18d36f8d4ae6b7b94beeb0fd99a2984c9a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 29 20:04:02 2010 -0700

    Don't concatenate two strings together as an argument for t() or t2();
    the l10n_scanner cannot parse it properly and drops those from the
    localization list.  Fixes ticket #1284.

commit 0879a26e1c5a326c51064c412234b3fa540ed5a5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 29 19:55:21 2010 -0700

    Put a message in the logs when we find a string that's not
    concatenated.  Concatenating them is not easy because the two strings
    can have different quoting (single vs. double quotes) and may have to
    be treated separately in the code.
    
    Fixes ticket #1321

commit 201883101595d5954cf45ffac6e2c376e5ecce35
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 29 16:39:01 2010 -0700

    1) Rename "Cancel All" -> "Cancel uploads" to clarify what we're
       talking about and follow our capitalization standards.
    2) Grey out the Done button when uploads are in progress.
    Fixes ticket #1302.

commit 4c8445852d0657d8c598d38096852b49e4672638
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 29 16:26:27 2010 -0700

    Bump gallery module to v36 and add a favicon_url variable, which we
    expose in Admin > Appearance > Theme Options and defaults to
    lib/images/favicon.ico.
    
    Thix fixes ticket #1312.

commit 24b511b44a0f2a7bce575a6dad9c88f9ef257648
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 29 16:03:09 2010 -0700

    Move theme::get_edit_form_admin into admin_theme_options since that's
    the only place where it's used and the theme helper is loaded on every
    page view.

commit de93507d1387aa2245801ce9279b6b8985b1a250
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 29 12:10:20 2010 -0700

    Regenerated version from http://github.com/gallery/gallery3-flex/commit/1e42ddf6574d7632474b8cfbd5b9171a9bb53552
    
    which contains fixes for both #1174 and #1305.

commit a184142d6f3fc9b790e58d44606ff1576891a6ee
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 29 11:56:21 2010 -0700

    Revert "Update the Organize flash object with the fixes for ticket #1174."
    
    This commit reintroduces the bug in https://sourceforge.net/apps/trac/gallery/ticket/1305
    
    This reverts commit efa1fce9de1acc126ce0f2f607cf568e1f6a43af.

commit a9bfe6d3225661c440f9d2fc358ea254c00c2d40
Merge: 6a13a23 efa1fce
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 29 11:47:33 2010 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 6a13a238bbd2dea9198ac4682faeba18eb6af4a9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 29 11:45:27 2010 -0700

    Convert the "parents" variable from a result iterator to an array so
    that the theme can call empty() on it.  Fixes #1318.

commit efa1fce9de1acc126ce0f2f607cf568e1f6a43af
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Aug 29 10:28:50 2010 -0700

    Update the Organize flash object with the fixes for ticket #1174.

commit a08cd0db4e0b90bd625b8c4c608c41a4c41721d1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 28 21:57:54 2010 -0700

    Add a "visible_title_length" variable that defaults to 15 and use that
    as the max title length when we do title truncation in the wind theme.
    Bump the gallery module to 35.

commit cf354f4d6279b9bd93a29ec288d01461e99093dd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 28 21:37:07 2010 -0700

    Add an new rule to the mod_rewrite example that redirects you away
    from index.php to the short urls.

commit 922b810c56bc42a5d3df957cae82c0e70642f8fa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 28 21:25:09 2010 -0700

    Oops, forgot to create an install() function and set the version of
    the organize module to 2 in 8fb56abf034dd1f5c561e7af12bf6e097a3de6f6

commit b1275ab39d5b14c337ad9956e2ac5c5dcded8936
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Aug 25 22:01:12 2010 -0700

    More clearly visually distinguish the active album in the permissions breadcrumbs.  Fixes ticket #1187.

commit 7bee93390d7f3bdbf68ec1632a9f623f70eee2ef
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Aug 25 21:46:23 2010 -0700

    Close any open dialogs before opening a new one.  Fixes ticket #1295.

commit 7a5301ba0546b9ee461689246f5ab9f86da8be03
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Aug 25 10:09:14 2010 -0700

    Notifying on item_updated is overbroad.  Fix for ticket #1286.

commit 3ff91e5e33eee7a3f4941a8036c71089d0f2074e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Aug 25 10:05:21 2010 -0700

    Null out Item_Model::$data_file in Item_Model::save() when we're
    creating a new item, else the item_created event will trigger
    subsequent saves which will think that they need to post an
    item_updated_data_file event.  Partial fix for #1286

commit 545c069786c1254465ed4fb3054c71e9fdb582db
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Aug 24 21:27:34 2010 -0700

    Delete old SWFupload code.  We replaced it with uploadify ages ago.

commit da9e03003a22fd39f2a790b4568af5211d3b1523
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 22 21:21:26 2010 -0700

    Style and text cleanups to tighten up the page and make it a little
    easier to understand.

commit dc80cde379edfd8c2d5c875363e801c9228f3e5e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 22 12:58:23 2010 -0700

    Add "captcha_protect_form" event that the recaptcha module grabs and
    uses to add a captcha to the end of the first group in the form.  If
    there are no groups, it adds the captcha at the end of the form.
    Updated user_profile and comment forms to use it.

commit adc4061125f8a82f7fef0dc3ebbc2fe24bcbd5ae
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 22 12:49:01 2010 -0700

    Use better error messages in form validation.

commit 04add75f6ff7596319b01c635cb62fafacf504cf
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 22 00:27:24 2010 -0700

    Get rid of the move dialog and move option.  Instead, replace it with
    a call to Organize with the appropriate album open.  I have not yet
    figured out how to get the SWF code to highlight the active image, but
    that's coming.  Partial fix for #1204.

commit 91fab0fcf5fb65d9e210abb031a4ddfee31b1f9e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 22 00:26:52 2010 -0700

    Compiled version of http://github.com/gallery/gallery3-flex/commit/88efbd77b45ae888b035295a8034229c645267c2

commit 4d55166eba06a968c954fd5f5dca267d131c281e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 21 16:52:46 2010 -0700

    Fix a bug where we were using names in a string context resulting in
    sending the wrong custom headers back. Fixed the names of the headers
    to be slightly more meta. Fixes #1305
    
    Implemented in gallery3-flex bea5f67efa93a3921eec8cd03a15d68f513f1dc0

commit ae618840b6672444c1e3a92d1907b4a1306146df
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 21 15:25:06 2010 -0700

    Tighten up whitespace.

commit c6a28a93ddfcf692e67342707d2b4a41dcf19fe5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 21 15:11:06 2010 -0700

    Put up a warning and don't accept movie files if we don't have ffmpeg.
    This fixes ticket #973.

commit 4a01aaddc9fa443ca9e022666078d8a2d0578d8a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 21 15:10:46 2010 -0700

    Verify that the ffmpeg path still exists by using file_exists().  This
    is a lightweight way to catch the case where ffmpeg gets deleted.
    Fixes ticket #1303.

commit 7c1a716f0160ee4c0638e28695373bdc164ee40c
Merge: 3e0b425 68b598d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 21 14:06:51 2010 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 3e0b42573e83e2763f9f4cf6ac4790b0ad8514c3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 21 14:06:30 2010 -0700

    Set the "secure" bit on cookies if we're using HTTPS.  Fixes ticket #1217.

commit 65801cf2e0d1b107925b2dc8fe3fb346cbccd972
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Aug 16 22:03:23 2010 -0700

    Fix a typo to the case correction.

commit 3fc08dfd4ceff9eb4726e7049e332b1c40b50072
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Mon Aug 16 22:39:54 2010 -0600

    Added text and submit classes to search form input and submit buttons, respectively. Fixed the width of the search form in IE. Button height's off in IE 8 compatbility mode.

commit 33e76f5e337cc147330dd7b51977067030726eb5
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Aug 16 21:54:32 2010 -0700

    Correct incorrect case on dialog title.

commit 68b598d4fab4f7802e1193dc8139a8f7cd17efb5
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 19 19:48:44 2010 -0700

    Remove style information regarding the permission dialog from the gallery.css to the wind/screen.css.  This should make it easier for themes to style the dialog.

commit 21a0f832b66eaba902b09e2a88ece52c76e4a0c3
Merge: 387d30d ea2808f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Aug 17 22:33:30 2010 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 387d30da764b152a9bb40ac6db7d9ce5282aa7a3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Aug 17 22:32:47 2010 -0700

    use HTTP_HOST instead of SERVER_NAME so that we're sending requests
    back to the same canonical domain that we came from.  Else Flash makes
    crossdomain.xml requests, fails, and falls over.
    
    Fixes ticket #1298.

commit ea2808f48ffe10afc6514f0d1c96fe8b3f36f8e6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Aug 16 22:03:23 2010 -0700

    Fix a typo to the case correction.

commit de91d0fe4f5764eae7902a4790c57cac635aa0be
Merge: 9592f2f 8c2ed0d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Aug 16 21:54:40 2010 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 9592f2f2e6dfff7f5a500b29511ba3bd23a0fa15
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Aug 16 21:54:32 2010 -0700

    Correct incorrect case on dialog title.

commit 8c2ed0d681364837ab51b35d7aeb895b8adfa470
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Mon Aug 16 22:39:54 2010 -0600

    Added text and submit classes to search form input and submit buttons, respectively. Fixed the width of the search form in IE. Button height's off in IE 8 compatbility mode.

commit ff1d8aea2f2805f85ce3cc7e4079d04fb9f1bac4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 15 01:59:54 2010 -0700

    We use UTF-8 everywhere.  Fixes ticket #1285.

commit a1be33f6ab9672cd4886e5b607001d30368613a1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 15 00:46:02 2010 -0700

    Verified.

commit d2c59740b11c0764967410b233f3b01fc3dab85d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 15 00:00:31 2010 -0700

    Updated organize SWF to understand data resources.

commit 6563ad1393b6d9a9cde44a127355359edae54843
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 14 22:00:53 2010 -0700

    Return the right content type for album thumbnails (based on the album cover's mime type)

commit dbe595f15e9c3f359fa447cf270e914b6d6d809e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 14 16:10:32 2010 -0700

    Always use the data resource to return thumbs, resizes and full sizes.
    That way the client does not have to differentiate between RESTful
    request types and raw request types.  If there's a public raw url,
    return that as well.

commit b562751fdb2ae8aab3a344e84176ea03381ca04c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 14 15:45:16 2010 -0700

    Don't expose members of an item that are not viewable by the end user.
    This leaks item ids, but no other information about the item.  Fixes
    ticket #1292.

commit 50e3230d79b8736f78ebaa4f1c7e6df1c29b3243
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 14 15:10:07 2010 -0700

    Add a key on access_caches.item_id.  Without this, the Fix task query
    to find missing access_caches is very slow.  Bump Gallery module to v34.

commit b6a377bc8219a5354778692086cd11b8fd05f927
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 14 15:08:38 2010 -0700

    Update install.sql for gallery module version 3.  This was left out of
    779d91cca01567a09b894e9fff4dfa32cb82d3d9 but it doesn't cause any real
    damage, it just means that anybody who got the code in the intervening
    window and did an initial install required an upgrade as well.

commit d9f8c8a295b760bb5b858c96f1658d50c321bd01
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 14 14:56:28 2010 -0700

    Rebuild access_caches rows if they're missing, as necessary.  Fixes ticket #1289.

commit a8c7234c5e99d1a953f652b85b873d9e43675765
Merge: 524554c c909963
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 14 14:02:41 2010 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 524554c65b363adfd264c66dafe0671ba5115a1f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Aug 11 21:02:57 2010 -0700

    Send back the content length of files.  This fixes streaming movies.  Fixes ticket #974.

commit c90996341aa309a0c585392427561831890767c7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Aug 11 08:02:16 2010 -0700

    Fix for ticket #1288. Add a containing <ul> element for the footer on the admin page. Also respect the "show credits" variable setting.

commit a94bb197987deeee4b0046fb6566510080e087f6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Aug 9 23:01:47 2010 -0700

    Force the charset to UTF-8 when viewing the HTML form of REST output.

commit 9de371e1b3bda42fdaf564af502c0c986eeada10
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Aug 9 22:55:58 2010 -0700

    Use the data_rest implementation to proxy access to raw
    thumb/resize/full data files when permissions are in play.

commit 3c18762fda9a91717b5defc300ace6bda61eb233
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Aug 9 22:54:57 2010 -0700

    Change the way that this works.  Now instead of sending back the image
    metadata and the data itself JSON encoded, we just send back the raw
    data with the right Content-Type.  This, combined with code in
    Item_Model::as_restful_array() that swaps in /rest/data urls as
    appropriate, means that the RESTful payload has consistent urls when
    permissions are in play.

commit f0d8aef0ead373f310c59c665f8973264815e784
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Aug 9 22:51:14 2010 -0700

    "Content-type" --> "Content-Type".

commit d5dbd1677ffdc141823066e98fb5bb3842b0263c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Aug 9 21:22:54 2010 -0700

    "Server Add" -> "Server add"
    (Sentence capitalization)

commit 0ff81c7ded9e61a16a2f900edfbe98d48847bf59
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Aug 9 15:18:25 2010 -0700

    The root album's edit form doesn't have a name field, so don't count
    on it being there in update().  Fixes ticket #1281.

commit b6a50140474b4ac20eb3bf6e1c9427674f728b54
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Aug 9 00:29:28 2010 -0700

    Fix a pagination bug.  Fixes ticket #1280.

commit 541a084cc1dcc6afa19ff526f1a12d0e878be5ab
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 8 21:51:26 2010 -0700

    "REST api" --> "REST API".

commit 0014745d4ad0c5e95e4ebced95062a6272359bf5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 8 21:49:30 2010 -0700

    Add a button to the user profile page to let you reset your REST API
    key.  This is useful if you think it's been compromised in some way.
    Fixes ticket #1226.

commit 639d31a2c1a54f31ad32208b8602a8922d336fa0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 8 21:17:16 2010 -0700

    If the imported item from Gallery 2 has a preferred derivative with a
    rotation, then rotate the imported image accordingly.  Fixes ticket #1274..

commit 58bf479f4c040ac73ea190d966ffd5408f9908f0
Merge: 1ad1f95 acb1faa
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Aug 8 17:29:29 2010 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 1ad1f9517f91875875f2e062bda7d834827c3430
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Aug 8 17:29:22 2010 -0700

    Fix for ticket #1279. In admin themes sanitize the theme name before checking that theme.info exists.

commit acb1faaa594fc5067c4340e073afca3b83f819d4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 8 17:25:31 2010 -0700

    Cache the group ids for a day to trade off performance for security updates.
    Fixes ticket #1227.

commit 6a8c1f5e855b1c4d768524e6e542218c234df6d3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 8 17:19:51 2010 -0700

    whitespace fix.

commit c3ad4b5374435fdd93644066eeebd94ba5271e20
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 8 17:14:09 2010 -0700

    Whitespace fix

commit e85b345edaded7d4a68ae758138bcff9d0ceaefb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 8 17:10:00 2010 -0700

    Visually separate the G2 comment's subject and body when we blend them
    into the G3 comment body.  Fixes ticket #1269.

commit bd541342b9b56db00b8d24db1da43b9693e9849a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 8 17:07:13 2010 -0700

    Add gallery stats in addition to platform stats.

commit 2dda8e22a7a32db8a5577aad0cff2b47ac0f9c63
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 8 16:54:31 2010 -0700

    Use the gallery helper date/time functions wherever we format date
    time for the browser.  Fixes ticket #1278.

commit cdb6306d7e75451587fbc029b94ef197f42842f1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 8 16:50:02 2010 -0700

    Backdate the created/updated dates for imported comments.  Fixes ticket #1215.

commit 8da37d595cc81e3c340dd98fdb621b6955a3ad3f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 8 15:25:21 2010 -0700

    Verified.

commit e5a1da71ed0383155469e552e412b3504a1742e9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 8 15:05:55 2010 -0700

    Convert tabs to spaces to fix File_Structure_Test.

commit f5b7e207c8c6dc92f82b3607d57459e794b7990e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 8 15:02:58 2010 -0700

    Verified.

commit d6f5a8a8d13892d6487f344c5e5b1f5dd48893d5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 8 15:02:24 2010 -0700

    Add JSONP support.  You must specify &output=jsonp?callback=<js_function>
    Fixes ticket #1205.

commit 9b5e058dd3a7d0d08fa0fad954a1908b9949e934
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 8 15:01:38 2010 -0700

    We can always send back the header because Kohana buffers output.

commit ab2e2d2d7786f834b26b0330dd2b6f682f23bd96
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 8 15:00:23 2010 -0700

    Add the $max_level param to all calls to _sanitize_for_dump()

commit de4d858dc27b356776a6665fd9eeed82cffe9c2e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 8 14:56:28 2010 -0700

    Add in the missing 'error' count.

commit 371a2ff7d29f50dde5ff23ca45188d0eac365481
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 8 13:39:27 2010 -0700

    Adjust the vertical placement of the "Dang" message.

commit 3c7dc6d7a63e59c841f60d9594575efcf0969f98
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 8 12:46:26 2010 -0700

    Handle 404 exceptions specially to reduce spam in the log files.  Fixes ticket #1228.

commit ded9ed4df809d28ba2f4519a398e06daf335ee81
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 8 11:35:36 2010 -0700

    Create a registry of REST resources and call it "registry"..  Pretty
    simple, actually.  Fixes ticket #1173.

commit a22cf8cf1c1f3eccedb01ab4629e579c95594dae
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 8 10:14:29 2010 -0700

    Handle "1" as a default order direction in G2.  Why would we ever do that?  Dunno.
    Fixes ticket #1276.

commit b7700d1eec02caa794629adcc0555d7c9f0c1414
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 8 09:57:13 2010 -0700

    Require the size parameter.  Optional params are confusing.  And be
    robust in the face of a missing data file (movies and albums lack
    resize, albums lack full size, some albums don't have a thumb if they
    have no contents, etc)

commit cc43c37a1c71c54d03979489ee7f1d5884a648af
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 8 02:06:50 2010 -0700

    Add a sad face on the dang page.  Just cause.

commit 0d2237979a2cc92d707a47115e492bff57fa9c5d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 8 01:48:09 2010 -0700

    Make the error page more informative, and include platform information.

commit 4e95ec843a2bef45e044e2aa3a36fcb590d85464
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 8 01:12:43 2010 -0700

    Allow item_rest::put() to replace the current data file.  Remove
    data_rest::put() altogether; it's no longer necessary.

commit 7f61f9754e3bcf7cd9c85d65414e1ee7945fdca5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 8 00:30:55 2010 -0700

    Change file modes to 644.

commit 20fd9872965a65121c4497fb166eda15b1a9f360
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 7 22:33:01 2010 -0700

    A new REST resource that allows access to view and modify the actual
    contents of the file, which enables REST viewers to see the actual
    data which is useful when the files are privileged.  Currently it
    returns the contents of the file in JSON encoded form, which may not
    be the best.  Multipart/mime might be much better.
    
    Fixes ticket #1224.

commit dfb095a26267f8b68b40add03dfe407966c49b92
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 7 22:18:28 2010 -0700

    Add the ability to replace the source data file in Item_Model::save().
    Refactor the rotate code in Quick_Controller to replace the data file,
    and then have gallery_event::item_updated_data_file() pick up after
    the change is saved, rebuild the image and handle album covers.  This
    is much more portable than before and it will allow any mechanism (eg:
    REST) to replace the source image.

commit 1abf43d3f1efa9d0d51f4c7e8f6f946db2497a09
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 7 22:06:57 2010 -0700

    Add a max_level to _sanitize_for_dump() so that we don't blow the stack.

commit c6ca77377f2c55316923c62e80b34802a45979c2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 7 18:02:39 2010 -0700

    Whitespace fix.

commit 779d91cca01567a09b894e9fff4dfa32cb82d3d9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 7 12:18:43 2010 -0700

    Add an index for left_ptr, since we use that in ORM_MPTT::parents()
    which is on every album page.  Bump Gallery module version to 33.

commit 67636ade24ca5fca394cc4f75227294f6927be29
Merge: 4f0733f 16ae654
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 7 11:22:16 2010 -0700

    Merge branch 'master' into bharat_dev

commit 4f0733f2c8b8b124e4faf60c53475ef48703db81
Merge: d3a161c 1b2da1f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 7 11:16:01 2010 -0700

    Merge branch 'master' into bharat_dev

commit 16ae65464cb33b16d77cb214bebb699158d548a7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 7 10:57:18 2010 -0700

    Oops.  Fix the upgrader path to add the weight column to the modules table.

commit 1b2da1ff70acba4177a7ebea825f802f24801a0c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Aug 6 10:41:38 2010 -0700

    Add a "weight" column to the module table.  This allows us to specify
    module ordering, which is currently being done in the moduleorder
    contrib module.
    
    By default, the weight will be the same as the id of the row which
    means that new modules will get added at the end of the list.  This is
    covered in the upgrade case as well.
    
    The one gotcha is that we need to make sure that we don't try to sort
    by the weight column if the gallery module version is < 32, which is
    something we haven't done before.
    
    Fixes ticket #1272.

commit d3a161ca1bb388593e03bd5c57c60ea249b3fe8d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Aug 6 10:41:38 2010 -0700

    Add a "weight" column to the module table.  This allows us to specify
    module ordering, which is currently being done in the moduleorder
    contrib module.
    
    By default, the weight will be the same as the id of the row which
    means that new modules will get added at the end of the list.  This is
    covered in the upgrade case as well.
    
    The one gotcha is that we need to make sure that we don't try to sort
    by the weight column if the gallery module version is < 32, which is
    something we haven't done before.

commit 0fe44fe3809041edb64b69496bcee070578483d5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Aug 6 10:40:41 2010 -0700

    Use module::install and module::activate for the gallery module as
    well; I've verified that it generates the same installer files.

commit 8559cdb5b6bfa87864941f726521660023779fa7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Aug 4 21:30:48 2010 -0700

    Add docs reflecting that we may skip some items that have invalid parent_ids

commit aa40bdd8e058b475c8da8c2c4608aa6ac9da1354
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Aug 4 11:05:42 2010 -0700

    Update the wind theme thumbnail to be more reflective of the actual theme (i.e. the layout has changed since the thumbnail was created.)

commit 42617117c01527ae24dfaa7d3388baefe11f01c5
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Aug 3 11:10:13 2010 -0700

    Replace overlooked 'form' parameter in json response with 'html'.

commit 3492f1712dd21511347c96a463504eb5ac912681
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 1 22:18:22 2010 -0700

    Fix the i18n error message for missing/incorrect password.  Fixes ticket #1265.

commit 3e8d683ce4bf6cf41b67e61ebe76c32c129105e4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 1 22:09:02 2010 -0700

    Use the login/html page for maintenance mode; we don't need the
    maintenance controller/view anymore.  Fixes ticket #1267.

commit ca54cdd6448ec919efe3853992dc652b7c671d97
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 1 21:44:24 2010 -0700

    While we're cleaning up albums, also find any cases where we have an
    album_cover_item_id that points to an invalid item.

commit 400c248e2d2c9acf022a247b80ed298ba0deab85
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 1 21:10:27 2010 -0700

    default maintenance_mode from false -> 0 for consistency  with the value we set in the db

commit 9b1e3eb1775f3af365d7320a8a0bbfed85e2311c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 1 21:08:03 2010 -0700

    Updated for gallery module v31.

commit c33b24c9faf5d83e4f1bfc6d3778da6c37139b3f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 1 21:00:30 2010 -0700

    Make maintenance mode a variable instead of a config. Then create
    links on the Admin > Maintenance page to allow you to turn it on and
    off.  This should be efficient since we cache all vars and look them
    up on every request anyway.
    
    This also allows us to have the Fix task enable maintenance mode while
    it's running which greatly reduces the chances that somebody will come
    along and hork the database while we're tinkering with MPTT pointers.
    
    Fixes ticket #1259.

commit 49eb3e32b9b8df20360ee6ceb388f00828063efa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 1 20:49:14 2010 -0700

    Make the continuation url go to admin/maintenance.

commit 56ca3b09b637fdae25e45bc454a1574486cb3aef
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 1 20:48:57 2010 -0700

    Focus on the username field by default.  Don't use jQuery because we're operating in a very limited context.

commit 0a128bab0a788288c5291491a68bd1c9ab432825
Merge: 8e1ae75 9369fd5
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Mon Aug 2 05:45:48 2010 +0300

    Merge remote branch 'gallery3/master'

commit 8e1ae7549362688dd38e053dd736ddc5fc6a4982
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Mon Aug 2 05:45:05 2010 +0300

    add a little space before the success/fail icons, for RTL status messages

commit 9369fd55a36183b7dc1e4b42af46a8f649a66578
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 1 10:39:32 2010 -0700

    Force the response type for uploaded watermarks to text/html.
    
    // Override the application/json mime type.  The dialog based HTML uploader uses an iframe to
    // buffer the reply, and on some browsers (Firefox 3.6) it does not know what to do with the
    // JSON that it gets back so it puts up a dialog asking the user what to do with it.  So force
    // the encoding type back to HTML for the iframe.
    // See: http://jquery.malsup.com/form/#file-upload

commit 3b187d7fe9acbe46e38ae824b6374dd3bfd0cfb0
Merge: 563afbe bf7115c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 1 10:35:15 2010 -0700

    Merge branch 'dialog'

commit 563afbe6ddf4b4debea87a0cb0b8758c8826f80c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 31 16:47:14 2010 -0700

    "Save" -> "Download" for clarity.

commit bf7115cf5a732cea2d498971ec94d2ade3b2fcdd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 1 10:19:36 2010 -0700

    Write appropriate PHPdoc for json::reply.

commit cd50fde5dea97f10d8eb62e0e2058846ce9abdfe
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Aug 1 08:57:22 2010 -0700

    Specify the charset on the content type header

commit a4531707274318496bb7a4477d940030d870f133
Merge: fc58003 7607e1f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Aug 1 08:31:09 2010 -0700

    Merge branch 'dialog' of github.com:gallery/gallery3 into dialog

commit fc580037e797fad48b49fcffa7aa69dca8761972
Merge: f50151c a5f7019
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Aug 1 08:26:39 2010 -0700

    Merge branch 'master' into dialog

commit a5f701951ee00f85690b804a8c63a9bddc48b67f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 1 01:33:59 2010 -0700

    Add a localized error message for missing usernames.  Fixes ticket #1266.

commit 7607e1f932dda53144792d0b7e8674a34fbc7f9a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 31 21:16:17 2010 -0700

    Full pass over all the JSON encoding and JS dialog code.  We now abide
    by the following rules:
    
    1) An initial dialog or panel load can take either HTML or JSON, but
       the mime type must accurately reflect its payload.
    
    2) dialog form submits can handle a pure HTML response, but the mime
       type must also be correct.  This properly resolves the problem
       where the reauth code gets a JSON response first from the reauth
       code, and then an HTML response when you reauth and continue on to
       a given form -- try it out with Admin > Settings > Advanced.
    
    3) All JSON replies must set the mime type correctly.  The json::reply
       convenience function does this for us.
    
    4) By default, any HTML content sent back in the JSON response should be
       in the "html" field, no longer the "form" field.
    
    The combination of these allows us to stop doing boilerplate code like
    this in our controllers:
    
      // Print our view, JSON encoded
      json::reply(array("form" => (string) $view));
    
    instead, controllers can just return HTML, eg:
    
      // Print our view
      print $view;
    
    That's much more intuitive for developers.

commit be4ad8e96d53f04a8f975aedde625a1f3e17dafd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 31 16:47:14 2010 -0700

    "Save" -> "Download" for clarity.

commit e354469285b7a9569efa1b2385259d6f27fe2b63
Merge: a628064 f50151c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 31 15:45:05 2010 -0700

    Merge branch 'dialog' of github.com:gallery/gallery3 into dialog

commit a6280641f53391dd57b3760ac882c3219e0cee6e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 29 09:22:32 2010 -0700

    Resend the entire dialog content (including the wrapping view) instead of just the form.

commit a6ceb927e602dd693b011a17e625cc9c87d57d69
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 29 08:59:10 2010 -0700

    Sometimes in dialogs, the form is wrapped in a view to provide additional information.  We need to replace the contents of the entire dialog, not just the form, otherwise, there could be text floating around that doesn't make sense.

commit 0c535c85ed7eb5d852ff18715287dd63f85903ac
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 29 08:57:21 2010 -0700

    Missing the user name on the reauthenticate form.

commit 29f29d2261c96c30eb3e63a8066e80ade5497081
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jul 28 07:57:27 2010 -0700

    When the admin controller redirects to the reauthenticate controller, the value of request::is_ajax() from the original request is lost.  This patch stores its value in the session so the reauthenticate controller knows whether its in a dialog/panel or not.

commit 0cca2fdf9bc0e77e1015975efdb9fe7c07a75b5f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jul 26 07:57:49 2010 -0700

    Correct the name of the JSON member that contains the form data.

commit 09dfe1a91b3e663917fe53516148fe5d74c099fa
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 23 23:00:27 2010 -0700

    Convert the admin_theme controller to use the json::reply method

commit 91a2c04a24c320df37ea980f11245eb4e086879e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jul 21 21:30:13 2010 -0700

    More patches as part of #1225.  Change the 'core' modules to use the json::reply
    method to set the content type header and encode the response as a json object

commit 89d18c0714f5c982ef9e8711a04490bdac8cae2d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jul 21 08:46:53 2010 -0700

    Partial fix for #1225 addresses the issues with the user edit forms.

commit bb04015149f35d7ef5ef1e98e53a1659679d83d7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jul 21 08:15:21 2010 -0700

    Partial fix for #1225. Create a json reply helper that sets the content type to application/json and then json encodes the reply.

commit 5c0998c4ac9ad7572df68f5c2cc351f0d03a7bd2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jul 21 07:20:24 2010 -0700

    Partial fix for #1225. Change the dialog and panel handling to look at the mime type returned to determine the content type.

commit 68f41c7061cc6d1227286fd541d84c5df2549cb3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 31 12:12:17 2010 -0700

    Fix typo: ui-corners-all  --> ui-corner-all
    
    thanks Lord Beowulf!

commit a8bb0462097bd83cd87bf9048b8be879cff3cd6c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 31 11:51:18 2010 -0700

    Use readfile() instead of fopen()/fpassthru()/fclose() for brevity.
    I've done some tests on a 60M flv and found that there's no difference
    in memory consumption with these three approaches:
    
      public function test() {
        Kohana::close_buffers(false);
        $file = "/home/bharat/basketball.flv";
        if ($fd = fopen($file, "rb")) {
          while (true) {
            $bits = fread($fd, 65535);
            if (strlen($bits) == 0) {
              break;
            }
            print $bits;
            set_time_limit(30);
          }
          fclose($fd);
        }
        Kohana_Log::add("error","test: " . print_r(array(memory_get_peak_usage(true),memory_get_peak_usage(false)),1));
      }
    
      public function test2() {
        Kohana::close_buffers(false);
        $file = "/home/bharat/basketball.flv";
        $fd = fopen($file, "rb");
        fpassthru($fd);
        fclose($fd);
        Kohana_Log::add("error","test2: " . print_r(array(memory_get_peak_usage(true),memory_get_peak_usage(false)),1));
      }
    
      public function test3() {
        Kohana::close_buffers(false);
        $file = "/home/bharat/basketball.flv";
        readfile($file);
        Kohana_Log::add("error","test3: " . print_r(array(memory_get_peak_usage(true),memory_get_peak_usage(false)),1));
      }

commit f50151cf1840b1d9d528b76ac9fc4ed20a351759
Merge: 21e3e86 7b8ed10
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 30 05:48:12 2010 -0700

    Merge branch 'master' into dialog

commit 7b8ed1079624eefae8d83fac89caa0eaa3fc9ef4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 29 21:47:52 2010 -0700

    Add recovery code for dupe slugs and dupe names to the general purpose Fix
    task.  Fixes ticket #1260.

commit 3f48f17e541cb69fdfd1ce0043121969cb98b28b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 29 19:41:03 2010 -0700

    We don't care about the name and slug for the root album so don't bother enforcing them.

commit ebbb73787d6f935354478d4bdbe626c163c90a9c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 29 19:37:38 2010 -0700

    Trap ORM_Validation_Exception specially and report which fields failed validation.

commit 21e3e86885b9f1b430a98553810327ac573412ca
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 29 09:22:32 2010 -0700

    Resend the entire dialog content (including the wrapping view) instead of just the form.

commit 8cd9c09729fc5ccafa1b74b6d3f00ef5d3476d9e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 29 08:59:10 2010 -0700

    Sometimes in dialogs, the form is wrapped in a view to provide additional information.  We need to replace the contents of the entire dialog, not just the form, otherwise, there could be text floating around that doesn't make sense.

commit 6cd31e31afbe08fb0d7ab99f5201f7cb41c9985b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 29 08:57:21 2010 -0700

    Missing the user name on the reauthenticate form.

commit 529b9ac56c4997ec095a03580b13110e56ed1d14
Merge: 64eae64 941a350
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 29 06:59:44 2010 -0700

    Merge branch 'master' into dialog

commit 941a350691c267e3b417eb461bdc9d499ee10598
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jul 28 23:58:02 2010 -0700

    Put the having clause after the group by clause to resolve this upstream issue:
    http://dev.kohanaframework.org/issues/2923

commit b3c1b4633c55b14bfed607336ca213cb2fda4447
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jul 28 22:42:04 2010 -0700

    Combine the Fix MPTT and Fix Permissions tasks into one magical fix-it
    task.

commit 64eae641e5db841b89d67c69634ed409992eed54
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jul 28 07:57:27 2010 -0700

    When the admin controller redirects to the reauthenticate controller, the value of request::is_ajax() from the original request is lost.  This patch stores its value in the session so the reauthenticate controller knows whether its in a dialog/panel or not.

commit c3a92df6e6ee88c9fd57c3da8a6703d994cb55b2
Merge: c2100d1 dd95578
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jul 27 21:35:14 2010 -0700

    Merge branch 'master' into dialog

commit dd955781aaa9c1ee9e780b6b2c545878a47bbf21
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 27 19:54:41 2010 -0700

    "public static" ==> "static" to match code conventions.

commit 185a736ff916b420a6f29f44a545cde05593bbc0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 27 11:27:46 2010 -0700

    Revert "Combine all the flex runtime libraries into a single downloadable file. Fixes ticket #1241."
    This breaks organize on Chrome 5 (Linux) and Chrome 6 (OSX).  See ticket #1241.
    
    This reverts commit 423fca2d5ffca1e953694793ad118589db1756d0.

commit bf1e1d3d1f523ff789b137e115b95e69cf6c5b13
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 27 11:19:48 2010 -0700

    Verified

commit 84a50e737b54acbe4a8c47b6038c45cd709c2e7c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 27 11:18:55 2010 -0700

    Fix the "get flashplayer" button.  It was throwing a JS error before.
    Not sure why it was done in JS in the first place.  Fixes ticket #1256.

commit f9137c756e325a629dbe3e28ca351871c12477c5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 27 10:53:31 2010 -0700

    Updated

commit 52f1c4b8c6a3a4043fcca3901a659b140b77f9d9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 27 10:49:47 2010 -0700

    Don't invoke a graphics toolkit when setting the album cover from a
    clean thumbnail; we can just copy it over.  Should be a decent perf
    improvement in many cases.  Fixes ticket #1255.

commit 2e52bcedcdf6962d51aade9273472d333e91a31a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 27 10:14:52 2010 -0700

    Update the mock so that all responses return arrays, not stdClass().

commit addbd6fb81685e42fb262882dc798b1bd040dd8c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jul 26 21:38:40 2010 -0700

    Fix ticket #1253 where the maintenance page bombs if you have already
    configured your Gallery 2 import but you move your Gallery 3.

commit c2100d1d2d7d4a5570ed454f5de078d6595de768
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jul 26 07:57:49 2010 -0700

    Correct the name of the JSON member that contains the form data.

commit f6fb18684760edbe023f5ff9062169cee4cd10ce
Merge: 5be9ae3 9534a1c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jul 25 11:12:08 2010 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 5be9ae3250fab24631c0fc6b900ffccd9b1755f2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jul 25 11:10:42 2010 -0700

    Add a new maintenance task that resyncs album .htaccess files with
    database access intents.  Use this to fix up .htaccess files after you
    relocate your Gallery. Fixes ticket #1252.

commit 055e115b6a8a999285918f666b93562fd7b32ca2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jul 25 11:03:32 2010 -0700

    Move the "cancel all" running tasks button up to make it consistent with the "remove all finished" button.

commit 075cea2a4890e57c60d91157bc33982e34a42a9c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jul 25 10:05:09 2010 -0700

    Don't use hardcoded id 1 as the everybody group; it won't work with alternative auth schemes.

commit 75a181f8903e10ec4f3e2e8e4ee0a937124062e1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 23 23:00:27 2010 -0700

    Convert the admin_theme controller to use the json::reply method

commit 48c2e73048be15c7d575293e0e5c69b93ab92398
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jul 21 21:30:13 2010 -0700

    More patches as part of #1225.  Change the 'core' modules to use the json::reply
    method to set the content type header and encode the response as a json object

commit 2cb87631b769c55a7af2b308f0e8975c11369138
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jul 21 08:46:53 2010 -0700

    Partial fix for #1225 addresses the issues with the user edit forms.

commit a331611049f6541cf37f993fa3c29535d387f972
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jul 21 08:15:21 2010 -0700

    Partial fix for #1225. Create a json reply helper that sets the content type to application/json and then json encodes the reply.

commit b1cd0b7e97ed3b354bd350f5238f064671525ee3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jul 21 07:20:24 2010 -0700

    Partial fix for #1225. Change the dialog and panel handling to look at the mime type returned to determine the content type.

commit 9534a1c82a8ebc5cc56ba4cc256ce33570701a16
Merge: f699d2b 108fff7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 23 23:00:57 2010 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit f699d2b38593311089d1636bf41bf91c1bd467f8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 23 05:56:59 2010 -0700

    Fix missing quoate in the organize dialog html template.

commit 423fca2d5ffca1e953694793ad118589db1756d0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 23 05:54:50 2010 -0700

    Combine all the flex runtime libraries into a single downloadable file. Fixes ticket #1241.

commit 108fff735cd0882f4b1ced4c2352fcd44247467e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 22 15:53:00 2010 -0700

    Initialize $request in submit_translations().  Fixes ticket #1239.

commit 663f079e8565d8bd565b1f8cdf85cb8f0269c87b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 22 14:08:08 2010 -0700

    Properly handle the case where the album_cover_item_id points to an
    invalid (probably deleted) item.  Fixes ticket #1238.

commit adeea49e0a4b4d68e389b0d286957d24a5e16bb6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jul 21 11:43:51 2010 -0700

    Catch any exceptions thrown when we try to restore the original
    identity provider after we fail to set up a new one.

commit 2cf51983535ffa498c38b02328e30fe307ec6827
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jul 21 11:34:19 2010 -0700

    Null out relative_path_cache and relative_url_cache after we update
    the pointers in case the hierarchy was adversely affected by actions
    when the MPTT pointers were desynced.  Fixes ticket #1235.

commit af8bb05d5d4d13ae9fdda889c705fdd6dca0666c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 20 15:33:48 2010 -0700

    Show the old group name in the error message when we fail to modify a group.  Fixes ticket #1233.

commit e5b1a4fc23bb31645cc330085db9a98f5e6d06a6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 20 15:21:44 2010 -0700

    Fix a bunch of missing or invalid error messages.  Fixes ticket #1232.

commit 189518849c8a1d8f5ee7c3a1ddbe0852bdbe822c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 20 14:21:40 2010 -0700

    Modify the panel code to expect a JSON data package to mirror what we did in gallery.dialog.js in 9538b3888dadbe3a6fac72e2a97f97c7db3d86f2

commit 31361219894bae6da9229fb140b7ebf2af45e46d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 20 13:47:11 2010 -0700

    Elide "; charset=binary" which can be returned from file::mime() from recent versions of finfo.  See http://framework.zend.com/issues/browse/ZF-9383 for details.  Fixes ticket #1230.

commit b4b2ef92ae76e5dd612bbd6bb801e79a7ebfac98
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 20 13:46:38 2010 -0700

    Localize the error strings in watermark::get_add_form().  Fix for ticket #1230.

commit 6899af367b7766a6c7afa0f3e551b8d82230fd3f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 20 12:45:04 2010 -0700

    Cleanup on the Admin > Languages page.
    
    Hide the fieldset and legend in the theme, since they don't add any value.
    Change l10n_client::_server_url() to use the short style GMC urls and make the
    API a little tighter.

commit 9db310186a276f4cd2d07534a7184a801ae4f167
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 20 12:22:52 2010 -0700

    Use Session::get_once() instead of Session::get() followed by Session::delete();

commit 112582daeb73f9ae1cc3862ec635b393499eed6d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 20 12:18:03 2010 -0700

    Add internationalized error messages for adding and editing groups.

commit 6ed638244a9e78633f459560d772bc5d477e7c23
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 20 10:31:45 2010 -0700

    Fix internationalization of REST key.

commit 96bcc8146cc64151551e4c7499829c1ede9b62cd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 20 07:03:43 2010 -0700

    Style and text cleanup.  Parameterize the minimum flash value so that we can use it in the internationalized string.  Fix capitalization.

commit 9e9eed11872f995f899f7d00205377c3407af308
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 20 06:42:20 2010 -0700

    Oops!  Proper fix for #1201.  My last fix just redirected back to the
    main site, and didn't actually log you out.

commit 04c89ef7b68e1ef7fbd82c799bb762798d5e438b
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Jul 18 00:25:56 2010 -0600

    Minor Wind IE tweaks. Load fix-ie.css for IE 8 too. Add padding to g-short-form submit inputs to make them same height as the text input.

commit a8c629409bbc78791c3ae7f5f16dac0c90db214d
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Jul 17 15:49:47 2010 -0600

    Fix margin: 0 auto; IE issue in the upgrader view by adding a doctype to the template. Minor code refactoring. Also seems to fix #1188.

commit 71e097e47bad25def47a5960c72cfac197066290
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Jul 17 15:40:41 2010 -0600

    Fix closing ul on inactive modules list, replaced <i> with <em> in footer.

commit 71a32e4e2453b8e6dec922e88180960a3a5b9aec
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jul 16 14:23:03 2010 -0700

    POST requests create a new entity and should result in a 201 Created
    reply with a Location field that matches the URL of the newly created
    resource.  Fixes ticket #1178.

commit ed704e6a3bcd24c9d0ffbc4e71d2441aba4e9d0b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jul 16 12:16:20 2010 -0700

    Trap 404s and return Rest_Exception instead.  Fixes ticket #1213.

commit 5fd166724ba1dad3d6725d7bdb65627c0ae9ed91
Merge: 5839506 bd969a6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jul 16 11:59:48 2010 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 583950616ef7c89acc0b0cbb52e77ffdb0afbb3d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jul 16 11:58:13 2010 -0700

    Improve the fix for #1176 to use request::is_ajax() instead of tacking
    on a query param to urls that appear in dialogs.  This keeps things simpler.

commit bd969a6ffa85488c170be23392fba2792bd00da3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 16 07:37:24 2010 -0700

    Fix for ticket #1202. Set the minimum flash version 10.0.0 and display a message and a button to download the latest version if the minimum versiion is not installed.

commit ce2b3d00011ca9ec13eb3db66034b41687fd26ad
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 16 06:52:18 2010 -0700

    Remove code that was inadvertently committed.

commit b51b49cb63d990611dacccca5e2a505c6c96357d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 15 19:45:10 2010 -0700

    Don't show a themed 404 page if we get to a 404 via file_proxy.  Just
    return a simple "File not found" message, since this is a very basic
    file access (thumbnail, resize, original etc)

commit 993e041274362ddec68ddf4566c72913464de504
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 15 14:57:43 2010 -0700

    Remove the code to call the controller directly and just use redirect.  Now that all the form calls actually return the form as a json object, calling the form creation controller method i no longer required.

commit 155d2b809b5d416f39bc71ce10c2704b886eccef
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 15 14:54:45 2010 -0700

    Rename g-in-dialog to the naming standard for query parameters and give it something more representative... 'gallery_dialog_request'

commit 86a91c11cf8e2af8d100ee8a982a299d341ef032
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 15 12:51:35 2010 -0700

    Redirect users away from admin to the main site if you click logout on
    the admin dashboard.
    
    Fixes ticket #1201

commit fe2881a22aabd0ab5cb971809db6f325c3ce22d3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 15 12:37:44 2010 -0700

    Rename Flash_Uploader to just Uploader.  Modules that want to replace
    this will just replace the controller.  This makes overriding that
    much easier in the future.

commit 8065ab023df7a1bfb1534bbcdba8586b411a577d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 13 13:42:00 2010 -0700

    Revert "Fix for ticket #1182.  Remove the trailing slash and just let it be matched by the trailing (.*) group"
    
    This breaks adding new albums.  I get the following in my error log:
    
    "2010-07-13 13:08:46 -07:00 --- error: Kohana_404_Exception [ 43 ]: The page you requested, form/add/albums/1?type=album&g-in-dialog, could not be found."
    
    This reverts commit cb4e18f9dddd82a283f0208c694a9b4eb1a2eaca.

commit 297f98fcee9d45d49f0d2bebfd22aabc7af4c60b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 13 12:52:59 2010 -0700

    Fix reauth authentication to use the identity helper instead of the
    user helper directly.  Else it doesn't work with LDAP and other
    identity systems.

commit 887154a3b797eade36c1c651e2e849c613459544
Merge: 5eb4b8f 69dfb51
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 13 12:30:03 2010 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 5eb4b8ff6cae33d83cfef8ea3d41cba4352e65d8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 13 12:16:52 2010 -0700

    Check for the existence of uploadify() in the add_photos_form.  The HTML uploader won't have that field.

commit 69dfb51490b62bd639c8e09461fad15f4fb51650
Merge: 329abfe b7cc677
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jul 12 21:50:09 2010 -0700

    Merge branch 'master' into talmdal_dev

commit b7cc677c3db281182ad2a6f2bdaada5a0cd2dbcb
Author: ckieffer <ckieffer@192.168.0.219>
Date:   Sun Jul 11 12:07:50 2010 -0600

    Indentation fixes.

commit 9c9c0879c209fed5c15cc04bda7139c083e4db93
Author: ckieffer <ckieffer@192.168.0.219>
Date:   Sun Jul 11 11:58:41 2010 -0600

    Indentation fixes.

commit 329abfe539371b65c95e3334e436f997ec92879f
Merge: 213807a 0389dce
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jul 11 09:09:52 2010 -0700

    Merge branch 'master' into talmdal_dev

commit 0389dceb475597ecdedf519d27d6d7bb36aa6276
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 10 21:29:34 2010 -0700

    Rotate all matching album covers when we rotate an item.  Fixes ticket #1200.

commit eb19192c4e7b9433c16b1acc14fa5c1242e27bc1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 10 18:51:57 2010 -0700

    If the target of an item move has no album cover, make the newly moved item the album cover.
    Fixes ticket #1196.

commit b20f9123dc0cc4bc70597910e12eb18ec0eef2c2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 10 18:25:23 2010 -0700

    Wrap album deletes in a batch so that we can handle lots of cascading
    deletes in bulk.  This lets us avoid the problem where we continually
    choose and delete album covers which makes deletes really slow.  It
    probably also avoids huge amounts of notification emails (untested).
    
    Fixes ticket #1190.

commit b7cd2f73c55d600935548abb1282444a592e20a0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 10 15:18:54 2010 -0700

    PHPDoc fix.

commit 0a42d74d5564efdfbbc7c575211d0954d7a01488
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 10 15:10:13 2010 -0700

    Reset the time limit to 30 seconds every time we delete a child.  Fixes ticket #1199.

commit ab6025f71a46d4ed5948c6143ffc90df94c1eaa9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 10 14:29:57 2010 -0700

    Replace &#8230; with …
    UTF-8 symbols are much more tractable with filters like HTML escaping.
    
    Follow-on fix to ticket #1184.

commit fe8cb89ac4d4294fcd8c28a0d16b25226b4f2e25
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 10 14:03:46 2010 -0700

    Cast the status message to a string so that it gets sent down as a string in the json blob.
    Fixes ticket #1198.

commit 7ca201b11819ca5bfbcbe76f43bfe7d706c0f27f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 10 11:59:29 2010 -0700

    Pass along the from_id in item::get_delete_form() and then check to
    see if we're deleting the album we're inside in quick::delete.  If we
    delete the album we're currently viewing, redirect to the parent.
    
    This fixes ticket #1185.

commit 307e47c3d01c1bbbe294b8339a2f531a5156eb90
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 10 11:45:45 2010 -0700

    Pass along the from_id when editing albums in the context menu, and
    also pass it along in the form creation code.  This fixes ticket #1183.

commit 4c77f9ebdeb3796b4bb20282d414df8c879d25d7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 10 08:34:08 2010 -0700

    When limiting the length of album titles, purify after truncating so
    that the truncation happens on entity boundaries.  Fixes ticket #1184.

commit 39962eaddc17f27eb1baa694ac588138439621d4
Author: Romain LE DISEZ <romain.git@ledisez.net>
Date:   Sun Jul 4 21:53:57 2010 +0200

    Accept extension .m4v as video/mp4

commit 213807a8073138a98b8daf9fe265e981454aaa50
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 9 14:59:23 2010 -0700

    remove debugging statement

commit f26d5dbbdf559ab78d2c2d02d11b4833c98a0040
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 9 10:40:22 2010 -0700

    Reset the title in case the dialog contents changed the dialog title.

commit 591c5a11a396c6611a1e40f3c10253c5cfd78434
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 9 06:08:20 2010 -0700

    Reset the postion option to center when the form data is reloaded, to force the dialog to recenter in case the contents have changed.

commit 72f801df7d507599e201a6cb47d4a0304e00f5de
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 8 08:23:08 2010 -0700

    Only add the 'Successfully re-authenticated' message to the status if the admin page is not displayed in a dialog.

commit 9538b3888dadbe3a6fac72e2a97f97c7db3d86f2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jul 7 08:58:38 2010 -0700

    Fix for ticket #1176. Have the gallery.dialog code add a g-in-dialog parameter to the url to let the controller know its in a dialog.  The reauthenticate controller will format the password prompt as a page or a form content.  If authentication is successful, then the original controller is called instead of being redirected to.

commit cb4e18f9dddd82a283f0208c694a9b4eb1a2eaca
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jul 6 14:59:27 2010 -0700

    Fix for ticket #1182.  Remove the trailing slash and just let it be matched by the trailing (.*) group

commit dbf3199e46d8a9c0ae37108f6afda35232ef4cdd
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jul 6 14:12:00 2010 -0700

    Fix for ticket #1181. Use $.getJSON to retrieve the json contents of the dialog. Convert all the controllers
    that create the data to go into a dialog to return the html as part of a json object.

commit 9d66783f47636153bf3661d1d89e694dd5188c36
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jul 6 09:48:37 2010 -0700

    Update the xss golden file

commit eee8c27f2666d65c03c36698a612a055e9b55d5e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jul 6 08:43:02 2010 -0700

    Correct the controller auth golden file from when the simple_uploader was renamed to flash_uploader

commit 1d40c62f53b37445b5f62a65ce76f4b3ecfb2d4f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jul 5 19:46:19 2010 -0700

    Updated version for RC2

commit df3af7d521fa073f1dc7927003d95c45d4934fbe
Merge: 0977c31 67223fc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jul 5 19:17:30 2010 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 67223fc43d1cfd5f33d4fc007935eaadb79a112e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jul 5 08:59:08 2010 -0700

    Revert "Make the trailing slash on the url optional.  Sometimes it is not there, so the regex doesn't match"
    
    This reverts commit e4d397d30118a3d673b146c44ed329efa08bbefe.

commit 226d1f714635995722fe7927f8ec049fe3890011
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jul 5 08:58:36 2010 -0700

    Revert "If the admin request originates as a dialog link, don't display the entire page when reauthenticating the administrator.  Just put the form in the dialog."
    
    This reverts commit 8493a3d36f597e183490ae880b35a3d98f50a045.

commit 0977c310097c63dd25d5fec82bd9cfb5f07d12f0
Merge: 45b210c 8493a3d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jul 5 08:47:40 2010 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 45b210c2879d93067f3d903b83cd56d392c75156
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jul 5 08:44:46 2010 -0700

    Add maessage when we automatically log you out of the admin area.

commit 8493a3d36f597e183490ae880b35a3d98f50a045
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jul 5 08:23:17 2010 -0700

    If the admin request originates as a dialog link, don't display the entire page when reauthenticating the administrator.  Just put the form in the dialog.

commit e4d397d30118a3d673b146c44ed329efa08bbefe
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jul 5 08:21:14 2010 -0700

    Make the trailing slash on the url optional.  Sometimes it is not there, so the regex doesn't match

commit 60126adc7e73ec6e70ee5033abf5032ac6b88305
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jul 4 20:40:50 2010 -0700

    In the site menu, say "Delete album", "Delete photo" or "Delete movie"
    as appropriate for the item type.  Fixes ticket #1175.

commit 0d424a635d12eee59d2080fa7ffa32a248b0fd5c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 3 14:25:33 2010 -0700

    When we delete an item, make sure that we scrub it from any other
    items that may have it in the album_cover_item_id column.  Fixes ticket #1172.

commit 3feb561054a735e6959e894eb568aa386426bb65
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 3 11:40:56 2010 -0700

    Internationalize the "Gallery 2 path saved." message and remove the trailing period.  Fixes ticket #1171.

commit ca444a95651ba79feb92694b472f4b3cfbe03103
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 30 20:17:59 2010 -0700

    Updated for RC2

commit f75ce45b6b6b848840d9a1688ca382a49de4f338
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 27 12:14:56 2010 -0700

    When detecting encodings, give priority to ISO-8859-1 which seems to
    solve the umlaut problem in IPTC data.  Fixes ticket #1144.

commit 5335e4c0b4bffeeeb8667ed706b5e8702de00ce9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 27 11:25:31 2010 -0700

    Fix the autocomplete callback in item_edit_form().  We were
    incorrectly matching the form input in the jQuery selector.  Did this
    ever work?  Fixes ticket #1168

commit e5ae2c91bc58518c977afdc134d5a59cb7ed9b71
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 26 12:14:02 2010 -0700

    Style cleanup.

commit 5767971f433ca22f152fb348901d2f4336913038
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 26 12:00:55 2010 -0700

    Sentence casing.

commit 6b619e1098d770670b50553564b96bacec4a3f0c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 26 12:00:14 2010 -0700

    Differentiate in our logs between missing site and admin theme overrides.

commit 87d09bcd2e7d76282611d21a2a410c8ba5dad9df
Merge: 8bc7eec 8ecf28d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 26 11:57:18 2010 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 8ecf28d3efa258d790d6cb31947407deb7149797
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jun 25 10:23:11 2010 -0700

    Better fix for the problem that a preview of an admin theme was not showing up.

commit e380f19ee29ee1f524aee2d4ebbf4c49f120fb19
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jun 25 10:17:06 2010 -0700

    Fix an issue where a preview of the admin view would not work.

commit 8bc7eec60f8be5219bed64d95cf7e6efb85941f1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 25 09:56:44 2010 -0700

    Add a <h1> title saying that this is a preview.

commit c946ad1fcd87d4cb9c8f45b0b3c553b31fcebec8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 25 09:56:29 2010 -0700

    If we promote the <H1> element to be the title, hide it so we're not showing it twice.

commit d66c496fb1007bbd0b1640496808000c573d95fd
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jun 25 06:45:09 2010 -0700

    Change the theme option page to display using tabs if the site theme has an admin page.

commit 901d80e4a0377f94bb5735512d316aa330136c84
Merge: b46fc38 3b05db2
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Thu Jun 24 14:50:41 2010 +0300

    Merge remote branch 'gallery3/master'

commit 3b05db2685d92ca538d7993c960b06ea32f3a8df
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jun 23 11:16:56 2010 -0700

    Move the themeroller files to the themes from gallery/lib.  These are visual related and make more sense to be in the theme.  Both three_nids and browny_wind* have created copies for their visual standard. So this just makes it consistent across the board.

commit ca09e9889004438090b4d9c8410cb746c135f163
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Wed Jun 23 22:12:25 2010 +0800

    centerize the group labels in Edit Permission window.. i think it's much cleaner this way

commit c41bd46a744479813b3442f3e20ce17765353e70
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Wed Jun 23 20:42:42 2010 +0800

    fix the footer padding for RTL, complete the last commit

commit cedfd9d364a293fdb99988743bcb09c92e9b5e18
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Wed Jun 23 20:39:19 2010 +0800

    flip the padding of footer for RTL

commit 69fffda87bcd9b72c3b0b7a43e610bae3395afe5
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Wed Jun 23 20:33:35 2010 +0800

    improve Superfish menus shadow for RTL, and add round corners support for Opera

commit acc9ec8180f7a354527b44e9f8e254e2b5d03813
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Wed Jun 23 20:20:50 2010 +0800

    remove the original padding

commit 5494751a33c93df1afe3db151a332c81cdbc00b4
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Wed Jun 23 20:20:14 2010 +0800

    oops.. remove the padding in RTL for admin-wind, since it seems that it's zero (why the rule is duplicated with different values in the file in lines: 159, 301?)

commit b8800c69e1ddf5afd8d4c9ee3af74f37000515de
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Wed Jun 23 20:10:59 2010 +0800

    flip the padding direction for sidebar blocks contents in RTL

commit bae9546b88649592658fc37c66cd66b42ba83ace
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Wed Jun 23 19:56:53 2010 +0800

    flip the window title and cancel button for RTL in dialogue windows

commit bc8b64db0b65b8ba2d28be8022f7f8ac3ef1a85c
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Wed Jun 23 19:36:59 2010 +0800

    more fixes for RTL Superfish

commit d195e49d9f30c4d30682bbe5d633ee9dc85bde04
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Wed Jun 23 19:30:56 2010 +0800

    correct format

commit 0b7a8e1a692702b0497d0dde89ad5afa7bc4ea78
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Wed Jun 23 19:27:11 2010 +0800

    fix ticket #1051

commit b46fc38dcc539bf18505b60e0f462aaec6e2c647
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Wed Jun 23 17:12:25 2010 +0300

    centerize the group labels in Edit Permission window.. i think it's much cleaner this way

commit 9eefbb8d213426d3a74f2b55cfd99e2e608c9f26
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Wed Jun 23 15:42:42 2010 +0300

    fix the footer padding for RTL, complete the last commit

commit bd052d72f27efb703d2cf5c128300a2be7f6fb04
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Wed Jun 23 15:39:19 2010 +0300

    flip the padding of footer for RTL

commit afa99c93f2f7ad5e46a2739a92e1f898dc9afc84
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Wed Jun 23 15:33:35 2010 +0300

    improve Superfish menus shadow for RTL, and add round corners support for Opera

commit a77266d8e06ed960955b654197d4bcc9be2cb618
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Wed Jun 23 15:20:50 2010 +0300

    remove the original padding

commit 3f2e68d4b15bea6974201523b70ef18d3d5b1f8a
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Wed Jun 23 15:20:14 2010 +0300

    oops.. remove the padding in RTL for admin-wind, since it seems that it's zero (why the rule is duplicated with different values in the file in lines: 159, 301?)

commit d91cf72ee9ba27e7c2a97ee807f4a49df2f24ff9
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Wed Jun 23 15:10:59 2010 +0300

    flip the padding direction for sidebar blocks contents in RTL

commit 2014e2b055fc75ee3aec61c563ce5fac5ba6d534
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Wed Jun 23 14:56:53 2010 +0300

    flip the window title and cancel button for RTL in dialogue windows

commit feb839a11804f5774cbbe10a348d6ffe28aa3f5c
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Wed Jun 23 14:36:59 2010 +0300

    more fixes for RTL Superfish

commit 53ccc4df11e5b39964a585b3857521921b385a08
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Wed Jun 23 14:30:56 2010 +0300

    correct format

commit dbbac99356b47d18748001bd1fad7a465636abd9
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Wed Jun 23 14:27:11 2010 +0300

    fix ticket #1051

commit a804c115138172634123ebebc9b055d6a26e6189
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jun 21 10:11:38 2010 -0700

    1) revert e468ed7bd3f1e29b267e3902ef9c91273787d58f
    2) Add the padding to both the button and flash object so they always line up
    3) Add some top padding to the uploadifyQueue panel  to seprate it from the button.

commit d82863421df3e7c8d500ab32c11c556a50691dbd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 20 21:10:22 2010 -0700

    Rename "simple_uploader" to "flash_uploader" to make room for an HTML
    uploader.

commit e648ba58b387e2b167cda2b3c3272c833addd52d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 20 18:18:04 2010 -0700

    Add a <FilesMatch> section to hide files that browsers shouldn't see.

commit 3d321927b8ebb738b1cae90de32e0c3099193798
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 20 17:53:41 2010 -0700

    Put the product title and version at the top of the README.

commit 1b017c8c91501787344855c442a479cec5c666f0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 20 17:52:53 2010 -0700

    Updated README for RC2 release.

commit e468ed7bd3f1e29b267e3902ef9c91273787d58f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 20 17:43:22 2010 -0700

    Add a margin above the "Select photos..." button.

commit 48af5e6b5039839f93345bef92e1acf7952c50a1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 20 17:25:23 2010 -0700

    Rename "children" to "items" in our feed view because it makes more
    semantic sense.

commit 74e821b03ef149a43eb8704fd2350985699d3ded
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 20 17:21:25 2010 -0700

    Rename the feed variable from "children" to "comments" since that
    makes more semantic sense.

commit 261da7b1c362fe329fe97ca8478a0c6b3721dedf
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 20 17:18:11 2010 -0700

    Set the focus on the username field (and the name field when we reset
    the password) properly on IE7 using a setTimeout() hack.  Fixes ticket
    #807.

commit 7bdb9a49e5b038b21445d77c21f63b18619f8fb8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 20 16:58:38 2010 -0700

    Focus on the username field by default.

commit 2992daa00e09d5452e3baf0c279a93220d7a362b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 20 16:55:42 2010 -0700

    Add "Tag: %s" in the title on tag pages.  Fixes ticket #1097.

commit 892727830d873a9f0a1a49f10ee14b0890088b23
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 20 16:52:10 2010 -0700

    Add a loading indicator to the delete form by tagging some JS on at
    the end which triggers .gallery_show_loading().  Not a complete fix
    for #817 but it's a start and it takes care of one place where we have
    a long running process.

commit 9b4d9d1d4604c9d65b1629b0e95eaa0c75e0a257
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 20 16:51:06 2010 -0700

    Fix two issues with the "loading" overlay:
    1) gallery.common.js was using the wrong class name
    2) we need to mark the CSS as !important because it conflicts with
       other background images.  Note that this will replace the existing
       background which may not be desireable.

commit fb81de7a5b871cc7bccc0e44b973ba5c63e8c879
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 20 12:45:36 2010 -0700

    Disallow /digibug/print_photo to avoid search engines printing stuff.
    Resolves ticket #637.

commit 66bea24482be05ccfbea76bda2c9b70c93c34408
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 20 11:59:46 2010 -0700

    Use text::limit_chars() to keep individual elements in breadcrumbs
    from going over 15 chars.  Fixes ticket #1108.

commit 1783c046924b1c54116dc626e5b50078780ca9c5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 20 11:15:53 2010 -0700

    Remove the title attribute for menus using JS since we're showing that
    text anyway.  This may be turn into an accessibility issue, but it's
    pretty annoying to have a tooltip show up with the text in it.

commit 7938a57dbe1935731dccc945235b10bf5c002dd2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 20 10:57:48 2010 -0700

    Oops.  Remove debug line.

commit 75002732284c85dfd82934b04ef477fc5a274bfe
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 20 10:55:10 2010 -0700

    Simplify the descendent logic.  viewable() already joins with the
    items table so there's no need for a subquery.  The subquery could
    generate way too many ids since it didn't pay attention to
    permissions.  This isn't a security problem since we were restricting
    the item ids according to permissions in the outer query, but it's
    wasteful.

commit fcd39be28bbfc79186bbc4d6ee34bfc8cdfdc6e7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 20 10:39:24 2010 -0700

    Specify a default margin for all buttons in the common css.  Fixes
    ticket #1165.

commit 4a7b41c5a41cbb13e3f4965a065bf88d7152fc9a
Merge: c7ce022 2cd784e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 20 10:25:03 2010 -0700

    Merge branch 'master' of git://github.com/mamouneyya/gallery3
    
    Conflicts:
    	lib/gallery.common.css

commit c7ce0228de3d4d33a2997269a59626fd09f46f65
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Fri Jun 18 19:06:41 2010 +0800

    (1) Correct the margin direction for checkboxes in RTL (2) Update the id of adding comment button for RTL (3) Flip the corner radiuses for any buttons set, which solves the issue of flipped corners in  the comments admin page. Also, add the CSS3 selector of the round corners so they work in Opera (4) Fix ticket #1052

commit 6ebbb4fbf5cc5559f433300871078be41d615cf6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 20 09:51:39 2010 -0700

    Updated golden files.

commit 2e016855532962ea3e03700879be70f1ad3a8911
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 20 09:40:35 2010 -0700

    Add "comments" relationship support.

commit ec052d71301acbf519947897f8adda7fdcf7fefb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 20 09:36:56 2010 -0700

    Assert how many files we analyze so that we can tell if we're suddenly
    analzying too many or too few.

commit 9f9d3866e86d4b50fc1315c7db2687a5f0b8ce8d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 20 09:28:36 2010 -0700

    Exclude the .git directory.

commit ab9049d5313d589cee696d0e082ac4f20c830cf1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 20 09:05:25 2010 -0700

    Remove trailing ?>

commit 1a210dd27084e4213a1738992b700a244de97d35
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 20 09:03:23 2010 -0700

    Add "json" as a valid view suffix.

commit 719328a5a7c0086fb97f0dd6b54d5db839696d33
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 20 09:02:59 2010 -0700

    If we use <?= .. ?> on the last line, it looks like we've got a
    trailing ?> and that causes File_Structure_Test to be sad.  So instead
    use echo and tack on our own newline.  But this also requires a
    semicolon.  Weird, I know but still easier than fixing up the test.

commit db53ca550edcb5b90c1d4873751a12c85b08daa4
Merge: f602502 a57ac38
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 20 08:50:51 2010 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit f6025026eb4798774044fcd12f0f09313073141a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 20 08:50:19 2010 -0700

    Rename error_rest.php to error_rest.json.php so that we specify the
    result type in the filename as is our convention for views.

commit a57ac38839e32b8f6551f67883c9596ee9c7b9e7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jun 19 17:32:15 2010 -0700

    Change the organize dialog to make use of the new error handling

commit d86d1a32e8fc0feeaea3fa29a07035e0edfc7b90
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 19 15:12:58 2010 -0700

    Updated for comment REST relationships.

commit f451804c6d82bfbf214f08717c66684da66ca328
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 19 15:00:44 2010 -0700

    $request->params might not exist.

commit 1ba9d079bfaa1be48186aaa51bcb0059886d4891
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 19 15:00:33 2010 -0700

    post_test() should be using admin, not guest.

commit cd96ed887323c4006fa1a2008f153937cfa2f0ea
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 19 14:13:34 2010 -0700

    $response is optional in the Rest_Exception constructor.

commit 456d54ea2dccbe55a2efd89ecb4bde29fb91b619
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 19 13:53:22 2010 -0700

    Throw exceptions as appropriate, but allow the Kohana exception
    handling framework to handle the exception and delegate to our
    template, which will JSON encode the response.

commit 41ca2b0195bf6a29429dfc5405f3c2073b1c3aba
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 19 13:52:48 2010 -0700

    Rework our exception framework to fit into Kohana's model better.
    Instead of overwriting Kohana_Exception::handle() (which we were doing
    in MY_Kohana_Exception) we instead use their existing template system.
    
    gallery/views/kohana/error.php overrides system/views/kohana/error.php
    and is the standard error template for all exceptions.  Our version of
    error.php figures out the appropriate view based on context (cli,
    authenticated admin, guest viewing a 404, guest viewing a system
    error) and delegates appropriately.  Each delegated view has a narrow
    responsibility.
    
    This paves the way for us to add new error views per module.  For
    example, the rest module will define its own template in
    Rest_Exception and then its exceptions can be rendered the way that it
    wants (json encoded, in that case).

commit 5736698b4ba17e382468ed9fdfed4b46e37f763e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 19 10:51:05 2010 -0700

    single -> double quotes.

commit 009323e0a0c68f6e2fc4aa1409c71e82b7bf6975
Merge: fa40458 239da24
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 19 10:24:38 2010 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit fa404589d662bc4f304f05596b8cb563c715c3f2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 19 10:24:26 2010 -0700

    Oops.  Fix up a bad instance of $user in rest::access_key() introduced
    in my last change.

commit 239da247863fb1cb5511ea557cf84dd780071be5
Merge: e40b237 9b78867
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jun 18 21:49:26 2010 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit e40b2371ee4cc2756d80b36042124c71f21bc353
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jun 18 21:49:11 2010 -0700

    Fix an issue that the root album was not being selected if there was no
    children, or if organize was being invoked on the root album.

commit 9b788674275c843947d44934a50dd395b515737a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 18 20:43:14 2010 -0700

    Simplify rest::get_access_key($user) to rest::access_key() that
    returns just the access key string for the active user.  That's how we
    use the API, so keep it simple.

commit 295a42e0f1d5bf5ba1a6a11fe7e222da59dae40b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 18 20:20:05 2010 -0700

    change single to double quotes.

commit 545a91270d22506362e67032a3c54fdb21f8823e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jun 18 19:05:59 2010 -0700

    1) Change how the size of the flexstage is calculated. (Basically remove the
       dialogWidth and dialogHeight and adjsut the internal controls when added to
       the stage.
    2) Cleanup the controller code

commit ba19c03aebb91335ca64913256e46df0a55aac36
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jun 18 16:52:05 2010 -0700

    Update the installer/install.sql properly.

commit bc70ff498d73e0f38f749ea6cd28484ca1a05f83
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 18 15:25:33 2010 -0700

    Use request::protocol()

commit ec40e03a377a8a5cd74b448135307c77a2b9e0e9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 18 15:20:32 2010 -0700

    Use request::protocol().

commit b1a6fd3e596ebee6714b37c9a108fafac377a540
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 18 15:18:56 2010 -0700

    Use request::protocol().

commit f0a99ffc2764a64712a5c5c3abc9a4b3f3c09616
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 18 14:31:04 2010 -0700

    Undo "else" clause -- we should keep the logic simple and easy to
    follow, even if it's redundant.
    
    Expand a <ul> to multiple lines.

commit 2cd784e612d0376e8eafcf5085507c678f36e6f4
Merge: 6078eb6 84c8d1c
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Fri Jun 18 23:30:49 2010 +0300

    Merge remote branch 'gallery3/master'

commit 6078eb6264346eba221897f3ddefea1d9ec73821
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Fri Jun 18 23:29:37 2010 +0300

    Add '! important' to the round corners properties with values, force them to be shown even with the case the element has two or more of them (e.g. class='ui-corner-left ui-corner-right'.) Don't know if there was a better solution..

commit 84c8d1c79a07aa72bb0a22cd3c0673df6f5886f2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jun 18 06:51:02 2010 -0700

    Fix ticket #1155. For compatibility with gallery2 increase the size of the tag name field from 64 bytes to 128 bytes.

commit 2e1056d3c76f30b0666a560f8c4e51ff3ee6ee13
Merge: 3b89a56 fce9578
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Fri Jun 18 14:11:54 2010 +0300

    Merge remote branch 'gallery3/master'

commit 3b89a56caf594392c2d45b43932ecb070893588b
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Fri Jun 18 14:10:05 2010 +0300

    Flip some margin/padding values for RTL

commit 562fb174a763aef748842aae2903e1c0f77deefd
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Fri Jun 18 14:08:08 2010 +0300

    Flip some margin/padding values for RTL

commit 7f8e2786b38ec6f4f57ef865c803742fa5089fb8
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Fri Jun 18 14:07:38 2010 +0300

    Mirror the cancel button for RTL

commit 9173ea81676ef6b8abbdefd641b1a572faf13eab
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Fri Jun 18 14:07:16 2010 +0300

    Add the CSS3 selector of the round corners so they work in Opera

commit d84cdcb8fcd424c961fa28bf1829ee828cb431cc
Author: mamouneyya <mamoun.diraneyya@gmail.com>
Date:   Fri Jun 18 14:06:41 2010 +0300

    (1) Correct the margin direction for checkboxes in RTL (2) Update the id of adding comment button for RTL (3) Flip the corner radiuses for any buttons set, which solves the issue of flipped corners in  the comments admin page. Also, add the CSS3 selector of the round corners so they work in Opera (4) Fix ticket #1052

commit fce95785beabb499381d722160d000df2d693b2a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jun 17 17:41:35 2010 -0700

    Remove duplicate trailing slash on the controllerUri parameter

commit 70f56ba43aa77568d96fbc8003619007b01acf8e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jun 17 14:22:35 2010 -0700

    Fix for ticket #1163.  Don't all guests to a comment when there are no comments and the comment access permission is register users.

commit e82aa6dcd80ce0c41a04e3331b0a63e25c25216f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jun 17 10:22:19 2010 -0700

    Update the xss gold file with changes to views in the last couple of commits.

commit 070db2a97ab3e508456780639faa643934081966
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jun 17 10:21:37 2010 -0700

    Rearrange the adding of fields to the template so that they match the order of appearance in the template. Also remove the @todo's

commit 359235182ebb14c75b495a889a2298d1e0130d77
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jun 17 09:57:38 2010 -0700

    Add a cache-buster to the SWF url so that it'll refresh in the browser
    every time the SWF file changes.

commit a03e3d1dc1b59e45e5b0dbf4cf23eed91d545c25
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jun 17 09:38:36 2010 -0700

    Fix for ticket #1110. Need to use the encode_path with a movie extension to find the item. Thanks to samdavidoff for the initial fix.

commit 2bbce8dddb0ab0a00aee727e2f639b793988a1d1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jun 17 09:10:01 2010 -0700

    Fix for ticket #1117 align videos to the center.

commit 6e54286ef25d02910e69ce553ab1c719dc7299cc
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jun 17 09:03:39 2010 -0700

    Add the theme::resize_top and theme::resize_bottom to the movie view to be consistent with the photo view.

commit 38d09c5d1adae211d61b16d82448b616318b951e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jun 17 08:03:08 2010 -0700

    Scale a movie to the resize size so that it doesn't overflow into the sidebar.

commit 3d4f04e827f54c3e4dec6a7d1e8e3bf78cf9603a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jun 17 06:14:24 2010 -0700

    Change the add album dialog to not replace the internet address or name fields if they already contain values.

commit a27189ce9f771251f89947e4264e503596f0b2dd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 16 20:02:52 2010 -0700

    Remove comment_rest::post() -- that's in comments_rest now.

commit ef06a134823f9276a6acb04d011e7e4276475965
Merge: 1aeaa7d 172c3fd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 16 18:19:39 2010 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 1aeaa7daabf2c00df45088f4a90615b463fb9f90
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 16 18:05:15 2010 -0700

    Add REST support for comments.  You can view, add, edit and delete
    comments.

commit 172c3fd209d81f9242d388ca0faf4f302bb08405
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jun 16 17:31:31 2010 -0700

    Fix a typo... The controller parameter to the flex organize module should be controllerUri instead.

commit bd496cc95c01d8058cacfd79347f626652d42464
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 16 16:09:29 2010 -0700

    Add start/num query parameters to tags::get()

commit 2025c2c37d8607fa5f296a9b6912577989e90bc3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 16 15:53:07 2010 -0700

    If the G2 orderBy or orderDirection fields are blank, use the G2 defaults.
    Second half of fix for #1054.

commit 8d1c6887a5120e7fe1302a327043f512c8b5da7d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 16 15:12:00 2010 -0700

    Fix a bug introduced in 1077477a9032d5a4855e19e2dd4ce923472b711c where
    we don't generate album highlights correctly.  Possible fix for #1054.

commit 179161d05ee037292202a15507d38166f8a7ee4a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 16 15:07:13 2010 -0700

    Fix two bugs:
    #1161: guest comments get dropped because of a missing email address.
    #1075: G2 comments with " get turned into &quot;

commit 35bbffcc29fcf592b8dde3670d12f543258f01e0
Merge: e353534 8ee60e6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 16 14:25:13 2010 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 8ee60e6b5d694a8117c94595a0f03090cd41cca8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jun 16 11:17:18 2010 -0700

    slap my wrist... i forgot a debugging statement

commit ea8653f9470ceb09a4d5ddca2aec023f2f7fe5a2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jun 16 08:39:09 2010 -0700

    Fix for ticket #1131.  If the rss feed is for an item, then retrieve the item. Using the left and right pointers find all the comments for the child items.  Thanks to jankoprowski for the initial investigation.

commit 1fb33393269d3a1d32048898545c5ef812383f2e
Author: Jan Koprowski <jan.koprowski@gmail.com>
Date:   Wed Jun 16 14:29:28 2010 +0800

    Fix issue1068. Fill from_id field in photo with indetificator

commit e3535349abb6e955a75d97f57971f4ea4913da6f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 15 20:25:35 2010 -0700

    Revert "Add a "convert_ids" parameter to Item_Model::as_restful_array(), which"
    
    This reverts commit 98fce83de5f772482382bfabdbcd94c25ecdbb1a.
    
    Conflicts:
    
    	modules/gallery/tests/Item_Model_Test.php

commit 57b53e6193cc6baf12bf58d8e528518a93bff03c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 15 20:21:10 2010 -0700

    Guard against relationships() not returning an array.

commit a432a43b3b39fbec70d4cece1eb0ba5625b2679c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 15 17:18:22 2010 -0700

    Revert "Change the item rest update processing to call the
    item::move(source, target) helper when the parent member has changed.
    Using the move method insures that names and slugs that could conflict
    in the target album are resolved properly.  Changed the item::move
    method so it returns a message to be displayed if the caller chooses.
    And changed the move controller to display the message returned by the
    move if the item name was renamed as part of the move."
    
    Rolling this back for a couple of reasons:
    
    1) Bug in move.php ("message.info" is not a function name)
    
    2) Having the message come back from the API call as a side-effect is
    sloppy.  We should find a cleaner way to do this checking.
    
    3) having item::move() call save() on any changed values in the ORM
    is counter-intuitive.  Move should move, save should save.
    
    I think the right approach here is to roll the move() code properly into
    save().
    
    This reverts commit 2492280cc0ec9eb64a8daeccc7b5698ece7fea66.

commit 48dc07dbc8189eb16f97b7013b0481982286ab2c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 15 17:17:25 2010 -0700

    Revert "Fix for ticket #1118. Create a item::save_with_retries helper
    method, which encapsulates saving an item and handling name and slug
    conflicts. Call this instead of doing a save directly."
    
    Rolled this back because it fails KISS.  We already have an API for
    saving models with Item_Model::save() that's consistent with all of
    our other model code.  Adding a new way to save items is confusing and
    inconsistent.
    
    This reverts commit 9504f71efcadc7ed27f6f09e5d663e8025bf3b86.

commit 8fb56abf034dd1f5c561e7af12bf6e097a3de6f6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 15 16:30:02 2010 -0700

    Bump the organize module to version 2, and check to make sure that the
    REST module is active.

commit 94ada2361df1132d83fa5b14d1b6843725b29166
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 15 16:14:30 2010 -0700

    Fix a bug in the upgrader where we weren't bumping the version number
    during the upgrade path, so the 2nd stanza (version 2 to version 3) was never getting executed.

commit 1df752a2f2aba75358d9bb627bc6da9fad7ca889
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 15 16:11:21 2010 -0700

    Make the "name" column a little wider.

commit 78186c262c1ab87500cb8d6a1bebae35c2dfbf40
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 15 16:09:45 2010 -0700

    Update the description.

commit ae6af2f9b61d69a3adc36f52257cdbd9c4fedf4e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 15 16:01:41 2010 -0700

    Install the rest module by default.

commit b02ab4153dc3460ded6dcf63b237a6f6774f6681
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 15 15:56:45 2010 -0700

    New dump generated by new mysqladmin has a slightly different format:
    mysqladmin  Ver 8.42 Distrib 5.1.47, for debian-linux-gnu on i486
    
    Also, updated for comment module v2.

commit 4d40cf62e98e7e2f103740a401a08606c73fe72d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 15 15:50:10 2010 -0700

    Sort files by path in _dump_var() for consistent output.
    Skip . and .. (PHP 5.3 iterators seem to include those now).

commit d96ce71f1a35b8659bec7226f3902a052485b0f9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 15 15:29:45 2010 -0700

    Remove a stray period.

commit 9504f71efcadc7ed27f6f09e5d663e8025bf3b86
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 15 14:18:23 2010 -0700

    Fix for ticket #1118. Create a item::save_with_retries helper method, which encapsulates saving an item and handling name and slug conflicts. Call this instead of doing a save directly.

commit 2492280cc0ec9eb64a8daeccc7b5698ece7fea66
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 15 12:52:28 2010 -0700

    Change the item rest update processing to call the item::move(source, target) helper when the parent member has changed.  Using the move method insures that names and slugs that could conflict in the target album are resolved properly.  Changed the item::move method so it returns a message to be displayed if the caller chooses.  And changed the move controller to display the message returned by the move if the item name was renamed as part of the move.

commit 207f6beb61cf2969d07bbc6f959bba967f54b271
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 15 11:40:01 2010 -0700

    Only change the weights of the album children if the item sort_column is set to weight.

commit 00c4cb3f6399319326cd3393ee2f15fc8b111088
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 15 11:38:46 2010 -0700

    Revert "Change the item rest update processing to call the itemm::move(source, target) helper when the parent member has changed.  Using the move method insures that names and slugs that could conflict in the target album are resolved properly. Also, only change the weights of the album children if the item sort_column is set to weight."
    
    This reverts commit 603d4640141a43350f50da747d747456b28fdd93.

commit 603d4640141a43350f50da747d747456b28fdd93
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 15 11:20:04 2010 -0700

    Change the item rest update processing to call the itemm::move(source, target) helper when the parent member has changed.  Using the move method insures that names and slugs that could conflict in the target album are resolved properly. Also, only change the weights of the album children if the item sort_column is set to weight.

commit c88d17966e64a2fce34f88551c6fbf28f06316f8
Merge: 81f176c 22470d9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 15 09:40:44 2010 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 81f176cf8e313c8c700bd38045dab870fbfc77bb
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 15 07:14:17 2010 -0700

    url::site(...) adds a leading slash to the uri it generates. Take this into account when creating the base url for accessing rest requests.
    Update the sort dropdown box to manual when album items are rearranged.

commit 7e5661cf49aa2239fb71e7feb289e2dfee926e3d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 14 22:42:32 2010 -0700

    Add a simple/cheap test to make sure that the database config is ok.  Fixes ticket #1029.

commit b2afba1db1184fcf491bbdf7f0a50ddb5615e26f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 14 21:20:33 2010 -0700

    The fact that we have a path to a G2 embed file doesn't mean that it's still
    valid so check to see that it's ok before proceeding.  This should resolve #458.

commit f5eb5d5d7014e1d09194803d3839f0077bc9f890
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jun 14 14:17:56 2010 -0700

    add an 'icon' to identify albums in the organize dialog.

commit 9911372d5819f637294d7565ba78cef786f604da
Author: ckieffer <ckieffer@10.211.55.2>
Date:   Mon Jun 14 13:50:02 2010 -0400

    Removed self-closing slash from opening <li> tag.

commit 22470d98e7a4cbe1a78898e56e4e201948f94122
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 14 22:42:32 2010 -0700

    Add a simple/cheap test to make sure that the database config is ok.  Fixes ticket #1029.

commit 4ed60d6755944923ace336ffc3e61881ce14411f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 14 21:20:33 2010 -0700

    The fact that we have a path to a G2 embed file doesn't mean that it's still
    valid so check to see that it's ok before proceeding.  This should resolve #458.

commit f10d641044fe31224af5b42b148a8ee77d9a34db
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jun 14 13:07:58 2010 -0700

    Change the parameters for the organize dialog box. The baseUrl parameter was removed and replaced with the restUri, which contains the relative uri for the rest controller.  The controller parameter is now the relative uri for the organize controller. The protocol parameter was added.  In addition, there is not default size for the organize flex object.  It attempts to fit within the gallery3 dialog box.

commit 3c6e710aa75b309fd7ff50aa8f5c58721b17770f
Merge: 782c1e0 793780d
Author: Chad Kieffer <ckieffer@227.1.241.10.in-addr.arpa>
Date:   Mon Jun 14 14:43:14 2010 -0400

    Merge branch 'master' of github.com:gallery/gallery3

commit 782c1e0ae0bc597629abcd88f844d863da45901a
Author: ckieffer <ckieffer@10.211.55.2>
Date:   Mon Jun 14 13:50:02 2010 -0400

    Removed self-closing slash from opening <li> tag.

commit 1c5264d7f5a2914f3ae0cb1208b2bc2810b090ec
Merge: 821d3f7 793780d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jun 14 07:44:17 2010 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 793780daa7665f7f86994235c4263fcb63554eb8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 13 20:51:11 2010 -0700

    Replace __CSRF__ with the actual csrf token.

commit 6f443a819b360a89c53004d3bf860fcedd88ae2e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 13 20:49:50 2010 -0700

    Change single to double quotes.

commit 6b01022a97e5fbd30d8f9a14b785e3e25ec7c2d4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 13 20:44:13 2010 -0700

    Hide the admin menu and show it after it's loaded to minimize flicker.
    Normalize the comment text about this interaction between admin_wind
    and wind.

commit 821d3f7854d76922b53df7e523eeaa8d4dca8c7b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jun 13 19:50:52 2010 -0700

    Remove a debugging statement.

commit 5decb3b252ef7966da0c9ac82e0630d202a13b5f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jun 13 19:31:48 2010 -0700

    Move the source to the gallery3-flex repository.

commit 47aa65143060ff376d95ca182c55132d821917fb
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jun 13 17:58:50 2010 -0700

    Fix problems ith IE and flex initialization when one of the flashvars contains a json encoded string.  Also address the problem that IE returns the color values differently that Firefox and Chrome

commit 938eea7fc45d5ad26529a14f349b7e4be2fecb15
Merge: 0ebc36b 87f8b6f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jun 13 09:59:27 2010 -0700

    Merge branch 'master' into talmdal_dev

commit db0966a9bce0396b0c98f3532bca8613f77cdb05
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 12 15:39:38 2010 -0700

    Fix up some indentation and comment style.

commit 87f8b6ff0a76f51183f14515723a8345f7c14fa6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 12 15:28:03 2010 -0700

    Bounce the user to the login page if they try to get to part of the
    admin site as a guest.  Also, theme the login/html page.

commit dceecabbf1b736604ceb2e08e803b12c99dc4509
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 12 15:16:47 2010 -0700

    Make login/logout continuation url code consistent.  Where necessary,
    we specify the continue_url in the session, but we store it in the
    login form so that we can propagate it across the session creation
    that happens at login time.

commit c026da85cdbac9e9566045f8de2718cae985f0ec
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 12 15:10:34 2010 -0700

    Use "continue_url" instead of "continue" for consistency with the
    reauth code.

commit b61b50604bfffc25a395df3a1aedf84d3c557ff4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 12 15:09:16 2010 -0700

    Push the continue url into the form for consistency with other
    login/continue code.

commit 63d95087bf0f24d4e880843cd2841906c6f91b38
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 12 13:35:12 2010 -0700

    Stop trying to parse the continue url in the logout controller because
    it requires us to reproduce a bunch of complex routing logic.
    Instead, just have the logout link generating code generate a link
    that's visible to guests.

commit a4586bc0c01fac6e86163fd119aaa64d95fb5e8e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 12 13:05:40 2010 -0700

    Revert "Fix for ticket #1118. The item validation was flagging duplicate slugs as errors.  There was already code in the item save to insure that any"
    
    This introduces a bug where you can create two items with the same slug.
    
    This reverts commit cb01f4017d70a7d73273052b424e8b78b794bc1c.

commit cb01f4017d70a7d73273052b424e8b78b794bc1c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jun 11 16:37:45 2010 -0700

    Fix for ticket #1118. The item validation was flagging duplicate slugs as errors.  There was already code in the item save to insure that any
    duplicates were made unique, so this patch removes the validation as unnecessary.

commit 41c18929cd23cf142df75ec9f9666102c593fcae
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jun 11 15:54:08 2010 -0700

    Remove the duplicate query when searching as pointed out by joe7 on ticket #844

commit 4c6045843ddbb98d1ccbf4a803fa4c45f062c391
Merge: bbbb356 2c1e380
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jun 11 15:41:00 2010 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit bbbb35675acefc6b0b1b78dea9fd3a983189d772
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jun 11 15:40:54 2010 -0700

    Fix for ticket #1039. The problem was, as Bryan76 pointed out, with passing the full url in the continue parameter. In the logout controller, we tried to get the item from the url so we could check the permission of the item to insure that the guest user had access. But url::get_item_from_url expects a relative url.

commit 2c1e3800ef41f2aabd61b7d6d39751d2d157409e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 11 14:57:39 2010 -0700

    Send back the REST API version as a header.  It's on every request,
    which sucks, but it's totally unobtrusive because it's a header so
    that's ok.  Decided that the current version is "3.0" although it will
    surely change before the final 3.0 release.
    
    Fixes ticket #1148

commit bb35aefffbc287efc9823abd4b0e451b86c37378
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jun 11 12:36:23 2010 -0700

    Fix for ticket #797
    When load a file is uploaded using a dialog box and the jquery plugin ajaxForm, the ajaxForm plugin uses an hidden iFrame element to send the multi-part
    form and this is where the response goes.  The ajaxForm plugin then retrieves the document body and parses the result as a json string. If the file uploads
    properly everything is fine, but if it fails Gallery3 return the input form with the the error fields highlighted as part of the json response. As this
    response is returned to a hidden iframe, the browser attempts to manipulate it and all hell breaks loose. We lose the trailing brace, we start getting
    escaping of form tags. When the ajaxForm plugin retrieves the iFrame body its no longer a valid json frame and the parsing fails and the user sees no
    indication that it failed.

commit 30f4e143e8fbec928661dcbe75898465e7eff29c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jun 11 08:15:25 2010 -0700

    Actually execute the database query that updates the album view count. Fixes ticket #1092. Thanks to shinta for pointing the way.

commit 0ebc36b4e5ef5578791c00b8a64021d3aad96068
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jun 11 08:15:25 2010 -0700

    Actually execute the database query that updates the album view count. Fixes ticket #1092. Thanks to shinta for pointing the way.

commit 58b21e909d8ba628ddb8a19e732989821abb0283
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jun 10 18:49:29 2010 -0700

    Change the pattern used to convert the file name to a title. Fixes ticket#1061

commit cbcb7432b3ddd5bc08f0d127b2f138a5df2b378b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jun 10 14:10:19 2010 -0700

    Correct a problem with the sort order and sort direction fields being ignored.

commit 6aab0cbec6da442199ca13ecf6078f77b203dd00
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jun 10 13:12:10 2010 -0700

    Review the code for xss exposures and provide the functionality to update the organize dialog bar when the selected album changes.

commit 38e8ab3d718d31dee7c8c27064e45c018540f358
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jun 10 09:14:13 2010 -0700

    Provide better handling and a progress dialog when loading or updating files.

commit 30849d10b151582fff67fd41fef1177396e47996
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jun 10 08:18:15 2010 -0700

    Tweak the error response for rest requests to make it easier for the client to extract error information.

commit 6119ddc735ccfa6816b78bb7028c56dabf322019
Merge: d5b80f2 26d0af4
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jun 10 08:16:07 2010 -0700

    Merge branch 'master' into talmdal_dev

commit 26d0af45eabe962c5366cb1e95de7e252b831796
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 9 21:45:05 2010 -0700

    New version of EXIF gets ISO and Metering Mode right.  Yay!

commit ab93767e4d39764f103545efb6ac64ff942eb187
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 9 21:26:36 2010 -0700

    Update golden file

commit 6556ca88339c78824f3de64c85a57e30a679431c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 9 21:23:42 2010 -0700

    In GalleryCodeFilterIterator::accept(), ignore . and .., and stop caring about .svn

commit aff0f6eca85e1a9aec83e13c29746f58010a56f6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 9 20:55:39 2010 -0700

    Fix get_ancestor_test() since the parameter was renamed to ancestors_for.

commit 3dacafb7182dd915c4c6d4e7d75722976e231465
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 9 20:49:32 2010 -0700

    Revert the "preserve_ids" global query parameter.  We decided that it was a
    bad idea.
    
    This reverts commit 6425d41eddd44091b2d83ba3c3734cc6990ca581.

commit b40057283e1dfbb3bbb41a6dfc8ccc8e2111d810
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 8 20:59:24 2010 -0700

    Add a "can_edit" field to the Item_Model's REST output.  It's
    applicable to the current user.

commit d5b80f29444e03aadc1130ab1624a09c0689fb93
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 8 14:35:35 2010 -0700

    Don't use the standard error formatting for exceptions that have occurred as part of a REST request.  Format the exception as a json encoded text string so the client can extract the fault information if they so choose.

commit 0aafec0e59c3ef48e8e2e6fc4a0b8aa458798619
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 8 14:32:53 2010 -0700

    The status message for an HTTP 400 status should always be 'Bad Request', if I'm reading the specification right.

commit 9ec600fd459ab16008f6ced11e55778505b2a099
Merge: 6425d41 fef5cf9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 7 23:13:49 2010 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 6425d41eddd44091b2d83ba3c3734cc6990ca581
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 7 23:12:52 2010 -0700

    Add a "preserve_ids" global query parameter for REST requests that
    indicates that we shouldn't opportunistically convert ids into REST
    urls.

commit 98fce83de5f772482382bfabdbcd94c25ecdbb1a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 7 22:23:46 2010 -0700

    Add a "convert_ids" parameter to Item_Model::as_restful_array(), which
    we can turn on with a query parameter.

commit 5151f0b86526f619cb171a599f79a883addcf343
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 7 22:18:09 2010 -0700

    Improve a comment.

commit f1eed778e47604670e186d48c02659050aadf566
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 7 22:14:04 2010 -0700

    Tweak the test setup code to always copy database.php; something is
    going wrong that's nuking test/var/database.php -- I'll figure that
    out, but in the meantime we can make this code more robust.

commit 4ba02ad720de146ad2558ae67870986925e0a2a2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 7 22:03:54 2010 -0700

    Don't recreate test/var/logs if it already exists.  This fixes a
    rather circuitous problem where if we have a failure early enough in
    the cycle, the failure is masked by our mkdir attempt.  Even though we
    use @ to mask the error, the error handler still picks it up and turns
    it into an exception in Kohana_PHP_Exception::shutdown_handler() which
    obscures the real problem.

commit 32241cd14321f4fe24d689c86fbf74c45c71a53c
Merge: af240a3 fef5cf9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jun 7 07:18:20 2010 -0700

    Merge branch 'master' into talmdal_dev

commit fef5cf9865962ce9fed583752c0671a0a5e090cf
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jun 7 07:09:39 2010 -0700

    If the identity provider changes then delete all the rest user_access_keys, as they are no longer valid. (i.e. all the related users have been deleted.)

commit af240a34982c07dd2d3caa79c67222cfbb8e4f4a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jun 7 05:25:26 2010 -0700

    Update the rest client to use ancestors_for instead of ancestor_for.

commit 4a6775f5d34d1f26eac7e7c70e12c54cf2d330ec
Merge: 097ef93 1d91e1b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jun 7 05:11:09 2010 -0700

    Merge branch 'master' into talmdal_dev

commit 1d91e1b2dc8456681f9e38baaca1d191cff1ac7a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 6 23:19:02 2010 -0700

    Don't show the rotate links if the active user can't edit the photo.  Fixes ticket #1157.  Thanks to psvo.

commit ab0bef14be78701aedd647dd4eaccab641b6d01d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 6 21:08:10 2010 -0700

    Try to adjust for situations where /proc/loadavg is_readable() but
    generates an error if we call file() on it.  Fixes ticket #1149.

commit 0c1fb039145c824147fbd587edc9332d82c1ac4b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 6 21:01:36 2010 -0700

    Updated to Exifer

commit c31e9f1188934d0515210c6c0c4b6bb23ca437f0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 6 19:06:24 2010 -0700

    Add a check for short_open_tag

commit a63b0e8e8ba94288169aa673f3319711fc097b61
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 6 19:04:15 2010 -0700

    Whitespace fixes

commit 097ef934c6fe188cc368905ee72b7cca6ad2f755
Merge: c4d8572 aeee880
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jun 6 15:45:03 2010 -0700

    Merge branch 'master' into talmdal_dev

commit aeee88031fed7029c3320800d237b69993e8b6d4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 6 13:06:08 2010 -0700

    Fix an unused variable caused by converting straight query params
    to $entity based params.

commit e1d3b0295d0f6d098a7b5563aa1f5b6af247319f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 6 12:42:16 2010 -0700

    Change "ancestor_for" to "ancestors_for" for consistency.

commit 4e56176f35fe624d2d3a587636a4a45ea387be09
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 5 23:47:47 2010 -0700

    item::random_query() doesn't need to take a "where" clause because
    it's returning a query, so the caller can add the where clause
    himself.  This makes for a cleaner API.

commit 87fde3f360d557d48241d09cae4f25949e748d4f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 5 23:35:32 2010 -0700

    Create a UI under Admin > Settings > Comments where you can limit
    comments only to registered users.  It's simplistic, but is better
    than adding a permission since generally this setting will be used
    Gallery-wide.
    
    Fixes ticket #1002

commit 10895ca5298dc71410cfd87fe8a28c4f976c2234
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 5 23:04:23 2010 -0700

    Undo the change added in e4eedbce2298535540cb651d75ba6f1bf42cf02b
    which deactivates modules on upgrade.  No idea why we did that, but it
    breaks upgrading because it deactivates any module that's been
    upgraded.

commit 0350cf3cd85d0ca89d3a9fb1385d43350d3df9aa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 5 22:50:20 2010 -0700

    Fix a comment typo.

commit 4603d7010da1617d74bb48a7c0da5bd221f8a0d4
Merge: 481ef82 cb1b794
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 5 19:45:44 2010 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 481ef823dd04daff736b5a98472322e28bd4e756
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 5 19:45:15 2010 -0700

    Add an advanced setting to allow developers to allow guest access to
    REST entities.

commit cb1b7940d43a582531afb4d2d0c776523295b752
Merge: fd437ae 8c351b1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jun 4 14:06:03 2010 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit fd437aec2bbd3e65b330b0790af970ca7e078636
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jun 4 13:58:49 2010 -0700

    Correct XSS Security Test golden file for recent changes. Update the controller_auth data file for the rename
    of admin_comments to admin_manage_comments.

commit ed1905d3f94847a64656e52858de8c363c001df7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jun 4 11:22:51 2010 -0700

    Change the name of the private format_restful_item to _format_restful_item so that the File_Structure_Test will pass.

commit 686da5a3e069d180e198fcc8dc3e2ed422f725b9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue May 18 06:16:47 2010 -0700

    Save the item before updating the order of the children. Also always increment the weight count (even if it is equal to the weight of the current child)

commit a600185b605a37ca1b60cb6d9814d5441f54cd88
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon May 10 06:31:38 2010 -0700

    Allow the use of the type query parameter to filter the results of a rest/gallery/items?urls=... request.  This allows the client to pass the entire list of member urls and have the rest server filter the results based on the specified types.
    (cherry picked from commit 3fe10b15cf9359b66452c24965df575203e8af8e)

commit 04b90c3bdef9b2f4daf8bffc1e814b0bac9912f4
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat May 15 23:42:55 2010 -0700

    Remove the item id from the rest/gallery/items url as that was inconsistent.  Add the query parameter ancestors_for=<url> to provide a restful way to retrieve the ancestors of an item.
    (cherry picked from commit e9c8a8ae532e785ab95e6b43864c93b485785d6c)
    
    Conflicts:
    
    	modules/gallery/helpers/items_rest.php

commit 8c351b12266a63dc2ef68d895cd2a21250a41cd8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jun 4 11:22:51 2010 -0700

    Change the name of the private format_restful_item to _format_restful_item so that the File_Structure_Test will pass.

commit c4d85721fc0a3b9aad45451fb917d6e23b804c05
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri May 28 16:43:10 2010 -0700

    Change the rearrange processing to use the ProcessItemQueue when moving children, so a progress dialog is displayed

commit ae595795f09edbe0883d233a7a8483f6445b9ed7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri May 28 09:41:42 2010 -0700

    If the file is empty (i.e. the upload failed, then throw a 'bad request' exception before trying to create the item.

commit 56587febfff2955c09b5b82a63c31cf547066f32
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri May 28 09:36:54 2010 -0700

    Add a progress dialog box when deleting, uploading or updating items.

commit a1181c5a49631b77b7ed9200a8730aed464bf46e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri May 21 07:29:17 2010 -0700

    Renamed GalleryRestRequestBuilder to GalleryRestRequest.  Refactored the sendRequest method out of the GalleryResource class and moved it to the GalleryRestRequest class.  Converted the properties captureDate, updatedDate, and createdDate to return a flex date object instead of a string representing a unix timestamp.

commit e4ff302e3b1d64de2864e7fcd64f26e6d012089b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu May 20 09:05:50 2010 -0700

    Add items and add albums are now working.  What still needs to be done is add a progress bar for longer running tasks

commit f9cbff9fcc334da2853262ca46414edf80c2086e
Merge: ffc3f9f 1103507
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu May 20 06:22:47 2010 -0700

    Merge branch 'master' into talmdal_dev

commit ffc3f9f41c3d8d6df08d9ad6138f4ad74749ccec
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue May 18 10:00:48 2010 -0700

    checkpoint the new organize module.  At this point rearrange and move work. Rearrange is moving items within the same album, move is moving to a different album.

commit 110350776d5bda3b8535f0329ea69b914daa8019
Merge: ab204d2 73c7ec5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 18 09:11:23 2010 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit e0b74314dcdc36fa4d189589d1b6099ecd24cd8c
Merge: b5b9aeb 73c7ec5
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue May 18 06:17:05 2010 -0700

    Merge branch 'master' into talmdal_dev

commit 73c7ec53102c24de248d1424fdf8d5ba347c2200
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue May 18 06:16:47 2010 -0700

    Save the item before updating the order of the children. Also always increment the weight count (even if it is equal to the weight of the current child)

commit ab204d27201951c7915cf0eb871751b145e398aa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 16 23:01:57 2010 -0700

    Rename the admin_comments view to admin_manage_comments to match the controller.

commit 2157285d9bc3373e9bd2f4d86f558a1b2554f412
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 16 22:53:19 2010 -0700

    Rename admin/comments to admin/manage_comments to make room for
    admin/comments to be a settings page.

commit c682ba86bdc6b7661e35e3913be73b4cba5c0896
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 16 22:37:10 2010 -0700

    Make sure that $item exists in site_menu().

commit b5b9aeb22cd8af74ce9c396de43ca3db500447e2
Merge: 29a8ba9 83ce637
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat May 15 23:45:28 2010 -0700

    Merge branch 'master' into talmdal_dev
    
    Conflicts:
    	modules/gallery/helpers/items_rest.php

commit 83ce637ce3171a012515b2e20e8592d22e9929f8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon May 10 06:31:38 2010 -0700

    Allow the use of the type query parameter to filter the results of a rest/gallery/items?urls=... request.  This allows the client to pass the entire list of member urls and have the rest server filter the results based on the specified types.
    (cherry picked from commit 3fe10b15cf9359b66452c24965df575203e8af8e)

commit 48b66f2d675bf204b62909721cb398ceb0e2bd01
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat May 15 23:42:55 2010 -0700

    Remove the item id from the rest/gallery/items url as that was inconsistent.  Add the query parameter ancestors_for=<url> to provide a restful way to retrieve the ancestors of an item.
    (cherry picked from commit e9c8a8ae532e785ab95e6b43864c93b485785d6c)
    
    Conflicts:
    
    	modules/gallery/helpers/items_rest.php

commit 29a8ba959ec1ec1ebd14d12c2a102fd7d3fcd012
Merge: 28aee01 1240878
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat May 15 23:36:52 2010 -0700

    Merge branch 'master' into talmdal_dev

commit 1240878df0f4a2b0ad0cdb32814717038ff2773f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri May 14 16:55:15 2010 -0700

    Fix-ups for d98b85f7d3142676e6b4f407a18ed81564823f88
    
    - Pass the CSS selector of the active image in as an arg to site_menu
      so that quick operations know what they're operating on.
    - Change the ids from g-{photo,movie}-id to the generic g-item-id
    - Initialize ajax handlers for site menu on the photo and movie page
    - Drop the movie context menu, it's now in the site menu

commit dc4fdca2ab1160e6fea1d51694a7b66ae18ef5e9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri May 14 16:54:50 2010 -0700

    Localize "Gallery Admin"

commit 3422185938436b44ee48515cd3cfa3df55bca3c8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri May 14 16:51:51 2010 -0700

    Remove "rnd=" param from quick changes since we have the m= cache-buster already.

commit 9a1995a8792fd504424e37407517633417bb2294
Merge: ad0e725 163dd0e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri May 14 16:20:20 2010 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit ad0e7254eb6e6a763c9b4d0a7252dc5982a814be
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri May 14 16:19:53 2010 -0700

    Require a well-formed email address for all comments.

commit 163dd0eb931ea6fa0917bb08df0a0cc0b73f5576
Merge: d98b85f 9affa8e
Author: Chad Kieffer <ckieffer@abel.local>
Date:   Fri May 14 17:16:22 2010 -0600

    Merge branch 'master' of github.com:gallery/gallery3

commit d98b85f7d3142676e6b4f407a18ed81564823f88
Author: ckieffer <ckieffer@192.168.0.219>
Date:   Fri May 14 17:14:34 2010 -0600

    Drop context_menu for wind's photo/resize view. Move photo edit options to the site_menu.

commit dcd09c09e817e9e12223fc11ac9f830a81abea83
Author: ckieffer <ckieffer@192.168.0.219>
Date:   Fri May 14 17:13:35 2010 -0600

    Missed this in commit 9e3c0c08849b5842f9c345d7b4f90ee82359dedb.

commit 28aee011307e37cd80e9bef0f08cb9b0270d89b5
Merge: 3fe10b1 9affa8e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri May 14 06:32:26 2010 -0700

    Merge branch 'master' into talmdal_dev

commit 9affa8ebbd539396d71f19003b91af577a8a183e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 10 22:11:59 2010 -0700

    Pick a new album cover when the photo that's the current cover is
    deleted.  Fixes ticket #1083.

commit 3fe10b15cf9359b66452c24965df575203e8af8e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon May 10 06:31:38 2010 -0700

    Allow the use of the type query parameter to filter the results of a rest/gallery/items?urls=... request.  This allows the client to pass the entire list of member urls and have the rest server filter the results based on the specified types.

commit e9c8a8ae532e785ab95e6b43864c93b485785d6c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun May 9 20:41:37 2010 -0700

    Remove the item id from the rest/gallery/items url as that was inconsistent.  Add the query parameter ancestors_for=<url> to provide a restful way to retrieve the ancestors of an item.

commit 32fa15ca3a54ef0266f4dd8ce0edb570ad526df7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun May 9 20:39:31 2010 -0700

    Add dependency checking to insure the administrator is notified if the rest module is deactivated

commit 357d20a6800d75c266ebe4281ebdd08e88a6e13a
Merge: 14683ec b2f7f80
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat May 8 21:09:15 2010 -0700

    Merge branch 'master' into talmdal_dev

commit 44753c524996415f465f44d05be46e878911ce4a
Author: ckieffer <ckieffer@192.168.0.219>
Date:   Sat May 8 15:05:56 2010 -0600

    Deleted extra CSS class assignment for context_menu delete option.

commit fcc446bf006f88d2079f52ed559c31f01c156dbe
Author: ckieffer <ckieffer@192.168.0.219>
Date:   Sat May 8 13:54:27 2010 -0600

    Move print with digibug to the site menu.

commit b2f7f80efb4fc8de7c1be966720a5006310fefdb
Author: ckieffer <ckieffer@192.168.0.219>
Date:   Sat May 8 07:52:27 2010 -0600

    Updated YUI CSS files to 2.8.1. Closes ticket #1141. Needs to be pushed to vendor.

commit d849b6be3fa2a7805bce09a3dda6ed6f7f616f34
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Fri Apr 30 16:25:16 2010 -0700

    Oops, somehow the update to flowplayer 3.1.5 was missing a few files. Here they are...

commit 9edee3a7ef770c040b82164454703c35c81c196f
Merge: 97ba2d8 f107659
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Fri Apr 30 16:23:05 2010 -0700

    Merge commit 'upstream/master'

commit 97ba2d87eb77c77d70430c9e2171b0184a999635
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Fri Apr 30 16:21:41 2010 -0700

    Integrate new flowplayer version (3.1.5) from vendor branch.

commit f1076590f15f5dc55b164e2b22688a51c805265e
Author: ckieffer <ckieffer@192.168.0.219>
Date:   Fri Apr 30 00:08:37 2010 -0600

    Add page_title to admin views. Closes #1038.

commit e30849d310cf532128f4bd092acfbbd5598a5773
Author: ckieffer <ckieffer@192.168.0.219>
Date:   Thu Apr 29 23:59:20 2010 -0600

    Applied capitalization rules to title, changed from Tag admin to Manage tags

commit 35839c85f237c7af0b0bc42aa6c0583acfda7d4f
Author: ckieffer <ckieffer@192.168.0.219>
Date:   Thu Apr 29 23:20:49 2010 -0600

    Applied capitalization rules to title.

commit 4068e80f0678ab8f71a9262630383d7fef79547a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Apr 22 22:24:44 2010 -0700

    Update test to reflect slug change in 78db1bb339042f3aadb5a61bfe26ddd20c4b8951

commit 67ced571c7ea066d9e166deb49a63d327e2c1f4d
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Apr 21 22:48:33 2010 -0600

    HTML validation and accessibility fix, add id attr to add tag input.

commit 39818dd29fdd883d055ab9ec582c8039d3c129c8
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Apr 21 22:36:52 2010 -0600

    Comment updates. Add empty <li> to empty <ul> for HTML validation, fixes #1066. Minor  CSS/JS fixes. Add scrollTo effect when clicking on 'Add a  Comment'.

commit 14683ec0e8b8b9622539990c8d56310b0e0ced21
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Apr 21 15:32:49 2010 -0700

    Correct typo: change relationship to relationships

commit 0565d9f0f92ef9bd69c38e997e7c6e6d05d56ee1
Merge: 0273125 2257776
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Apr 21 06:48:08 2010 -0700

    Merge branch 'master' into talmdal_dev

commit 2257776f9b4c231033656db1eb23246035aa42fd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 17 15:36:46 2010 -0700

    Don't show the member element for non-collection elements in the response.  Having a members sidebar element indicates to the rest clients that this is a resource collection.
    
    Conflicts:
    
    	modules/gallery/helpers/items_rest.php

commit af71df3d0f6bbed29446df1801d16d28acbf927c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 17 15:35:09 2010 -0700

    Update tests to reflect recent changes to the REST API.

commit 10f849cd0a8824a8f853a55e49859de30a291f01
Merge: b4d1a56 6d81fea
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 17 12:33:18 2010 -0700

    Merge branch 'master' into bharat_dev

commit 6d81feacae8329cd0c65abe920ecd3fa2e8f2537
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 17 12:28:46 2010 -0700

    Change the key for invalid passwords from "invalid" to
    "invalid_password" to remove ambiguity.

commit 27b29afd7cf679f33429ce144871c1d96f137fbb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 17 12:26:52 2010 -0700

    Add user::valid_username() as a validation helper.

commit b4d1a5686c69d598efa5d387021912a0e31260ca
Merge: a2e0472 ca45341
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 17 12:10:13 2010 -0700

    Merge branch 'master' into bharat_dev

commit ca453413616d31d4c367526bdc9f480b23ba80db
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 17 12:10:01 2010 -0700

    Trigger the album_add_form_completed event after creating a new album.

commit 027312596c29c1986d3480c7dda48533e6dd3ca8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Apr 16 15:28:35 2010 -0700

    Don't show the member element for non-collection elements in the response.  Having a members sidebar element indicates to the rest clients that this is a resource collection.

commit a2e0472f83b7f3151c4b4ca51472d18258110561
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Apr 15 06:18:47 2010 -0700

    Only return the members element to the rest client if the item is an album.  This makes it consistent to the rest client that collections will have a members element.

commit c2615e87a7ee82da9819e7a57ce2f6f9fcc6c6bb
Merge: 6652b69 8d8aefc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Apr 16 14:19:21 2010 -0700

    Merge branch 'master' into bharat_dev

commit 009b47262b9b81dc996459119af822e2e7306255
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Apr 15 06:18:47 2010 -0700

    Only return the members element to the rest client if the item is an album.  This makes it consistent to the rest client that collections will have a members element.

commit c58b2aaf88d9b92880bcec1419793edca9acb6fb
Merge: 9bb4c95 8d8aefc
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Apr 15 05:22:30 2010 -0700

    Merge branch 'master' into talmdal_dev

commit 8d8aefc5b83b4b814e3f6bd14866b817c1dbb7d0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 10 20:58:05 2010 -0700

    Add album_add_form event to album::get_add_form().

commit 886337e1dd1380b3382eebe38ee789a14123c69f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 10 20:45:09 2010 -0700

    Add error messages to theme::get_edit_form_admin()

commit c9edb943f99704a649612afa6ae7825b2e6bc44e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 10 17:01:48 2010 -0700

    Fix a bug introduced when we patched the "disallowed global data"
    security check.  Not sure why the patch worked for some and not for
    others, but this should resolve it either way.  Fixes ticket #1123.

commit 9bb4c954bbc10e71a695b57f7e8979a140f4873f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Apr 7 08:07:41 2010 -0700

    Merge bharat_dev rest implementation

commit 6652b691936f5fcf2f12aab947eca6c3cfae0ccc
Merge: 5679e30 2657d08
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Apr 7 07:29:46 2010 -0700

    Merge branch 'master' into bharat_dev

commit 50b0b73345b7b8aae070f5289dff8e0c2d278fde
Merge: 0dfc620 2657d08
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Apr 6 06:08:17 2010 -0700

    Merge branch 'master' into talmdal_dev

commit 2657d085863782f57279d507c1c2c0a15ccccc24
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 4 14:46:44 2010 -0700

    Move the "Fix MPTT" task from the rescue module into the main Gallery
    module.

commit c82d24d475eb96ec8a7cb1d37b0eb8f2ee498b89
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 4 14:28:09 2010 -0700

    preg_quote() the pattern we use for directory globs to avoid letting
    the filename be treated as a regexp.  Fixes #1086.

commit 78db1bb339042f3aadb5a61bfe26ddd20c4b8951
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 4 14:27:39 2010 -0700

    Fix a bug where if the file name is composed of entirely illegal
    characters, we'll get an empty slug.  Partial fix for #1086.

commit 5679e30ef6c68272cce295bd593bc23c9ec1e1b3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 4 11:55:54 2010 -0700

    REST changes: Allow PUT and POST requests to modify members, not
    just entity.
    
    TESTS ARE NOT UPDATED YET.
    
    - Fix item_rest::get() to maintain the proper sort order, which
      requires duplicating some Item_Model code.
    
    - Elide "weight" from the REST version of item
    
    - Adjust the weight of members according to the order they're returned
      from the client.  You can't add or remove members here, you can only
      reorder them.
    
    - Changed the wire protocol to handle more complex values.
      Now "entity" and "members" are JSON encoded.  The Gallery3
      helper does this correctly.
    
    - Changed the wire protocol for tag_item -- now it stores the
      tag and item urls in the entity, not as members.  This is more
      consistent.
    
    - Added missing security for renaming and deleting tags.
    
    - Got rid of vestigial tag_rest::post().  We add/remove tags
      via the relationship.

commit 4e450b5a9664d2a24b74050f7b410cd581fc41cb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Apr 2 11:53:24 2010 -0700

    Always return an array from item_ordered_members_rest::relationships()

commit 93eab24c4a858ac0121540e7d06acf37c79c8de9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Apr 1 21:00:13 2010 -0700

    Add a new resource for managing child item orders.

commit 0dfc62051e7e3dac79489a6a2964c3e6b333b517
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 31 07:14:48 2010 -0700

    Update the flex organize to use access_key instead of access_token

commit f2ed1eeab2074fc004c604d02bbf2ebe7c1177db
Merge: e56473c ca977dc
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 31 07:14:06 2010 -0700

    Merge branch 'master' into talmdal_dev
    
    Conflicts:
    	modules/rest/controllers/rest.php

commit 668c12da1cd6add3c7a734f34c84bd87700b2141
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 30 20:47:45 2010 -0700

    Rest -> REST

commit ca977dce516b9e2ca9539db69fce188ed33d971c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 30 14:01:40 2010 -0700

    Rename "access_token" to "access_key" in the code for consistency.

commit 59b6cd30e621ffeba55f23012e3ede42a4905e78
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 30 13:53:14 2010 -0700

    Rename "user_access_tokens" table to "user_access_keys" as step 1 of a
    multi step process to refer to REST access keys as "access_key"
    everywhere.  Bump the rest module to version 2.

commit 7f175ea87e9567817d34729dec83f7f36509b894
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 30 13:18:05 2010 -0700

    Move G2_Import_Exception into libraries because it's not a helper class.

commit d78ea4bc0aaa0e40f54f2ac703fbb690722aac42
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 30 13:18:03 2010 -0700

    Checkpoint

commit e56473c5d78842210b7825300bd9b373c104cb83
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Mar 30 08:08:30 2010 -0700

    Checkpoint the organize flex source.  Not production ready, but worth checkpointing.

commit 7c84ee1b33a768fc4a44f3b6db2530f01cfcd081
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Mar 30 07:55:56 2010 -0700

    Organize now has the add album functionality.

commit 91f27bf32fe3d9650e5095b6747804ec97b524e8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Mar 30 06:33:42 2010 -0700

    add a controller method to return the translated labels for the add album dialog.

commit f5490ddcb051b4996b155afc956238b8d3d6dc72
Merge: 0c1595d ea43c5f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Mar 29 09:03:53 2010 -0700

    Merge branch 'master' into talmdal_dev

commit ea43c5f06f5c7242f1d5811fe427e55c87497ecc
Merge: 2eea7b8 e8eb23d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Mar 28 21:04:44 2010 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 0c1595d7e8c1b31e886ac712ce7e794cf3c33fdd
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Mar 27 15:55:42 2010 -0700

    Clean up the organize_dialog file of some cruft and add the organize.swf file to the organize module.

commit 67a8ef427798d37a9629c2f3d9672c03520b9987
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Mar 27 11:16:41 2010 -0700

    Convert the old organize to the new flex based organize

commit 7e9eca7f6714bcc23db1688565574c9af3253825
Merge: 7b35091 e8eb23d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Mar 21 20:45:57 2010 -0700

    Merge branch 'master' into talmdal_dev

commit 7b35091b47f0b1ed2677795885553c07fd7bf168
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Mar 21 20:45:22 2010 -0700

    If the access token is not set, then look in the post data.

commit e8eb23db42bb929548af358452f1b65e16b61913
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Mar 20 14:55:41 2010 -0600

    Increase specificity for .g-item width to ensure it overrides the wind theme's default width when thumbnails are something other than the default. Fixes ticket #1053.

commit 846a835e13b5d213cfecfb7915b9250bea6b528a
Merge: 99c1c2a 0e9c626
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 17 14:25:20 2010 -0700

    Merge branch 'master' into talmdal_dev

commit 0e9c626684fff0973a8512d5bd50ab7ba3a748ff
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Mar 16 23:10:15 2010 -0600

    Add more padding to the top of the add-photos-canvas to avoid overlap with selected photos.

commit 99c1c2a6b1d483993b24d1a25cc3c12663589020
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Mar 13 23:12:40 2010 -0800

    Changes to the example client to test updating the members of an album.

commit 48b8b4f68923c05695dd30e328d048a6116d04e6
Merge: 582765c 13f5d3a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Mar 13 23:11:53 2010 -0800

    Merge branch 'master' into talmdal_dev

commit 13f5d3aa33616c650b84f504e11d1117769266d1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Mar 13 23:11:33 2010 -0800

    Whitespace correction

commit 582765ca2fd1a6b17d07d0924647dcd9e4ee4bfb
Merge: b2bb817 b7786fe
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Mar 13 08:43:16 2010 -0800

    Merge branch 'talmdal_dev' of git@github.com:gallery/gallery3 into talmdal_dev

commit b2bb8172145b0eab77e7da077e69b1ad85cba026
Merge: 50a3ae7 995994b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Mar 13 08:40:57 2010 -0800

    Merge branch 'master' into talmdal_dev

commit 50a3ae7d0c6e7ce9b525f736f271c691df622176
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Mar 13 08:39:53 2010 -0800

    Synchronize line endings

commit 5467e21e8b9941a2b64aa093c0cf0f591ef5ca82
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Mar 13 08:16:37 2010 -0800

    Changes to support updating the child elements within an album. In this change the urls of the children are sent up asan array of post fields children[0].... children[n].  If an existing child is not included it is deleted.  Including a url to an child in another album will move the child.  Changing the order of the children will respect the order of the children, if the sort column is 'weight'

commit 931453304805b59751c5d3dffef42b8692b6fe65
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Mar 5 21:42:39 2010 -0800

    Update tests to reflect the fact that you have to be logged in to do anything.

commit c69f5f4906c367b900ec251d83a3156b9f9d73aa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Mar 3 10:17:48 2010 -0800

    Guests don't get access to the REST API.

commit 08f11ce90edae83729537323925f167ef11b659e
Author: Florent Paterno <florent.paterno@gmail.com>
Date:   Mon Mar 1 17:23:56 2010 +0100

    Fix bug #1015 : repeated ids are prohibited

commit 995994b93aed3e6249b68bb10b6ac530adbbb4a6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Mar 13 08:30:08 2010 -0800

    Synchronize the line endings with the vendor branch.

commit b7786fe9a3edca070cac45d0fba221033e0e3ee2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Mar 13 08:16:37 2010 -0800

    Changes to support updating the child elements within an album. In this change the urls of the children are sent up asan array of post fields children[0].... children[n].  If an existing child is not included it is deleted.  Including a url to an child in another album will move the child.  Changing the order of the children will respect the order of the children, if the sort column is 'weight'

commit 8715f602bd266d41a7f084df576d2446846a328b
Merge: 1c022a5 be580c9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Mar 8 09:46:13 2010 -0800

    Merge branch 'master' into talmdal_dev

commit be580c9554602c02247fbc2f7401965b9ed00f0b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Mar 5 21:42:39 2010 -0800

    Update tests to reflect the fact that you have to be logged in to do anything.

commit 6429110cd0766f265215b5001659dcb69277f4c3
Merge: 05d345e e4ed7e9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Mar 5 21:25:22 2010 -0800

    Merge branch 'master' of git://github.com/fpaterno/gallery3

commit 1c022a5c84e53e247dafe6decffd5d3a96aba576
Merge: fd82bcf c3c2b45
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Mar 5 06:54:12 2010 -0800

    Merge branch 'master' into talmdal_dev

commit 05d345e16dd04a4c8c766ffeb35bf56ff2362cd9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Mar 3 10:17:48 2010 -0800

    Guests don't get access to the REST API.

commit c3c2b45280c461acc8a63ac9c73d054f9a109234
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Mar 3 10:15:34 2010 -0800

    Update the copyright to 2010.  It's only 3 months into the year :-)

commit fd82bcfc0a953ec83e867564edbb907181828cbe
Merge: d1b8589 109c390
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 3 08:47:54 2010 -0800

    Merge branch 'master' into talmdal_dev

commit 109c390f256eb0f7c99dc7d472cec0e0ab911c7b
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Mar 2 13:53:09 2010 -0800

    Ignore fetchItemViewCount errors during import and default to 0. The error is still logged to the G3 syslog.

commit 06d0ed57a7c57b0b398756ae08c836f14c4d4565
Author: Romain LE DISEZ <romain.git@ledisez.net>
Date:   Wed Mar 3 01:57:45 2010 +0800

    Fix a typo.

commit d1b8589ea42deab5ec976f265a3d4b195dda09cd
Merge: e3e72ca aff40d2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Mar 2 07:10:22 2010 -0800

    Merge branch 'master' into talmdal_dev

commit e4ed7e983d227ad7c81557ce6e56cb404db686bd
Author: Florent Paterno <florent.paterno@gmail.com>
Date:   Mon Mar 1 17:23:56 2010 +0100

    Fix bug #1015 : repeated ids are prohibited

commit aff40d2d787bf4a5853a2b097836e33226dc097d
Merge: dc00373 b0ef46b
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Feb 28 22:10:30 2010 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit dc003734041f49cff99330dc1f20818a694b6554
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Feb 28 22:09:40 2010 -0700

    Apply ui-helper-clearfix to the breadcrumb in the upload dialog to ensure it clears the upload canvas in webkit-based browsers.

commit b0ef46b5fa12c995f4722bceb4f2c477838ee6ee
Merge: 1077477 5f985b3
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Feb 28 19:31:55 2010 -0800

    Merge commit 'upstream/master'

commit 1077477a9032d5a4855e19e2dd4ce923472b711c
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Feb 28 19:29:41 2010 -0800

    G2 importer stability improvements:
     - Log which validation rule was violated if there's an ORM validation error.
     - Add more try / catch blocks to avoid abortion where possible.

commit 5f985b3e2aa404d9b1145796dff8bc4c1e48b3f0
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Feb 28 18:46:43 2010 -0700

    Updates to upload CSS to make it themeable and RTL compatible. Use absolute positioning to handle upload button positioning. Remove color definitions to allow jQuery UI theme to set button colors. Consolidate upload dialog CSS to modules/css/gallery.css. Closes #885.

commit 835027bdb6e5646250d29529168359ad40e9d5f1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Feb 28 16:04:47 2010 -0800

    The vendor branch is being updated, so this reverts the revert of
    commit c91408d4a8b56730fde39df5e12d32111ace28b4.

commit c91408d4a8b56730fde39df5e12d32111ace28b4
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Feb 28 15:39:39 2010 -0800

    Its not apppropriate to make changes to the Kohana system files. Please find another way.
    
    Revert "Fix Kohana's internal cache for Gallery's usage pattern. Instead of deleting the whole find_files cache when ever include_paths (=core.modules) change, keep a separate find_files cache for each set of include_paths."
    
    This reverts commit fd94f4bec21a7deaa86d468da704a048d2be751e.

commit e3e72ca4da0375d88b86ba69b6596b10be164e23
Merge: f28b80f fd94f4b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Feb 28 15:38:39 2010 -0800

    Merge branch 'master' into talmdal_dev

commit fd94f4bec21a7deaa86d468da704a048d2be751e
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Feb 21 21:29:24 2010 -0800

    Fix Kohana's internal cache for Gallery's usage pattern. Instead of deleting the whole find_files cache when ever include_paths (=core.modules) change, keep a separate find_files cache for each set of include_paths.
    
    Benefits for Gallery:
     - There are about 3000 is_file() invocations for a photo / album page in a vanilla Gallery installation. These are mostly triggered by Kohana::find_file().
     - Enabling internal_cache doesn't help at all (see explanation below). The number of is_file() invocations is about the same with or without this cache.
     - With this patch, more than 95% of these invocations are gone. The cache works as intended.
    
    Kohana's internal_cache for find_file wasn't working in Gallery because
    the cache would be emptied on each request after reading it from disk and
    before most lookups would run.
     1. Bootstrap sets initial core.modules (= include path): forge, kohana23_compat, gallery.
     2. Kohana::setup() loads find_file cache from disk.
     3. Gallery loads list of active modules and themes, and updates the core.modules value (=include path), which forces the internal find_file cache to be empties (which makes sense).
     4. Request processing starts, and thus 80+% of all Kohana::find_file() triggered  is_file() invocations start off with an empty find_file cache.
    
    The patch doesn't have a significant impact on performance for Kohana applications which don't change their include paths at runtime (after Kohana::setup). And the patch should benefit all Kohana applications which have modules / extensions, i.e. which first need to bootstrap Kohana before they can load a list of all active modules from the database.

commit a19b97f8d637ead3a4b038bdbd975be8a7583c59
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Feb 28 13:35:58 2010 -0800

    First step towards fixing ticket #1038: Allowing for custom page <title> in admin pages, just like in non-admin pages.
    
    TODO: Set $view->page_title in the many admin controllers we have. I just set it for admin_maintenance.php to show how it's intended to be used. I copied the title from views/admin_maintenance.html.php to the controller.

commit 107909043add11045c76866564dead06a3385fb6
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Feb 28 13:09:57 2010 -0800

    Fix profiler display: It looks like it was broken by an API change in the latest kohana upgrade.

commit 70837b5212966e173c886c376fae20a29cee8737
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Feb 27 21:26:38 2010 -0800

    Fix for ticket #1035: Make .htaccess access rules work for the case when index.php isn't part of generated URLs.

commit 74113f869a37bd5eda1175c9eb520b938c4793c4
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Feb 27 20:21:22 2010 -0800

    Fix for ticket #1037: Only show language drop-down when there's actually a choice.

commit dacb58ceed224fea34fa9cff740e6f30c70f0a7f
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Feb 27 20:06:37 2010 -0800

    Additional fixes for plural handling when deleting translations / marking them as untranslated.

commit caf9ae88badfa5c2b8eb3eac03e298f1beea79a3
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Feb 27 19:47:08 2010 -0800

    Fix l10n client, copy of existing plural translation to form fields.
    I think this was broken in a recent jQuery update. It used to allow matching the HTML "name" attribute with #name_value, now you need to match by elementName[name=name_value].

commit 8366f58ef9621679600ae0862cf72418d3e6f6fd
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Feb 27 19:13:22 2010 -0800

    Client (UI) side fix for ticket #1042, based on a patch from fpaterno (Florent Paterno). Mark message as untranslated if the translation is empty.

commit 48193371e4a1fc315a5f24986dbdad002270e061
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Feb 27 18:54:36 2010 -0800

    Incremental fix for ticket #1042: Delete translation from outgoing_translations when the user submits a form with an empty translation.

commit a18ddd2fe9a920115df580a1ded5b2e33bb12a02
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Feb 27 15:39:36 2010 -0800

    Add more randomness to reset password mechanism.

commit d9707ae749df2770370dc4eeeeaddda28f092d4d
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Feb 27 02:37:39 2010 -0800

    Fix for ticket #1036 - Don't echo any sensitive information such as passwords, hashes or personally identifiable information.

commit 7d2885fe94d8b343af3f8ce1619be13a03056c5e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Feb 26 09:59:49 2010 -0800

    Revert "Password value on installer must be hidden"
    
    This reverts commit b4922f4d176662976c9d2b249edf0e50a0cdfdf1.

commit f28b80fcf43e02ca65f419eb6774321dc30a2a37
Merge: 9f81015 b4922f4
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Feb 26 09:58:57 2010 -0800

    Merge branch 'master' into talmdal_dev

commit b4922f4d176662976c9d2b249edf0e50a0cdfdf1
Author: fpaterno <florent.paterno@gmail.com>
Date:   Fri Feb 26 16:59:37 2010 +0800

    Password value on installer must be hidden

commit ed0f93a965bc2640411edaf2054791037ad36ed3
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Feb 25 18:26:20 2010 -0800

    Fix typo, thanks cajun100 for reporting!

commit 39b8810c3b37538e015c9d8cb7b46c59d87fb8c7
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Wed Feb 24 16:39:18 2010 -0800

    Fix multi-column layout of language admin.

commit c38bee203b8e89cfb1446ecacd133f3c679ffbcc
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Wed Feb 24 16:21:54 2010 -0800

    Add Faroese to the language list. Verified that it uses the default plural rules, thus no changes in Gallery_I18n.php or on the server side required.

commit 7d7da6eb0a953c61ceb424d9837f850ca2c8b0ce
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Feb 24 11:49:53 2010 -0800

    Remove redundant print statement. rest::reply() does the print so having the extra print statement could lead to problems.

commit 1d8862d957e8f08552d448cd17b3c00c61b7fc05
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Wed Feb 24 01:28:38 2010 -0800

    Fix for ticket #1034: Fix db cache driver delete() call which was missed in a recent refactoring / fix.

commit 2eea7b874aa06f08ed58a85197473233b54693aa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 23 21:08:52 2010 -0800

    Specify the type for movie Item_Models correctly.  Fixes ticket #1033.

commit d4423eb34970f0068af463ebea17a748910ca835
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 23 13:50:57 2010 -0800

    Reset the active user to admin in all test cases where we change the
    user to something else.

commit de1785d9fa020ca150e0e8789b564e65377da0f1
Merge: 8ab580c 212da35
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 23 12:58:30 2010 -0800

    Merge branch 'master' of github.com:gallery/gallery3

commit 212da35cdc5c68ad06ff2f0e5d820ccbcf328a89
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Feb 23 12:48:03 2010 -0800

    Fix Cache tests for recent Cache/Database.php driver fix.
    
    Cache::delete($arg) allows for scalars and arrays, but Cache drivers' delete($arg) function always expects an array.

commit 8ab580cec1909fb93ba01fb635e1392a76317623
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 23 11:50:39 2010 -0800

    Verified

commit 16bf1d18adc870d07cd83e40bc9fe5dbe5400fad
Merge: fb5503b 6afc5cc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 23 11:11:11 2010 -0800

    Merge branch 'master' of github.com:gallery/gallery3

commit fb5503be09047def6efd24a74188ad55af7a80f2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 23 11:10:32 2010 -0800

    Name this release "Santa Fe".  Fixes ticket #683.

commit 6afc5ccf5c5d70b3aef4024f892141a07779c25f
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Feb 23 10:02:27 2010 -0800

    Fix translation cache for installations with 0 translations in the DB.

commit 5f97c12562ed9ce6869c85ed5ce1abc33580ede0
Merge: adb1db6 ce39dc7
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Feb 22 22:01:38 2010 -0800

    Merge commit 'upstream/master'

commit adb1db6b7d1d10772b893047d8297a89ca9c615e
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Feb 22 22:00:23 2010 -0800

    Fix typo in selector expression. The handling of view-only albums is still not great, but at least the code is closer to doing what it's supposed to.

commit ce39dc768c63fa5631450918180c1602363b7810
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Feb 22 21:21:04 2010 -0800

    Normalize invalid/missing G2 email addresses

commit a9f8b9479379dac14128114f35991a8a51d281ae
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Feb 22 21:08:59 2010 -0800

    Fix cut/paste typo

commit f7b39e7db71058c89ada225aac43d9c7b24377da
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Feb 22 12:31:46 2010 -0800

    Fix server-add for German and other locales that use comma as decimal separator.

commit 6ce01328422cc587dedf555d0ba3eb8a0ee05a9f
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Feb 22 00:30:54 2010 -0800

    Fix for ticket #1027: Add index on cache key column.
    (and fix the packager to truncate the cache table before packaging)

commit 95374070db74362bc1481e3fdcdab0d89678c1bc
Merge: ff9129c 9b7542b
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Feb 22 00:00:25 2010 -0800

    Merge commit 'upstream/master'

commit ff9129c59850277c3079edd19b8a0f7ac4d70056
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Feb 21 23:57:29 2010 -0800

    Revert "Fix Kohana's internal cache for Gallery's usage pattern."
    
    Waiting for feedback from Kohana devevelopers before applying the patch to Gallery 3.
    
    This reverts commit 336c3bd264b4af2ab74fe1262366ad6f2e705451.

commit 334cd2368de24a76cd49681a14295350e85714d0
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Feb 21 23:50:01 2010 -0800

    Performance improvement: Load all translations of a locale as one serialized array from the Cache.
    Until now, we loaded hundreds of translation messages row by row, and unserializing one by one at bootstrap time. That amounted to a significant percentage of the complete request time. This approach is more than 10x faster.

commit 6591ea25771f2ab31fea4bf3b7a6fd76c586e098
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Feb 21 23:48:23 2010 -0800

    Fix delete() function of DB based Cache driver. It expected a scalar key / tag value, but it was always an array of keys / tags.
    (compare to system/libraries/Cache.php and the File.php driver)

commit 8e7eda9cc62c64e77fffabacae7441f8ea076c9d
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Feb 21 23:23:48 2010 -0800

    Fix progress bar / maintenance tasks for locales that use comma as decimal separator, such as German.

commit 336c3bd264b4af2ab74fe1262366ad6f2e705451
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Feb 21 21:29:24 2010 -0800

    Fix Kohana's internal cache for Gallery's usage pattern. Instead of deleting the whole find_files cache when ever include_paths (=core.modules) change, keep a separate find_files cache for each set of include_paths.
    
    Benefits for Gallery:
     - There are about 3000 is_file() invocations for a photo / album page in a vanilla Gallery installation. These are mostly triggered by Kohana::find_file().
     - Enabling internal_cache doesn't help at all (see explanation below). The number of is_file() invocations is about the same with or without this cache.
     - With this patch, more than 95% of these invocations are gone. The cache works as intended.
    
    Kohana's internal_cache for find_file wasn't working in Gallery because
    the cache would be emptied on each request after reading it from disk and
    before most lookups would run.
     1. Bootstrap sets initial core.modules (= include path): forge, kohana23_compat, gallery.
     2. Kohana::setup() loads find_file cache from disk.
     3. Gallery loads list of active modules and themes, and updates the core.modules value (=include path), which forces the internal find_file cache to be empties (which makes sense).
     4. Request processing starts, and thus 80+% of all Kohana::find_file() triggered  is_file() invocations start off with an empty find_file cache.
    
    The patch doesn't have a significant impact on performance for Kohana applications which don't change their include paths at runtime (after Kohana::setup). And the patch should benefit all Kohana applications which have modules / extensions, i.e. which first need to bootstrap Kohana before they can load a list of all active modules from the database.

commit 6cbe0f78aa80a2810908a76ca163f1dfff2f0726
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Feb 21 21:07:55 2010 -0800

    Revert "Fix Kohana's internal cache for Gallery's usage pattern."
    
    This reverts commit 5ddd7c9677b644396981de7df8176a3b168ffe21.

commit 5ddd7c9677b644396981de7df8176a3b168ffe21
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Feb 21 20:04:06 2010 -0800

    Fix Kohana's internal cache for Gallery's usage pattern.
    Adds a core.internal_cache_read_only config variable to Kohana's internals.
    
    Kohana's internal_cache for find_file wasn't working in Gallery because the cache would be emptied on each request after reading it from disk and before most lookups would run.
     1. Bootstrap sets initial core.modules (= include path): forge, kohana23_compat, gallery.
     2. Kohana::setup() loads find_file cache from disk.
     3. Gallery loads list of active modules and themes, and updates the core.modules value (=include path), which forces the internal find_file cache to be empties (which makes sense).
     4. Request processing starts, and thus 80% of all Kohana::find_file() triggered  is_file() invocations start off with an empty find_file cache.
    
    In the case of my small Gallery installation, we're talking about 3100 is_file() invocations per request with or without internal_cache enabled. With this fix, this number is down to 800 invocations.
    
    The basic idea is that we treat the cache as read only and don't write any (possibly dirty) values to it in memory until we're sure that the include path won't change later on in the request processing. Once we know the list of active modules and themes, we can update core.modules and finally flip the read-only state of the cache and start writing to it.

commit 9b7542b9f1beb96f16123beebdd13728783f6dcd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 21 17:14:19 2010 -0800

    Add Menu::add_before()

commit 9f810150532a2511bfc5f03c9d24fd592d2f803f
Merge: a6c3e8f be20309
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Feb 21 14:41:05 2010 -0800

    Merge branch 'master' into talmdal_dev

commit be20309259de9310da3be703c93c4e42def2541b
Merge: cb57c39 1377b2c
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Feb 21 13:08:06 2010 -0800

    Merge commit 'upstream/master'

commit cb57c3912aef6bed394a4693f94e9c97001aff34
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Feb 21 13:05:48 2010 -0800

    Fix random queries (such as for the random image block) for locales that don't use a period as decimal separator of floating point numbers (such as de_DE).
    
    (Integrating a fix Kohana's SQL generation for floating point numbers. See http://dev.kohanaframework.org/issues/2636.)

commit 1377b2c7b3110a132d4b2d748be72a6aafa537e6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Feb 20 10:24:29 2010 -0800

    When using rest::reply(), don't call var_export() if the response is empty.

commit f4fc245603fc8ec1bb9536356c8d4ab017153c08
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Feb 20 10:48:27 2010 -0700

    Add link to edit user group names. Closes ticket #1028.

commit 5fbc472300ce6b19a2694a5f91b1fe0b2cc470f3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Feb 19 11:54:03 2010 -0800

    Fix the resize_url and file_url in as_restful_array()

commit f062cc5e1acddfb1bf2b65a55ada7ab873c84aef
Merge: 10c0698 d388e4b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Feb 19 11:49:01 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 10c06989493bdded5f15880baadbc93c5d8ee296
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Feb 19 11:48:54 2010 -0800

    Correct the view_fillsize permission to view_full. In addition, change the name of the field containing the url to the fullsize image to file_url instead of fullzie_url

commit d388e4bb868602f293b73918981bee1de6176a24
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Feb 19 11:40:49 2010 -0800

    Refactor away the "display_all" construct in User_Profile_Controller.
    "display_all" is too coarse, and we should be letting event handlers
    make the appropriate decision on what to display and when.  This
    duplicates some code, but it's now very clear in the event handlers
    what's getting shown.
    
    Throw a 404 if we try to view the user profile for a missing user.
    
    The only feature change in this should be that we now display the
    name, full name and website for a user to any other registered user,
    which makes sense since these are typically public fields.
    
    Don't show any of the edit buttons unless identity::is_writable()

commit a6c3e8f0a26661afd353c75bea496532999f2ca5
Merge: 74472dc 643fffd
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Feb 19 11:36:31 2010 -0800

    Merge branch 'master' into talmdal_dev

commit 643fffdba0e595e4e3c4777a52088f81bafded40
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Feb 19 09:49:05 2010 -0800

    Add spaces around %name in the "create a file" text so that
    double-clicking the token only selects that one word, not the word on
    the line before (which happens on Chrome/Linux)

commit 3f021d3610a08e420402c1f05011dbecd17e835e
Merge: 2846d81 794660d
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Feb 18 23:01:15 2010 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 2846d81171c7101e5015995f848d4cc3a9ddebf6
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Feb 18 23:00:58 2010 -0700

    First pass at user profile formatting updates. Moved buttons to the top, simplified HTML and CSS.

commit 934cc8d7eebf926fb6c1cc8f27a611a41e915dc6
Merge: 63ec1c5 f116af5
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Feb 18 19:32:57 2010 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 63ec1c5e48ef480c8bf6a6138e541fe1ad4fdb44
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Feb 18 19:28:13 2010 -0700

    Absolutely position the 'Add comment' button on the left for RTL. Fixes part of the reopened #869.

commit b103306f3d60407fd4e97ec601ba9baed467f766
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Feb 18 19:26:07 2010 -0700

    Don't need 'right' class here. Positioning is absolute to the right.

commit f116af5287f7809e907ee56dbfa582f474738ae6
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Feb 18 17:54:29 2010 -0800

    Fix for tickets #1024 and #1025: Fix formatting of album tree list in the organize dialog, and (magically) drag and drop move to another album works as well again. Tested in FF3.5, Chrome5 on Ubuntu Linux.

commit 794660d73ee7749541057f8ffa67c3d211f0ceb3
Merge: 4c63753 934cc8d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 18 16:34:04 2010 -0800

    Merge branch 'master' of github.com:gallery/gallery3

commit 4c637530440860a90ac39fe04037ed8adfcbe17a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 18 16:33:57 2010 -0800

    Restore the user_profile.php change from reverted
    409121942590e12692eaf4e6e9e8b71bfe5ed60c that had this comment in the
    change: "Also fixed a UI bug: No longer showing the edit user buttons
    to admins in the profile view (to be consistent with the requirements
    in the controller)."

commit 0d72daf3d2d831ca3588ebabe720029bab3ccb8f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 18 16:32:25 2010 -0800

    Restore the gallery_installer change from reverted dcddc68f58dac2f0fe71f5a00ea4af32618efa13
    that casts $powered_by_string from SafeString to string.

commit 7d98d4b7b9d16f32ed98c8eeb051be4149468dc6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 18 16:20:59 2010 -0800

    Revert "Fix for ticket #491: Make user and group names translatable."
    
    This reverts commit 409121942590e12692eaf4e6e9e8b71bfe5ed60c.

commit 99c131e845b5bbfa22b93fa783b5ce671bc27e40
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 18 16:20:23 2010 -0800

    Revert "Never assign a SafeString instance to a Model member (or hell will break loose)."
    
    This reverts commit dcddc68f58dac2f0fe71f5a00ea4af32618efa13.

commit d3e07f8a97627a500bad07ce0a68ac91a766ccd4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 18 16:19:41 2010 -0800

    Revert "Fix for ticket #1017: Handle the common case of t(html::clean($var)) by casting SafeString instances to string in translate()."
    
    This reverts commit 4ca55a90ee2f8e1d8595b0ec53a601d6c65475f6.

commit 22bc871e2b04633c7c50bdd86ae73c8e41aaaaae
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Feb 18 17:54:29 2010 -0800

    Fix for tickets #1024 and #1025: Fix formatting of album tree list in the organize dialog, and (magically) drag and drop move to another album works as well again. Tested in FF3.5, Chrome5 on Ubuntu Linux.

commit 45910ffdc051ab4298269f1398f43d00517d4884
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Feb 18 14:43:18 2010 -0800

    Improve setlocale() call, using some of G2's locale fallback code to match the platform's locale names.

commit 8f39e6844914f4c12c9f7309bd4d04584b02a611
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Feb 18 14:43:18 2010 -0800

    Improve setlocale() call, using some of G2's locale fallback code to match the platform's locale names.

commit 74472dc83ca897423c630dce0d1d7e3b13bb0b5f
Merge: eb1cdd0 4ca55a9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Feb 17 06:46:48 2010 -0800

    Merge branch 'master' into talmdal_dev

commit 4ca55a90ee2f8e1d8595b0ec53a601d6c65475f6
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Feb 16 23:54:39 2010 -0800

    Fix for ticket #1017: Handle the common case of t(html::clean($var)) by casting SafeString instances to string in translate().

commit 3b1b2bfea9592269717fdd462fb1e5137bd4f8dd
Merge: 61f8af6 c1b13dd
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Feb 16 21:58:09 2010 -0800

    Merge commit 'upstream/master'

commit 61f8af6e4cd33a6e226221fd81fcfe2e5afa1081
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Feb 16 21:56:56 2010 -0800

    Fix for ticket #1020: Fix RSS feed validation of album / recent items feeds.

commit c1b13ddd9f8e692b4c525bffdf6bbe8718c008a8
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Mon Feb 15 19:05:45 2010 -0700

    Apply zoom to g-photo and g-movie to hold height and properly position g-context-menu, closes #1018

commit 5e25d2f7f11a75386e3c7f3d1d0c496eb3287cac
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Feb 15 14:27:48 2010 -0800

    Put focus on password field in reauthenticate dialog.

commit 6c89bb88789257d1dfe4c2ce6eb14e64fe87507c
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Feb 15 13:51:32 2010 -0800

    Update of reviewed XSS audit data.

commit e754bc18ea5dfd93beae5bad1c743610ceeef6e3
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Feb 15 13:44:37 2010 -0800

    Input sanitization

commit dcddc68f58dac2f0fe71f5a00ea4af32618efa13
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Feb 15 13:12:38 2010 -0800

    Never assign a SafeString instance to a Model member (or hell will break loose).

commit 0b0c8cbb92efdb2c1ce5afe7202ac79e304cc6af
Merge: a597b57 7b08be1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Feb 15 12:30:05 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit a597b57210b48241781f31d3f277e274d3ca6874
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Feb 15 12:29:49 2010 -0800

    return the absolute url not the relative for the full size, resize and thumb images.

commit 7b08be11399ce3d5c8603902f463244559b71870
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Mon Feb 15 13:24:28 2010 -0700

    Initialize context-menu hover using g-photo/g-movie, not the image or movie object. Closes ticket #808

commit eb1cdd037646b3697b64753652669fa9e25a5c8e
Merge: e41a2d4 4091219
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Feb 15 06:27:17 2010 -0800

    Merge branch 'master' into talmdal_dev

commit 409121942590e12692eaf4e6e9e8b71bfe5ed60c
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Feb 14 19:26:34 2010 -0800

    Fix for ticket #491: Make user and group names translatable.
    Also fixed a UI bug: No longer showing the edit user buttons to admins in the profile view (to be consistent with the requirements in the controller).

commit 667d65aea460ea601858c54976495d294d93f017
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Feb 14 18:33:38 2010 -0800

    Fix for ticket 901: Wrap Gallery version string into bdo tag to override the BiDi algorithm. Also, properly marking the "Powere by" string for translation.
    See: http://www.w3.org/International/tutorials/bidi-xhtml/#Slide0420

commit 30dcaaa2365ab88c0516a10bfa287fd2208dcf57
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Feb 14 18:33:10 2010 -0800

    Need to allow access to ::change_provider for CLI, to make packager work.

commit 0eb9b43a3388b1de801cc4ffdfcbcc0e0d236858
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Feb 14 17:26:57 2010 -0800

    Enable session expiration. Currently, it's set to expire sessions after 7 days of inactivity.

commit 7abaef3ef212baeeab4fa32e98d1cc6c5d501ffe
Merge: 8240874 4204d55
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Feb 14 17:08:38 2010 -0800

    Merge commit 'upstream/master'

commit 824087416a2469cf044b4a9193a0047c6c889333
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Feb 14 17:07:31 2010 -0800

    Avoid PHP warnings when the DB host string has no port.

commit 4204d554b8edf7963cd1b755ee8ef1873838acb6
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Feb 14 17:27:08 2010 -0700

    On search results, if g-item's onhover height is less than it's siblings set height, set the hover item's height equal to its siblings.

commit 74471df7770784887bd44cfbe02f48ec12bf8532
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Feb 14 16:12:18 2010 -0800

    Minor security tightening of IdentityProvider::change_provider().

commit ed401fc8a682c49a9e740e41b4401165a28dfd96
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Feb 14 15:05:38 2010 -0700

    Add zoom attribute to #g-banner to fix issue banner display. Closes #863

commit 141595e7096befe63d5c8a7176986f2e7bacbb5c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Feb 14 07:35:03 2010 -0800

    Create an items REST collection requests that accepts a list of resource urls and returns the items associated with them.

commit 897215689c3b85e6df9085291b3a5b60b7e69b08
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Feb 14 07:32:35 2010 -0800

    Remove the dirty flags from the information returned from the rest request for an item.  In addition, add links to the images.

commit f37b93a7eb34c766d2d741064a611afd1760c959
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Feb 14 07:31:11 2010 -0800

    If the return object is empty still return the empty object in the json response.

commit 378c7fb45a07601945f1e8f369f1cba68866556b
Merge: 0f66db5 995e592
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Feb 14 07:19:29 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 0f66db51efc427482aaf3b575fff84f015a3a2ab
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Feb 13 18:03:46 2010 -0800

    Change JavaScript reauthentication check to check via XHR.
    Benefit: Getting the real deadline this way, not interfering with an ongoing maintenance task.

commit 64e5d438c7ce291dd030b51d1467fc8736f0aa27
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Feb 13 13:57:02 2010 -0800

    HTML validation, avoid empty <ul>

commit 1a951cb7f61b33437c2e9b04da0565393d072c03
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Feb 13 12:35:39 2010 -0800

    HTML validation fix (<script>)

commit 2dad1d7cd15bed3c89de11cadf4b3b5c43134f69
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Fri Feb 12 20:59:26 2010 -0800

    Some HTML validation fixes (don't render empty <ul> lists, empty id attributes, use &amp; not &)

commit 8412aeb1337c4060a77af7c94441ca8cbc6bb4ad
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Fri Feb 12 19:05:44 2010 -0800

    For consistency, use straight Kohana_404_Exception instead of the event system.

commit e41a2d4e5226c45a5201df91ca6633a40b357630
Merge: dcd7a8f df8273e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Feb 14 07:11:14 2010 -0800

    Merge branch 'master' into talmdal_dev

commit df8273e3f26f35ad87fd6f96610f370bdad7f1e5
Merge: da25122 995e592
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Feb 14 07:11:11 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 995e592a3d7e6b6778c2c3a2e9bed8e087252f57
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Feb 13 18:03:46 2010 -0800

    Change JavaScript reauthentication check to check via XHR.
    Benefit: Getting the real deadline this way, not interfering with an ongoing maintenance task.

commit 293fa809414bd3c01935609c20f3e2813f6fab81
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Feb 13 13:57:02 2010 -0800

    HTML validation, avoid empty <ul>

commit da251228cbb54818852c49d37ec7eb31f2313160
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Feb 13 13:44:09 2010 -0800

    If the return object is empty still return the empty object in the json response.

commit dcd7a8fbb8924665a07582aa53f07a86ef922287
Merge: 650845e 36702b1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Feb 13 13:00:41 2010 -0800

    Merge branch 'master' into talmdal_dev

commit f0949b8adbde311e85dd7b96bc5f8aaed78cba3b
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Feb 13 12:35:39 2010 -0800

    HTML validation fix (<script>)

commit 36702b1397dcac9ba5a607f62e2a1caeb307ac7a
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Fri Feb 12 20:59:26 2010 -0800

    Some HTML validation fixes (don't render empty <ul> lists, empty id attributes, use &amp; not &)

commit f5d00863b880d424c61a95f966b1d9a983b0cf58
Merge: 7e47c3b e88e976
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Fri Feb 12 19:06:28 2010 -0800

    Merge commit 'upstream/master'

commit 7e47c3b19f522344f7083ea0bd9524bfff1a0eb2
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Fri Feb 12 19:05:44 2010 -0800

    For consistency, use straight Kohana_404_Exception instead of the event system.

commit d53f6d0e052fb455059170a311640fcd06cad798
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Fri Feb 12 16:40:44 2010 -0800

    Fix for tickets 1009 and 603: Show a themed error page to guests / registered users (not to admins though). And show a login form to guests for 404 (incl. insufficient view permissions) errors.

commit e88e976fc4255d323a1f5919453604ecf467ed0d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Feb 12 13:49:14 2010 -0800

    Tighten up the text.

commit 650845eddaad250374330a14c47cda62bf41f20a
Merge: 09739df ce71ea6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Feb 12 11:35:45 2010 -0800

    Merge branch 'master' into talmdal_dev

commit ce71ea6aa7eac72e54b1a9d7722c87beb61327de
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Feb 12 04:53:26 2010 -0800

    Revert "1) Add a depth parameter to retrieving an item thru the rest api"
    
    This reverts commit 3439671bcfb99c1884285e4b4e53295f044e688f.

commit 3439671bcfb99c1884285e4b4e53295f044e688f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Feb 12 09:52:57 2010 -0800

    1) Add a depth parameter to retrieving an item thru the rest api
    2) Standardize the structure of members so that client programs can consistently
       parse the return information.
    3) Added a summary parameter so that client programs can easily determine if the
       information returned is summary (item type, item title) or the full meal deal

commit 09739dfd2c52ebc1b898b6e3b3aabd8fe41f018e
Merge: a893b03 cd45c94
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Feb 11 21:27:16 2010 -0800

    Merge branch 'master' into talmdal_dev

commit cd45c94fe69f24b0f80a79e4b9c402763739ecfc
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Feb 11 15:59:17 2010 -0800

    Get rid of unnecessary view file.

commit dc94f6e45a7d45747582cd0ab99439330cd844f1
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Feb 11 14:35:05 2010 -0800

    Include user name in logging message for failed password reset. As Bharat points out, t() ensures that parameters are escaped for XSS.

commit 6353a7c2decd62098ebc96951c38c9aade44fc4c
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Feb 11 14:28:32 2010 -0800

    Security: Fix leaking of album / photo names. Reject previous fix for ticket 1009.
    Side effect: Renaming auth::required_login() to login_page().

commit cd98f85260efd90cc93db78ee1efed997d0221c2
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Feb 11 13:11:31 2010 -0800

    Fix for ticket 1010: Don't leak valid user names in "forgot password" form.
    Includes fixes for user forms as well (edit user / email / password).

commit 1ada27916fa4575f6b093db17f4165d8cce16088
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 11 05:24:16 2010 -0800

    Use the admin/users/edit_user_form version of the user editing form
    right after initial install so that we're not requiring the user to
    re-enter the auto-generated password to change their password and
    email.
    
    Fixes ticket #1007

commit a893b0317d5489552c4c001901ff246e0ec5af1d
Merge: b42c736 8ef08d2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Feb 10 17:48:39 2010 -0800

    Merge branch 'master' into talmdal_dev

commit 592689a759a281a77aa2c622f199357eda43d9c2
Merge: 6a40e0a 8ef08d2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Feb 10 09:55:39 2010 -0800

    Merge branch 'master' of github.com:gallery/gallery3

commit 8ef08d20883d9b9aa0b7560ce3bf6da8a6632149
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Feb 10 08:53:39 2010 -0800

    Refactor the code to display the login page if the user does not have view
    permission into the common auth::require_login() method.

commit 17f0a1b10f3df250129188316c14b01f0e3b45f0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Feb 10 08:45:14 2010 -0800

    If the user does not have permission to view the album, photo or movie, redirect
    to a logon page to allow the user to login.  Pass the target url as a session
    variable to allow the user to be redirected where they want to go if the login
    was successful.  Fixes ticket #1009.

commit f6c615c379bb6950dacff34bfda73a616dce6e6b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Feb 10 08:32:30 2010 -0800

    Use the helper ulr:current instead of manually creating the continue url.

commit b42c736607591f8e2bed4aea474ad622b3f7445a
Merge: 5e70318 8763e47
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Feb 10 08:07:20 2010 -0800

    Merge branch 'master' into talmdal_dev
    
    Conflicts:
    	modules/organize/js/organize.js

commit 6a40e0a341d84e792990b22b10375b80e41bf6ba
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 9 16:04:36 2010 -0800

    Revise the "review your permission" text to my liking.

commit 8763e475adc7bb26ed9705c9d61a1db2b20e60c4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 9 15:52:38 2010 -0800

    Move diff::compare to be test::diff

commit 09d3f483234943c65cfc717cf1eb969d1d04ba73
Merge: 8a8d8b4 92c2dd6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 9 15:50:30 2010 -0800

    Merge branch 'master' of github.com:gallery/gallery3

commit 92c2dd61ffa2140ec484ede0b75bb10b35229e63
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Feb 9 21:57:04 2010 -0700

    Formated upgrader for RTL languages. Closes ticket #883

commit 8a8d8b4bc4425bddb4661df3bf081d131f369171
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 9 15:49:43 2010 -0800

    Rename item name and slug if necessary to avoid a conflict when we
    move photos.  Fixes ticket #957.

commit 86721ce280f02dbf4127c83bb03372e09e616519
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 9 15:21:40 2010 -0800

    Whitespace.

commit 46744ef54962c8796cc74ef04deac0aad4b0a3d4
Merge: e1c0877 c0a5984
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 9 08:53:38 2010 -0800

    Merge branch 'master' of github.com:gallery/gallery3

commit c0a598417cc1f9a5534348ec5edb9c138293bc01
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Feb 9 13:54:14 2010 -0800

    Change access::can to access::required in g2 redirect, to please the controller auth code audit test.

commit 157872434dc659cecf9e26acbe8006b2f0bc4e5f
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Feb 9 13:41:35 2010 -0800

    Import hashed passwords from G2 (which will only work if they're PasswordHash passwords, not if they're G2 style md5 / salted md5).

commit dcee225935007fea06360591ab31546ac8495784
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Feb 9 10:17:48 2010 -0800

    Better handling of G2's multi level sort order in g2_import

commit e1c08776468c2e2c5c5cb0926b78e24e29989f3c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 9 08:53:27 2010 -0800

    Add unit tests for item::move() in preparation for renaming when there
    are conflicts (see ticket #957)

commit 5e703186fbf0c0cb689fc737de7c074249361ef9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Feb 9 08:23:43 2010 -0800

    Current state of organize. works for all browsers except IE. IE no longer implodes, but dragging doesn't work. Selecting works fine, either by using the lasso or clicking. Ctrl-Click adds to the selection.  The problem is that when a drag is attempted, the selection gets lost and things start falling apart.

commit 1b60078bf7457046968174ae76164d25d21cf93d
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Feb 9 07:58:56 2010 -0800

    Refresh installer code

commit 55d42ec9da0952361687257588788100a270ac9e
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Feb 9 02:16:49 2010 -0800

    Fix password reset confirmation

commit 55d1ce7fb7c3872295c1e7dbab41de94dd7e06d8
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Feb 9 01:51:04 2010 -0800

    More g2_import model validation fixes, and make import less noisy (don't copy each comment text to the import log).

commit 42bc1279257268e2c68b5f4b06e62e95ca8228d4
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Feb 9 00:46:09 2010 -0800

    Fix g2_import bugs related to item and user model validation.

commit 992d305e19f472f53cd4adba5e6771d3116980ce
Merge: 13cfe2d 9ca521c
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Feb 8 22:16:30 2010 -0800

    Merge commit 'upstream/master'

commit 13cfe2d61d379c5b203582b3f9d8312c7791b3ae
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Feb 8 22:15:38 2010 -0800

    Change admin area timeout from 20 to 90 minutes

commit 9ca521c71021b43f13950d246a15f6f0da0b7989
Merge: 6dfab72 0081748
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Feb 8 15:38:59 2010 -0800

    Merge branch 'master' of github.com:gallery/gallery3

commit 6dfab72922bf20104d6032eb292d59c6bd6578ba
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Feb 8 15:37:11 2010 -0800

    Override Input::clean_input_keys() to sanitize malicious values out of
    strings instead of dying.  This at least gives us graceful degradation.
    
    Fixes ticket #764, patch thanks to djnz.

commit 008174859dc25dade593abdf4ce670bc6c7ef332
Merge: f9377bc afdb984
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Feb 8 13:06:40 2010 -0800

    Merge commit 'upstream/master'

commit f9377bcbd37886f09cfcf72a89f73629825e63dc
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Feb 8 13:05:18 2010 -0800

    Suppress errors when checking for readability of /proc/loadavg. Often this file will be protected by openbasedir, and is_readable will trigger an open basedir warning.

commit afdb98412e5611894ca96659e1db452d9e7330c2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Feb 8 11:26:40 2010 -0800

    Fix the missing object problem in ie7. Fixes ticket: 1003. There is still issues with selectables and draggables working together in IEx

commit 47293fcb03d51e5b4691e9905019c1ff1732b0f4
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Feb 8 09:15:02 2010 -0800

    Correct tree branch alignment in IE

commit f9d00aa7429599f46e09b23e8313932ac5e186c3
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Feb 8 00:30:36 2010 -0800

    Fix for ticket 1008: Redirect to destination after re-auth.

commit d0f6839c25c328c1bc0baff87974a8b268933361
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Feb 8 00:05:17 2010 -0800

    Fix Arabic language name. Thanks shaibn for reporting the issue. Verified with CLDR data.

commit 3012ca370e038d1762062f682e6cd01a031ccd8c
Merge: 0a6630a c9fdc4b
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Feb 7 22:31:17 2010 -0800

    Merge commit 'upstream/master'

commit 0a6630af2d63add9b31e382e46e8922f5845d361
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Feb 7 22:30:08 2010 -0800

    Improve likelihood that image block shows up for small photo collections by retrying the random query a few times.

commit c9fdc4bf03107b24e846b28aeae74a53664610c7
Merge: b8047db bca3eeb
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Feb 7 21:45:49 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit b8047db5393ddbe27d6ee391845802054b92bf79
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Feb 7 21:40:34 2010 -0800

    Revert "Add the scheduler component to the admin maintenance screen."
    
    This reverts commit 48cb5021c6bd7e65a13a0ff50a9e76f72da7d3a1.

commit bca3eeb92399093214ac0f5a74a380b14ffd0405
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Feb 7 21:39:26 2010 -0800

    Import G2 permissions in the import process. Ignores user and item specific permissions.

commit 316b0583b374a5754ea112c00464d118917cdbc1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Feb 7 21:38:51 2010 -0800

    Revert "Refactor the admin maintenance screen so that events are used to
    populate the action buttons and other content such as the list of scheduled
    tasks."
    
    Leaving this api out of RC1.
    
    This reverts commit 19fee6b5e4ceb8a5f90cafe4ad770856ece108ef.
    
    Conflicts:
    
    	modules/gallery/views/admin_maintenance.html.php

commit 9695041a86ffeb1bfc5ced654cb04a9833eb9288
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Feb 7 16:56:19 2010 -0800

    Change welcome message dialog to link to the user_profile page instead of the change user dialog.
     a) the edit user form doesn't include the password anymore
     b) the new admin would probably also like to change the email, so directing him to the profile page with options to change the pw / email.
    
    Ideally, we'd have a special purpose edit profile page for the install experience, without prompting for the randomly generated password. But that's something for another task.

commit 8fc346e9b67204c31e2bfeb59a5cbaa49e308085
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Feb 7 16:44:07 2010 -0800

    Addendum for ticket 585: Handle case C), redirect the admin to a non-admin page when the admin area session expires, before the admin has a chance to send an XHR admin request, for which we wouldn't have a good answer.

commit 0c5402fe0a288335f1662552026da5ffb756b13b
Merge: f93528f 2337fa9
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Feb 7 15:40:47 2010 -0800

    Merge commit 'upstream/master'

commit f93528ffab19b7a733fc8fb21c22853d8ec0d2f5
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Feb 7 15:37:32 2010 -0800

    Last partial fix for ticket 585: Compartmentalize the admin area and require active authentication every 20 minutes to access the admin area.
    
    Also renaming auth::validate_too_many_failed_password_changes to validate_too_many_failed_auth_attempts since it's used in this generalized way in 3 places now.

commit 2337fa93e6f5da3dd89454235d76a61b9181f0ab
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Feb 7 15:13:13 2010 -0800

    remove debudding statement and if no target is found then assume the insert position is after the last element.

commit 18b0096751f45d7946a2277070dd3dd1f5db4a89
Merge: 370e0e2 d6beef8
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Feb 7 15:06:14 2010 -0800

    Merge commit 'upstream/master'

commit d6beef86132f1c73170a3957db84b716c538c07e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Feb 7 15:05:39 2010 -0800

    The drop target marker appears in the correct spot whether we are in ltr or rtl mode.

commit 370e0e2f32e5092e1655116edbea9a607c6ed85a
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Feb 7 15:02:41 2010 -0800

    Fix installer code for version 27, and introduce new module variable in version 28 as a preparation for admin area compartmentalization.

commit e2e637064aa3cd66ddd3636d85314a168f2c9c91
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Feb 7 14:25:05 2010 -0800

    The adjustment for before or after based on whether the locales rtl or not is now done in the browser.

commit 6783de24572eb3a84dd43d125686b5f1df33f305
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Feb 7 14:17:58 2010 -0800

    Remove the redundant reference to ["force_rtl".

commit a54a81f9c77cde8ab4105b52c1864298c819422f
Merge: b6c0d3a eda6e3a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Feb 7 13:59:59 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit b6c0d3a48ca4fa9296b23a1c4d73fb0573f1b92f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Feb 7 13:55:17 2010 -0800

    Refactor the is_rtl() helper into the Gallery_I18n class.  This allows checking
    for a config value "force_rtl" which will layout the gallery pages in rtl mode
    without having to change to an language that is no longer understandable to the
    developer.
    
    Adding the line "$config['force_rtl'] = true;" to the config/locales.php file
    will make it happen.

commit 7df4d795e8c5d4b100637f0fea0ad8ef7f6aeabb
Merge: 6340d8c adac97b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Feb 7 13:54:37 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit eda6e3af06aa51281e614ae9a5e7b4ad4fbbae17
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 7 08:49:37 2010 -0800

    Rename user_authenticate_xxx events to user_auth_xxx for brevity.

commit aff5d1cef4cc2514fe6d714788fffcf418d8fc5b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 7 08:45:10 2010 -0800

    Create the concept of a "failed authentication" as semantically
    separate from a successful or failed login.
    
    1) Rename user_login_failed event to user_authenticate_failed
    
    2) Rename failed_logins table to failed_auth (bump Gallery module to
       v27 to rename the table)
    
    3) auth::too_many_failed_logins -> auth::too_many_failures
    
    4) auth::record_failed_auth_attempts -> auth::record_failed_attempts
       auth::clear_failed_auth_attempts  -> auth::clear_failed_attempts

commit adac97b5372322be5154996974a6496198105d16
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 7 08:28:32 2010 -0800

    Add prefix support for the target of RENAME TABLE.

commit 2c3c126aafaa4d7ed86075927887636042117a1c
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Feb 6 20:07:58 2010 -0800

    Fix ticket 930: Use the first frame as video thumbnail if the video is shorter than 3 seconds. And fall back to the default thumbnail if that operation fails.
    
    Thanks to lsowen for providing a patch!

commit a6170dc065856c6c4b6f69a4571fe19dee87d0ee
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Feb 6 18:37:25 2010 -0800

    Fix maintenance view for the case when g2_import is configured and the user replaced the original g2 directory with the .htaccess file only.

commit 163391ee391627f9c2b4eac359104809e2706a9b
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Feb 6 17:43:33 2010 -0800

    Partial fix for ticket 585: Require current password when changing an account's email address.
    
    Still leaving the user/group admin page wide open though.

commit 6340d8caf2261199e029841baca66e302c861679
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Feb 6 16:43:55 2010 -0800

    100% was just to wide, so scale the width back to 90% for organize album tree branches.

commit 6a9c6163d60ea2e7bb3c6657869c9a506ed7267c
Merge: 7232b6c 81b5957
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Feb 6 16:34:37 2010 -0800

    Merge commit 'upstream/master'

commit 81b595743f75aea96a8159c8ab827fa3d25233ab
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Feb 6 16:30:25 2010 -0800

    Force each branch of a tree onto a new line.

commit 7232b6c026c3fe371b6846a8a4536a1b661804c4
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Feb 6 16:29:51 2010 -0800

    Fixing G2 url mapping for G2 default style URLs (where ShowItem and DownloadItem URLs aren't rewritten in G2).
    
    Note: For a perfect solution, we should add 2 map entries for each of G2's ShowItem and DownloadItem URLs, one for short and one for long style URLs.
    E.g. A G2 installation might have been using short style URLs not for its complete lifetime. And long style URLs are supposed to work in G2 even when short style URLs are enabled (and its used that way in bbcode / as a way to get permenant, id based URLs from G2).

commit b0a73757d220ca7a60109c50937a5851e5e44227
Merge: 0f9d23d 33b39ef
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Feb 6 16:14:44 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 33b39efb491d730c8653ca3c06a22297338aa8b8
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Feb 6 15:46:13 2010 -0800

    Add core.DownloadItem redirect for G2's Photo and Movie items (was previously omitted, but we already had core.DownloadItem redirects for derivatives)

commit d069155228acb9c9e86814a89cb2400434d18321
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Feb 6 15:08:10 2010 -0800

    Fix g2 redirects for non-admins. The g2 URL mapping controller was accidentally declared as admin controller.
    (The previous attempt to fix this isn't a bad change either, thus keeping the external permenant redirect).

commit e092405fdf23412a27903227bc6d2f422f4e9f2d
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Feb 6 14:59:28 2010 -0800

    Fix g2 redirect to use external redirect (and declare it as permanent).
    Redirects weren't working for me in Firefox 3.5 when not signed into G3 (and all items are public).

commit d8d1155615739a9e6f1f12d4f1ce2ec7cc9cd444
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Feb 6 14:20:19 2010 -0800

    Fix maintenance view, which was broken when the g2_import module was installed but not configured correctly.

commit 9bede5763a63bec7b1a7ea2ba9f4e8cea33087d5
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Feb 6 13:15:02 2010 -0800

    Fix g2_import admin screen: It wouldn't work if it didn't know the location of G2 yet.

commit 7099fc71f11ef8d3dd613d96a04a4824a827c714
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Feb 6 13:05:44 2010 -0800

    Fix for ticket 1004: Replace all uses of split with explode (none actually required regular expressions). Thanks to Brian Hartsock for providing a patch!

commit 5c0c33782d7dd3556adecb9593f25f2cff06401a
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Feb 6 12:19:55 2010 -0800

    Fix for ticket 892: Avoid double escaping of HTML entities, instead use Unicode in the source code for the locale names (as we do in other places already).
    
    Note: Also fixing the localized name of Ukrainian. For some reason it was garbled before.

commit 4977c00db1b812abad5ad2d530e1dd44171b6d85
Merge: 31aaf75 15e2207
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Feb 6 11:32:53 2010 -0800

    Merge commit 'upstream/master'

commit 0f9d23d074c81eafab05ce5d64909da624a86422
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Feb 6 10:34:57 2010 -0800

    Cleanup the position of the drop marker.

commit 15e22076552929bf1f45888945f65de621aa2aac
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Feb 6 10:12:53 2010 -0800

    correct layout of html for readability

commit 83f61ff5cf9c51c998dac9dad23d74ab7339ead5
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Feb 6 09:47:56 2010 -0800

    Insure that the 'Ascending'/'Descending' string are translated on the organize dialog.

commit f631c2a0e5d1de4d17478993fc0cac2c9a989df2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Feb 6 09:30:25 2010 -0800

    Fix up Admin_Users_Controller() form handling now that user_form.html
    is gone.  Fixes ticket #1005.

commit 73527fba611d7d441c6fd2e988510cb0c4e46f99
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Feb 5 23:38:06 2010 -0800

    1) Manually added the .selectee class on subsequent downloads. fixes ticket #970
    2) Reworked the calculated of the drop target marker to account for scrolling.

commit f5391b8424281ee02067c525eb9aeb04db0be45c
Merge: 64c37ae bc14f33
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Feb 5 15:51:02 2010 -0800

    Merge branch 'master' into talmdal_dev

commit 64c37aed0787ee01c89df382f9645f35a7e6ba14
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Feb 5 14:38:24 2010 -0800

    continuing cleaninup organize javascript especially the drag and drop functionality.

commit bc14f33ae134dd9c93bf35ad90c91d84fdac587f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Feb 5 11:15:28 2010 -0800

    Fix an issue where the dragged item was always inserted after the target image.

commit 94cc061e8b51704c6cb38d637aa3082ee4adb1ca
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Feb 5 10:25:55 2010 -0800

    Correct alignment in IE7. fixes ticket #795

commit 8518fb267404c16fff54492b3e37fb03c64f0455
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Feb 5 08:53:38 2010 -0800

    Add busy animation when doing the drop.

commit a8d30dcecf40210096a4adaea0f5d231b69ead6a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Feb 5 08:08:12 2010 -0800

    Improve the handling of the drop target marker when dragging items within the
    grid. Originally the borders disappeared not they don't. A single element is
    used to contain the drop target marker. This element contains all the position
    information for the drop handler to determine where the item should be
    positioned.
    
    In addition, the drop target marker is removed when the drag extends outside
    the grid and is re shown, when the cursor re-enters the thumbnail grid.

commit eff7de3852c1a11ee82fdb7467a6e51fa106af0f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Feb 4 08:51:15 2010 -0800

    If the locale is rtl then change 'after' to 'before' or vice-versa. Fixes ticket #939.

commit 3d2a3bee572b8ccddf08982c5596b35a0e983b85
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Feb 4 08:42:55 2010 -0800

    Provide better formating for the album tree in rtl mode.

commit c82061391717a746fb61696ff48152b1e907b49c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Feb 4 08:19:38 2010 -0800

    Don't change the current album when items are dragged to a different album in the album tree. Fixes ticket #959.

commit 48efd21556dbc4f9f4046f9d2f685726b1c006ff
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Feb 3 22:48:47 2010 -0800

    Provide visual feedback when over tree branches.

commit 95b26db82c3f835f66cdb32aef13aa84a6a206e5
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Feb 3 13:56:04 2010 -0800

    1) Simplify the layout of the organize dialog content.
    2) Use CSS to layout the thmbnail grid to the full dialog size.  Fixes ticker #848.
    3) Separate css that can be themed into organize_theme.css.  This isolates the themed components into a separate file for easy of overriding by a theme.

commit aa4ed454737d45bf8140fd84f2eea2e04ed4a7d6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Feb 3 09:43:22 2010 -0800

    Differentiate between selected and non selected items.

commit cc1d25ae0a706ea5969b88e871549800630b7e03
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Feb 4 07:46:10 2010 -0800

    remove debugging statement

commit 61c3dcacd1fb628bd4c5984a887a2b47f89c2a79
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Feb 3 20:13:33 2010 -0700

    Fix duplicate checkmark issue in Safari, Opera, elsewhere (ticket #902). This has been a persistent issue. Fix seems to turn of CSS BG on the row, then turn it on for tr.g-success td.g-success {} selector.

commit 1f51d663a0d651cfc8ff172357ce1b57823f8480
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Feb 3 08:18:53 2010 -0800

    Correct missing function name.

commit 99a7f470b93d35717f8d5979d05da6cf05a1dd20
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 2 21:48:01 2010 -0800

    Protect password changes against brute force attacks.

commit 6e1b761b12e13566875804c33efe2ae130ffa32e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 2 21:36:01 2010 -0800

    Require the current password to change your password.
    Fixes ticket #585.
    
    Separate out the password change form from the regular edit user form.
    Require the old password to enter a new one.  While I'm at it, roll
    the password strength javascript into a Form_Script element so that we
    can get rid of the old view (which incidentally fixes a bug where the
    password strength meter would go away on form errors).

commit b351ee48fe09efd570e22a02b82174c39ad86d46
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 2 21:34:20 2010 -0800

    Fix a bug in valid_password() where an empty password was considered valid.

commit 225fe81ce0121176dc11a646d78b3c3dcc479fa9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 2 20:50:34 2010 -0800

    Add an upgrade path to prevent the item title field from being empty.

commit 08f3f71ad93f9d834d6ba346f56fa58b455e0da2
Merge: aa65bb0 9ac3eca
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 2 19:04:20 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 9ac3eca4777436533257045e66e05cac41da97ad
Merge: 1c0e5ea 3c3671c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Feb 2 15:01:13 2010 -0800

    Merge branch 'master' into talmdal_dev

commit 1c0e5eaa0d9b65863c9fd04aff940c1a2b7e682d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Feb 2 15:00:05 2010 -0800

    use html::purify to cleans the additional content on the admin maintence page.

commit f69493d1384108bf65fc2b92d25fc3b854dee929
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Feb 2 14:51:06 2010 -0800

    Update the xss golden file to reflect the changes to the admin screen.

commit d5a231225d3b4f1fe6a08f350b93b6410b2d1914
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Feb 2 14:37:26 2010 -0800

    Move the scheduler module to the -contrib repository for this release.

commit 19fee6b5e4ceb8a5f90cafe4ad770856ece108ef
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Feb 2 14:34:50 2010 -0800

    Refactor the admin maintenance screen so that events are used to pupluate the action buttons and other content such as the list of scheduled tasks.

commit 31aaf7555f51dd80cf1e97fd3c20a1c245cbf61b
Merge: be5f38a 3c3671c
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Feb 2 13:41:50 2010 -0800

    Merge commit 'upstream/master'

commit aa65bb0048411cbc657651899fb63f7afe2aa37a
Merge: 4116c7b 3c3671c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 2 13:08:27 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 3c3671cff25f28e21a702b1f665a6baa282d045f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Feb 2 12:30:23 2010 -0800

    Remove the test-transform:uppercase from the l10n css as it was causing problems with other text fields in IE and it violates our case standards. Fixes ticket #912

commit fe11e34cea8ea31c048af5f38d63220850b0293d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Feb 2 11:42:13 2010 -0800

    Change the view to display 'empty' when the variable value is a null string(""). Fixes ticket #987.

commit 370faf5f265e634b0828be9695cd6eb9676ff6f7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Feb 2 10:55:22 2010 -0800

    Display the error message for the in place edit.  Also improve the double click guard. Fixes ticket #1000.

commit 8a9301f756f5ed033bd86a9e275d6ed6e489c27f
Merge: a10bdd8 aa2e4de
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Feb 2 06:53:19 2010 -0800

    Merge branch 'master' into talmdal_dev

commit aa2e4de024a985f16beb8c1ad90daf0e668d2e28
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Feb 1 22:55:47 2010 -0800

    Corrected copy paste errors in g2_import task. Fixes ticket #949.

commit 4116c7bed1152cb34cc6298c04e0e1115eed4344
Merge: 469111d 519cc24
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Feb 1 22:45:39 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 519cc249c4e59e987af440a066f81271b29dd931
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Feb 1 22:32:22 2010 -0800

    Guard the gallery.in_place_edit::_show method so that if an attempt is made to show the inplace edit form multiple times, the form is only shown once. Fixes ticket #999

commit 469111d36a945b24bc5423d18fc19582b2bbb0a9
Merge: 81a1df4 43985ea
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Feb 1 21:44:58 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 81a1df4a504fdd7cdbef2b92e2b1257a65da98f9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Feb 1 21:41:16 2010 -0800

    Localize the name "conflict" validation error when creating a new album.

commit 22ea03847ab8251a2f068b801599043014834e98
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Feb 1 21:27:01 2010 -0800

    Localize validation errors.

commit 6030d4eb6540d5c10eb1ab862d81a48420e1ec78
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Feb 1 21:13:07 2010 -0800

    Fix a bug in valid_name where it wasn't checking for name collisions on new users.

commit a10bdd8f0e436e8bb41430ca5d18fb2e1682773c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Feb 1 17:13:29 2010 -0800

    Add a task scheduling module.  In the admin maintenance, create an event from an existing task.  When the task becomes due, it will run depending on traffic to the web site.  It uses the gallery_shutdown event to time slice the task.

commit 5ded9e8ac5935e41c08d1766974ce31890efd7f0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Feb 1 16:31:24 2010 -0800

    Refactor starting a task into the task helper so we can call it multiple times.

commit 48cb5021c6bd7e65a13a0ff50a9e76f72da7d3a1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Feb 1 16:28:52 2010 -0800

    Add the scheduler component to the admin maintenance screen.

commit e7c564133f6f50c2b14be9b0e2cad162f4531726
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Feb 1 11:02:36 2010 -0800

    Use single quotes on the <?xml tag for readability.

commit 43985ea2fb137aa7d532617271e37d7c20def3c5
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Feb 1 08:35:23 2010 -0800

    Update the description to reflect we are only removing "expired" files.

commit 64e014203c22ad437ce62fd622f176468c1b91f3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Feb 1 08:15:49 2010 -0800

    Correct the internationalization of the status message.

commit e1bf010d89c4ef2023f204834c468793d866483c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 31 20:50:52 2010 -0800

    Force all non-guest users to have an email address since that's
    required in model validation.  Without this, any save on a user
    without email will fail which means that you can't log in.
    
    Bump user module to version 3.

commit f8db2a9f8c39bdc92081f7c032f473515e2cea53
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 31 20:47:25 2010 -0800

    Update the install version to 2 to match module.info.

commit e98991b90f3fb1d81d510af20c58644441b83534
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jan 31 16:58:42 2010 -0800

    return a location method so the page reloads properly if the edit was successful.

commit c050acf30a7351bf0ef5b8ee206704c073e881c7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 31 16:07:41 2010 -0800

    Fix lots of warnings that pop up when we're in E_STRICT mode.  They're
    mostly issues around uninitialized variables, calling non-static
    functions in a static context, calling Session functions directly
    instead of on its singleton, passing non-variables by reference, and
    subclasses not using the same interface as the parent class.

commit c6676dd455d070aaded25f048269eee07248100a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 31 15:23:37 2010 -0800

    Remove obsolete call to _force_block_adder() which has been broken for over a year.

commit 225359637917aa8d3d416da78e38c45d48b6a5f0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 31 15:03:53 2010 -0800

    Remove debug code.

commit be5f38adea89bdb95be359aea3d97615b6b530a3
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Jan 31 14:03:32 2010 -0800

    Minir l10n message cleanup. Avoid <br/> in messages since the server normalizes them to <br />, i.e. leading to a mismatch.

commit 94ab9fdfeec6f3e2c8ab1a694d4fe9cfe9d8e45c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 31 14:02:00 2010 -0800

    Add a comment about error_reporting()

commit c5471a76a23897fcb40b3c4661ba898116dabaa7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 31 13:27:05 2010 -0800

    htaccess_works() can't use var/tmp anymore because that's locked down.
    So just create var/security_test and delete it when we're done.

commit ee35b0a9fe16b862e6d1080fec45b539e1b41375
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 31 13:10:34 2010 -0800

    Elide data that isn't useful from the REST array.

commit 4cd5c4cebbe80f90dd781336f9206be10113575b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 31 11:27:54 2010 -0800

    Second attempt to fix the timezone issue.  If the timezone is not set
    in phpinfo(), then force it to America/Los_Angeles for now.

commit dad537effedc51d7544e32a1b7b0ca70896d43af
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 31 11:24:00 2010 -0800

    Update the timezone field to match the setting in
    system/config/locale.php.  This fixes the "date_default_timezone_set()
    [function.date-default-timezone-set]: Timezone ID '' is invalid" error.

commit 359f6108b921938aa4445584b1e16c757467ae79
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 30 23:42:32 2010 -0800

    Remove edit permissions across the board.

commit a79d20a36135d50f77a7f11046b1d7ee392d46c7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 30 23:36:41 2010 -0800

    Use Item_Model::as_restful_array() to simplify tests.

commit d29028c4ea9002ac036a89a4478fb4640c86fedb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 30 23:36:11 2010 -0800

    Add Item_Model::as_restful_array() for convenience.

commit 69636955695476622b7f3019922afff14ea66380
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 30 23:22:53 2010 -0800

    Verified

commit d92ee7954efbf531b40ddd484f76cdfe16c0e53f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 30 23:15:18 2010 -0800

    Refactory auth::too_many_failed_logins() out of
    auth::validate_too_many_failed_logins() to conceptually separate the
    two.

commit 1470b99d1facd07fcb46c0c4e46896d339f5a75a
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Jan 30 21:42:57 2010 -0800

    Protect REST login controller from brute force attacks too.
    And make the REST auth token less predictable by using a better source for randomness.

commit cb92e58d40bfa866c07b10fe189bd653074a9917
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 30 21:16:47 2010 -0800

    Update install.sql -- gallery version jumps from 23 to 25 due to a mistake
    in the version 24 upgrade code.
    
    Update packager to serialize files so that we can serialize the new
    .htaccess files
    
    Update init_var.php to include the newly serialized .htaccess files.
    
    Fixes ticket #587.

commit c2a7a6a4e7b492c649462c1bb4e60c033819803e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 30 21:07:03 2010 -0800

    Lock down web access to var/uploads, var/tmp and var/logs using .htaccess
    
    Fixes ticket #587.

commit 79a1365991557d64776110b0a3a99ea42b1a70fe
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 30 20:43:53 2010 -0800

    Don't override the password in the database if it's empty in the form.
    Fixes ticket #995.

commit c8a8097ef2ebbb78d7d20b99f1ea2af3da946bca
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 30 20:40:28 2010 -0800

    Gallery module version 23, with the failed_logins table.

commit 2bfcec9620814a6f3d0163a174d7ba90efef369d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 30 19:48:57 2010 -0800

    Prevent brute force login attacks by reducing login attempts to 1 per
    minute after there have been 5 consecutive failed login attempts.
    
    Fix for ticket #589.

commit 86fd81ef2661718914e1d4eb63108a864b6ac14c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 30 17:41:48 2010 -0800

    Make url::merge() function use the same exact definition as url_Core::merge()

commit 69897b4c66e22607162ba8a1ae8c95c8f616f03a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 30 16:20:44 2010 -0800

    Fix the valid_admin code -- it was considering all non-admins invalid.
    Fixes ticket #997 (highest prime under 1000!)

commit dccb2b73ffe205e359eeea57e4c7c52e584eccc5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 30 16:19:00 2010 -0800

    Dump out validation errors so that we have some extra information in the logs.

commit 10e208ea5c1a98d509a520a5bd2cbd407ae2268a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 30 16:05:20 2010 -0800

    Fix #992: Digibug pops up a blank page and doesn't allow printing
    
    form::hidden() changed in K24 breaking this.  Also fixed the spelling
    of "$order_params"

commit a161436015364a039107e767f8c4af91dbec89ed
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 30 15:46:31 2010 -0800

    Remap parent_id and album_cover_item_id to and from RESTful urls.

commit 923a515ffb33d0ba15730ef4716f8ffe45cf19fa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 30 11:48:43 2010 -0800

    The user must have some edit permission somewhere to create a tag

commit 43cb6d9b56f802a5952d16b8412f8407dd8cf3c4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 30 11:38:40 2010 -0800

    Make the error page more robust in the case where there's a failure
    early on in the framework code before we can load Gallery_I18n.php

commit dcba664f74439e37cc269df0cf549a2fee552aeb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 29 20:37:48 2010 -0800

    Use ? or & as appropriate when appending output=html.

commit a04d0d278964c93b4829ec2e77f5f315abcba392
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 29 19:42:38 2010 -0800

    Add missing permission checks.
    Make the tag relationship an associative array.

commit a95609849e42656b35f0110a08cc4436ad56b916
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 29 14:53:40 2010 -0800

    Use var_export instead of print_r for better clarity.

commit d4998e37d859e4702407b9a85af6a8ac2fabe686
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 29 14:25:57 2010 -0800

    Don't forget to flush the relative_url_cache when updating the slug.

commit 98bcb95b1065a044909c4c4ff15d93fafc793df7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 29 14:20:34 2010 -0800

    Go through all slugs and make them legal values.
    Upgrade gallery3 module to version 23

commit 844d40a759db80108d20684303680d2e489af9d0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 29 14:12:07 2010 -0800

    Oops, forgot to bump the version to 2 in install().

commit 3e2adae95385295ca6dfe1c5ff1c36c18ca0aab2
Merge: 45cdac9 c4e3604
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 29 14:07:15 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 45cdac973d35de083875ed966ac687b805d60e7f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 29 14:06:36 2010 -0800

    Oops, somebody (me?) forgot to update the gallery module version
    number in gallery_installer::install() so the install.sql was out of
    sync.

commit c4e360431564627003e4c7864b5dd5a07297e91e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jan 29 14:04:27 2010 -0800

    Strongly type the argument list to the model::validate method.

commit e4d9ea3394ee2db82d9dee6c6ed78543fd0f78fb
Merge: 1bc0d05 660130c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jan 29 11:39:22 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3
    
    Conflicts:
    	modules/gallery/views/in_place_edit.html.php

commit 1bc0d05760df7bff5cee0a330b5b7181b3c49835
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jan 29 11:36:35 2010 -0800

    Replace <?= form::close() ?> with </form>. Also add a call to access::csrf_form_field in the form template. Fixes ticket #996.

commit 660130cf1ab9fd6cb051712b57966b191064a6a6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 29 11:23:28 2010 -0800

    Work around a weirdness where empty() doesn't work on input values.

commit 3f5ad7d77a4b877220cd410afbb286dce5b15b75
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 29 11:20:35 2010 -0800

    Clean up form validation code.

commit c214dfd0948c1878dbd034694c2d8d6f8c8e1180
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 29 10:54:59 2010 -0800

    Clean up form validation code.

commit 0d73738099f7c12f2185018a29b647763c9d36ce
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 29 10:13:10 2010 -0800

    Stop using obsolete form::close()
    Update the way we include the hidden CSRF field for InPlaceEdit.

commit 743fbe76965b00087d8e091f742acd61d3a740d0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 28 23:22:38 2010 -0800

    Add page_type to the rotate and delete context menu items so that the
    quick menu knows where to send you after the action is done.

commit aacafaaf35d8cc41c9d6374412c8cf1e2544dad7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 28 23:17:32 2010 -0800

    Add @todo.

commit 9908f37eef22db81061eef7783d4d7fd11ccaf3b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 28 21:33:41 2010 -0800

    Use identity::set_active_user() instead of auth::login() when we
    change providers otherwise the user_installer code is going to be
    calling auth::login() which causes all kinds of unexpected weirdness,
    like it triggers the handler in gallery_event which detects graphics
    toolkits, and that's only supposed to run on the first admin login.

commit 70b235e13d3b8ba12977c1699eb108e35a73f069
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 28 21:33:01 2010 -0800

    In auth::login() make the user active before trying to save it, else
    the validation code fails because it expects there to be an active
    user.

commit 3584856afcf9f745d09dcd56b63932c8bf0716d1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 28 21:32:50 2010 -0800

    Use auth::login() when we initially log in the admin user.

commit b6322b1c9f9b0914fa639dba3361f1ff6fe05ab5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 28 21:31:54 2010 -0800

    Updated for model based validation.  We must now provide a placeholder
    email address for the admin user, since one is required for all users.

commit f0ae2c81654a056b19ba5f2b433f34cf32e9d953
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 28 20:55:38 2010 -0800

    Localize edit form error messages.

commit 3ed81869cbbf021a11868f612ffc79c031df42f2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 28 20:44:10 2010 -0800

    Cast the SafeString $task->status to (string) so that it doesn't come
    down to the JS as an object.

commit e7cfbfe376a117623e7e54a3f4469495a13e1a77
Merge: 56d04b1 5c52751
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 28 20:39:01 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 56d04b1ed83dc098eacd3d05496fef98cfaf8b8a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 28 20:38:48 2010 -0800

    cast $task->done to bool so that it doesn't show up as "0" to the JS,
    which will interpret that as a true value, when it's not.

commit 5c527513c688571adcff45f513efff54b9c55e61
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Jan 28 19:46:53 2010 -0800

    Fix language preference block / language cookie reading.
    
    The preference block must have been broken by a jquery update, and the cookie reading by a Kohana update.

commit b8fb891828effa441a37efdd5babe03a5c7f5efe
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jan 28 11:46:28 2010 -0800

    Make the return button work in chrome, FF, IE, safari and opera.

commit 1d4ed5a32c7a2364e2c512ff39d4b9683f8fd6ef
Merge: 11fbcfe df3db40
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jan 28 09:55:47 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 11fbcfeb25a9da60737807d2e0705993d93d24da
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jan 28 09:55:41 2010 -0800

    Found another broken link for what should have been the user profile

commit df3db40ab7a181ba0f461fe2ebf84d2ba828265c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 28 09:43:10 2010 -0800

    Reviewed DIRTY_ATTR

commit fcc72bbbd032e21d2fe0ec727f09692886c8e09e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 28 09:41:18 2010 -0800

    Rename $class to $css_class for clarity.

commit 86721d3884568c534f412915175088be667ca65b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 28 09:40:04 2010 -0800

    Reviewed all DIRTY_JS entries

commit c011b0e1f63215a4389658ca0a6edcef47a0ea8c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 28 09:37:33 2010 -0800

    Secure the t("Completed") call.

commit 44b372077c64b0f051051c6dd16a88f1507c507f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 28 09:35:38 2010 -0800

    Secure the t("Continue") strings in javascript.

commit c51fe9682075c961972c344f4888a4adceabe3eb
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jan 28 09:27:27 2010 -0800

    Make the varible for the profile name more descriptive and clean the label

commit 75aec29350442351299c5ecadfa07042b857c558
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jan 28 08:42:14 2010 -0800

    Update the xss golden file for user profile changes.

commit f943a2deefa822544ef737e579649c6437dc3450
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jan 28 08:14:33 2010 -0800

    Don't show a link to the user profile for the guest user

commit cedbc82dccaf74a983f1f92846735b69391fdf10
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jan 28 07:44:58 2010 -0800

    Do all the html::clean|purify calls in the views and not the controller. Also clean the subject line and email message body of the contact user email.

commit bbe70119ef99e77a57dbc5354bc348c7adaece46
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 27 23:05:57 2010 -0800

    Localize validation messages.

commit 31e4c217194f8d938c8a6963449d42007663f473
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 27 23:03:47 2010 -0800

    Localize error messages.

commit 0e5b5e25595dd3dd75222cf8ead58e32f8d5859f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 27 23:00:49 2010 -0800

    Fix capitalization of "internet address".

commit e5b25983a67a53ad209aa4b8c251afa3276853fa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 27 23:00:29 2010 -0800

    Localize all error messages.

commit a2fc1d3422dec370dd1c177d6930bbad8c1aa1d8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 27 22:55:54 2010 -0800

    Localize error messages for the built-in rules.

commit acbb5aac05d41aad89176d28f1d583c8072f2a2a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 27 22:41:09 2010 -0800

    Remove unnecessary rules() in the form.

commit 4b32a71afc7650fe7bdd02ba384c8914f60538f3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 27 22:34:11 2010 -0800

    Convert back to using ORM::factory(..., $id) instead of calling where().

commit cfbbf9ef606094868ccbd25ccf65e1a6f610528b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 27 21:58:06 2010 -0800

    Convert __toString() to use (string) cast instead.

commit 212633d05a5a8abb77a744a69c61d6e3051b73c5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 27 21:52:18 2010 -0800

    Prevent accidentally deleting the root album.

commit ec0f89f10a58c3c3751387d5c1d1efcbf940bc9a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 27 21:40:48 2010 -0800

    Change "resource" to "entity" in REST responses.  They're all
    resources, but we differentiate resources as collections and entities.

commit 4ca91bf6188a1a034ef7770308f42e7c788a1936
Merge: f906210 df5da84
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 27 19:20:38 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3 into bharat_dev
    
    Conflicts:
    	modules/gallery/tests/Access_Helper_Test.php

commit f9062101479c809b0957903b7116aaed86f24d76
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 27 09:55:49 2010 -0800

    Verified and updated

commit 7667864d61c857907795a351fbeb54c8f3506f6f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 27 09:55:00 2010 -0800

    Minor test-only fixes.

commit 63db756441fe2971bdcbcee3ba1bb20c179ffa59
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 27 01:49:37 2010 -0800

    Switch to using test helper.  Also, reload the album before running
    access::deny since the mptt pointers will have changed.

commit df5da84ebb6e35b4e56b6344284d985a7c11ad68
Merge: 0de0673 f5b9742
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jan 26 19:59:51 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 0de067312e375fae00d63b99d280aa796f043c22
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jan 26 19:59:44 2010 -0800

    Add a routing that allow add and edit form requests to be routed the same way as non admin forms.  i.e. a uri of /form/add/admin/<controller>/parms gets routed as admin/<controller/form_add/<parms>

commit f5b9742e2bbce7f30519c9e0b5ce196863dc0707
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Jan 26 18:53:47 2010 -0800

    Fix for ticket 833: Fixes broken playback of videos that had non-ascii characters in their path. (This is a copy of the modified flowplayer.js from the vendor branch.)

commit c5cdd13b41c2911390a67e22700fa414dfe53ea2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 26 13:26:03 2010 -0800

    Added view_permissions_propagate_down_to_photos_test().

commit e0d31add9f88f191a647c297e16ea2590a3103de
Merge: e315ce3 accd004
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 26 13:26:26 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit e315ce348bee75290e65e2376cc4f34b0f285cea
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 26 13:26:03 2010 -0800

    Added view_permissions_propagate_down_to_photos_test().

commit accd00464e2d7e1d1fd0e24e1ee583a7baa73611
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jan 26 07:03:14 2010 -0800

    Add a maintenance task that will clear the expired files (older than 2 weeks) from var/logs and var/tmp. Fixes ticket #982

commit f268128043a56888ef35d07ee5d02012b8349c74
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 26 00:24:10 2010 -0800

    Add support for adding tags in the item_tags and tag_items
    relationship collections.

commit 5c68519d9233eabe98fce34fc00cdd4595f03ded
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 26 00:23:45 2010 -0800

    Specialize the album cover id check to allow the root album to have no
    album cover.

commit 953c9283ad039adde0d131f2a0e563642d3dcbd1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 25 23:39:24 2010 -0800

    Always keep the original around when updating existing items, because
    we need it for the item_updated event.

commit 119297e2adc3dfb452d2337f4b167b3e00c5b7e6
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Jan 25 23:05:41 2010 -0800

    Apply html::clean() to UI visible strings, and show language names instead of locale tags to be consistent with the user edit form.

commit b6dab323ac478339b03f98430c2591562e747f43
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 25 20:42:48 2010 -0800

    Use ORM to create the users since now our validation can handle doing
    it the right way.  Set a default email address for admins.

commit 01dfa2988856043a71974bc509d05c8c267f0d6e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 25 20:40:44 2010 -0800

    Make some exceptions for guests:
    1) They don't require email
    2) Guest users aren't in the everybody group.

commit f8b8103c24cb50612b061cb6a4787695b600735c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 25 19:49:52 2010 -0800

    Make only one attempt to restore the old identity provider in case of
    failure.  Else, we can get into an infinite recursion.

commit b65baa522b20c8e8366d63cf77b3a659a3b541e1
Merge: 8046147 7096c29
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 25 19:50:06 2010 -0800

    Merge branch 'bharat_dev' of git@github.com:gallery/gallery3 into bharat_dev

commit 804614711ab79a739539fa0052e527d8c2152a90
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 25 19:49:52 2010 -0800

    Make only one attempt to restore the old identity provider in case of
    failure.  Else, we can get into an infinite recursion.

commit 1606961153fca681895a4f0145f7794000337539
Merge: cc91293 6023f2b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 25 19:49:17 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3 into bharat_dev
    
    Conflicts:
    	modules/gallery/libraries/MY_ORM.php

commit 6023f2bb46598f9da096d63f7ab1dfb914eab6f7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jan 25 08:10:28 2010 -0800

    Remove the return url and change the return button on the user profile page to use javascript to return to the previous page.

commit 445295a1ed8eb7dfc1caacfcb4211c312daaf257
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jan 24 22:08:59 2010 -0800

    Insure that if original() is called and no original has been created, then create it before returning.  Fixes ticket #989.

commit 865995305cbd709db4f8587d73e7178a277a8d8b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jan 24 20:14:01 2010 -0800

    Add the active notifications and rest api key to user profile page.

commit 26eb000637fb83c04919e1e18c67b1441db76da6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jan 24 15:49:02 2010 -0800

    add CSRF protection to the user profile send method.

commit c9ea1a64de16af16180c106a3012919150d3cf60
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jan 24 15:40:56 2010 -0800

    Remove the one last remaining reference to "no_module_admin".

commit 2cb28d46f84585ca9a1e21c30835858ee90c6bec
Merge: 7c06e21 61e31b6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jan 24 15:27:41 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 7c06e21ec443a46bd78bc9e99d8284283ff85c59
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jan 24 15:27:33 2010 -0800

    Refactor creating the user profile page content into the the event module.  The show_user_profile is used to provide content to the user profile page.  Add the list of the users comments to the profile page.

commit cc912935731c216a57e4c291548ec503a0c1607e
Merge: 5b84919 eb32e10
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 24 14:57:13 2010 -0800

    Merge branch 'bharat_dev' of git@github.com:gallery/gallery3 into bharat_dev

commit 5b84919d6e55a8c43f60cf8b695c3696340d001b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 24 14:21:57 2010 -0800

    First pass at converting server add to model based validation.

commit a4519c6dce542c533d370c790074e6cc5e81170b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 24 14:03:36 2010 -0800

    Updated for model based validation.

commit cc79abd0af83fdde471031b0629e8c7b0318790d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 24 14:00:07 2010 -0800

    Simplify tag::add().

commit ca5f625a5e3dc2fc26136b5dea8f27251f92c7c4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 24 11:40:01 2010 -0800

    Log validation errors.

commit 3b16d0662b8a4b06f4be72165c858a1231e9bd67
Merge: 3b8636e c9b775c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jan 23 23:58:53 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 3b8636e5298f61eee3d9953468ef648c36e64e5c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jan 23 23:53:16 2010 -0800

    Update the Xss_Security_Test and the Controller_Auth_Test.

commit c39437a1929a3383e66f6bc8d6fc1a367de23f27
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jan 23 23:52:29 2010 -0800

    Change the hover text to just display 'Your profile'.

commit ed5b07b335d8bd1520f3b54bf28272f853bbfbfb
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jan 23 21:38:01 2010 -0800

    Create a user profile page that is used as a landing page when referencing a user in messages or pages.
    Partial fix for ticket #889 and a fix for #931.

commit 7096c2912460d2a92e71f2df0effe29ac37faf12
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 23 17:07:09 2010 -0800

    Switch to model based validation.

commit 61e31b6f77a803ec0bf43e4ca8e36d61f90941a8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 23 16:44:30 2010 -0800

    Fix typo: change $entryr to $entry->user

commit eb32e1052df4da268f01a84b809d756d9c9b85b7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 23 16:44:30 2010 -0800

    Fix typo: change $entryr to $entry->user

commit fecac4a8596a69088270e48a90868e845fc8f4ca
Merge: 8849594 3b16d06
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 23 16:29:10 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3 into bharat_dev
    
    Conflicts:
    	modules/gallery/tests/xss_data.txt

commit 8849594aa17768f564e45370a62f01e440570dcf
Merge: d4308e4 a4519c6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 23 16:23:50 2010 -0800

    Merge branch 'bharat_dev' of git@github.com:/gallery/gallery3 into bharat_dev

commit c9b775c21abdf157b635ee023100f25488b89a03
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Jan 23 15:46:01 2010 -0800

    Fix for bug 984, consistently interpret installed / available locales as array.
    On the current hostgater setup (PHP 5.2.12), locales::available() was returning an array and isset($locales->$code) would always (silently) return false.
    
    Choosing array over stdClass since count($someStdClass) will always return 1, and not the number of object members.

commit a1a3d4f59568dc7de2b309796752a49242fde6f0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jan 23 14:57:10 2010 -0800

    Correct the javascript so it will find the "Continue" button in other languages than english.

commit abdeb21ccbb25aee564335dbbfca4a8afaf49384
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jan 23 13:29:49 2010 -0800

    Add a user_menu method to the Admin_View and then use this method to get the
    user menu.  Since the information displayed is identical in both admin and
    theme views, it makes sense to combine the generation to it is done in a common
    location.

commit d4308e4d35a585a1ce17e4340894e520268260b7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 23 12:16:04 2010 -0800

    Updated

commit a60969401852ddda878bd2a3444d6378899d4dcc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 23 12:13:14 2010 -0800

    Update tests for recent REST changes.

commit 4960061b562a0d5adafd767af7856d1a80a549a6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 23 11:35:26 2010 -0800

    Don't use ORM_MPTT::move_to directly, it's protected.

commit 06ef3885b30be843a7c86a93f5642680ab881b1c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jan 23 09:23:08 2010 -0800

    Increase the size of the 'select photos' button so that it doesn't wrap and set the size of the underlying flash object.

commit ece403877fa0a8bf385a1c52d7be99b1e2b002f4
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jan 22 18:12:30 2010 -0800

    If the userid/password combination, render the full page instead of just printing the form. Fixes ticket #980.

commit ff5ccf0fb34a19306e4177a9a2f2c4c6f503cb1a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jan 22 14:38:58 2010 -0800

    Specify the height and overflow-y on l10n-client translation element. fixes ticket #899.

commit b01fce613b8df5f23a3a257f5680433a8224247d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jan 22 14:16:41 2010 -0800

    Remove the g-right class on groups element on the manage user/groups page. fixes ticket #911

commit 79bcfc93c3f13a8abc6fab82e0161dd932b3d8f2
Merge: eabeeeb 120c9c7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jan 22 13:38:23 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit eabeeeb1267e0c925b5f31b2455a080bc2e9f237
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jan 22 13:38:05 2010 -0800

    Trap any errors that may occur when trying to install a new identity provider and then reinstall the current one.

commit df313cac567bee77f5a73308381fe67dcac9b92c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jan 22 12:30:17 2010 -0800

    Change the check_environment method in the module helper and the module installers to can_activate to reflect that it is doing more than just checking the environment.

commit dabd5b84b21c711592a1f3bcd2ca298dd6d7fde2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jan 22 12:22:31 2010 -0800

    Remove the identity manager screens and controller as alterntive identity providers are installed in the admin module screen.

commit 11757831233da528662864e23d89f39bfb908801
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jan 22 12:16:36 2010 -0800

    Disable the continue button after clicking so it can only clicked once.

commit ae568b6182544b84067aa099eec494da477d083f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jan 22 12:09:11 2010 -0800

    Refactor the identity provider installation in to a common helper method (change_provider) with an initialization callback.

commit eea27c39f1cc7edb9ad0f9682bedfb2770661a7f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 22 09:43:02 2010 -0800

    Create symmetrical relationship collections: item_tags and tag_items
    Now when we represent a relationship collection we can refer to it in
    proper semantic terms.

commit 603c3049a1ce7249c55ff8338fc3ea69323f0cb3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jan 22 09:39:29 2010 -0800

    Treat identity providers just like other modules and use the admin_module to
    install and switch to a different identity provider.

commit e56318d07fe3cabcace5c4597c660260f80a0e00
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 22 01:48:03 2010 -0800

    Don't try to access ORM::$changed externally; it's protected.

commit b37ef6e8d9f2204ad843f34105da61f043389cc9
Merge: 25dc3e1 120c9c7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 22 01:43:53 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3 into bharat_dev

commit 120c9c749e175cc6c67ae628ee1a8a967a8ddbcc
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Fri Jan 22 01:16:16 2010 -0800

    Change "fetch translations" task to fetch them in batches.
    
    The request limit was in place already, but the client didn't respect it before, leading to unhappy users in case they had lots of 3rd party modules installed, or more than 2-3 locales enabled. This is all taken care of now.

commit 25dc3e1a7bc7736363ca642a6e67ac1644266f68
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 22 01:11:03 2010 -0800

    Moved to Item_Rest_Helper_Test.php

commit 61198c22aaae8bdeff8dfbe3bfaedc1320dfdab1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 22 01:10:52 2010 -0800

    Reload items after saving so that we convert their members to strings.

commit 0efbfcbe61e26cb53cb0719ced3c5c436f128386
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 22 01:10:31 2010 -0800

    Return the url of the newly created item from post().
    
    Don't try to access ORM::$changed -- it's protected.

commit a445a64bcbfc5df45f255e02d3295156e199832d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 22 01:10:00 2010 -0800

    Return the url of the newly created item from post().

commit ca909a49ae16dc1d5a0d8448f84c32c7900ba06e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 22 01:09:38 2010 -0800

    New tests for tag_item_rest

commit 10dfe9767d596b1c0e90462cd9d8887b3381851a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 22 00:59:37 2010 -0800

    Updated tests to pass after recent refactor of tag_rest.

commit a0c6d055d1b7259667bebb1b5bf9e2a99c0f8260
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 22 00:53:44 2010 -0800

    output_type --> output

commit 27acb156bcd123e8a6dd751d6c80737e65a40f3a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 22 00:51:23 2010 -0800

    Updated tests to pass after recent refactor of tags_rest.

commit cb8b31d70ccd4872b122c204095ca8a439487c5d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 22 00:49:05 2010 -0800

    Updated tests to pass after recent refactor of gallery_rest -> item_rest.

commit 2744b2e9380d2513a9691827d8995ba744c8852b
Merge: bcf1caa 07ba5fe
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 22 00:27:56 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3 into bharat_dev

commit bcf1caad1459a458a7923335a4a6bc521816de40
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 22 00:27:00 2010 -0800

    Reshape the rest code to be more consistent with regards to
    relationships.  Now when you view a resource, it has 4 top level
    elements:
    
    url: the url of this resource
    resource: array of key value pairs describing the resource
    members: array of urls to members of this collection
    relationships: array of array of members.
    
    Relationships are a special type of collection that links two
    different resources together.  To remove a relationship, just
    DELETE its url.  To create a relationship, POST to its
    collection.
    
    Individual modules can add their own relationships to any
    resource via a callback mechanism.
    
    Example:
      Array(
        [url] => http://g3.com/rest/item/1
        [resource] => Array (
          [id] => 1
          [album_cover_item_id] => 4
          [captured] =>
          [created] => 1264056417
          [description] =>
          [height] =>
          ...
        )
        [members] => Array(
          [0] => http://g3.com/rest/item/2
          [1] => http://g3.com/rest/item/3
          [2] => http://g3.com/rest/item/4
          [3] => http://g3.com/rest/item/5
          ...
        )
        [relationships] => Array(
          [tags] => Array (
          [0] => http://g3.com/rest/tag_item/2,1
          [1] => http://g3.com/rest/tag_item/23,1
          )
        )
      )

commit 07ba5fe43aaa53be840b1842fe2eb4fc63ee7686
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Jan 21 23:53:21 2010 -0800

    Use Unicode instead of HTML entity (since the l10n server normalizes this way and rejects submissions that change under the normalization step)

commit 3665391f8bbf40aa27acc816dc546237461e1cba
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 21 21:29:42 2010 -0800

    Guard against division by zero.

commit 318c86ab56ec63f2f65af0581991c7a5dc8ae433
Merge: 8788880 0da5d9e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 21 20:38:25 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3 into bharat_dev

commit 0da5d9e606fba5b6dc6137812df32cd1d0f5750f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jan 21 20:33:26 2010 -0800

    Internationalize all strings in admin_modules.hmtl and corrected comments.

commit 8788880065ca199216df552f66fd065c3f35a0aa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 21 20:18:19 2010 -0800

    We don't need CSRF in Rest_Controller::__call() because we use access tokens.

commit 6be5a71cc25614f669034f4f0fa86b5f109aaac6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 21 20:16:57 2010 -0800

    Actually deny permissions in delete_item_from_tag_fails_without_permissions_test()..

commit a0c99794185bbfe227556a4b006b2a6e770b3a78
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 21 20:12:28 2010 -0800

    whitespace.

commit 709d797408b2821fd8ec97c83fa982519a028bf8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 21 20:10:45 2010 -0800

    Make sure that we actually don't have permissions, to avoid contamination w/ other tests.

commit f7f4df64b9abe726fae30cc44b8e640f68ef1415
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 21 20:04:46 2010 -0800

    Exclude modules/gallery_unit_test/views/kohana/error.php

commit 2f9077e26a0d36ac5805db87069827979d965c5f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 21 19:08:40 2010 -0800

    Simplify the test using the test helper.

commit 40b17474bbadbaa48f37f8de776e8cbe35efc8e3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 21 19:08:29 2010 -0800

    Add random_group().

commit 313f816818c6ee0db9354992005c9b3ad6da15d4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 21 19:06:32 2010 -0800

    Fix a minor bad expectation.

commit b278f9680c7afd7de6e7e9a64a724d87b6e04c93
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 21 19:05:53 2010 -0800

    Can't call ORM_MPTT::move_to() externally, so call Item_Model::save() instead.

commit ff2d81b7c3b75e548766fb8a0ae370cbb2e39bf5
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jan 21 13:03:58 2010 -0800

    Convert the slideshow module to use the new check environment and pre_deactivate api methods.

commit d59c6ed4f149c201542c8b38f9ad9d61b4daabf4
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jan 21 12:57:45 2010 -0800

    The admin module controller allows modules to provide a check_environment method
    which is called prior to installation.  The method allows the module to provide
    an error message or warnings if the module can not be installed or activated
    without issues.  The admin module controller also will fire a pre_deactivate
    event, which allows modules to indicate issues that may arise be deactivating the
    specified module.
    
    These messages are displayed in a dialog box prior to installation in order to
    allow the gallery administrator to determine the appropriate action before proceeding.
    
    Lays the foundation for implementing a fix for ticket #937

commit 1e35cf28eef8d88e8e5c611db108667526a0767b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 21 08:29:30 2010 -0800

    Reload the album after adding the photo so that MPTT pointers are correct.

commit dde429f71e536d66565eb6aa78bf58c39a243abb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 20 23:49:20 2010 -0800

    Whitespace.

commit 16ccda0f3d63b5db43c5eaee551ecc62c42becf5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 20 23:49:10 2010 -0800

    Two fixes:
    1) Don't call ORM_MPTT::move_to() directly.  Use the new
       model-based-validation approach of changing the parent_id and saving.
    
    2) Item_Model::parent() can return null; check for it.

commit e2b6cfc2d9a0c0a5c6cf3c530b2a22d763b76970
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 20 23:47:48 2010 -0800

    Make move_to protected since we don't want folks calling it on
    Item_Model.  If there's a need to make this public, we should override
    it in Item_Model and throw an exception there.

commit 46d4d778ad9febf175380cd82e0a10da33293d36
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 20 23:33:09 2010 -0800

    Remove debug code.

commit 949586c254f3b70a4b44828d1dee600cc6276a50
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 20 23:28:29 2010 -0800

    Oops, bug in save() -- we weren't returning the saved value!

commit d3e3bbd713e9391893bc2561f15b6f2348412faa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 20 23:27:52 2010 -0800

    improve comment.

commit 8a1c17d869575c9a19dc59e5470d664692f8e910
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 20 23:14:51 2010 -0800

    Use the exception itself to print out a nice text message.

commit 6dd92cfa1cbdade77721f153aa1b6aab965cff82
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Wed Jan 20 23:12:36 2010 -0800

    Fix maintenance tasks / language admin for bug introduced earlier by no longer casting in ORM.
    
    Task->done is now a string, boolean false is stored as integer 0 and loaded as string "0". On the client side that's interpreted as truthy in JavaScript.
    Fix: cast "0" to (bool) before encoding to JSON.

commit 3f3159d25caaea0c46583a6505c5dcc03b4fafe2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 20 23:05:51 2010 -0800

    Guard against missing/empty $description.

commit 382214f3c13cc2ae4b927e37de7bc6e798fe900a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 20 23:00:39 2010 -0800

    Move the error page to the expected location for K24.

commit f6c48d757c8f95249e58280e93c99aa4a6f217b1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 20 22:56:37 2010 -0800

    Delete MY_ORM::original().  We did not have proper containment to
    generate $original when we needed it, resulting in inconsistent
    behavior.

commit b0ff4418d2d56be5eb6ac5b26255dc8a40404806
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 20 22:55:22 2010 -0800

    Stop using MY_ORM::original()

commit f0780486eebba9d1f77241e979cedab4df94135a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 20 22:53:51 2010 -0800

    Fix typo: edit_user -> add_user.

commit b23f62259d76a1edb656ede0f02d08c2372a2494
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 20 22:52:11 2010 -0800

    Stop using MY_ORM::original().

commit feefdfd533dd4e82a2edd5c0b342322889877b79
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 20 22:51:18 2010 -0800

    Stop using MY_ORM::original().

commit 6dc88be6b6828a968409167e9f3c57a1bb9ec79c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 20 22:50:20 2010 -0800

    Stop using MY_ORM::original().

commit 00957f79bab42b2323b9fe52425b1e0ed51137ac
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 20 22:46:46 2010 -0800

    Throw Kohana_Exception instead of Exception on access denied, since that may bubble all the way up

commit 995faaa27fc870589e346f7ef65e0bd7cabfe047
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 20 22:45:19 2010 -0800

    Stop using MY_ORM::original().  It's got very odd semantics and we are
    not capturing all cases for setting and resetting $original, which
    leads to some weird and hard to reproduce behavior.
    
    Instead, if we need the original just reload it from the database.
    This may result in a somewhat excessive load in places, but we'll have
    to fix that in a later optimization pass.

commit 2a41e27d49bd9f5f341ee201ec3878767a9271ec
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 20 21:15:57 2010 -0800

    Add random_tag().

commit 3a26ace065476fbc9c2537e97bf7720d3648400f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 20 21:15:44 2010 -0800

    Improve robustness in resolve() against bad urls..

commit 697d84457f3013bff1f8e860a1cd27e2e1942642
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 20 21:15:11 2010 -0800

    Rewrite and greatly simplify the tests for the new tag_rest implementation.

commit 3d4a6d6336a2eaa212878f8af788825256be9e9c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 20 21:14:40 2010 -0800

    Remove unused untagging code from put()
    Add access permissions to delete()
    Remove unnecessary return value from delete()

commit 210e02f0001489cdfa22da2fb57d6db08954aef3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 20 21:13:58 2010 -0800

    Throw Rest exceptions, not regular exceptions.

commit 8bf73d4b4c5e609cd4bc9b6ea54d32faeefef19b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 20 00:52:32 2010 -0800

    New test for tags_rest.php

commit b5cf24456f4868a0e553af389e1b482984bc8a86
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 20 00:51:34 2010 -0800

    Forbidden is a 403, not a 503.

commit 276d7de5b6254222aee828de54f21af6ee4c0a15
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 20 00:14:05 2010 -0800

    Simplify and update for model based validation.

commit 5f83da41e405dd274634fa520c5c08bfd885164a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 20 00:08:13 2010 -0800

    Rewrite the tests to be simpler and more direct.

commit 5119d58e7ff06e1ba922d73bf47aefd242dc888f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 20 00:07:03 2010 -0800

    Move access key creation into a helper function.

commit 66fbbab9071e73df01b316bb29842fdc3b29c39c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 20 00:06:36 2010 -0800

    Add assert_array_equal_to_json().

commit b09450cf5d864338b5fbc246fd722f841b32e254
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 19 23:30:22 2010 -0800

    Let the Rest_Controller functions throw a Rest_Exception since
    the Kohana framework will handle it properly.

commit c65eca0607572b49ec59a7c387c4b93d15561adb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 19 23:30:09 2010 -0800

    Move rest::send_headers back into Rest_Exception.

commit 92d96548e9b365cfa8e888a2103ab09e9f45914a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 19 23:28:18 2010 -0800

    Make Rest_Exception extend Kohana_Exception so that we can let it
    bubble to the top and then in sendHeaders have it send the right
    response code.

commit 76da85a1a08cdf065bf186c81ea444d03d6f8935
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 19 22:38:19 2010 -0800

    Extend Gallery_Unit_Test_Case instead of Unit_Test_Case.

commit a774dc5447a1d90cd5c361e9196ab41fd91f92cf
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 19 22:38:03 2010 -0800

    Don't send headers if they're already sent.

commit fc4250f5d899dadcfd0dfce6076e66cfaff68941
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 19 22:37:38 2010 -0800

    Use $input instead of Input::instance()

commit 409c4dcc47c2da39cc8465b6975196cde07840fb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 19 21:27:54 2010 -0800

    Do a better job of guarding against missing images.

commit e39c8df19fc0dadcfe65cb8a3ed6529648c6c9cf
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 19 21:20:36 2010 -0800

    Fix some validation checks to check to see if the original was loaded
    before deciding whether or not we changed a value.
    
    Change valid_name to be cascading, not parallel.

commit 6aee6cde2519b125a3b1209d3a6cd441b5d3c526
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 19 20:53:21 2010 -0800

    Move data initialization into the constructor so that it happens
    before validate() is called, which is important with our two phase web
    controllers.
    
    Make valid_parent smarter about moving existing items, vs new items.

commit b8c09b6d872d00ad74d2f41d7699e12ee10bd361
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 19 19:31:24 2010 -0800

    Use an appropriate json content type

commit e02675b730fb814105e1cb9dceb0e25fdcbd3e27
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 19 19:31:01 2010 -0800

    Change "filename" to "name" in the edit album form.  I'd rather have
    consistency between field names than deal with underlying issues with
    Forge bitching about the "name" property.

commit afe2128bb07938d47e98857b897d9d917062831d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 19 19:30:18 2010 -0800

    Make video/x-flv a valid movie mime_type

commit 512910962d62a2011d7770da1b6e68bd6bbad983
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 19 19:24:46 2010 -0800

    Change "dirname" to "name" in the edit album form.  I'd rather have
    consistency between field names than deal with underlying issues with
    Forge bitching about the "name" property.

commit c3ed64fc6c0c1c9001d32191b0f1a5c21ec4b7c5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 19 01:46:45 2010 -0800

    Use property_exists() on our stdClass instead of array_key_exists()

commit 0b5ce9dbc1c5571ad80d5f4a1df3f21ab29429b4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 19 01:36:15 2010 -0800

    Fix a typo: $item -> $tag.

commit 549b88643acd571367a3b21f6dce6d42af7e7edf
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 19 01:35:59 2010 -0800

    Fix a typo "tags" -> "tag"

commit c590fed132b07647c38b1d5b4a93ffe30b6ac4bf
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 19 01:33:57 2010 -0800

    Change rest::url() to take a module name and a resource.  The module
    does the rest.  This function is symmetrical to rest::resolve.

commit f95442c314f84004c48758579f076ae209aace43
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 19 01:17:29 2010 -0800

    Rewrite the tests entirely to cover the new REST code.

commit 069a23e81192578f5f02f6a52a07536ceb6c0bcd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 19 01:16:59 2010 -0800

    Make scope default to direct.
    Add slug to the post params.
    Fix minor output bug.

commit a587426cfda4a0cd4e8f3f53607c8e3ad2305506
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 19 01:12:09 2010 -0800

    Don't try to set the album cover for the grandparent if we don't have edit permissions for it.

commit cb7c263b470bd1452c47a3e29d67373869150d2c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 19 00:36:40 2010 -0800

    Return arrays instead of calling rest::reply.

commit eea936877725b9d682dc9969d0904b886c095420
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 19 00:36:19 2010 -0800

    Have the rest calls return an array and print it out in the
    controller.  This is a clearer workflow; controllers generate output,
    not helpers.  It's also easier to test.

commit 2c0b0aaebca6ec1149585853d7d849d50bea4184
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 19 00:35:32 2010 -0800

    Add rest::url() for convenience.

commit c23bf312c41102efc2af320a8f63a5180fe84eea
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 19 00:34:48 2010 -0800

    Our own version of Unit_Test_Case that adds useful functions like
    assert_equal_array().

commit c059a444c77c0adc6d003b8ece38ba654e4f45f0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 23:49:00 2010 -0800

    Updated for model based validation.  Fixed
    change_photo_no_csrf_fails_test() which has been broken since we
    deleted Rest_Controller.

commit 4418993db96a6d9c4444957b78588b4ce01556f4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 23:38:39 2010 -0800

    Add slug_is_url_safe_test()

commit 2687762aec243d157f38de765f4b5c8465fc23ec
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 23:38:18 2010 -0800

    Update for model validation.  Move the url safe tests into Item_Model_Test.

commit e06ceebaa6b9631ce27939beae477e684f949352
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 23:25:09 2010 -0800

    No longer necessary; all photo and movie helper code is now in the model.

commit f0215052086f2031ddaadbaf715ca9a5d202f691
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 23:24:06 2010 -0800

    No longer necessary; all relevant album helper code is now in the model.

commit c6bd3c5b2629012a7c100658705a254bda19877b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 23:23:31 2010 -0800

    Updated for model based validation.
    
    change_album_no_csrf_fails_test() had been broken since we got rid of
    REST_Controller, but was poorly written so we didn't realize it.  Boo.

commit cc61e7a3e0a0004196617ffacc6519e9b6d79139
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 23:11:02 2010 -0800

    Update for model based validation.  Use test helper.  Reduce the code size greatly!

commit 9eedf5c2072ee508d539e3e25ce4f02eff746476
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 22:55:16 2010 -0800

    switch to test::starts_with().

commit 71a8375554ed6a4216abfe31a496be5ba012d4db
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 22:52:58 2010 -0800

    Whitespace.

commit dc570aaca96e34d1deb76ef03f90cb6fb0acd71c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 22:52:23 2010 -0800

    Switch from ORM_MPTT::$db_builder to db::build().

commit f94fa25e0868e9988ebf7168701dd059b1135fdb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 22:51:52 2010 -0800

    Add starts_with().

commit cfc0f3d0c0935839e9eedd11322e35e9baaca0df
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 22:51:40 2010 -0800

    Minor test cleanup.

commit 703882f4df712089e02e14baf8970ab26b62c24f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 22:50:50 2010 -0800

    Update valid_parent() to disallow moving an item inside its own hierarchy.
    Move move_to() inside save()

commit efa4e230da33e1bf28ebf77e4d1e1b4f293117b1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 21:40:00 2010 -0800

    in move_to(), move the lock to before we do any calculations so that we have the latest data.

commit b4e6834a28e557c3143f5f3cc91144d1565c18f0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 21:14:43 2010 -0800

    Added move_album_fails_wrong_target_type_test()

commit 677fb080026612725d9ed317b5ff6732e00f6514
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 21:12:26 2010 -0800

    Updated tests to match what the expected new API for moving items.
    Now to move an item, you just change its parent_id.

commit 38c13760afaae693af245e814b6bbe76c20fcae4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 20:14:09 2010 -0800

    Switch to using test::random_name() to avoid integer names.
    Fix up rename_photo_test.

commit 0e2f4a7a372567ba1916e2533ce24ee6e1cc7d36
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 20:13:46 2010 -0800

    Fix renaming in save() by moving the actual rename action under
    parent::save().  This is consistent with other changes because all
    filesystem operations happen after the database change is committed.
    
    Also, inline rename() since it's fairly simple now.

commit b93000c0ce6fc2fd90df0e4a3e427d15cb262117
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 17:20:12 2010 -0800

    Kohana ticket #2504 is resolved, so this test is no longer necessary.

commit 1cfee16e38b483d97dddc723b383f5c8cef0f229
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 13:09:58 2010 -0800

    In valid_name, don't query on the id if it's null.

commit f492436317a61aa8387d1fb2232f8e5255ed5d3c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 13:03:59 2010 -0800

    Add random_name().

commit 92ed5d45e6e81b39f4d6b8621c36b597a1b315d8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 12:56:49 2010 -0800

    In item_rename_fails_with_existing_name_test switch validate() to
    save() now that Kohana ticket #2504 is resolved.

commit ebb909625c348d4f3e4f91cd743426970835939c
Merge: dc286cc 9384f98
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 12:54:26 2010 -0800

    Merge branch 'master' into bharat_dev

commit 9384f987bb96d0d39787ff9d3d16a70c01cd76e0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 12:52:52 2010 -0800

    Coerce some integers to strings now that ORM isn't typecasting anymore.

commit 06cabecd76781d7075cbacb5cf433042b4296dc5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 12:49:58 2010 -0800

    Coerce some integers to strings now that ORM isn't typecasting anymore.

commit a9f07986f64faf5062c2d86aa34710892d8ac8b3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 12:39:42 2010 -0800

    The root parent id is 0, not null (this deviation exposed by the new lack of typecasting in ORM).

commit cf236a228a8ea3316506f6d855bcade92676674c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 12:37:20 2010 -0800

    Don't assert_same() now that typecasting is gone from ORM.

commit cac4692510d6b5da0d0a63f2ec54783df6ca86e4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 12:35:26 2010 -0800

    Don't use rand() as the name.  Now that ORM::load_types() is gone, it
    won't get coerced to a string, and then we wind up comparing:
    
      12345 != 12345-12321
    
    In the old approach, they'd both be strings so they'd be inequal.  But
    in the new approach the first value is an integer (sinced it came from
    rand()) so the second value is typecast to an integer which drops
    everything after the - sign so they appear equal.

commit b27907fff756cb66339c8b529b04f177e10dc35e
Merge: 284788d 51427d5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 12:22:18 2010 -0800

    Merge branch 'master' into kohana_update

commit 51427d540464ffa5b4663a9c3b794cefc637925a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 12:21:57 2010 -0800

    Verified

commit 284788d964688385f77b18bc063a841d0dbcdcd8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 12:08:39 2010 -0800

    Switch from stdClass to arrays which works around issues caused in
    http://dev.kohanaphp.com/issues/2459 -- I don't exactly know why, but
    the solutions are equivalent so I'm not going to dig too far.

commit 41a392611c0e602d2e14859e5c0d5bf9e61d0073
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 12:08:05 2010 -0800

    Change DENY and ALLOW to "0" and "1" to match the fact that ORM no
    longer typecasts values as of http://dev.kohanaphp.com/issues/2459

commit 64357b3a2edf28c3c342931b13f6594153847148
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 12:04:54 2010 -0800

    Updated Kohana to r4742

commit 4eafe97b4858cb8d1b3367574f7e7ef473127d7c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 11:57:23 2010 -0800

    Reload $item after removing view permissions.

commit 0dc184e99f0ca607774a68257432a9a981f4d5b7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 11:10:37 2010 -0800

    Overload url::current() and url::merge() to make the current url XSS
    safe.  Add tests to make sure that it doesn't relapse with future
    Kohana changes.  Fixes ticket #983.
    
    Ref: http://gallery.menalto.com/node/93738

commit dc286cc2bd96a70505c16487905b4aae761feeff
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 18 09:00:14 2010 -0800

    Add a test to verify that bug #2504 is still around.  When this test
    starts failing, the bug is fixed and we can go fix our code that works
    around it.

commit 53735f6b166fe823f5606e6f3cf527d98105593c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 17 23:50:42 2010 -0800

    Convert a $root to item::root() to fix a test.

commit 31ecb009bac2d9177329aafb9596fbfa65bd6a04
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 17 23:45:18 2010 -0800

    Get rid of urls_are_rawurlencoded_test -- it's no longer necessary
    since we can't have unsafe slugs.
    
    Add basic_validation_test.

commit 06541f0e2a5cb9ee78b6b1553dd522dcc33a1b3d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 17 21:49:48 2010 -0800

    Fix item_rename_fails_with_existing_name_test() -- broken because of
    http://dev.kohanaphp.com/issues/2504

commit 710e472edc95dd4b7a192348e11b81636ac83e52
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 17 21:03:15 2010 -0800

    Fix rename_album_test()

commit b35a3c8b81cc4867fc6143b3a401937b20ea82e2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 17 20:54:08 2010 -0800

    Fix rename_photo_test().

commit 9ddb961a91f99ccc043981bbe8c8a661f9646563
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 17 20:53:32 2010 -0800

    Partially updated for model based validation.

commit 6e73b08595c8fc3a2473eb38d6b51db558b21bb4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 17 20:37:57 2010 -0800

    Mostly conver to model based validation.  Not all tests pass yet.

commit f20fa2cfedc42f98a38a77d77186d180bd0c3426
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 17 20:37:25 2010 -0800

    Change IdentityProvider::create_user() to take $email as well, since that's a required
    parameter for the Gallery driver.

commit ab7be17b7fae9dbff42a77cb5eff85cf0c8d824d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 17 20:17:50 2010 -0800

    Switch to model based validation approach.

commit 7d9d40c7d68ea29dd37c963336fb34fa3abbedfa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 17 20:06:34 2010 -0800

    Use test::random_photo_unsaved() instead.

commit dd5f08b703754b88f10234db94c44f153e4f37ca
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 17 20:06:28 2010 -0800

    Create xxx_unsaved() versions for the case where you want to tinker with the item before it gets saved.

commit c0d01425528a979634b514250347f5bab25cf9a0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 17 20:03:18 2010 -0800

    Updated for model based validation.

commit 39bb08db2847d2c6faf945ccf901bc34edbca355
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 17 20:02:30 2010 -0800

    Make set_data_file() chainable.

commit afb7decb00c5e668cd8c47fd30396dcc1f0c5442
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 17 19:57:42 2010 -0800

    Make it work with model based validation.
    Refactor _get_proxy() out of setup() and into its own helper function.

commit c9fd8d751d3bb46b8b0d6d5bea0cf8272f06c11b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 17 19:57:24 2010 -0800

    Add random_photo()

commit c5f9a466c88985857bd7ef9499b631520d4a3365
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 17 19:33:44 2010 -0800

    Updated for model based validation.

commit c5c17eecc3334649ee3f78bc4117262d1505eb3b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 17 19:32:05 2010 -0800

    Updated for model based validation.

commit c863544ec39da4f39e30cf28ea4972c0ad1e3923
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 17 19:31:49 2010 -0800

    Add validation for guest_email and guest_url.

commit f68862f4c9a595cfd84e844e85339f7ed82c6c1a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 17 19:26:32 2010 -0800

    Updated for model based validation.

commit 53a17e3444e677dbb1878db68ffa1677511690c3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 17 19:26:22 2010 -0800

    Add album title in random_album().

commit c13d5c35134fbdb637d32eaf721d90e0c3889739
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 17 19:24:48 2010 -0800

    Helper class for common test methods (like creating albums, photos,
    etc).

commit 05e8d560e4f3f0c2be29b15536914048f54d5e91
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 17 18:10:32 2010 -0800

    Refactor to work with model based validation.
    
    While I'm at it, pull _make_comment() out of setup and only call it on
    demand; this makes the tests run faster.

commit 3ef22d9d1a42e6f4ac1ebf32bceceb0e6fa03b4d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 17 18:09:31 2010 -0800

    Add special output support for ORM_Validation_Exception

commit 5162e35d499e8f57f2cff8eefeb633538aad8a65
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 17 17:54:14 2010 -0800

    Use an empty password for the guest user.

commit 9e9c5397b7602107afdda2894d2bf2bbd8ce652c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 17 16:59:25 2010 -0800

    Qualify the Bad Request output when the name is missing

commit 4197ee39b9e9737afbc766d42ec68641d760654a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 17 16:58:54 2010 -0800

    Catch ORM_Validation_Exception and turn it into a 400 Bad Request with
    appropriate error output.

commit afb3fa71b9aea16a02c13f75d7999069a4ae9d21
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 17 16:58:47 2010 -0800

    Get rid of internal_only designation -- it's too hard to enforce cleanly.

commit fafa7f277f0591c74bd3d162c4c39a01604b55ae
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 17 16:55:48 2010 -0800

    Remove a @todo.

commit bb79a1455a3f692c813f8dad6300fd7ecc6fd583
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 17 16:55:11 2010 -0800

    Remove unnecessary comment.

commit f70130b820b48769c5d2182ed0c8b503daccb562
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 17 13:30:06 2010 -0800

    Special case output for ORM_Validation_Exceptions

commit f0a290fc7617f62e7e53bd4659f541a9c340ba1c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 17 13:29:36 2010 -0800

    If we call original() and there's no $original yet, then consider this
    to be the original.  That should be safe because we're already
    guarding __set, __unset and save.

commit cfb27dde023e4f4d04fc9de687548501e607d371
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 17 13:28:24 2010 -0800

    Adjust installers to work with model based validation.

commit 9488684220cbf4121dea12a28083f6c34b648da8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 17 12:30:24 2010 -0800

    Move model rules down into their validate() function for consistency.
    Change "in_use" error to "conflict" for consistency.

commit 3789b85b7d960a046e4b6de2bbbf82b3e59d2eab
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 17 12:19:24 2010 -0800

    Move rules down into validate() and improve valid_author().

commit 4f8c98a7bc89911427a6fd97b8ed6ef6f41a2835
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 17 12:13:25 2010 -0800

    Move rules entirely down into validate() so that we can be more
    sophisticated but keep all our rules in one place.
    
    Add rules for most fields.

commit 5c49c041e740b8bb8eb6afae8563731ab858aa97
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 16 22:42:02 2010 -0800

    Use "(string) $form" instead of "$form->__toString()"

commit 1c85cf6397d8c780db0d2ade185e0bbf714a57a6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 16 22:27:07 2010 -0800

    Convert comment code over to model based validation.

commit 39ad9fa9a0b8d262bf87d2932a18ce9d49ab3437
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 16 21:25:17 2010 -0800

    Get rid of add_rules_from() -- it's no longer necessary now that we're doing model based validation.

commit 4a2d5bc9e234cc7e81e47131e8d8755919b773fc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 16 21:24:18 2010 -0800

    Convert Users_Controller to model based validation.

commit 6a4dda9bdef81bcf79abe5601fd7309e593078f3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 16 21:15:12 2010 -0800

    Convert Admin_Users_Controller, User_Model and Group_Model to use
    model based validation.

commit a691dcc63cb6403784e061997cc85606a8f953b3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 16 19:58:55 2010 -0800

    Convert Admin_Users::add_user() to use model based validation.  Get
    the rules and business logic out of the form and user::create(), and
    move it into User_Model::save().

commit fdcb4a1f32d8a7d153462da00129524ffa0f69b8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 16 18:16:47 2010 -0800

    PHPdoc.

commit a5aacfa4a650ed5830331b8c81f68ea1625cd3ba
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 16 18:10:40 2010 -0800

    Don't forget to save when we make insignificant chagnes only.

commit 7f20f660791a8276e6f74232e6b941cf20c8c1a7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 16 18:00:02 2010 -0800

    Whitespace.

commit ff728b3ccd329e988220ca2857b3dcd989ebad37
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 16 17:51:57 2010 -0800

    Whitespace.

commit 8ce11ac97062f63eb6d0c5ef261bdf9ff6727ed2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 16 12:07:36 2010 -0800

    Convert Movies_Controller::update() over to model based validation.

commit efdb73cb986002806dfe3c9241f792652e4b56fa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 16 12:00:50 2010 -0800

    Make movie creation use model based validation.  Move movie related
    logic from movie::create() into Item_Model

commit b5a6a6a5d5741f592d504b8a444899964101b6b6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 16 11:44:21 2010 -0800

    Oops, log::failure() doesn't exist.  Use log::error().

commit 5a8449f16d3c0db8fb47acf515d319d6eb9e87f4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 16 11:12:27 2010 -0800

    Convert Photos_Controller::update() to use model based validation.

commit 9f6dba723842cc16dd3f3787d232028c6c0c2e19
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 16 11:12:19 2010 -0800

    Check for illegal extensions in valid_name()
    Fix a bug where we were not calling valid_data_file correctly.

commit bf085a1a176f32546f86988049e0c3f809842ce7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 16 00:51:31 2010 -0800

    Convert photo uploading over to the new model based validation
    approach.
    
    - Rearrange Simple_Uploader_Controller::add_photo() to validate
      the form early in the process, and switch to using model based
      validation.
    
    - Move thumbnail generation into gallery_event::item_created() so
      that it's decoupled from the model.
    
    - Delete photo::create() and move all of its logic into
      Item_Model::save().
    
    - Add Item_Model::$data_file to track the data file associated
      with new movies and photos.
    
    - Do some cleanup on the validation callbacks -- it turns out the
      2nd argument is the field name not the value.

commit d7eb102312a02907fbd26064714dc98f3e016103
Merge: 434d351 2c2c77e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 16 00:19:47 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3 into bharat_dev

commit 2c2c77ea391a59f89449d07aff604bf11042515c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 16 00:19:35 2010 -0800

    Remove debug code.

commit 434d351b2f0fc2a048f561665cb1d828d1126f9c
Merge: 654b103 dcf4b5e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 16 00:15:23 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3 into bharat_dev
    
    Conflicts:
    	modules/gallery/models/item.php

commit dcf4b5e71ae8a097f133a06485d60c5fb3400824
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 16 00:13:28 2010 -0800

    Don't pass MY_ORM::original() to update event handlers, since after
    parent::save() it'll be reset.  Clone it first.
    
    This is an alternate fix for #978.

commit 9f03d36d6ee5358b3081f64fc7ef0b0ae42d97db
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 16 00:10:55 2010 -0800

    Don't use MY_ORM::original() here since the values may not have
    changed since the last save.  Instead, use the original ORM passed in.

commit 00c73a4b072d2ad4e45323234b847da4f69d99a3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 15 23:53:43 2010 -0800

    Revert "Fix for ticket #978.  Don't reset the original property as part of the save processing, because that will overwrite the original values with all the new values.  The problem with the original approach is that when changed event handlers used ->original(), it had already been reset as part of the save processing. Went back and forth on either leaving this alone and forcing callers to save the original prior to calling the save function, but there were a few event handlers that used ->original().  This seemed the easier change. So to reset the original you need to call reload() or clear(). There is now an optional parameter on the reload to only reload the original."
    
    This reverts commit daeaca110d16128040c86727c65df225e957f7c6.

commit 99073c3e201c0d2770909781ad0afefdd9d44931
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 15 23:53:35 2010 -0800

    Revert "Did the old commit then save trick"
    
    This reverts commit e41ad23a8ea05d28a99d12c01d8f317455b1d361.

commit 654b103355f1bda15246e651fa91f3c9e08c3901
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 15 13:41:46 2010 -0800

    Validate the model type.

commit 916da15cbb7f24a68be27ef4170be864d51027c4
Merge: 1066e64 260660b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 15 13:36:16 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3 into bharat_dev

commit 1066e64354ff44f88c7dd0de3bb3e50411458523
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 15 12:41:22 2010 -0800

    Call parent::save() before releasing the lock to make creating the hole and filling it an atomic operation.

commit 50e3cc5837df7b0ae8e2d43a3dacee7500ba6db8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 15 12:15:20 2010 -0800

    Move model business logic out of album::create() and into
    Item_Model::save().  This makes creating albums similar to editing
    them and makes it difficult to create an album poorly.  I expect to be
    able to remove a lot of code from the photo and movie helper because
    it's duplicated here.
    
    In order to do this, I refactored ORM_MPTT::add_to_parent() into
    ORM_MPTT::save() so we now add it to the parent when we do save.  This
    allows us to call save() only once which saves a database call per
    add.
    
    The Albums_Controller logic is roughly the same as before.
    
    Haven't updated the tests yet, they're going to fail miserably since
    many of them depend on album::create() which is now gone.

commit 5809949ae8ff87cd5acf56c528e6dc2af6619513
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 15 11:28:05 2010 -0800

    Don't use Input directly to get album names, etc.  Use the form fields.

commit 94f58e8b65b78cafed8f07f70a48b7b271cfc212
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 15 10:48:39 2010 -0800

    Move setting Item_Model::rand_key into Item_Model::save() since it's
    business logic.

commit 1a557ce5a6e367b37e95915290c092b769ed206a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 15 10:36:56 2010 -0800

    Use $value in valid_xxx() functions instead of the member field.  They're equivalent, but it's more intuitive this way.

commit b3e328c9ff4c3e19df4b6d18da947b759fe0c201
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 14 21:04:09 2010 -0800

    Begin the process of converting to model based validation.  Right
    now only Albums_Controller::update() supports the pattern.  All
    form and controller based validation happening when editing an
    album has been moved over.
    
    Model based validation means that our REST controllers share the
    same validation as web controllers.  We'll have consistency
    enforced at the model level, which is a Good Thing.
    
    The basic pattern is now:
    1) Rules are in the model
    
    2) ORM::validate() (which is called by ORM::save() but you can
       call it directly, too) checks the model for all the rules and
       throws an ORM_Validation_Exception if there are failures
    
    3) Actions are no longer taken when you call Item_Model::__set().
       Instead, they're all queued up and executed when you call
       Item_Model::save().
    
    Notes:
    - item::validate_xxx() functions are now in Item_Model::
    - We still call $form->validate() because the form can have
     rules (and forms triggered by events will likely continue to
     have rules.

commit 260660b2f61e96372686eacce2ce7b66a40be4a2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jan 13 12:08:56 2010 -0800

    Somemore K24 migration holdovers.  need to specify the where statement with operands. '=' is no longer assumed. Fixes ticket #979

commit e41ad23a8ea05d28a99d12c01d8f317455b1d361
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jan 13 11:47:27 2010 -0800

    Did the old commit then save trick

commit daeaca110d16128040c86727c65df225e957f7c6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jan 13 11:27:09 2010 -0800

    Fix for ticket #978.  Don't reset the original property as part of the save processing, because that will overwrite the original values with all the new values.  The problem with the original approach is that when changed event handlers used ->original(), it had already been reset as part of the save processing. Went back and forth on either leaving this alone and forcing callers to save the original prior to calling the save function, but there were a few event handlers that used ->original().  This seemed the easier change. So to reset the original you need to call reload() or clear(). There is now an optional parameter on the reload to only reload the original.

commit 639f1e741a5c9c96db1ab894cea7aa90cad82dbc
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jan 12 11:42:31 2010 -0800

    Put quotes around the item titles in all the messages and more importantly actually display the original's title properly.  Fixes ticket #966, but does now show us ticket #978

commit e81acce985b35602bf66ddbf9fe7fa5a065116c9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jan 12 09:42:06 2010 -0800

    If the user hits enter in the search text field, then cancel the submission, because the search is done in the browser and the the enter will unexpectedly reload the root directory.

commit 42d7c9590ee480e106ac343e6b3224d2b0fdaab0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jan 12 08:58:49 2010 -0800

    Correct the "l10n_client_data[index] is undefined" error.

commit 9ff9d70fe23efdc76bb0a3aaaaa3c8e06166797e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jan 12 08:32:33 2010 -0800

    Some whitespace and syntax corrects

commit 3dfac5884ff0661d680293f9888f9ab42e9ebd19
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jan 12 08:31:28 2010 -0800

    Add a css id attribute to the i10n-edit-translation element.  Fixes ticket #969.

commit 3b26d87f3a8fdcf4dc0b86e2b2d72476356c411a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jan 11 14:22:16 2010 -0800

    Reformat the string list so that the search box does not get push off the end of the page.

commit 2b283f4d011a7a67f306e11e590b499242a0774b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jan 11 13:26:10 2010 -0800

    Remove the translation submit button from translation search form.  Fixes ticket #975

commit 284e14d50e33fb6a1ef0ce00444f216fcdbeb904
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jan 11 10:48:27 2010 -0800

    Remove the automatically marking the resizes dirty line as this could cause alot of pain to some installations

commit 3ab6c4915aa0c9dbd2061ffcad0af00e2c50136e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jan 11 10:42:39 2010 -0800

    Fixes ticket #671.
    In the graphics_rules table height and width set the maximum height and width
    values and should be equal.  Initially, the height on the resize target rule was
    less than the height, which artificially constrained images in portrait mode.
    
    **Note"" this fix requires an upgrade to version 22.  All the resizes will be flagged
    dirty.

commit 8fa9ba636b2e5d8a68c24359e9f6147e86798248
Merge: 5a8d48a a11bf29
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 10 10:19:46 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3 into bharat_dev

commit a11bf295078656612603c1c561e9261555d0c40c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jan 9 23:57:16 2010 -0800

    Fix for ticket #972 and more.  In Kohana 2.4, ORM::delete_all ignores any where
    clauses and deletes all the entries in the table unless an array of id's are
    passed as the parameter.  This fix used the Database_builder to specify any where
    conditions. Thanks psvo for find the first one. :-)

commit 5a8d48a86953781c682be7c8052ae804c65f7e3b
Merge: 9864ab4 bd9f945
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 8 15:37:24 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3 into bharat_dev

commit 9864ab4b2708ec54c39092a21828403cbbd25e2e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 8 14:56:08 2010 -0800

    Move the random image functionality into the gallery REST helper since
    choosing a random image is essentially a function on an item collection.
    Also implemented a bunch of other query filters for item collections.
    
    Created item::random_query() as a way of generating a reasonable
    starting point for random queries.

commit fb65a0a5854812a9837c770dfbb27a23bee49e3d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 8 14:20:15 2010 -0800

    Remove debug code.

commit ad3e003e487de09769ca3ba40f1d8b3397658ed6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 8 14:04:41 2010 -0800

    Remove stray semicolons.

commit bd9f945e3f2de4ea2402bd3941dba69c79ddc5a4
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jan 8 12:49:16 2010 -0800

    Remove the display of the "body_attributes" div when in debug mode.  debug mode is by default set up to add new div's to display the location of the content. "body_attributes" are attributes on the body tag and trying to add content introduces an extra > in the html stream.

commit 2ab6eda728180e8406916d04a0bc858c18aaafd5
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jan 8 12:18:46 2010 -0800

    Change file proxy to url encode the path components instead of the entire path.  Otherwise, we will encode the slashes and won't find the item.

commit 895ac72e706daf8aead624c4cb8d556a2299f73f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 8 11:49:18 2010 -0800

    Add item::random() to return a random Item_Model.

commit 3fc6dab7acf8d6bacbc557a8554f92d251c0ed6b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 8 11:49:01 2010 -0800

    Expect merge_where and merge_or_where to handle empty tuples.

commit 2d8843ba4d780b8a9c3662f78d17ca29ebb1c8df
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 8 11:48:44 2010 -0800

    use item::random() to get the random item.

commit a2f5ace4931d4c4d812cd9af1eb3a104bc112b96
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 8 11:47:00 2010 -0800

    Change merge_where() and merge_or_where() to ignore empty tuples so that chaining is easier.

commit 14f6e5f6d3933b958fa61b83c627412282610dee
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 8 11:12:02 2010 -0800

    Allow the "name" param in get() so that you can restrict the query to children with a given name.

commit d43badb4ecac092c897cb52cc54696d1489bc2e0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 8 11:11:38 2010 -0800

    Change url parsing in resolve() to ignore the query string.

commit 46e33f1bbe6f8526470e041658a30df6e9e6c84a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jan 8 11:06:54 2010 -0800

    Fix for ticket #933. Move the inclusion of the piclens script from the theme::header callback to the theme::page_bottom callback.

commit 58620c5faa777019222f7dd9853b2848f46db2a6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jan 7 10:55:43 2010 -0800

    Use rawurlencode to remove any encoding that the browser may have added.  Fixes ticket #954.

commit 72793a547e4625b476776ba4941b836b7ac7f80a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jan 7 10:53:54 2010 -0800

    remove unused calculation of max-age

commit c711bf1b1fcf7840467a7a044b1f511e7b69c139
Merge: 31454d3 10c05c8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 7 10:41:19 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3 into bharat_dev

commit 10c05c855a1634a60048a52e8d90bc51f187ede7
Merge: 058a84e ded8fc5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 6 17:05:00 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 058a84ed76df96aeb6ec082d16fe0d8f317faac2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 6 17:04:44 2010 -0800

    Convert ORM::in() to ORM::where(.., "IN", ..) for K24 compatibility.

commit ded8fc593cccaf66236fb271a6d3f962d8c4b337
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jan 6 13:06:19 2010 -0800

    Typo when reapply the patch for Kohana ticket #2477

commit 188f418a54efe2681166dde33a59dead2e87a4bb
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jan 6 11:42:44 2010 -0800

    Correct the controller_auth_data golden file to reflect that the csrf is not longer considered dirty in the logout controller.

commit a74fd27e5f238f91f39be14056692945eecedabc
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jan 6 11:35:01 2010 -0800

    Updated Kohana to r4737

commit 7778d4c05075e67f096d3d5365e5ae35e1b0a737
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jan 6 10:11:03 2010 -0800

    Provide an error message when the sql in installer::empty_db fails.  Also change the show tables not to specify a database as it will use the database in the active connection.  Fixes ticket #963.

commit 31454d37b3ea02104925f1976609576c5f09c0c6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 5 13:41:06 2010 -0800

    Improve REST tag support.
    - Add support for retrieving a list of members from a collection
    - Implement put(), post() and delete() for tags.
    - Use tag_rest::delete() as a way to remove members from the tag collection

commit c5d14438959346551765757a506689a7d8b13665
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 5 12:05:22 2010 -0800

    $offset should be null by default, not 0.  Hold over bug from the K24 migration.

commit d18be7fe550e1233e7a19184529f1b87a6249343
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 5 12:05:22 2010 -0800

    $offset should be null by default, not 0.  Hold over bug from the K24 migration.

commit 3fffa18e650189e7f846592c9d4c3e7bbfe71c62
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 4 21:48:21 2010 -0800

    Further progress on refining the REST server side code.
    
    1) Deal in fully qualified URL resources through the rest
       interface.  All rest methods are now passed the complete url in
       request->url.
    
    2) Create rest::resolve() which lets individual resource definition
       code convert a full url into the appropriate matching resource.
       Implement gallery_rest::resolve() and tag_rest::resolve()
    
    3) Reimplement tag_rest's get() and post() methods.  They're much
       simpler now.
    
    4) Implement the tags_rest helper which supports working with the
       entire tags collection.

commit 1cab4221ab03afb532ce20e0b8eb0da33ea3bec5
Merge: 6b8a52d 8ae0d4c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 4 21:38:39 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 6b8a52d3287a8ead8be26070b354e672e9e1c0fd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 4 21:37:51 2010 -0800

    Fix the logout link to send you back to the current url.  The old
    approach depended on having an $item, which is not the case on all
    pages (eg: tag pages).  Also, check the CSRF in the logout controller,
    else you can use the logout link as a blind forwarder.

commit 8ae0d4c196c6dbd8877f4f8c6523ee854f877669
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jan 4 13:00:15 2010 -0800

    Change uppercase NULL to lowercase null to match the gallery3 style guide

commit bfcd4efe9282bc7cbaea13dd68b507c2f142f18f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jan 4 12:39:48 2010 -0800

    Another K2.4 holder over... We had, when checking for position, ->where(, "=", NULL) which would never find any.  It should have been ->where(, "is", NULL)

commit cbf9754922f9b5accf0542921f80b571ae36f373
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jan 4 09:10:12 2010 -0800

    Send an empty Pragma header and use the item-updated time in the last-modified header

commit 6c5bb4362957c26e8b340c3d7bdc49d14b51ad5e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jan 4 09:09:21 2010 -0800

    Apply patch for Kohana ticket #2477

commit 0e3327bca70623175791ee41085d55d0cb13fe5b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 3 20:30:35 2010 -0800

    Simplify the REST API code.   Here's what I did:
    1) Simplify gallery_rest to return flat models, no children and do no
       validation for now.
    2) Flatten the REST replies and use HTTP codes to indicate
       success/failure instead of additional status messages.
    3) Use the message and error code support in the base Exception class,
       instead of brewing our own in Rest_Exception.
    4) Get rid of rest::success() and rest::fail() -- we only need
       rest::reply() since all failures are covered by throwing an
       exception.
    5) Get rid of /rest/access_key and just use /rest for authentication.
    6) Inline and simplify rest::normalize_request since we only use it once
    7) Change rest::set_active_user to succeed or throw an exception
    8) Extract Rest_Exception::sendHeaders into rest::send_headers()
    
    Here's what's currently broken:
    1) Data validation.  There currently is none
    2) Logging.  That's gone too
    3) image block and tag code is broken
    4) Tests are broken
    5) No movie support

commit 64e5efd57ba1479179c202e1b76b6eeb42d2924c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jan 2 17:09:40 2010 -0800

    Add rest_controller::__call to the authorized controller methods

commit 5b9801092b3c347161f9e3b8069e05945a5010d2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jan 2 16:55:06 2010 -0800

    Remove the Rest_Exception::trigger method.

commit 07f8e256cf140c41e7eaf293c6c41b31aff8c661
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jan 2 16:22:03 2010 -0800

    Clean up gallery_rest helper test

commit 11f6a3d1eb55193a8fd8ba14d0a34eacec87f51e
Merge: bad8390 ff95c40
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 2 15:49:17 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit bad83900ae07490975541902f157d7e16a8254d9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 2 15:48:58 2010 -0800

    Fix two issues with change_album_test()
    1) We do support changing the name.
    2) Choose a random name to avoid conflicts.

commit ff95c4079e70cec101a214a07d2ef64ac381d5cd
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jan 2 15:48:54 2010 -0800

    Fix the tag_rest helper tests

commit d4ad81e657e08630cca80c69b05d7d5fcc6c83d8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jan 2 15:04:43 2010 -0800

    Correct unexpected error in gallery_rest_put_album_no_path_test

commit 681613ac9e1fb21cab93033cf08b0e02b673e1b8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 2 14:52:10 2010 -0800

    Fix up tabs, leading <?php.

commit 7369c68ddd08cfd4d443985072870df1fefaca18
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 2 14:47:59 2010 -0800

    Ignore modules/gallery/views/kohana/error.php -- we're required to have that name by Kohana_404_Exception.

commit 3ceb0d57ba600b2e1ff0bf4c8bc16ead0f1f23d1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 2 14:37:51 2010 -0800

    Update the expected response after modifying an album to match the
    change I made in 20bd09ff004816ae152a2f890a24dc5e85741fac

commit 7c03644777571105ac2ceaec4892bf5920de7283
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 2 14:33:31 2010 -0800

    Update the expected response after modifying an album to match the
    change I made in 20bd09ff004816ae152a2f890a24dc5e85741fac

commit 28597ba53354537704899e7ad9eb39bbd5718b21
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jan 2 14:31:59 2010 -0800

    Correct file structure tests, Have the tests delete the userid they create so as not to impact other tests.

commit bff7b393ec763c50f9fe66fef16150bcaa55dac3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 2 14:02:41 2010 -0800

    Stop checking the exact nature of all grups after install.  It doesn't add any value.

commit 183e65210a892954b74db37be6884ede16cfcc80
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 2 14:00:28 2010 -0800

    Verified and updated.

commit b3023493f4be1c84412cbcce9273da279655ee6e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 2 14:00:00 2010 -0800

    Clean the G2 base url so that we can't leak XSS vulnerabilities that
    way (highly unlikely, but now it's impossible).

commit 8e4c48837cfd269400c9399c91e46f8b6d882a4f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 2 13:56:01 2010 -0800

    Verified and updated.

commit 14b0ab08b4cab5b78bca3d5f63eb0f34cf788494
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 2 13:53:01 2010 -0800

    Update the expected response after modifying an album to match the
    change I made in 20bd09ff004816ae152a2f890a24dc5e85741fac

commit 4ab2400d18e1625cebbf94310bee265b272f6fba
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 2 13:47:28 2010 -0800

    Add a cache buster to the resize and file urls.  This fixes ticket

commit e413cb301136ada54b30d6f2eee06c7ee0700756
Merge: 1544bea 77cabb0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 2 12:53:56 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 1544bea535cd9ef46ffb0c9414fcdb3302d56670
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 2 12:46:28 2010 -0800

    Add a tip about deactivating some modules to make importing faster.
    Combine two tips into one.

commit f65794785a12ccdd289b24d061cb617740e7384b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 2 10:51:47 2010 -0800

    Take precautions against deleting var/albums, var/thumbs or var/resizes.
    Fixes ticket #916.

commit 77cabb056faf451e7efcf89579bb168944dfcb99
Merge: 1b3d20a 0be0111
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jan 2 08:42:14 2010 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 1b3d20a0fbb114423bf52ef8fc8b7c7aae150391
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jan 2 08:42:06 2010 -0800

    Correct formatting in the uploadify dialog box for safari.

commit 0be0111b74c2a971b9c79f1dad29791eabe763b2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 1 22:11:08 2010 -0800

    Remove an obsolete todo.

commit c3075d81815ee059658e5cd29ef849ab194ef0fa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 1 21:58:07 2010 -0800

    Add a code block showing how to add a mod_rewrite block to the old Gallery2 install to redirect urls to Gallery 3.

commit 80e35affcb20e9ec1ded7ae2e750444718f8bffe
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 1 21:56:29 2010 -0800

    Improve the PHPdoc for map()
    
    We now expect to either get query parameters from the Gallery2 url so
    we can pick off g2_itemId, or we'll get the rewrite url in the path
    query param.

commit 161366e51d17a3a31fcce79505948c5945603ff3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 1 21:02:52 2010 -0800

    New controller for remapping Gallery 2 urls to Gallery 3 urls.

commit 6d5d68a3f963109230b898bc1b559af7ac7585f7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 1 17:41:20 2010 -0800

    Start tracking the original G2 url and id for all entities.  This will
    allow us to map G2 image urls to the appropriate G3 ones.

commit df001700dd071c59c47afd07d2c756487d20684e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 1 12:17:04 2010 -0800

    Don't enable the rest module by default yet; we should make sure that
    we do a more thorough security audit on it first.

commit 1d42d5533a6f7ace5e2288d78f3fa55952e23ef8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jan 1 09:55:06 2010 -0800

    Change the installer so that the rest module is automatically installed in new installations.

commit c4ba5b6f653145f134dbed64db70b2fee3ec53c5
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jan 1 09:54:10 2010 -0800

    Correct the sql so that the guest and admin passwords are actually blanked as part of the export

commit ee1a032e4dec8dcb85702ac2c30807345feaa7e6
Merge: 40d496e 25f936e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Dec 31 18:32:24 2009 -0800

    Merge branch 'master' into talmdal_dev

commit 25f936e1edc8c47a789b423b9cadbe071a65256d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 31 18:13:25 2009 -0800

    Show context menus for movie items.  Fix for ticket #960.

commit 20bd09ff004816ae152a2f890a24dc5e85741fac
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 31 17:21:19 2009 -0800

    A more thorough fix for #745 and #940.  Stop using the referer to
    guess how to send the user back.  Instead, proxy the originating item
    id through the edit forms so that we can tell exactly what page we
    were on when we began editing.  If we were viewing the item, then
    redirect to its new url (in case it changed) to fix ticket #745.  But
    if we were viewing some other item, then just stay on the current page
    to fix #940.
    
    The page_type approach didn't work because you'd have the same
    "collection" page_type when doing a context menu edit for an album.

commit a018e6235f09dd727b07f24801a8f237e07b3260
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 31 15:49:43 2009 -0800

    Modify Forge to accept multiple hidden params (this was broken by an
    API change in K24).

commit 40d496edeef614f7f3bc55d2fb178ea581dcd9f6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Dec 31 13:24:00 2009 -0800

    Remove extra debug statement in rest_controller::access_key() and restructure the Rest_Tag_Helper_Test to only create items as required for test in each test.

commit 0bb13da25ae06106358f0bb99f2a6dd104cc932f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Dec 31 12:47:18 2009 -0800

    Add quotes to the module name

commit 4611eb2142b155f1113e35b456fe38e33f0884fb
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Dec 31 12:32:54 2009 -0800

    Move the set_active_user and normalize_request methods to rest.php helper

commit af10f0abcf452db92b5744a6c2d059d647d13d13
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Dec 31 12:24:46 2009 -0800

    Only create the user or the target photo in the tests that require it.

commit 1a12a5e3c89c41ebd087591c16611fbab4293f5b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Dec 31 11:51:51 2009 -0800

    Create a Rest_Exception class and use it to convey status to the client instead of calling rest::forbidden and other rest helper error messages.

commit 732047e9c3cbd178acd07c531ed78afade9a4918
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Dec 31 09:56:41 2009 -0800

    Create helper functions to create a test user, an album or image.  Don't create the test objects in the setup, but do it in each test.

commit 4b44600bf9c3933d62c68fde35449b8681df4c82
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Dec 31 09:01:49 2009 -0800

    Change the gallery_rest::_validate() method to use the form rules in Item_Model.  Change the Duplicate errors to sentence case. And generally clean up the flow in _validate().

commit 11792a12bb2002a434217efabe232022dd253b67
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Dec 30 17:08:01 2009 -0800

    1) Remove the rest::not_found method and replace it with "throw new Kohana_404_Exception
    2) Don't use the input path to lookup the item via relative_path_cache.  Instead use url::get_item_from_uri method.

commit e6111e616b5d6282b8aeb1d1b09fc6d064caafe8
Merge: d6ddbd1 5d6e264
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Dec 30 16:13:13 2009 -0800

    Merge branch 'talmdal_dev' of git@github.com:gallery/gallery3 into talmdal_dev

commit d6ddbd1a31600543c4d8dec406ef73b0e8b84dde
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Dec 30 16:12:32 2009 -0800

    Rollback the refactoring of the update into a helper method. Also remove the refactoring for check for commits

commit d50b7531993fcf7dee2542255f11b20257db737d
Merge: 2e98825 7af8446
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Dec 30 15:52:18 2009 -0800

    Merge branch 'master' into talmdal_dev

commit 7af844606d79d1f987c6d754f5c5db64d86acc47
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Dec 30 15:33:22 2009 -0800

    The problem occurs because the square brackets are treated as special characters in the glob to find the children.  This patch escapes the square brackets. Fixes ticket #855

commit 5d6e2642119d64590bcafcb18eed19353e12666b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 30 12:07:24 2009 -0800

    whitespace.

commit 399c5c21f6da5dc02e55be6d5b453b43ae4cf158
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Dec 30 11:47:34 2009 -0800

    Force the 'Select Photos...' button to always be in the center of the upload dialog with the flash object overtop of it. Fixes ticket: #908.

commit 55eeb8336fcfd2d2c0542e85de9da100bce1c338
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Dec 30 09:55:28 2009 -0800

    Change the file proxy to use the expires helper to manage content expiration.  Fixes ticket #953.

commit 2e98825c25c540dfc2555a2f36bc3b9e2f80db54
Merge: 7e8985d 373dcf0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Dec 30 07:57:23 2009 -0800

    Merge branch 'master' into talmdal_dev

commit 373dcf0a424ae27388ccf5bfa55f54f9d896778a
Merge: 41969cc f6adcfe
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Dec 29 15:48:40 2009 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 41969cc9e454637f6e3a04b0e339942cbb140cf6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Dec 29 15:48:21 2009 -0800

    Another holdover from the K2.4 conversion. In R2.4 the url::current(true) was returning an empty string. This fixes ticket #955.

commit 7e8985d0e8ae8db124ba20c8292c1ca8df038169
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Dec 29 15:26:18 2009 -0800

    Found another where statement that required converting

commit f6adcfe054a37afde734d672f9ad2f75c05c0df2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 29 11:36:52 2009 -0800

    Make sure that we have the mbstring extension.

commit 02d3fe6973d9511083d8ec6305728f06649f1034
Merge: 5925e58 8cf0348
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Dec 29 11:42:07 2009 -0800

    Merge branch 'talmdal_dev' of git@github.com:gallery/gallery3 into talmdal_dev

commit 8cf0348e6c9b3dac0a14356676dec93a24b2dad6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 29 11:36:52 2009 -0800

    Make sure that we have the mbstring extension.

commit 5925e586bab285b026007ab12fdb6f3b6225e13b
Merge: 8ce4d03 38f2784
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Dec 28 11:27:43 2009 -0800

    Merge branch 'master' into talmdal_dev

commit 38f2784fbbb0661dc57627d2878cb640bbffe271
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 27 13:40:38 2009 -0800

    Allow users to upscale images in the slideshow by making the maxScale
    parameter configurable in Admin > Settings > Advanced.
    
    You specify the scaling factor.  Normally, images fill the stage; 0 ->
    never scale up; any other positive number S --> scale up to S times
    the original size of the photo (but never bigger than the stage)

commit 754c531c7ec77278e44669ee5a854dd4653120f8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 27 13:37:39 2009 -0800

    Only mark a variable as empty if its value is null.  So 0 shows as 0.

commit fc5d1e5d74124de0dd8de361fe08e83653f960a2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 27 12:41:52 2009 -0800

    Fix a bug where we weren't replacing table names when there's no
    prefix.  This is wrong because even when there's no prefix we have to
    get rid of the {curly} braces.

commit 8ce4d03821da406df921cde73b3e6e7147975dab
Merge: 0a48212 31bb09c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Dec 27 12:11:25 2009 -0800

    Merge branch 'master' into talmdal_dev

commit 31bb09c9b6d420cf77cec47599e937d733652a06
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Dec 27 12:10:37 2009 -0800

    Change ->in(...) ->where('id', 'in', ...)

commit 0a482127b244f8ec8f8fac7af928391e05d4dd8e
Merge: bccb6fc 55f9408
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Dec 27 08:35:19 2009 -0800

    Merge branch 'master' into talmdal_dev
    
    Conflicts:
    	modules/organize/js/organize.js

commit bccb6fc02146fb07cd1b472a90092e78e2259e91
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Dec 27 08:32:12 2009 -0800

    Clean up validation the check for duplicate names or slugs, finish converting the rest API to Kohana 2.4

commit 55f9408d509b6ee34e62948d311d6d963e3ffa6d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 26 15:08:14 2009 -0800

    Fix the scrollbar in the organize panel by restricting drag-to-select to #g-organize-microthumb-grid.

commit 5808ba48c8e5e212571ebd03e874a386dae92786
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 26 13:24:12 2009 -0800

    Roll forward to the new CoolIris slideshow -- it appears to be ready
    now.

commit e885ca161f1cff1c8b57190915dd42146c33bf66
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 26 13:21:16 2009 -0800

    Reuse $theme->item() for our descendants_count() call.

commit 07e83718a0cd1bcef1f0a0546ffcb7cb6a1735ae
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Dec 26 11:26:44 2009 -0800

    Forgot to commit local changes to item helper for K2.4

commit 3060a6f662da66008d57a461bf1c9b5b4aa2b002
Merge: 1cd6a61 32d25da
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Dec 26 11:24:50 2009 -0800

    Merge branch 'master' into talmdal_dev
    
    Conflicts:
    	modules/gallery/controllers/albums.php
    	modules/gallery/controllers/movies.php
    	modules/gallery/controllers/photos.php

commit 1cd6a615bb47a33794e4a4f690c87a348ab752d7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Dec 26 10:07:33 2009 -0800

    For some reason this wasn't a clean merge, probably because of line endings.

commit 32d25dafd5b033338b6a9bb8c7c53edab462543a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 25 21:05:39 2009 -0800

    Prevent form::dropdown from overzealously escaping ampersands by applying this diff:
    http://dev.kohanaframework.org/attachments/1490/form.diff
    
    Upstream ticket: http://dev.kohanaframework.org/issues/2463

commit da7ee6ab30d8f2545781910d7ef1f573c5dfee93
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 25 13:24:47 2009 -0800

    Fix over-targetting in CSS

commit 07a9ef2276a421fe3b8ebad4c4ff845b147be847
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 25 13:24:38 2009 -0800

    Convert some database calls

commit c50c2d135c5e769e8904e5dc766d27bcd4a1d8b3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 25 12:39:09 2009 -0800

    Fix uses of count_records() and use ORM to count instead.

commit 73aeed890263386a0cd44b210ddf360dc6613843
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 24 20:08:04 2009 -0800

    indentation fix.

commit 586f2d78b85cbe964a625b3c83896c1c8a991702
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Dec 24 19:25:14 2009 -0800

    Add the functionality to add, delete and rename tags via the Gallery3 remote interface.

commit 4268889fbf82705867211a6949f6b3411dde0de3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Dec 24 19:24:22 2009 -0800

    Update the gallery_rest handlers test to pass the path in as an array in the request arguments property instead of the path property.

commit 24ef52eccbe854688d61a798ee79d64f24f63ac1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 24 18:06:26 2009 -0800

    whitespace fix

commit a2a3741b5351afb064097238daf0d79e1526cd51
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Dec 24 11:36:00 2009 -0800

    Change the image block rest handler to expect the type (i.e. random) as a parameter not part of the path.

commit b16ab9d94af3b463c3f3497c0b4cb57416349a27
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 24 03:08:06 2009 -0800

    Don't treat objects like strings.

commit 057e8d09afaecd27f672f804a6a65341578d50fd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 23 20:51:33 2009 -0800

    Convert a bunch of leftover kohana::show_404 calls to throw
    Kohana_404_Exception instead.  These are the ones where we used a
    lower-case 'k' so my previous filter didn't catch it.

commit b62083bd24b7e5fa079726dc0819fb646c31192b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 23 20:48:50 2009 -0800

    Cleaner version.  Probably has a bunch of cruft in it, but it looks good enough.

commit 29f982679d775dc981544b06da64970dee9e6e47
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 23 20:36:38 2009 -0800

    First shot at integrating the K24 error page.

commit cf6de01f1e51a8dca97347600a844a07b4f80f8b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Dec 23 14:20:23 2009 -0800

    Provide a REST interface to retrieve tags or tagged items.
    GET  /tag?limit=nn,offset=nn  Retrieve all tags sorted by count descending
    GET  /tag/uri/uri/uri         Retrieve all the tags for the resource specified by path
    GET  /tag/t1/t2/t3            Retrieve all the items that have the specified tags
                                  Can specifiy limit and offset to limit response size

commit eb047d7f5deff499ce71fe720058b335f4868fe3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 23 13:31:52 2009 -0800

    ORM relations now require you to do find_all() or count_all() to get the results.

commit d0dd6650bea15a30a2da66f996980a269a5f9c44
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Dec 23 13:13:03 2009 -0800

    When normalizing the rest request don't assume that the additional arguments are acutall a path.  Leave it up to the handler to determine.

commit 3e8e13bd2533ff7e3493b27c8a8587dfb65e1b26
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 23 12:42:57 2009 -0800

    Updated Kohana to r4728

commit 05c50a052348a4ae664e0b4ca475f9fb3228f24b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 23 12:29:40 2009 -0800

    Revert "Fix preamble issues.  Upstream tickets:"
    
    This reverts commit b2291a0e34234ee30ea1d80b70122b68a8869917.

commit d622d1aa4f3b7c844de2f29cca2e04d9bb56bb86
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Dec 23 09:32:32 2009 -0800

    Updated the unit tests to match the current API
    Corrected a problem identified with the unit tests... failed if the path was empty on PUT.

commit b79e0c9d572bd578c78b9ed6e3e23d3ffbf6bf0b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 22 22:15:13 2009 -0800

    Back out my temporary fix for http://dev.kohanaframework.org/issues/2384
    now that the real fix is in.

commit ffca63235a53e8005d2f163efd97dbf69f8a1442
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 22 21:18:31 2009 -0800

    Fix where tuple sent to descendant_counts() -- it needs to be wrapped in an array

commit b8ee6f25bdd9372dccd4552ca29cf6f2857e8164
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Dec 22 18:55:03 2009 -0800

    Add a restful get random image block

commit 63fd9622c06e97e67e6dd11db00b12157924e6b8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 22 16:50:15 2009 -0800

    Don't use as_array() on the result from db::build()->execute() -- it's no longer necessary.

commit 0bc92614d37e08ab5f85c83cf4317132d4c6b99c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 22 16:48:18 2009 -0800

    Checkpoint

commit 6601bb29d90ebe0b6f6df0b27616d2804783e447
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 22 16:25:31 2009 -0800

    Update.

commit a6da027aad5072a85719fc9e201ee946963e74f0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 22 16:22:24 2009 -0800

    The default value for $offset should always be null (according to the
    new K24 ORM).
    
    Fix up a bad where tuple in the test.

commit 71e154b6748a2bedd2289133c6b4c6f3f58d3603
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 22 16:13:08 2009 -0800

    Use a Database_Expression to handle the MAX() function.

commit bdd7c68ede05d46ba758b0ab3e04b46202d761af
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 22 15:41:47 2009 -0800

    Fix some function definitions (they should be static)

commit d711c5b9300a17e7269415573a15e8a63f0d149c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 22 15:36:36 2009 -0800

    Convert tabs to spaces.  Enough to get the file structure test to
    pass, but not really the Gallery coding convention -- this is a
    compatibility class though.

commit b2291a0e34234ee30ea1d80b70122b68a8869917
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 22 15:13:36 2009 -0800

    Fix preamble issues.  Upstream tickets:
    http://dev.kohanaframework.org/issues/2457
    http://dev.kohanaframework.org/issues/2458

commit fda4227bb10d7c9ae4de5f16e59890bf7cf3b83b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 22 14:00:52 2009 -0800

    Latest K24 does not automatically add an id attribute to every form
    element with the same value as the name.  Yay!  That was a weird and
    unexpected behavior.

commit ca293db214e2f74471ce7f9d29f65bd629f2f284
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 22 13:57:49 2009 -0800

    Don't rely on implicit object -> id conversion, that doesn't work with K24's Database_Builder::where()

commit 0650109d4bb5442cd77fcda61745dab67a632836
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 22 13:50:52 2009 -0800

    Add merge_or_where() to MY_Datatabase_Builder and use that instead of
    or_where() for compatibility and convenience.  Caught by failing unit
    tests.

commit 7118f84aa9ae0ece97a41aba4e4d269a1e136df6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 22 13:32:02 2009 -0800

    ORM::factory() in K24 does not allow you to specify an alternate key
    for lookup.  So instead of doing:
      ORM::factory("foo", array("some_key" => "some_value"))
    
    you have to do:
      ORM::factory("foo"->where("some_key", "=" "some_value")->find()

commit cbe5a89a9fa6ac19f89eacf3821c3f46bc42bf3f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Dec 22 12:32:27 2009 -0800

    Update the api so it allows images to be uploaded.

commit 8b9a02084a8205fce67860c98ed4ab72b1156a0c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 21 21:27:43 2009 -0800

    Updates for the latest version of Kohana 2.4:
    1) Controller::$input is gone -- use Input::instance() now
    2) Handle new 'database.<default>.connection.params' parameter
    3) Handle new 'cache.<default>.prefix' parameter

commit 9285c8c66c530196399eb05bb5561c3fa5538335
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 21 20:05:27 2009 -0800

    Updated Kohana to r4724

commit 9c5df1d31bd214fab051b71d092c751a1da20ecc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 21 19:59:44 2009 -0800

    Fix preambles, and fix the File_Structure_Test to be more lenient
    because of preamble variation in K24.

commit e0dc5206486dc6370b102fb80b050b7c81bf2420
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 21 17:26:24 2009 -0800

    Updated for recent K24 Forge changes.

commit e94009e90df5124ab83aad6a7f6a45806c3ff71b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 21 17:26:04 2009 -0800

    Add a helper for doing complex string comparisons

commit a474fb51556d9bf102f779faacf0671dc11dade7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 21 16:40:48 2009 -0800

    Get rid of unnecessary cleanup that makes debugging harder.

commit ffb81c33571072e549d9f84f76c801699aef4cff
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 21 16:40:18 2009 -0800

    Rename $id --> $uuid for clarity.

commit 5080bc12a240e6e6c1fb7d2c8e93d78137b5092c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 21 16:40:01 2009 -0800

    Fix the relationship.  DigibugProxy belongs to Item, not the other way
    around.  K24 ORM requires this because it needs to know where the
    foreign key is (in the Digibug_Proxy table, in this case).

commit 31a545fa26a002432f01beabdae147de34793ec8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 21 15:58:22 2009 -0800

    Add missing execute() call -- tests ftw!

commit cc4d7c672c863185bab5d654222e205d6517e98a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 21 15:40:28 2009 -0800

    Update database tests for K24.  Use a mock database that we load
    through the framework so that we're properly testing the
    Database_Builder, it's a lot cleaner than what we had before.

commit e1f43ad403ac3deba8ac19d3d748500bba608395
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 21 12:22:19 2009 -0800

    Updated for K24

commit 5df1dc135b6b1fad77a23cd604f008e0784bdd73
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 21 12:13:25 2009 -0800

    Fix some bugs in the cache database driver, and update the tests for K24.

commit 0c3fd9579fa5008cb51ab7080f2d861aa3fbfd6a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 21 12:09:16 2009 -0800

    Stop using Kohana::lang.

commit 7d8f76fa7a303447f7835b803c05739b3e8e48c3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 21 12:07:20 2009 -0800

    Fix the translation keys to not require "unit_test." as a prefix.

commit bfcd99f3f2a7d1b2c5ed0b6593c202ff07058b68
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 21 11:30:34 2009 -0800

    Updated for K24

commit 0cd03c88834b106f6ae97173278aaf943e0d9d90
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 21 11:30:26 2009 -0800

    Add Database::set_default_instance() for tests

commit 287f79dd721193aaaafdee3908cd8f251654de02
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 21 11:30:06 2009 -0800

    Updated for K24

commit a22aa4ab05e50bb0bdd5e59a27b5f1867323f7a2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 21 11:29:28 2009 -0800

    Forgot to rename the file when I renamed the class.

commit 91e39f75a2e2954377da1c830388965f030f03be
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 21 11:29:13 2009 -0800

    Hardcode language translations since K24 now does it totally differently.  This forks the code, but it's reached the end of its development path and we should replace it with phpunit anyway

commit fd7990735cc73b5b1494190b9c187297e588a9f6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Dec 21 11:25:11 2009 -0800

    Added validation to the edit functionality, since we can't trust any input

commit 213f718e59676ac7265735ad10d7861a4abbe97b
Merge: 2e221a8 86e0bc8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Dec 18 15:00:01 2009 -0800

    Merge branch 'master' into talmdal_dev

commit 2e221a84cce04f23251fa7c78a4e0a010c070b5d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Dec 18 14:59:44 2009 -0800

    Change how request input is processed.First the input is no longer json encode, All the get variables are loaded, then the post variables if the request is a post, and then the path is extracted from the uri.

commit 6f063aceac6233552d5caaae8145b51efe490825
Merge: 9af0a4e 86e0bc8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 18 14:27:58 2009 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3 into bharat_dev

commit 86e0bc863a1c6739a9cd153931c099307e4c1000
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 18 14:25:35 2009 -0800

    Use url::base() instead of item::root()->url because we can't be sure
    that will work (if your database is sitll at Beta 1, you don't have
    the slug column, for example).

commit 9af0a4e59c17987137b0ea316b6ccd45c02ca8a8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 18 13:36:43 2009 -0800

    Convert a database call.

commit c80427964751cdbd7a800996d3d556699fdf0405
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Dec 18 12:58:23 2009 -0800

    Add the parent path to the resource

commit eb55a3c9776d27eb8525c3cf1718456a19258936
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Dec 18 12:21:10 2009 -0800

    Add the name field to remote interface.

commit 046382c3e7f863e291d000eb2bb549474e475d1b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 18 11:27:44 2009 -0800

    Remove some unused references to Database::instance()

commit 338af4a722fb08abdf9f5b364418ceb83a329cdc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 18 01:16:27 2009 -0800

    Database::escape_str() is now Database::escape().

commit ca1f7d0da7495aaa2558ddad134f14164a550ab3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 18 01:12:16 2009 -0800

    Convert a database query.

commit c10386fe87f9fe0d659e730d171800f26f809604
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 18 01:05:02 2009 -0800

    Convert html::specialchars() to html::chars()

commit 0736cf203b37534848482e47c3afde9b58d6ce27
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 17 21:32:53 2009 -0800

    In Kohana 2.4, ORM no longer does the find_all() call for us when we
    retrieve related ORMs.  If we tack a find_all() on the end, it breaks
    the User_Definition interface so create User_Model::groups() and
    Groups_Model::users() as glue.

commit 9d19e272d672ffc224dfed2799f8e480ecb583e4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 17 21:16:51 2009 -0800

    Convert some database queries.

commit 8883d1605a12b94fb8f8b5a39ce5b4675b358302
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 17 21:16:37 2009 -0800

    Convert some more database queries.

commit 9b75b85e71b47fc953773544c930f5cecf6b34a7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 17 21:05:58 2009 -0800

    Update all database queries such that we can run "php index.php
    package" and generate the same SQL as before.

commit 2aba8c4bffed5fb38689d5ed998c486ab6bde902
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 17 21:05:47 2009 -0800

    Simplify add_table_prefixes.  In Kohana 2.4, it returns the bare table
    name, not the prefixed one so this makes our logic easier.

commit c99a75b5d150f14c96697833f08354afd456323a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 17 09:16:44 2009 -0800

    Improve the exception error message.

commit cd0bf67441e8de9f32342dd0fb486976a8661d8b
Merge: 0d4c808 02b3c4e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Dec 16 20:14:03 2009 -0800

    Merge branch 'master' into talmdal_dev

commit f431d7e12e0be10cfd7ea30543a44cf17a4e8275
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 16 18:04:44 2009 -0800

    Convert a database call.

commit 86467363c20c6150ee0fccc7901cd34b281be2b1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 16 18:03:23 2009 -0800

    Convert a database call.

commit 9b3b9c6da640ee3856cc113917faef34ba77e3db
Merge: 4566c29 02b3c4e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 16 17:58:49 2009 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3 into bharat_dev

commit 02b3c4e70478519e3baa7df80fefd19ebdd6e2e3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 16 15:18:08 2009 -0800

    Adjust for the fact that movies have JPG thumbnails.  Fixes ticket

commit 0d4c808b8ed3f75168bc73dfd4bec700542e0f43
Merge: 61c1a8b 7515b42
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Dec 16 10:14:55 2009 -0800

    Merge branch 'master' into talmdal_dev

commit 61c1a8bfbe83a108adeb748fdba54df00d411db8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Dec 16 10:14:31 2009 -0800

    Make sure we always return a children array for albums.

commit b4a35a8e2cc38a2d8aff2cf1ba16f4357aa1a52a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 16 09:37:28 2009 -0800

    Show the right edit form for movies.

commit 4566c299c1d1756fa78bc873a2266c28e047118a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 16 09:24:38 2009 -0800

    Convert some database calls.

commit 96968b41813498a6fe5dd01142126333454f6eda
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Dec 15 21:04:19 2009 -0800

    Include the thumb, resize and fullsize sizes (height & width) in the resource contents returned via the rest interface.

commit 95e812067e573f57a0a00f7d6047f8330c74108c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Dec 15 20:42:01 2009 -0800

    Change what is used as the url to the item.

commit 7f5d5b047076f734c55d527cea93bb166ff676e6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Dec 15 12:24:22 2009 -0800

    Add the resize url to returned resource.

commit 22e813d0be73a95585cebcf30a1f4e03d7652d3a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Dec 15 10:57:10 2009 -0800

    Updates the the interface based on actually using it.

commit 3f8d17fcf13ab8c2f213338bca951120bce5b9c7
Merge: d521faf 3d1f166
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Dec 14 06:59:00 2009 -0800

    Merge branch 'master' into talmdal_dev

commit 064a24b897880e4dbf4dafeb756406bbd907bdba
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 13 17:15:59 2009 -0800

    Convert a database call.

commit 8c03c7a073df7d210e1e961797cc39fd124ec390
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 13 17:15:12 2009 -0800

    Convert some database calls.

commit cb55eea0f3609d802da5fdb0ea1c8b3acb0b8ea9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 13 17:03:07 2009 -0800

    Convert a database query.

commit c65cd702fc8e732416f13f4eb21c8e8e95b09c28
Merge: d5c3521 7515b42
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 13 16:52:18 2009 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3 into bharat_dev
    
    Conflicts:
    	modules/gallery/helpers/identity.php

commit 7515b424e00831e9588a48ab46eca0405dde250f
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Dec 12 17:13:24 2009 -0700

    Tighten-up white space for error message/icon on forms. Fix icon/white-space on g2_import messages, fixes #765.

commit 3d1f166fe5747bc3d11fb6cecf2a11b143efeec4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 10 21:20:18 2009 -0800

    Log the entire stack trace when we catch an exception.

commit d521faf63d6fcca13445a3bd89387b3a6dc591d4
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Dec 9 16:04:08 2009 -0800

    Add the REST delete processing for albums/photos/movies

commit dfc556e8a6e2c0636a93d87bc0cdb0f85f588fd4
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Dec 9 12:06:45 2009 -0800

    Implement the RESTful interface for albums/photos/movies

commit c3a0f419c6f53fa93b47fa76f5afdc3696d64720
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Dec 9 09:50:57 2009 -0800

    Refactor the code to check for name or slug conflicts and to update code out of {Albums|Photos|Movies)_Controller and into the item helper so we can reuse it from the rest put handler.

commit 367f2218f6bc278a7d0bd870e03a5d631155871a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Dec 9 08:41:38 2009 -0800

    Use the relative url cache to look up resources instead of the relative path.  This allows us to forego the extension as part of the REST url.  As well, urls are consistent between normal usage and rest usage.

commit 3c30d595ae6a9a82e06f5427150d3667f00ef695
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Dec 8 23:28:50 2009 -0800

    Add the REST get handler for albums/photos/movies

commit 9319f37c4f157c5b0787df9116889e4e9ea5df78
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Dec 8 23:27:43 2009 -0800

    Correct the error message when the item is not found; remove the check for no request_key (access_token) as athat is treated as public permissions

commit 837396ca2889b9e4e4a7b33a31409a2cd12a483c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Dec 8 18:06:16 2009 -0800

    Change the url mapping so that path to the is part of the url
    The request key is put in the X-Gallery-Request-Key header
    The HTTP method can be override by using the X-Gallery-Request-Method header
    Normalize the request data so that it doesn't matter where it comes from (HTTP get or HTTP post request)

commit 6fd04069aec67ff115cac4296c013cb5eea6782b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Dec 8 12:50:13 2009 -0800

    Add another error handler "not found" to the rest API.
    Implement the get_album rest request handler.

commit fa0663d7df0cfcf0818e182f3d2d19fc6be2a5d1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Dec 8 09:19:48 2009 -0800

    Rename the backing table from rest_keys to user_access_tokens
    Implement an api to format the errors and success messages
    Removed the custom routing... urls are now /rest/<module_name>/<resource>

commit b0de1fe1d975e43a060c66da16f3cc2474d70bae
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Dec 7 20:46:18 2009 -0800

    Delete Form_Label.php which was accidently committed.

commit 71be6cf239fba5718cd6336403df602b05c21c7d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Dec 7 18:11:26 2009 -0800

    The rest framework that the new gallery3 remote interface will be built on.  At the moment, there are no handlers to perform any functionality.

commit d5c35210b90565e7a6e79b86288b843b8e3b835e
Merge: a6dbd25 16bed1f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 6 21:38:47 2009 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3 into bharat_dev

commit a6dbd25cf11e1b5044862eea9bac0ff3cdf6de80
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 6 21:38:09 2009 -0800

    Update database queries.

commit 2ff84b092d0b9d8ca61b313d2aa5d7941f3f8711
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 6 21:35:04 2009 -0800

    Update database query.

commit b129ff7cfa1690c1af602035ebfc0e374b9066f1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 6 21:34:48 2009 -0800

    Update database query.

commit 0a345895b424b74920f27bc60a7f3c6e22695bd1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 6 21:34:35 2009 -0800

    Updated for K2.4.  This is a fork from the main-line, but we're going to replace this with Formio anyway.

commit dec084fe08db1505d272e6a577b8627f57abef16
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 6 21:34:09 2009 -0800

    Update database queries.

commit 2f5c612036984a6f09995e8c692f399fb8c7fb15
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 6 21:33:17 2009 -0800

    Update database queries.

commit cfbbc22f7c49db18cf11908337c00a61146ab61b
Merge: 61d64c1 16bed1f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Dec 6 21:32:37 2009 -0800

    Merge branch 'master' into talmdal_dev

commit 16bed1ffd54000922f806af669f618970600420f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Dec 6 21:32:27 2009 -0800

    Remove the hidden form variable _method which was used in the no longer rest controllers.

commit fb899c313c9cdf4d6b0529c53d2b647999ad94db
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 6 21:28:40 2009 -0800

    Further simplifications to viewable().  Stop trying to optimize for
    the case where we just have one restriction, it's unnecessary.

commit b9dadb77c3c75c6ba6ead293757df440976b3917
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 6 21:21:35 2009 -0800

    Get rid of unused _method param in the item edit form.
    Fix viewable() to properly OR view restrictions together.

commit c22bf27cc2b69bc2109b9562cbd1a8f6a9143ef4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 6 21:02:30 2009 -0800

    Add the current file/line at the top of the trace.

commit 2be72bb1c3c5790e0ce68c2609de141bf9756614
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 6 20:42:38 2009 -0800

    Overload Kohana_Exception::text() to dump out the complete stack trace
    so that we have useful data in the logs.

commit 3d0a7a33ad0c1bbc16ef6156609110e14b6e0ee6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 6 20:38:57 2009 -0800

    Fix a few more database queries

commit 2132c9a96d923d48effc3fe8facedff4a4da3b13
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 6 20:19:54 2009 -0800

    Fix some database calls.

commit 5a7449f31574c7c548abe4244a6ba0993138e013
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 6 19:51:25 2009 -0800

    Update more database calls.

commit 112aafe5137220181dd74afc509fa6cd39573028
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 6 19:51:00 2009 -0800

    Oops, removed the overload for query() before, we need this back so
    that we can prefix table names properly.

commit 8ed47ceaad15bc7ef7ee292f167c8dddf57593f2
Merge: 62693db c603a44
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 6 19:17:02 2009 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3 into bharat_dev

commit 61d64c12a26e7a68969c2e03c902ba753f259e00
Merge: dfc082a c603a44
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Dec 6 10:04:02 2009 -0800

    Merge branch 'master' into talmdal_dev

commit c603a446cd6e8aa54254178b4d19e920376aab9f
Merge: 8d234cb 0bb742e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Dec 6 10:03:59 2009 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 8d234cb4f5c1e67fdad3aa6c8d316de34337d832
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Dec 6 10:03:52 2009 -0800

    Add a slightly different background for input fields that have attribute 'readonly'

commit 0bb742ef33fe8f4ab8f4745b94355dab36ccb6cb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 5 21:21:08 2009 -0800

    Use NULL instead of actual values in the vars table, so that var tweaks result in smaller diffs.

commit 8fe7bb6cf644b9f9d869b2b28d1a4f42bbda6e6e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 5 21:20:30 2009 -0800

    Use NULL instead of actual values in the vars table, so that var
    tweaks result in smaller diffs.

commit 1f3567ec04e372e33e6858c56ca4d8ca8949d8bc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 5 21:08:10 2009 -0800

    Update the gallery module to version 21 in the installer.

commit 320a569c104c61e103b5c6336d8f52c7677f8594
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 5 20:56:16 2009 -0800

    Fix whitespace.

commit 62693db037729f18db42d3959c73e470d1b106f1
Merge: c7b934b fcbf824
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 5 17:56:31 2009 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3 into bharat_dev

commit dfc082ad5f972593998ad08c7c98cadf40bcfebd
Merge: 8ca69cf fcbf824
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Dec 5 12:09:31 2009 -0800

    Merge branch 'master' into talmdal_dev

commit fcbf824c05a7ba61391c0b5afc1589436490e7ba
Merge: 4a6b62c 145ec2f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Dec 5 12:09:25 2009 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 4a6b62c285fb384739b5d918113758209a259e9e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Dec 5 12:07:24 2009 -0800

    Revert "Correct inconsistent capitalization on "Server Add""
    
    This reverts commit f4810345b48d321460d32481e5665ea4602c9207.
    Bharat is a correct as in that "Server Add" is a proper name and should
    be exempt from the capitalization rules.

commit 145ec2f38f471bcc9fe49c6224bf4fc4af03f524
Merge: 03ea1ee f481034
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 5 12:01:02 2009 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 03ea1ee701986d76738778f475d3ec1b01755e65
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 5 12:00:50 2009 -0800

    Change the default image to be the full size so that the slideshow shows the big one.

commit f4810345b48d321460d32481e5665ea4602c9207
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Dec 5 09:13:04 2009 -0800

    Correct inconsistent capitalization on "Server Add"

commit 267b3a1623ebb3d9db2209adc1b14f4c882c3611
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Dec 4 13:48:52 2009 -0800

    Make the rendering of the Theme Options page consistent between the first request and any errors

commit 8ca69cffbba70fe22e19478f742a37bdbd758d83
Merge: 5743b15 5c107be
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Dec 4 11:42:37 2009 -0800

    Merge branch 'master' into talmdal_dev

commit 5c107be9033ae48f781c8430702458f613e791ee
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 4 11:12:24 2009 -0800

    Reload relevant models after acquiring a lock so that we don't make
    database calls based on obsolete data, which can lead to data corruption.
    
    Fixes ticket #926.

commit c9e6869c681fa6579d1858cea45ec94eb0972f30
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 2 19:08:13 2009 -0800

    Rename the "upload_limit" variable to "simultaneous_upload_limit" for
    clarity, since it only limits concurrency not the number of actual uploads.
    
    Move the default-setting code into the upgrader so that we avoid
    creating the variable as a side-effect of the view (personal
    preference to avoid side-effect code since it's led to problems in the
    past).

commit c7b934bc6daf41af1b6e0b04b9b0e9cb22113db6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 2 12:20:21 2009 -0800

    Update a couple more queries.

commit 1ab8ac305bf53bae8c05b917b06f035b9b700937
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Dec 2 12:09:34 2009 -0800

    Allow users to override the number of simulatenous uploads.  This setting won't appear until after they have attempted to upload at least once and have issues.

commit 714c97763ad9af0bbc5fab97144246b3137d5350
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Dec 2 11:57:02 2009 -0800

    Extend the background of the status message across the entire status row.

commit d0874a65acfbb2ed36eb7eae666969fde69ca004
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 2 10:43:06 2009 -0800

    Use:
      ->select(new Database_Expression("DISTINCT `email`"))
    
    instead of:
      ->select("DISTINCT email")
    
    This is not the perfect API.  http://dev.kohanaphp.com/issues/2396 is
    the upstream tracking ticket for a better API.

commit 87bc32345f6d7cb64c4009ed68a79776ace7ff1b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 2 10:42:49 2009 -0800

    Use select() instead of select("*")

commit 94411b36585a5bdf6225b8af6ae4ee5c21d5779d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 2 10:02:08 2009 -0800

    Fix a bunch of places where we were using "= null" instead of "IS NULL".

commit d2cb217e20d44d7928a0910ac0375740de163bb3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 2 00:34:34 2009 -0800

    Convert more database calls over to the new format
    - admin/maintenance page loads, the rebuild thumbs/resizes task works
    - Fixed up some conversion bugs in the Cache driver

commit c803cb29091d3b069077d7711a2485f75f274835
Merge: 53df0df 6fa8807
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 1 19:44:29 2009 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3 into bharat_dev

commit 6fa880777cb3b61c0e380ebd5e7b83de55a8d6d4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 1 13:37:07 2009 -0800

    Beter fix for #925.

commit f9ebe009c306eecf7480cc7778266b61d53b077e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 1 13:34:40 2009 -0800

    Use the real mime type for movies when we're requesting the full movie
    instead of a thumbnail.  Fixes ticket #925, thanks to lsowen.

commit 883fda313d3d7e76ae98cba7735c4c474b6f517c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 1 00:08:12 2009 -0800

    Fix a typo that was breaking the home page (doh!)
      $this->_show() -> $this->show()

commit 852653ef2415dc070c27ce151ed399525ddfa5a0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 30 11:10:58 2009 -0800

    Clean up item routing a bit.
    1) The new default route is "albums", and Albums_Controller::index() does the right thing
    2) Items_Controller redirects to the appropriate specific controller
    3) All item controllers now have show() instead of _show(), so that
       the routing code in url::parse_url() can get to it.  But that code is protected against
       receiving bogus requests.

commit 299da7b54f17408a53f7771305bcdd22ef94ec36
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 30 10:59:00 2009 -0800

    Don't allow the extra "/?" sequence (ie: "/index.php/?kohana_uri=...") in the generated .htaccess files.

commit 1b41ad8c42ef02245147c75d8cb87e65712b1843
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 29 22:47:33 2009 -0800

    Don't use PathInfo based urls to reroute access protection.  Fixes
    ticket #922.

commit 01bad461df11e60f6c92ad68980203cb9ef8425d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 29 12:39:21 2009 -0800

    Publish theme_edit_form and theme_edit_form_completed events so that themes can piggyback on the regular Admin > Appearance > Theme Options page.

commit 53df0df0a4f9d2d5369016a7e2ea983ffe202346
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 29 02:48:42 2009 -0800

    Update a few more occurrences of ORM/Database -> Database_Builder

commit 3f63e1c52103c1c80d5236f69f62054525ebe4f4
Merge: 96b00d6 3d4672b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 29 02:45:39 2009 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3 into bharat_dev
    
    Conflicts:
    	modules/gallery/helpers/theme.php
    	modules/gallery/libraries/Admin_View.php
    	modules/gallery/libraries/Theme_View.php

commit 3d4672ba88e2ef8cb47a9769e94fb3a45bdb3882
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 28 23:48:38 2009 -0800

    Give the theme a chance to handle theme function callbacks as well.

commit f3981bbaa9c9e72d147e164a3decea411b6dd54c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 28 23:25:07 2009 -0800

    Rework the theme loading code to allow themes to be treated as Gallery
    modules, and have an admin subdirectory that is treated like a Kohana
    module (as distinct from a Gallery module).
    
    The main advantage of creating the separate admin subdirectory is that
    we will not load an admin theme and a site theme at the same time.
    We'll only load a few specialized bits of the site theme while the
    admin theme is active.
    
    Concrete examples. A site theme named "xxx":
    - will receive events at themes/xxx/helpers/xxx_event.php
    - will have working controllers at themes/xxx/controllers/xxx.php
    
    If theme xxx has an admin subdir, then in admin mode it:
    - will receive events at themes/xxx/admin/helpers/xxx_event.php
    - will have working controllers at themes/xxx/admin/controllers/xxx.php

commit b677778253cdea89e19befbf04441a741010bfc2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 28 15:42:11 2009 -0800

    Expose theme::$is_admin

commit 22149b52c309152b3e0e186159df9e80ae5c28f8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 27 17:12:13 2009 -0800

    Move the theme fallback checking into theme::load_themes() so that
    we're calling it once per request.

commit 96b00d6cfe437e376d5547a10aa8d1cf7def8c13
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 26 21:14:54 2009 -0800

    Convert some more Database::instance() calls to db::build() form.

commit b9a0e0963746420d82ad3107135aa7a9256825be
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 26 21:14:43 2009 -0800

    Kohana::config_xxx() is now Kohana_Config::instance()->xxx

commit ddf668d43958e060f5aa4a14a4ef8dc8d2b51d2b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 26 21:14:17 2009 -0800

    utf8::clean() is now Input::clean()

commit e79e0d1980f186edb97f242b378db8e5a7579db3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 26 20:47:30 2009 -0800

    Make ORM::__call() always return an ORM so that it's chainable.

commit dee3ee81e2013f0b38e0f84123dec2ce12574bd7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 26 20:25:32 2009 -0800

    Database::orwhere() is now Database_Builder::or_where()

commit 3dd8bf245ea16fe1b9f1c27c4ad42d11d3cde1ee
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 26 20:24:16 2009 -0800

    Kohana::$user_agent moved to the request helper and is protected, so
    instead set the user agent into $_SERVER.

commit a3d904bcbab7cb153c2b617fc4389175ed00a4fc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 26 19:36:57 2009 -0800

    ORM::find_all() now uses null as the default value for offset.

commit e8fb773b68335e955602c0d912e13c0f5ba23d58
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 26 19:33:03 2009 -0800

    Update all portable where clauses to the new Kohana 2.4 format.

commit e0e882baabe9d4436c12bd57f903159c3b0274d9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 26 19:25:09 2009 -0800

    Fix the arguments to Item_Model::descendants_count()

commit 9fd6a0a63e95f1fd73e0ebb224c1c1dd30686858
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 26 19:23:36 2009 -0800

    Convert Database::instance() -> db::build()

commit 54be15191b983e72b4643f3559303b35b7c48795
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 26 18:47:40 2009 -0800

    Overload Database_Builder to add merge_where() which takes predefined
    where clauses and adds them to the existing query.  Update all
    existing queries that take an additional where clause to use it.

commit f77b26e988048bfd31d1e59695fe7ca015696a24
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 26 14:38:01 2009 -0800

    Add kohana23_compat module to bring along functionality that got
    deleted, but we still want.  Start off with the Pagination library.

commit d036e2fc49a41771fb16decb0ce699245d40cff0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 26 13:18:10 2009 -0800

    Convert another Database::instance() query over to using db::build()

commit dd2bca022479f5971ca3afd3d8284474c6c5e87a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 26 12:54:07 2009 -0800

    Modify the expiration code to work with db::build()

commit 1fd0e14359a7c7164573e4aa897c07680339e713
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 26 12:09:04 2009 -0800

    Convert all DB where() calls to take 3 arguments.
    Convert all open_paren() calls to and_open() or or_open() as appropriate.

commit 22823df22098ed1a69d88c2e5fdc30cd90f72c30
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 26 11:43:20 2009 -0800

    Update ORM::where() calls to take 3 args.

commit 2ee38b3d8e7c2789c776c6665e2595bb6561acc6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 26 11:36:09 2009 -0800

    ORM::$rules now has a special meaning.  Use $form_rules for our
    internal rules code.

commit 4b2e1344b4e4d110a9f61d09b8756d9948de24ac
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 25 20:05:38 2009 -0800

    Move the CSRF initialization into the constructor, I don't see why we
    need it also in render().

commit 9d9e4bdb675154c1046b25dcb3777be61b410e4e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 25 20:05:12 2009 -0800

    Update hidden field format to match Kohana 2.4's form::open() API.

commit 0121bfd5850bdc59bf0cd656c61c953421a85890
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 25 19:26:52 2009 -0800

    ORM::orderby -> ORM::order_by

commit 0ef6994f23300f3c6bfb83193b4101202dbc16f8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 25 19:25:34 2009 -0800

    ORM::orderby -> ORM::order_by

commit ccb0ea3d30a114c069240453d7d85f18328db6e5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 25 19:24:50 2009 -0800

    Make globals work if you access the the variables directly with
    $v->foo instead of doing it in a rendered template.

commit 5f521014f68803bb0bbab5fe30e1e2c5f61d1b37
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 25 19:24:30 2009 -0800

    form::close() went away in Kohana 2.4

commit 60c20b0045ade2ceeff648c6b97180df5b3a1dbc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 25 16:26:10 2009 -0800

    The html helpers no longer forces .js and .css suffixes to urls it generates (yay!)

commit 7eacc465d53d08ced85114b0a4ddc26b3fed848e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 25 14:50:29 2009 -0800

    Fix set_global() to be more elegant and preserve local trumping

commit 8b7ef660650e3711442972aabcd545959ee9bc94
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 25 14:50:04 2009 -0800

    Don't show the breadcrumb if we have no item

commit daedadda751a188c20f032b09c1ca32e39279360
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 25 14:27:06 2009 -0800

    Switch from stdClass to arrays for global data.

commit 7c9bd9e8e8c4d2e57c4f08f526e5464236fa90e3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 25 13:59:01 2009 -0800

    Call execute() after upate() and insert().

commit e105d1fdb49ed9bbe5f20477fac77dfe63d5844d
Merge: 4a41770 ce183e5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 25 13:51:47 2009 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3 into bharat_dev

commit 4a417708f00b1ebd5865c8075bb36b7fc0f14756
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 25 13:49:40 2009 -0800

    Kohana::show_404() -> throw new Kohana_404_Exception()

commit ce183e5a698cf0611a68d11fad5a490a91aa9350
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 25 13:45:58 2009 -0800

    Forgot to remove the rest references from config/route.php

commit 33b1d4b7efa8c6b825908f48c7e744578e7f9ae6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 25 13:41:53 2009 -0800

    Convert one more instance of ORM::$loaded to ORM::loaded()

commit f50dbd992d6973caeaaa3139ddf5f908dd84ec79
Merge: 2e42052 dc67cf6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 25 13:40:47 2009 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3 into bharat_dev
    
    Conflicts:
    	modules/gallery/controllers/rest.php

commit 2e420522ece22942a9b3b6ee413ca0e1dfa76148
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 25 13:22:24 2009 -0800

    Preliminary work to cut over to Kohana 2.4
    - Kohana::log() -> Kohana_Log::add()
    - Kohana::config_XXX -> Kohana_Config::instance()->XXX
    - Implement View::set_global in MY_View
    - Updated Cache_Database_Driver to latest APIs
    - ORM::$loaded -> ORM::loaded()
    - Updated item::viewable() to use K2.4 parenthesization

commit dc67cf64813361b34c366123f37d88ef6988fcc8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 25 13:02:14 2009 -0800

    Remove the REST_Controller and assorted baggage. Completes ticket #917

commit 15cf6870d5a4fc4dae3c5b61b1cb16ccdc226821
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 25 12:47:00 2009 -0800

    remove the photo::get_add_form method as its not used

commit 2d5c232c42ea52e0c1115dd93edafecf1978fbfe
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 25 12:41:01 2009 -0800

    Refactor the album, movie and photo handling to remove the REST_Controller.  Partial fix for ticket #917

commit 0bf81f0381ddde2efde55b10e2d73dfdbdca1e73
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 25 09:16:49 2009 -0800

    Remove a debugging statement

commit 454a96f48fbfbf5764cf586c02539e2d01b56101
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 25 09:08:33 2009 -0800

    Refactor the tags to remove the REST_Controller.  Partial fix for ticket #917

commit 4c3b9e363ab1501bf3169d92f5606abf464c2d5e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 25 08:05:21 2009 -0800

    Refactor the comment module as part of ticket: #917 "Remove Rest Controller"
    * Remove the methods create, update, delete, get_edit_form as there are not used
    * Change the return when a comment is created to return the html for the new comment.
      This saves a second get request to down load the comment.

commit 5743b159c28888f2165cc4269d3302fea24fde7a
Merge: f8a4c6e 82ee5f9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 25 07:09:55 2009 -0800

    Merge branch 'master' into talmdal_dev

commit e201536d82d6ed49b7c4832f367a01029de05dd6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 24 19:25:14 2009 -0800

    K24 has separate log sinks, this configures the file based log sink

commit 7dbb84bb5450b15154acc2b448ab1979ed072515
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 24 19:24:51 2009 -0800

    Bootstrap has moved in K24

commit 01e10d1708c024dcf2471f35cd3fd7625f0ad5c9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 24 19:24:38 2009 -0800

    K2.4 has its own parentheses support

commit 3ed7a5af46586f186a4627d8b029aec7c3ff579d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 24 19:24:02 2009 -0800

    Rename I18n to Gallery_I18n to avoid conflict with Kohana 2.4

commit 9b6663f87a7e679ffba691cf516191fc840cf978
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 24 19:20:36 2009 -0800

    Update to Kohana r4684 which is now Kohana 2.4 and has substantial
    changes.

commit 82ee5f9d338017c69331b2907f37a468ced8c66e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 24 16:37:59 2009 -0800

    Make get_add_form private and use it non-statically.

commit 52b12725eaa84c6e632b865140af70b66f094cc7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 24 16:35:50 2009 -0800

    Updated.

commit f8a4c6edaa405494139aaf8eb6579a9488e73034
Merge: 23a60fb 38233c6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Nov 21 18:57:44 2009 -0800

    Merge branch 'master' into talmdal_dev

commit 38233c67a2946d6fe7b6457217541c796247285d
Merge: d6695e8 5e57346
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 21 11:36:27 2009 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit d6695e83e245d3d478ba4ecf1e3a2a5bb52665d3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 21 11:17:38 2009 -0800

    Make email a required field.  We're using the Kohana default error
    messages when this fails, not the Gallery translation system so this
    is not a great solution.  However, it's the same as the other
    model-based rules we have currently so it's no worse.
    
    Fixes ticket #897.

commit 17d89a9df15720ad235835dd04f26cca4bcbfce8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 21 10:58:26 2009 -0800

    Truncate the text of the title/description for results on the search page.  Partial fix for ticket #580.

commit 5e57346040629393c08777ae129044bb7ed08a37
Merge: 6bdb8c3 7599894
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Nov 21 09:36:58 2009 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 6bdb8c3d551cef6e2f12289ad4793ab106a4f7f3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Nov 21 09:35:38 2009 -0800

    Correct inconsistent captialization. Fixes #906

commit ee9c92139763c6c0d3be7f3156603a5de5382fc3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Nov 21 09:28:30 2009 -0800

    Don't use realpath when calculating the relative paths of embedded references in css files. This fixes ticket #910

commit 75998948fd38ed1dc6168a3b2dae76225a49364b
Merge: 48e5af8 4c5e200
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Nov 21 09:28:47 2009 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 48e5af8d739f69e5891d072fab98240641c2640c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Nov 21 09:28:30 2009 -0800

    Don't use realpath when calculating the relative paths of embedded references in css files. This fixes ticket #910

commit 4c5e2000f606d696a056fcfed231df5be8a42ada
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 20 21:23:11 2009 -0800

    Don't call theme::get_info() on themes that don't have a theme.info.  Fixes #896.

commit befb8244200ce365950a172c3d957d0043efd5d6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 20 21:16:59 2009 -0800

    Fixes #898

commit 23a60fb1f217475419c55adc7ce7427fcdadb2c3
Merge: 1fec5e2 005cf8e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 20 21:10:56 2009 -0800

    Merge branch 'master' into talmdal_dev

commit b341b6b45db4a7d84d625594ee31dff6cfefb2b7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 20 20:30:12 2009 -0800

    The search results page is a "collection" page type.

commit 9d40f6fc0055d21725878ceaddc0fd079cb8b732
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 20 20:29:49 2009 -0800

    Paginator: don't try to set the position for "other" page types.

commit 005cf8e8286b4dbc99bc47fae2662acfca855fd7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 20 20:25:19 2009 -0800

    Duh.  Really make the site menu invisible this time around.

commit abad4aae3329a9ee629366b683b1127e23977cb1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 20 20:22:08 2009 -0800

    Hide the site menu and make it visible after the page has loaded, to minimize menu flicker

commit 5e9bbbe490e40da103e0a7960312ab1c814dafa3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 20 19:41:45 2009 -0800

    Convert the Simple Uploader form over to Forge, and use the event
    model to let the Tags module modify it.  This brings it inline with
    our other module-extensible form based interactions.

commit 144c2fb61ee30e1168a6afe3b0332485d748d608
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 20 13:04:54 2009 -0800

    Minor reformatting.

commit 1fec5e22b4e45c3c892b992e4fb2f2983ca3f206
Merge: a1fbc8b ca9e4d5
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 20 12:49:38 2009 -0800

    Merge branch 'master' into talmdal_dev

commit ca9e4d50800282486addba909829935ca521f33d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 20 12:44:41 2009 -0800

    Use "#g-add-photos-canvas object" instead of "#g-uploadifyUploader" so
    that we're not mixing naming styles.

commit fab0930d1fe99aaeb7100b79f060f7185486e5e2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 20 12:42:40 2009 -0800

    Move tag ui to the bottom of the form since it's a lower priority
    Internationalize and simplify our error strings.

commit a1fbc8b1e14049765a3da07a57dffdf4205bc492
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 20 12:15:05 2009 -0800

    Correct the reference so selections are handled properly when dragging the lasso

commit aa880c2b10331586a4c303dd6d6c1bf8a8e8b15d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 20 11:37:09 2009 -0800

    Use ui-state-highlight to display selected images.

commit 72deeb1119e7888e26b0656ae811be3f4e534e11
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 20 10:26:11 2009 -0800

    Remove all style from the organize.css file and make use of the themeroller styles as much as possible.

commit 6a9fbffff0a89b7dad843b98d09b694126e4255d
Merge: 0a1c76f 1a9a4a0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 20 07:14:56 2009 -0800

    Merge branch 'master' into talmdal_dev

commit 1a9a4a09dea9368794ded2fb8242a63744133817
Merge: 9d9cc53 eb34b30
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Nov 19 21:51:20 2009 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 9d9cc5382cf55b6530139ec5c326efedb31923b7
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Nov 19 21:50:47 2009 -0700

    Move white border from the left to the right in our Superfish menu for RTL.

commit eb34b301a75237a0c27b5cca01e6f96e436b7709
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 19 18:08:32 2009 -0800

    Add the ability to add tags for files that are uploaded using the simple loader.

commit 0a1c76f9731d3ddd4738465eff46547de7825b3b
Merge: 9b16537 23befeb
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 19 15:20:11 2009 -0800

    Merge branch 'master' into talmdal_dev
    
    Conflicts:
    	modules/gallery/module.info

commit 9b16537e2c7c2319670af02b7e4755d1b29d80a2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 19 15:18:15 2009 -0800

    Revert "Revert "Revert "Use call_user_func instead of call_user_func_array as we don't need to pass the parameters by reference."""
    
    This reverts commit 05b5a2c9ed9e5c3ed05eec8748f4bebc381993c4.

commit fa906f1c3defda281ad8450d5d257757dddf9e31
Merge: 05b5a2c 75cc496
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 19 11:57:57 2009 -0800

    Merge branch 'talmdal_dev' of git@github.com:gallery/gallery3 into talmdal_dev

commit 05b5a2c9ed9e5c3ed05eec8748f4bebc381993c4
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 19 11:56:05 2009 -0800

    Revert "Revert "Use call_user_func instead of call_user_func_array as we don't need to pass the parameters by reference.""
    
    This reverts commit 630099364515fd0fd0453b4b548048c8a32c831c.

commit 630099364515fd0fd0453b4b548048c8a32c831c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 19 11:52:57 2009 -0800

    Revert "Use call_user_func instead of call_user_func_array as we don't need to pass the parameters by reference."
    This reverts commit 75cc4962a2c945e3e3ad37fda3b5de32d512b929.
    
    Revert "Make sure that calls to the theme::get_var() have sane defaults in the event that the theme does not supply them."
    This reverts commit 51f2b547672ab69a7a04d37b723c6afbeb584a59.
    
    Revert "Update the installer to reflect the new location of the theme related options."
    This reverts commit 678e22996d73b96833c48d94751344a6bd8f2899.
    
    Revert "Create theme::get_var(), theme::set_var() methods to set the options of the active site theme.  Change all refrences to theme options to use these methods.  Update the version number of Gallery to 20 and move any them related options to the be stored under the active theme."
    This reverts commit 26114972c3388f065220b94a0d5962f20a6ccd0c.
    
    Revert "Currently Admin_Theme_Options controller assumes that all the themes will provide the same values. This change corrects that assumption and moves the management of the theme options, including creating the form and updating the theme options into the theme."
    This reverts commit 1692ee130887a6ad1ba68aa34a96ad36161600f9.

commit a63206861af995750b1c2aad0e1fdcad2eeb6232
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 19 10:03:39 2009 -0800

    Use call_user_func instead of call_user_func_array as we don't need to pass the parameters by reference.

commit e97617750d73652c6945b19520702a54833b4766
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 19 08:48:23 2009 -0800

    Make sure that calls to the theme::get_var() have sane defaults in the event that the theme does not supply them.

commit 1ab07b308f0739efed99755c99b2a92776a7c097
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Nov 18 23:02:15 2009 -0700

    Apply g-first to the sole breadcrumb when viewing the root album.

commit 79b8e7c562fe77c9e12a9e80eb34b83775532448
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Nov 18 22:56:14 2009 -0700

    Remove right padding on li.g-error for RTL. Fixes #904.

commit 3164464d58de3c584ca237e539a9642700022993
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Nov 18 19:41:13 2009 -0700

    Flip paginator arrow icons for RTL. This will help for now, but jQuery UI themes really need to be updated to support RTL http://dev.jqueryui.com/ticket/4702.

commit 690ea4a01474d8f0b6d9d19ad87bfbbde33a9b80
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Nov 18 18:51:18 2009 -0700

    Rename g-pager to g-paginator after the recent pagination update.

commit 23befebd72d714bee0931f7c9f01c6adcc34aeda
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 19 11:49:35 2009 -0800

    Add a note to skip version 20.

commit f5b0ce1f4729e36f17b49ee7e6291d99070f1b99
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 19 11:44:09 2009 -0800

    Revert "Currently Admin_Theme_Options controller assumes that all the themes will provide the same values. This change corrects that assumption and moves the management of the theme options, including creating the form and updating the theme options into the theme."
    
    This reverts commit 1692ee130887a6ad1ba68aa34a96ad36161600f9.

commit 57adefc5baa7a2b0dfcd3e736e80c2fa86d3bfa2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 19 11:44:01 2009 -0800

    Revert "Create theme::get_var(), theme::set_var() methods to set the options of the active site theme.  Change all refrences to theme options to use these methods.  Update the version number of Gallery to 20 and move any them related options to the be stored under the active theme."
    
    This reverts commit 26114972c3388f065220b94a0d5962f20a6ccd0c.

commit 6fd1e2af1f081c61bde47cee5b613778a46e1422
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 19 11:43:53 2009 -0800

    Revert "Update the installer to reflect the new location of the theme related options."
    
    This reverts commit 678e22996d73b96833c48d94751344a6bd8f2899.

commit 4db92d53b0873b9ba84329e1babd2519088fb56e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 19 11:43:44 2009 -0800

    Revert "Make sure that calls to the theme::get_var() have sane defaults in the event that the theme does not supply them."
    
    This reverts commit 51f2b547672ab69a7a04d37b723c6afbeb584a59.

commit e1cc8a37b2734a144b845b07db031afa971c43ce
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 19 11:43:34 2009 -0800

    Revert "Use call_user_func instead of call_user_func_array as we don't need to pass the parameters by reference."
    
    This reverts commit 75cc4962a2c945e3e3ad37fda3b5de32d512b929.

commit 75cc4962a2c945e3e3ad37fda3b5de32d512b929
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 19 10:03:39 2009 -0800

    Use call_user_func instead of call_user_func_array as we don't need to pass the parameters by reference.

commit 51f2b547672ab69a7a04d37b723c6afbeb584a59
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 19 08:48:23 2009 -0800

    Make sure that calls to the theme::get_var() have sane defaults in the event that the theme does not supply them.

commit 8ce1d188068214103515decd71532bf69a36320c
Merge: 678e229 a4d5269
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 19 07:47:04 2009 -0800

    Merge branch 'master' into talmdal_dev

commit a4d5269db5b39ad76c49427ecf229a76ef428d84
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Nov 18 23:02:15 2009 -0700

    Apply g-first to the sole breadcrumb when viewing the root album.

commit 658a007c6bb46685b1e08ff6e7484a3e7dd85e67
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Nov 18 22:56:14 2009 -0700

    Remove right padding on li.g-error for RTL. Fixes #904.

commit 7f58752ab4537b800f6f563300b7d217da16e0aa
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Nov 18 19:41:13 2009 -0700

    Flip paginator arrow icons for RTL. This will help for now, but jQuery UI themes really need to be updated to support RTL http://dev.jqueryui.com/ticket/4702.

commit e232c39fe516a9782ec15f4e2a9b4e68f1863a7d
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Nov 18 18:51:18 2009 -0700

    Rename g-pager to g-paginator after the recent pagination update.

commit 678e22996d73b96833c48d94751344a6bd8f2899
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 18 15:37:51 2009 -0800

    Update the installer to reflect the new location of the theme related options.

commit 26114972c3388f065220b94a0d5962f20a6ccd0c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 18 15:36:13 2009 -0800

    Create theme::get_var(), theme::set_var() methods to set the options of the active site theme.  Change all refrences to theme options to use these methods.  Update the version number of Gallery to 20 and move any them related options to the be stored under the active theme.

commit 1692ee130887a6ad1ba68aa34a96ad36161600f9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 18 14:37:49 2009 -0800

    Currently Admin_Theme_Options controller assumes that all the themes will provide the same values. This change corrects that assumption and moves the management of the theme options, including creating the form and updating the theme options into the theme.

commit 372f589f66436c5b5bb8ed8a98532842c1e01a71
Merge: 4d4e81c 350f6b5
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 18 12:44:16 2009 -0800

    Merge branch 'master' into talmdal_dev

commit 350f6b58764beced6cd32497ad11e530b091fd5c
Merge: 670312f 5b579ff
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 18 11:26:34 2009 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 670312ff10b5083a349456df116b5c815ccc73a0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 18 11:26:19 2009 -0800

    For album pagination, don't let the last_visible_position exceed the
    total.  Fixes ticket #903.

commit 5b579ffdcb05322d42c9e402d9b841ace249a025
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 18 11:14:50 2009 -0800

    Remove the image_block_installer class as it does nothing, except erroneous set the version number to 2.

commit fc41d091349d80100e436f5df673a2e803fa7f40
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 18 10:54:01 2009 -0800

    Revert "Simplify the maintenance of the xss golden file by having each module contibute its own golden file to a consolidated one.  This will make it easier for -contrib modules or themes to be included in the xss security test w/o having to keep modifying a central golden file."
    
    This reverts commit 4fe5801c885088e5e6c11b8a20a561415941b864.

commit 4fe5801c885088e5e6c11b8a20a561415941b864
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 18 10:34:39 2009 -0800

    Simplify the maintenance of the xss golden file by having each module contibute its own golden file to a consolidated one.  This will make it easier for -contrib modules or themes to be included in the xss security test w/o having to keep modifying a central golden file.

commit 3f600d46e44268ef95734249a12d706bdefd87be
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 18 08:53:35 2009 -0800

    Update the xss golden file so tests pass.

commit 4d4e81ca267cf6dd4fd48c2185d6e24949e0568f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 18 08:38:11 2009 -0800

    Create a helper to load the theme information from theme.info

commit 9d45cc040d76f86fe990e4c759fdd863c382ec87
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Nov 17 22:48:10 2009 -0700

    Flip the breadcrumb separator and play slideshow button for RTL languages.

commit 3aa7a3fcdac3b05f3139f933d470fe9e08bfe922
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Nov 17 22:32:25 2009 -0700

    Address RTL issues reported in ticket #869. Placement of checkboxes and radio buttons and sidebar block management lists.

commit d2752775fa734b1f54dfe40b1f06a0c55b806d3a
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Nov 17 20:13:56 2009 -0700

    Finalized RTL adjustments for Superfish. Submenus now appear to the left, instead of the right. Drop shadow and arrows adjusted accordingly. Added -rtl version of the superfish arrows.

commit 7c2c77f3c15f32522381c2599a496a3807d4b454
Merge: b8e9430 9ae9dab
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 17 15:53:30 2009 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 9ae9dabe68ab83d34a3dcdc5092b454b8282a6cd
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Nov 17 16:48:01 2009 -0700

    Initial RTL submenu arrow adjustments for Superfish. Submenus still appear to the right, instead of the left, and this might not be possible to fix without hacking Superfish JS itself.

commit b8e94302bd673f89beb63530bbb7cdfe3ce56da9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 17 15:36:02 2009 -0800

    Tweak load_themes() to match exactly "/admin" or the "/admin/" prefix,
    but not just the "/admin" prefix because that breaks if you add an
    image like "admin_photostream".

commit 42ce291d5836cab44e976fa331a651089331dd2a
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Nov 17 15:25:22 2009 -0700

    Stop overlap of g2_import messages and info icon in the background. Fixes #765.

commit 2762987a4378f533ec7d648d062d9b7179eada24
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Nov 17 15:20:14 2009 -0700

    Float short-form elements to the right for rtl.

commit 401c9c21e1d5b0d88853e895491ee38f9fce38c7
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Nov 17 15:16:40 2009 -0700

    White-space fix and quoting update.

commit 1067e68292852f524fceda4c6cf7cd5f7110b234
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 17 13:42:51 2009 -0800

    Redesign the way that we consider page types to create buckets of page
    types, and a subtype for specifics.  Currently the top level bucket
    
       collection, item, other
    
    Here are the core subtypes so far:
    
       collection: album, search, tag
       item: movie, photo
       other: login, reset, comment-fragment, comment
    
    It's legal to create new page_subtypes whenever you want.  Use the
    appropriate page_type to get the coarse grain behavior that you want.

commit 2935816fb3989af6a2a2439b99173240e8a6147c
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Nov 17 14:07:21 2009 -0700

    Swap sides for rounded corners for short forms when RTL language is in use.

commit ade642cff4a4ca810f468723b04efc6f229916d8
Merge: 78b6da1 bf4c518
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 16 14:57:35 2009 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 78b6da12aa08aad0fbae74bc03c1afddb609c150
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 16 14:57:24 2009 -0800

    Make sure that we have a valid resource from the server side before we
    fetch its url.  Fixes ticket #888.

commit bf4c518bb56917b9960c67afe2893da4569a3938
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Nov 16 14:25:25 2009 -0800

    Store the directory, files and translation cache in the gallery3 cache instead of trying to store it in the task. It is possible with lots of modules and lots of incoming translations to go beyond the 64K limit in the task context.  Possible fix for #886.

commit 2e4d29e7dd59ebd30886285076ad8ec4f8b7adcd
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Nov 16 14:23:29 2009 -0800

    If an empty array is passed into set method, then make sure the tag value being stored in the database is null, not "Array"

commit 14f1fc30b519a49701cbcf49d6df675597cba8d0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Nov 16 07:49:17 2009 -0800

    Use some hacky css to get the buttons alighned properly. Fixes ticket #880.

commit 2d6f5cda6c382028ccd75cdd71397da5404bb884
Merge: 33d2a24 41e3dba
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Nov 15 23:28:10 2009 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 33d2a2481e86596a967446239a82940490520a19
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Nov 15 23:27:37 2009 -0700

    MInor message-block padding fixes in general and specifically for organize.

commit 18f5481252c653a25c529b34fdcbf06643897634
Merge: f4ad53d b64729b
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Nov 15 22:58:02 2009 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 41e3dba65ad2da1ad685c1d649dfc44694437b63
Merge: 08b127e 18f5481
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 15 21:57:27 2009 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit f4ad53d28b8ef28698c90727d649837bf9fe474e
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Nov 15 22:57:27 2009 -0700

    Be a bit more explicit in the application of the album icon. Apply it as a class to the span to hopefully make it's purpose a bit more obvious.

commit 08b127e9a41b18e0760b1506fb88b7912908e7d9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 15 21:56:55 2009 -0800

    Revert "Switch to new CoolIris slideshow.  It doesn't fix the problems, but it"
    
    This reverts commit 2d7693b2f32464f74f2343c15f22290a190c3dbc.
    
    The new slideshow is not ready yet (sorry Belboz99!)

commit fb2c365d8fdaa6941b61edac26df2f3550822e6e
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Nov 15 22:55:09 2009 -0700

    Fix outstanding issues in the organize dialog. Tighten up the layout a bit so that more microthumbs will display.

commit b64729bfbe9f76bbbcdfa288f8fb1b696c6d8895
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Nov 15 19:46:12 2009 -0800

    Fix ticket 890 (related to 879): Don't double-escape menu labels on the comment admin screen.

commit 0733dc37fda27a5ba35f9020edf3c66aa41a95a0
Merge: 218493c 9379308
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Nov 15 19:44:47 2009 -0800

    Merge commit 'upstream/master'
    
    Conflicts:
    
    	modules/gallery/tests/xss_data.txt

commit dcfa74e2d9084a4dd9ac56333c47d6fdbee46707
Merge: de3bfac 9379308
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Nov 15 20:43:48 2009 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 9379308f91a476f790fb8d444536719535c584e4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 15 19:36:02 2009 -0800

    Xss data update

commit e0f4e6500de0b5f0e9de973eadcd879c45da8e18
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 15 19:34:44 2009 -0800

    Use text::alternate() instead of hand-rolled even/odd code.

commit 64ef86a8ee0c054bdc8743beaa1eca3bbb46a676
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 15 19:27:35 2009 -0800

    Updated xss data.

commit 731ff800cdc204a3a9bb468148bff6ce5de9e980
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 15 19:20:43 2009 -0800

    Use 'git ls-files' instead of glob() so that we only check files known
    to Git.  This means that local files which we choose to exclude from
    git don't have to follow the same permission model.

commit 5a27ce7e8f3f90b20ba6aee7f83740776a82b578
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 15 19:10:56 2009 -0800

    Save/restore $_SERVER before/after tests to avoid contamination.
    Fix albums/photos tests to make sure we're really getting the
      HTTP_REFERER back.

commit d12555de9a93945b4fffe4b0f8f477bfd1563568
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 15 18:54:12 2009 -0800

    Don't show resizes for albums, only for photos.
    Fixes ticket #893.

commit d7b13ee167ec06f54374c96c9a057cf9d2864aa2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 15 17:12:26 2009 -0800

    Try to keep users from leaving the upgrade page, or running the
    upgrade twice.
    
    1) Disable the "Upgrade all" link once clicked
    2) Put up a "upgrade in progress" link to show that there's something
       happening.
    
    Fixes ticket #837.

commit de3bfac2ecff4108517e61213926de64a8046610
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Nov 15 18:02:20 2009 -0700

    Fixed indenting.

commit 3481c8b58f87d6e1e653e165de4b40b98c00369d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 15 16:21:45 2009 -0800

    Change "confirmation" to "dialog" in preparation for putting up a
    "we're working, stay tuned" message.

commit 9e5714aee817637ee954e8529da33c1be6f7ef19
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 15 16:14:30 2009 -0800

    Tweak upgrader html and css so that we set opacity properly for rows
    that are done, and disable the upgrade link when there're no actions
    to take.

commit 6ec81006e7ac8ebc61d15af22e3bbda782c46b68
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 15 16:02:39 2009 -0800

    Fix a bug where we were using <? ?> tags in css to figure out whether we
    should gray out an element.

commit 9df591c774d6acfbf658110a9151d87c583c0e82
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 15 15:35:10 2009 -0800

    Close the confirmation box with a fade, instead of a slide.

commit bf2b25ce325e3288aa91d8913c33ba880e6cfb8c
Merge: 5df0073 c63a073
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 15 15:29:39 2009 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 5df00737c90058bffeecb55bbc38f3068435c611
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 15 15:24:49 2009 -0800

    Fix a couple of errors in the refctored paginator code:
    1) We weren't showing previous page links for albums when we should have
    2) We needed to wrap the results of url::merge() in url::site() so that we
       generate server-relative urls.

commit c63a073cd61f89fe1412b65dafad7f3159750dce
Author: jhilden <jakobhilden@gmail.com>
Date:   Sun Nov 15 10:12:40 2009 -0500

    CSS change that not a whole dialog box has the move cursors, but only the title bar (e.g. in the simple uploader)

commit 11f5560713e3597df772cbdd9bae5a5f638ee870
Merge: a6f1d3a 967b172
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Nov 15 00:38:59 2009 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit a6f1d3ad44a658dc4f813d96735d033248e4de89
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Nov 14 23:31:14 2009 -0700

    Remove g-dialog-link from special groups delete button (registered users, everybody), it's supposed to be disabled. Updated wording of headings and instructions.

commit 967b17204b4e038fa2181473e80fcba143d30970
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 14 20:28:20 2009 -0800

    Moved night_wind to contrib

commit aa1ddba15517d99e4e34d9454fe4853339b17f58
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 14 16:36:25 2009 -0800

    Oops.  Fix a typo that the forced page_type to always be "tag"

commit d368894d371549450dab994e72c2435690ee3af0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 14 16:32:32 2009 -0800

    Add in proper template variables to support pagination.

commit cd8663b81d9ded11a408df5a31212223a6ae554b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 14 16:31:56 2009 -0800

    Fix pagination so that it does not require any domain specific logic
    to support tags and search.  Instead, just modify the page param to
    the current page.

commit d89b88cededec2ff805c664eaaf9b00472513733
Merge: 29efb6b eb30426
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 14 16:23:02 2009 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 29efb6ba9f3e2cf15f29b509f985890c33bc08fa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 14 16:18:49 2009 -0800

    Rename "pager" to "paginator" so that we differentiate page.html.php
    from paginator.html.php

commit 846f365db9d3c1b61ed4bd68316bd5e7b80e56ec
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 14 16:17:19 2009 -0800

    Normalize tags a bit.
    - Create Tag_Model::url() to mimic Item_Model::url()
    - Use the same pagination logic as we do for viewing items

commit eb3042650bddd15def809b658c1566a7ce08f4c1
Merge: 6888662 9fd6a6f
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Nov 14 15:48:39 2009 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 68886627cf76d69973c5956637b29908f58469ef
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Nov 14 15:48:24 2009 -0700

    A few more g- prefix updates for the user module, this should be it.

commit 9fd6a6f9058a89e60f83c6f2e89ae9e994c9e53a
Merge: 081ce9f 766d49c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 14 14:28:04 2009 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 081ce9f6ca07b834fd31d3d340990504dd68f821
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 14 14:25:39 2009 -0800

    Normalize pagination so that pager.html.php can handle pagination for
    both albums and movies.  Kohana's paginator is not quite sufficient
    for this, so create our own pagination logic in Theme_View with only
    the stuff we need.
    
    Clearly document the variables available in pager.html so that themers
    know how to use it.
    
    Fixes ticket #626.

commit 18a168156974fa9f235ff56bdc6eba14224fb6a3
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Nov 14 14:09:17 2009 -0700

    Added comments to user.css

commit 766d49c4614dfcde84ec75e5296635c5fc9d7a67
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Nov 14 14:03:11 2009 -0700

    Fix floated group rows when more than one row exists. Attach g- before all css ids and classes for consistency. Other minor layout adjustments.

commit 0674f18eb5f05471bf4090a0c83e88eadf349080
Merge: d29d339 100a66d
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Nov 14 13:23:54 2009 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit d29d339ea0088b2aa9cd11701289db03ec307ea3
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Nov 14 13:23:23 2009 -0700

    Move the password strength image out of css and into an images folder.

commit 100a66d861849ab0d78dca84b0b06c1af973752a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 14 12:03:41 2009 -0800

    Fix a bunch of little issues in the version 16, 17, and 18 upgraders.
    - Add a missing loop in 15->16 causing ticket #881
    - Comment the blocks correctly
    - Remove unnecessary loop from 18->19

commit 594742b7d1c9960f08253411f3d7c08532bddd7f
Merge: d12e369 670629f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 14 11:51:20 2009 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 670629fe10322ca3b996d2ec4206a1aa71ae449d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 13 14:30:38 2009 -0800

    In order for us to provide a button that is style the way we want it to, we need to make the object transparent and hide its button, then our styling shows through. But what worked the other day no longer works, so until thumb gets a chance to look at the style so the buttons line up, we will just  go with the default button so it works.

commit 0fe32a61f6c55e1302e45358375bf69a161ccdd4
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 13 13:56:05 2009 -0800

    Standardize the name of the blocks.

commit d12e3698e3e6a259f34ced2050e4343f54e130aa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 13 09:29:00 2009 -0800

    Call for_js() on all menu labels, since they're SafeStrings.  Fixes ticket #879.

commit def88149ccf8b542b376b96dd25c52f2ec6920e1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 13 09:14:39 2009 -0800

    Undo using the md5 hash of the module name and block_id, so duplicate blocks are no allowed again

commit ab37d89bba88de676123069e4f9072e3706c4dc0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 13 06:49:12 2009 -0800

    Added a semi-colon to the end of the jquery.autocomplete.js file. This was causing issues with javascript not recognizing the next definition. Fixes ticket #875.

commit 65355c6bb3c263d169d5e4908b5f7eb261d0651a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 12 14:43:47 2009 -0800

    Change the gallery3/index.php so there is a new option "install" which invokes the installer.

commit 393896a7010bf2da19674aa6a63a693a0d800233
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 12 14:42:37 2009 -0800

    Initialize the database config with the port number if it is specified. Also set it up so the mysqli constructor will split it into host and port for the call to the mysqli constructor. Fixes ticket: #780

commit a5a8cfd1bc7cd03c224c731c3ff433eec033457d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 12 13:08:29 2009 -0800

    Re-generate the install.sql so that the keys of the block lists are an md5 hash of the module_name:block_id. Also change the packager so we delete the _cache variable for the module gallery not core.

commit 79f700ef9f79926d5e806bd48e5a6f99b6ecc5bb
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 12 09:29:17 2009 -0800

    Change the keys of the block arrays in block manager to be a md5 hash of module_name:block_id.  This allows easier lookup of blocks to remove when modules
    are being deactivated. Change the module activation/deactivation to call (activate|deactivate)_blocks instead of just the sidebar blocks.  This insures
    that when a module is deactivated any admin dashboard blocks are removed as well the site sideboard blocks. Fix for ticket #876.

commit 3d8d2f71be68ce5bb267a54a36d6ab495c22e6b1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 11 20:58:24 2009 -0800

    Forgot to save this file before committing... duh

commit 8f975636d67218c5680ae7ff127b87b8793bb479
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 11 20:30:57 2009 -0800

    Add some padding to the add photo's button so when the focus goes on the flash object, it lines up with the button.

commit 031d9aba5e83a55fcddf0cb2aed03709fe59e4db
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 11 20:21:40 2009 -0800

    Make the browse button look more like the current one.

commit 8329abb59fc57e649f31b69a52bf515016aadea9
Merge: c186f4a a9bb4ab
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 11 18:47:28 2009 -0800

    Merge branch 'master' into talmdal_dev

commit c186f4ad486a6377fb77adb3e06a955f8dcf0ada
Merge: 421a975 2d7693b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 11 18:47:28 2009 -0800

    Merge branch 'talmdal_dev' of git@github.com:gallery/gallery3 into talmdal_dev

commit 421a975c0e042a56c12a9894afa38f5785d1fe6d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 11 18:47:10 2009 -0800

    Improve error handling.

commit 2d7693b2f32464f74f2343c15f22290a190c3dbc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 10 13:46:47 2009 -0800

    Switch to new CoolIris slideshow.  It doesn't fix the problems, but it
    gets us onto their latest codebase so as soon as they fix it on their
    side it'll work for our users.

commit 9546e19e34d08e0d55f066f04149794e566c3539
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Nov 10 12:49:13 2009 -0800

    Pass two of uploadify... remove the default.css file, removed the folder option and create a status area where succesful uploads are listed.

commit a9bb4ab4eb9c2883b5998538406bea4e5c99aeca
Merge: 4f87280 64f5a98
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 9 20:31:14 2009 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit d8beb6f5301204cac3b74a827dbbc3082324de6f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Nov 9 13:54:55 2009 -0800

    First cut at replacing swfupload with uploadify.  Probably need to review the css and remove extra swfupload selectors.  Also changed the dialog so tags can be entered for all the files being uploaded. Probably need to add better start processing so the batch is started before the first image is loaded.  Maybe add a module variable so the number of simultaneous uploads can be initiated (currently hard ocded to 10.

commit 26f8240e3478802a505f6f5355741d30130c65c5
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Nov 9 11:52:43 2009 -0800

    Revert "Try an new approach to extending forms.  Create an extend_form event. For the first attempt replace the comment_add_form and item_add_form events."
    
    This reverts commit 809e738536b6639bb42ecae8eb1e183543fed93c.

commit 8b07599ba916ea838c01639be821e91ba4018853
Merge: 0dbf0d5 64f5a98
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Nov 9 07:36:18 2009 -0800

    Merge branch 'master' into talmdal_dev

commit 64f5a98bd60410e54b6d0c59c713bb7e3eff0a83
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Nov 9 07:34:30 2009 -0800

    Since the activate_sidebar_blocks mentod is called from the module::install, we don't need to add the block in the image_block_installer::install method as well> Fixes ticket 874.

commit 0dbf0d51733aa3ef7840a23aeac6dfbe92d014e2
Merge: 6d57d43 6ddbef3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Nov 9 06:50:19 2009 -0800

    Merge branch 'master' into talmdal_dev

commit 4f8728029dfc283f5d26328ec21a2db455e97651
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 8 22:35:14 2009 -0800

    Call render() on the $menu, since we no longer use its __string()
    function to do implicit conversion.

commit 6ddbef3dcd3ee34e622bc7286ebf138b7ef1ffaa
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Nov 8 23:13:02 2009 -0700

    Add a bit more space back inbetween admin form inputs on pages

commit e184b5b6b16eae73d2133819d151b465dbda0c53
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Nov 8 22:46:26 2009 -0700

    Apply borders and padding back to theme choices.

commit 2bd4fa4b43381da997219dbb9d2dd15a8d3af69f
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Nov 8 21:46:09 2009 -0700

    Remove g-actions, it doesn't serve any real purpose in styling or JavaScript.

commit 56c543dbe42ebb77fb3f5742480a186954796837
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Nov 8 21:41:11 2009 -0700

    Removed todo, it's done :)

commit 176ca8cb33ffb07406ad46352d164f69f1201b6d
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Nov 8 19:21:06 2009 -0700

    Move g-panel styles into gallery.common and tighten up form layout a bit.

commit 46fda847ad625c085b020f719da1c37660ab93b9
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Nov 8 18:13:26 2009 -0700

    Moved movie context-menu up to just under the movie. Fixed contextual menu font size on resize and movie pages.

commit ed1bdd7b932d6d9b9bbeacc3a355e2f31c25ed15
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Nov 8 18:09:51 2009 -0700

    White-space cleanup.

commit 07268d5c5208ede6259da80680983dc9392a4428
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Nov 8 18:07:58 2009 -0700

    Key off of g-photo, rather than g-item, when fitting resized photos inside their parent.

commit d349400531c780715a54ff9537406546217c26ec
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 8 14:02:09 2009 -0800

    Fix an accidental old use of $photo in the extension renaming code.

commit ecadec6b84127db5749cc664b9b8878aca9d61ed
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Nov 8 13:07:12 2009 -0700

    Wrap movies in #g-movie, apply ui-helper-clearfix to the pager and g-moive to fix clear issues reported in ticket #873.

commit 9fe328ba1c42fb27678a6f06663363fde732fb79
Merge: d73de4f 47e0d91
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Nov 8 09:01:01 2009 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit d73de4f0a20001963fa2274a2d758d6931c6ee1f
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Nov 8 09:00:49 2009 -0700

    No need to abbreviate text in CSS class names. Thx bharat!

commit 6d57d4308bb2e82d41f9a4667ab35748854d7143
Merge: 87f00a5 47e0d91
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Nov 7 21:52:40 2009 -0800

    Merge branch 'master' into talmdal_dev

commit 47e0d91fcc2b249559a58d9f0965663a745379a8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Nov 7 21:51:57 2009 -0800

    Remove debugging statement

commit 23739bda0168a9c0f300a47c3c3f153bf3981af1
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Nov 7 16:02:20 2009 -0700

    Move the Remove all completed tasks back out of the th, shouldn't have put it there in the first place.

commit 95ffb393d3d2af0d18af23a27ce4400b54128197
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Nov 7 15:34:34 2009 -0700

    Restore padding and border for admin dashboard blocks, minor table margin adjustments.

commit 322422e785199b7f0f26b987525bba8843692fb5
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Nov 7 14:03:10 2009 -0700

    Remove borders and padding on blocks in the content area to clean things up in the admin views a bit.

commit 87f00a5ec5e072f98f5ed6fcd559ef249da57b36
Merge: c40735c e300ede
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Nov 7 07:35:15 2009 -0800

    Merge branch 'master' into talmdal_dev

commit e300ede3d8311bf236594480355f710b39aaa451
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Nov 7 00:05:49 2009 -0800

    1) Change the name of the form and message to g-in-place-edit-form and g-in-place-edit-message.
    2) Make sure the cancel button works and cleans up the dom appropriately.

commit ad8579e11a0860006cecf9312c86c1a2c4e8418a
Merge: cbde32b 7b92df6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 6 23:20:42 2009 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit cbde32b0d2869396ce2863f2e9ce211a1d9fb555
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 6 23:20:30 2009 -0800

    Make sure the position method works for both ascending and descending sort orders.

commit f176bc7299abc035d44b4b014781b4649585c639
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 6 23:19:48 2009 -0800

    Correct spacing

commit 7b92df6a56c7f1f8bbbafabbadb4e796b1d2d14b
Merge: c9d38e6 85e4497
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Nov 7 00:13:58 2009 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit c9d38e606f188c33ced63ff5ee5f29c1413b9da5
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Nov 7 00:13:31 2009 -0700

    Add a bit of white space under fieldsets.

commit 85e4497e16a33fddf943e6c506847d7354d527dd
Merge: beb63a8 ca6c8c5
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 6 23:07:07 2009 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit beb63a83804e57050a23b3a90ebed93be41b6769
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 6 23:05:20 2009 -0800

    Clean up the In place edit api:
    1) Only allow 1 in place edit to be active at a time (gets around the issue of using an id to identify the form
    2) remove the add_ prefix from some of the api methods
    3) clean up inconsistent naming

commit ca6c8c5b87abaa77cf227532f73685b80224244e
Merge: 1eab332 f102693
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Nov 6 23:44:01 2009 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 1eab332652e55abf15fd369f907423c60b63f64f
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Nov 6 23:42:17 2009 -0700

    Treat radio button layout the same as checkboxes, also include type selectors for checkbox and radio buttons.

commit f102693966824cf1bc1421282d89f1ee2318ed9e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 6 22:19:01 2009 -0800

    Correct some speeling errors

commit c40735c922b53eb32be1ae39a030362eea52e602
Merge: 44ae88e 3e0a81a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 6 22:14:32 2009 -0800

    Merge branch 'master' into talmdal_dev

commit 3e0a81a39490f58840e3144b88d9c963e69f8f79
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Nov 6 21:35:32 2009 -0700

    Move log viewing and translation CSS from admin_wind to gallery.css. Explicitly set widths on all admin forms to 270px, all work better at a narrower width than the 500px default set by gallery.dialog.js.

commit da8cabd3e9784af6d2cc696eaa71bac57ccb7c66
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Nov 6 21:10:53 2009 -0700

    Try not to set explicit font-sizes for log message display, use g-txt-small instead.

commit dbe64762550c1920f93f8b1da8fe563d028262a6
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Nov 6 20:26:09 2009 -0700

    Remove width class from add group form, it sizes the form's elements, not the form itself.

commit b5f2dbc2c4fa974f486bc92c75054940424ed323
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 6 14:08:46 2009 -0800

    Create a user_menu for the top of the page.  Change the login, edit profile and logout portions of the banner to be rendered by the Theme_View::user_menu callback.  This fires the user_menu event. Fixes Ticket #871.

commit b01056da917e7da2921a5cd4c65b129489cbc19f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 6 13:03:48 2009 -0800

    Modify the Menu_Element class to allow for the specification of a custom view. Also allow the root element to specify a css id.

commit a2d5d8091f68263812624f8ed1092cbf5338e744
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 6 07:34:56 2009 -0800

    The ajaxify_tag_form was not being called when the block was created.  Moved the code to ajaxify the add form into the block html and deleted tag.js. Fixes Ticket #872

commit 44ae88e8e17713cab81a5cf08820e18896615196
Merge: 1faa249 04c10a0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 6 07:02:55 2009 -0800

    Merge branch 'master' into talmdal_dev

commit 04c10a0720b57bc4b6273ea7127d9880c2c28354
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Nov 5 23:10:32 2009 -0700

    Minor css cleanup. Removed a few redundant and unused attributes, alphabetized attributes, white-space fixes.

commit e0fcd8130e6fe732443a2791c8114340a230a335
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Nov 5 22:37:57 2009 -0700

    Removed todos, they're done.

commit 6984737a542d759cbde967341ff3eca9ce20a3ba
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 5 21:35:40 2009 -0800

    Clean up problem with cancelling the inplace edit left a whole bunch of css artifacts.

commit 8ac7a5c0d32320c74f5f0c84cf43165265786c93
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 5 13:21:40 2009 -0800

    Remove debugging statement

commit 72a8ce696e37a74ed8bbea31364b39f9e0776bbc
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 5 12:59:37 2009 -0800

    Refactor out the in place editting and use the new gallery.in_place_edit widget to manage the tag renames.  Part the fix for ticket #750.

commit 03408f3e39bbb0b407b2949721090dd6b07913ac
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 5 12:55:06 2009 -0800

    Refactor the in place editting in tags admin out into a separate widget as part ofthe gallery module.  Create the jQuery widget, form template and library to support generalized in place editting. Part of the fix for ticket #750.

commit 88852c45eac5981a4cd82f3207df1fad0cf51fcc
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 4 09:50:49 2009 -0800

    Modified the so that a where clause can be passed into item::get_position.  Was also able to remove the sub-select from the calculation of the current position as we already have the child item containing the sort column value.
    
    Also added a where clause that ignores albums to the get_position, children and children_count method calls in photos.php and movies.php

commit baca223e1d5a5d495b41b0232d2528a776bbc49c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 4 08:24:15 2009 -0800

    Address the inconsistency between Add Photos and Server Add so that neither replace spaces in the filename
    
    Fixes ticket #853

commit 1faa2492952a54f0b80cce149ae42b59b91039df
Merge: 6dd6224 9a33f96
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Nov 3 17:30:18 2009 -0800

    Merge branch 'master' into talmdal_dev

commit 9a33f96e31ba41d78ab24eb9420d74578c7fbbcf
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Nov 3 14:44:53 2009 -0800

    Add a register_add_form event handler to recaptcha to add the recaptcha to the bottom of the user registration form in the register module.

commit 9768131d149fa47fe545f33cca968c97aa9c9c32
Merge: 9a8e9bc 96cbfe2
Author: jhilden <jakobhilden@gmail.com>
Date:   Tue Nov 3 17:41:27 2009 -0500

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 9a8e9bc7f5deb5108ccc10f27635d66d1ff2b14f
Author: jhilden <jakobhilden@gmail.com>
Date:   Tue Nov 3 17:40:39 2009 -0500

    Small CSS fix for language admin

commit 96cbfe23a6031fc8fb87aadb37fec2e4e479bc0c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 3 14:03:36 2009 -0800

    Respect the "theme" variable if we're an admin.  This requires us to
    change the order of operations in gallery_event::gallery_ready() so
    that we load users before themes.  Fixes ticket #836.

commit f9b700e75c682df3c48efb0e69f893c61f06d3bd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 3 13:40:59 2009 -0800

    Delay initializing the recaptcha to allow the recaptcha JS to load and
    initialize.  Fixes ticket #851.

commit 93ec51aa0fd91e1534563d9e9514e85be4e3ce2e
Merge: 595e03b 192b117
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 3 13:28:26 2009 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 595e03b556a8675844f868778c65f79e1b632d24
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 3 13:27:56 2009 -0800

    Get rid of "skipping" messages because they're overly verbose if you resume an import.  This fixes ticket #856.

commit 6dd622416531e8897af2bc3712e55a640277ac62
Merge: 85a2ad8 192b117
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Nov 2 13:53:15 2009 -0800

    Merge branch 'master' into talmdal_dev

commit 192b11724ef315ebaabb3088a0daba1450fd7df0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Nov 2 13:45:40 2009 -0800

    Add a recaptcha_theme file so we can actually include the recaptcha.css file so the recaptcha doesn't looking... interesting.

commit 9a329f23ed68319c5c603b1b0aaa97687a3eaf7d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Nov 2 12:43:04 2009 -0800

    remove a debugging statement

commit 45a7eb024824d283a24ae36aa3e5e56c9648fbf4
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Nov 2 10:02:34 2009 -0800

    Remove an extra trailing bracket.

commit 85a2ad80f92be4ac52d777ca0a8ec60a3e0e8a29
Merge: 809e738 e9e871a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Nov 2 06:53:13 2009 -0800

    Merge branch 'master' into talmdal_dev

commit e9e871acfc7f82ea30cc21d85ab380f7a8ea57f8
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Nov 1 23:02:09 2009 -0700

    Docblock and todo updates.

commit e95c0dcf2bde01834ab1b0b35e98503351efd6d1
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Nov 1 22:15:06 2009 -0700

    Rename Default to Wind and Admin Wind themes respectively in CSS docblocks.

commit f1075a6e1faca4a495d0f0103fa371590e7bf926
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Nov 1 20:45:22 2009 -0700

    Put checkboxes to the left of their labels, to the right for .rtl

commit 46b1a48a18c588c1dbca682695de3e0172a33634
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Nov 1 19:52:41 2009 -0700

    Use pixels to define padding for an element with a bg image instead of ems. Fix breadcrumb seperator display for RTL.

commit 80dedf77d80a3013aec61bd0f011ca611d3bc081
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Nov 1 19:11:58 2009 -0700

    Cleanup RTL styles even further. I think this gets wind and admin_wind looking pretty good for RTL. Related to the previous commit, remove g-right from login menu, let the theme handle positioning.

commit 6524aa55b3fbb4a1a458404b5509218a106441cb
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Nov 1 18:01:08 2009 -0700

    Add g-first to first li of pagers.

commit 809e738536b6639bb42ecae8eb1e183543fed93c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Nov 1 13:14:11 2009 -0800

    Try an new approach to extending forms.  Create an extend_form event. For the first attempt replace the comment_add_form and item_add_form events.

commit 1202db1c3a67ff8232254989ece76e707b21d730
Merge: 7ae4b35 91c5a9a
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Nov 1 11:25:08 2009 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 91c5a9abb7b617e45b547ced6a28c14a64ef760f
Merge: 376eb56 774e0be
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Nov 1 10:23:12 2009 -0800

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 376eb5673fd9cbc06abf308a04f83231de1a1d11
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Nov 1 10:22:56 2009 -0800

    Convert the event handlers for the "identity provider changed" and "user_deleted" events to use ORM or the Kohana query builder to build the database update calls instead of coding the sql directly.

commit 774e0be66ecd0c0012ab94a389e38eb81df6eab0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 1 10:05:05 2009 -0800

    Replace split() with explode() since split is deprecated in PHP 5.3
    Fixes ticket #865

commit 7ae4b35d787bf51ac98baf1c1818f580e0195016
Merge: 268ab9e 488b670
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Nov 1 10:43:37 2009 -0700

    Merge branch 'master' of github.com:gallery/gallery3

commit 268ab9e079460a8e876d5b45b06ca4d9eecf767b
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Nov 1 10:41:24 2009 -0700

    Remove g-right from quick search form, leave positioning to the theme.

commit 808fd4d3a0f38a2ea80bb8d56e1f8c6ce499e42d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Nov 1 09:32:42 2009 -0800

    Update the modified with a local fix for Kohana ticket #2298

commit 488b67014b44baf8bb19deaf7c77e87a95be220b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Oct 31 16:25:25 2009 -0700

    Revert "Cleanup typo and change what is passwed into the event. pass the group that the recaptch element should be attached to instead of the whole form.  This allows the recaptch event to have no knowledge of the containing form."
    Revert "Generalize the adding of the recaptcha form by changing the name of the event to recaptch_add.  This prevents us from having to keep modifying the recaptch module anytime we add a form that requires recaptcha."
    
    This reverts commits e45ea9359d6cb603be0bc28376d92883aa8d7c7e and bfafef95e8090b66f3322f73e532056b10ca116a.

commit e72022f062ba22f9f11a9ce063c49dfd790d5d40
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Oct 31 16:23:08 2009 -0700

    Include the gallery_toolkit_path in the path when determining the location of ffmpeg.

commit 1c428df9e090b8e7e9dfa3ec5d924b8169190b42
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Oct 31 16:16:47 2009 -0700

    Revert "Use an event 'check_user_name_exists' to validate the input name is already in use. The parameter is a standard class with the name and an exists flag.  Any event handler should or their result with the exists flag."
    
    This reverts commit 04bf50bfb4241f7c814782c516732d927ff1f457.

commit c3dcfd136bea8ec4b627a7d38f618ac97c9ea4a0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Oct 31 14:41:55 2009 -0700

    Move the identity provider menu item under the settings menu and make the User/Groups administration a first level menu item.  As discussed via -devel mailing list.

commit 903b5f6f67faaf8d8b25d8efd279f0ebe669f4d2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Oct 31 14:23:05 2009 -0700

    Add identity_change handlers to resolve the ownership issues of comments, subscription, items and tasks.

commit 80b892915f7286d3cb8daef3ba12c012738cef28
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Oct 31 14:22:12 2009 -0700

    Change the order of processing to allow various modules to respond to the identity change event after the new provider instance has been installed.  Once the new provider is installed and activated, we can uninstall the old provider which causes users to be deleted.  This should be safer, because at this point our new identity provider has been installed, most of the ownership issues have been resolved by the identity change handlers.  If there are any ownership issues left, the user deleted event has the new identity provider to uses to rectify them.

commit 7f4e71e52688d15cbc53baed10660f81f2de6551
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Oct 31 14:15:17 2009 -0700

    fix an issue with the scroll bar appearing on the confirmation dialog and insure that dialog is removed if cancel is pressed, so we can correctly reshow it if required.

commit abe42002b2250d4ecf5627293e0338e11c4bfdb0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Oct 31 14:13:35 2009 -0700

    Don't specify the default identity provider in the gallery installer.  Let the user module use that as a trigger to set ownership of the root album to the administrator.

commit 8db2406c0091212899f388f5cd17947434a3c734
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Oct 31 14:11:06 2009 -0700

    Added a config parameter to the IdentityProvider to specifiy the configuration. This allows the ldap installer to instantiate the ldap Identity provider to use in the install and uninstall methods

commit 61216b72050229f1edd397d8d41220cabef1c15a
Merge: 69ef765 41171c7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Oct 31 09:42:25 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 69ef76530d1a37ba563859b61376bffa3db4d403
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Oct 31 09:42:09 2009 -0700

    Re enable the submit button if the dialog processing resends the form because of an error.

commit 41171c75bd937e08a36e846ed9d0af9ace84fe8f
Merge: 47c75aa 9046501
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Oct 30 15:40:52 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 47c75aa279f1ec140bdd2b5e4c975bee3c0c2055
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Oct 30 15:40:22 2009 -0700

    Log an alert when we can't load a user.

commit 90465012d18b9d795d315e2fdf0461b39716b0a5
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Oct 30 14:23:57 2009 -0700

    Patch to clean up loose ends when a user is deleted.
    * For items and tasks the owner id is set to admin
    * For notification subscriptions, the subscription is deleted
    * For comments, I've extracted the user name, email and url and set the guest_name, guest_email and guest_url columns while setting the author_id to identity::guest()->id
    Fix for ticket #777.

commit 294215258a30bb0e99701655ce2b69271446a867
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Oct 30 10:31:47 2009 -0700

    Include the graphics_toolkit_path from the advanced settings in the path when searching for the graphics toolkits directories. Fixes ticket #639

commit 59b5a0549635aa5c8320707cec75612746debdd0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Oct 30 09:32:18 2009 -0700

    Rename the login helper to auth.  Create a login and logout helper function to allow for programmically login in and out.

commit ddf8734a414e4d426232e6dec9137eac8dcf0bb7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Oct 30 08:33:31 2009 -0700

    Caught a few more incorrect capitalizations.

commit 03b4b2749825778e1fb436944e0e1225686f7705
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Oct 30 00:14:57 2009 -0600

    Add type attribute to rest of our script tags.

commit c6fbd34f28f9d02f38a6c6cacbcd72fa34eee591
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 29 19:16:08 2009 -0700

    Add the add_user_to_group and remove_user_from_group api method calls.  If the identity provider isn't writable, the method implementations should throw an Invalid Operation exception.

commit 04bf50bfb4241f7c814782c516732d927ff1f457
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 29 17:09:01 2009 -0700

    Use an event 'check_user_name_exists' to validate the input name is already in use. The parameter is a standard class with the name and an exists flag.  Any event handler should or their result with the exists flag.

commit 392e24e56b4afa0e8752fd740f613f5556955342
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 29 12:12:22 2009 -0700

    Correct the issues that identity::registered_users was calling the backend provider everybody method

commit 4bf247568415a48e2f64348905f2a39420bf9c9d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 29 11:23:04 2009 -0700

    Missed a couple of inconsistent capitalizations

commit 749d17ac1688e558f091cd2f5c702a0635d377d1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 29 11:18:35 2009 -0700

    Use the identity interface admin_user to retreive the admin user.

commit 0bb2b7659f8cb0c117d01958c7fec95a80e83a02
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 29 11:12:55 2009 -0700

    Add the admin_user api function to the identity helper and the IdentityProvider interface.

commit e45ea9359d6cb603be0bc28376d92883aa8d7c7e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 29 09:27:44 2009 -0700

    Cleanup typo and change what is passwed into the event. pass the group that the recaptch element should be attached to instead of the whole form.  This allows the recaptch event to have no knowledge of the containing form.

commit bfafef95e8090b66f3322f73e532056b10ca116a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 29 09:21:07 2009 -0700

    Generalize the adding of the recaptcha form by changing the name of the event to recaptch_add.  This prevents us from having to keep modifying the recaptch module anytime we add a form that requires recaptcha.

commit 53dd35b5c8e741511d5bdc1ed35769d4ce281fe0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 29 08:30:39 2009 -0700

    Just show the Identity admin menu item all the time. This gives a place to hang other user related module administartion menu links.

commit 66e1e32f342a7f23ea2bb01ea4020069d0a6a82d
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Oct 28 23:34:53 2009 -0600

    Removed YUI grids. Added g- prefix to selected class. Layout almost completely restored, still need to fix action-status message box

commit db35107daf2f1a810e15997a074af0ccbb0efc8e
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Oct 28 23:21:20 2009 -0600

    Remove padding in g-message-block, child bg colors weren't filling the box.

commit e72d3532f702a5f0973f21177109b59d87a35f4f
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Oct 28 22:57:36 2009 -0600

    Amazing what a two character change can do. It should be g-first now, not first.

commit b118d56e9a8822b0966bd5b4ff693a4508d59725
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Oct 28 22:52:17 2009 -0600

    Added type attribute to script tag.

commit 385eec9feb02fb61f509f739e4a153913e1f5ddd
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Oct 28 21:13:48 2009 -0700

    Put the javascript initialization into a ready function so its invoked after the dom has been created.  Fixes ticket #839

commit 1d3651b3292a2ea4b63a6c19bc0a4f58b9efac10
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Oct 28 17:13:23 2009 -0700

    Make the user name a required field. Fixes ticket #852

commit 7ea13b3869dee33804606a17488bb1cd26759bdb
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Oct 28 12:15:52 2009 -0700

    Normalize capitalization ticket #596

commit 8ef78de3f72f695225ac87223d0815235a630417
Merge: 2a21f3b fbc5517
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Oct 28 11:38:05 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 2a21f3bc80758a20635534b837c11836a72b202c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Oct 28 11:37:05 2009 -0700

    Only install and activate modules that have tests to run.

commit f16941a90bddce20cdc6a868fbc888eb3e944a5a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Oct 28 11:36:34 2009 -0700

    Add a static modifier to the private method

commit fbc551771153a6664da2c3a3a82e22b912bb3cdc
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Oct 28 00:15:08 2009 -0600

    Initial RTL update work. Consolidated shared rtl-related css selectors in gallery.common. Applied g-right and g-left to a few banner items, including login menu and the logo.

commit 27571a1467e34a6774f250a22ce9ab16fddd909a
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Oct 27 23:18:45 2009 -0600

    We really only need one "back to the Gallery" link in the banner. Replace the one on the left with "you are logged in as". Added a bit of height to the admin banner to space out the admin menu from the login menu. Forced the removal of padding-left in g-inline list items.

commit d182ba9b570c4474f9e7248d310d48b44340f105
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Oct 27 23:05:16 2009 -0600

    Remove debug border I forgot to remove.

commit 4241e03d7549d4ebb14a0d8e5e0b830a4e032ce0
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Oct 27 23:03:43 2009 -0600

    Breadcrumb updates. Apply g-first and g-active consistently, use ems instead of px for nicer proportions, make font-size the same whether on the page or in a dialog.

commit 90cedf1ed0ce04e8529a0f1f048d60a5fad5d12f
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Oct 27 22:53:52 2009 -0600

    Move .g-message font-size to the theme from gallery.common. Let the theme set the size.

commit 927c4d10fd7b47b3ef23b139718f53350d47ac7b
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Oct 27 22:50:57 2009 -0600

    Group and place font-size specs at the top of the sheet to make them more accessible.

commit 051a7ae27a49c7a5687c2ee32b92962d490218de
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 27 20:20:32 2009 -0700

    Refix #812, by removing the decoding in file_proxy instead of not encoding in Item_Model when creating the relative_path_cache.

commit 145a3f80ce957267fdd6f6227922847b116f2e72
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Oct 27 19:35:21 2009 -0700

    Guard against developers who forget to internationalize label strings

commit cb0243bbe85599f1f5b8d710bd4825bcde111c84
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 27 19:23:30 2009 -0700

    Don't url encode the components of the relative_path_cache as we they refer to file paths and they are converted back in the file proxy. Fixes ticket #812

commit 3b4a64c698a06a696708afb45e6c4503c2b69b13
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 27 14:21:59 2009 -0700

    Check the minimum length when adding or modifying users via the admin screen.

commit dbf18318f66f5a2b39d8483973a3eca7cac84740
Merge: 3228f04 13faf60
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 27 14:02:59 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 3228f04ed9b18938365866ed15027ed3c1b59ad7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 27 14:01:53 2009 -0700

    Fire the logon_event when the user logs on.  Cleanup some old code from the user/helpers/user.php file."

commit 13faf6035d726f8a77b7dcac7e8e8fa3b24bfaf2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Oct 27 14:00:32 2009 -0700

    Remove Menu::compact() in favor of putting an if-then clause in
    menu.html.php.  This serves two purposes:
    
    1) It's more efficient since we're doing less passes over the Menu tree
    2) We're allowing themers to decide whether or not to show empty menus

commit 3b66ea3c3a4889c3ab3a2da0626fa5b554c1a7c9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Oct 27 13:57:36 2009 -0700

    Oops.  Change "$this" to "$menu" in our menu component views.

commit 76c0c7f3a1246319242e8fff7649c1450da0f98e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Oct 27 13:46:24 2009 -0700

    Change our menu building blocks to use PHP templates so that themes
    can override them and define their own menu formats.  I worry a little
    bit that this approach may be too heavy since we're now doing a lot
    more template includes than we were before.  Also, I had to change the
    Menu API to stop using __toString() because you can't throw exceptions
    from __toString() which would make it an unhappy experience for
    developers.

commit ab1d21eb34cfca46383ef10b66c49616beb6af15
Merge: 1347a30 d3e73cb
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 27 12:23:56 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 1347a300509b2ab3083bb88193987c18b33187ad
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 27 12:23:48 2009 -0700

    Add a password strength meter.

commit 156a99beef968a22167502bb6389b4df7526feb0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 27 10:13:40 2009 -0700

    Set the minimum password length to 5.  The gallery owner can change this in the advance settings.

commit d3e73cbb21339b7e47cc3d351e57d9462b55a063
Merge: 60339d4 b8624ba
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 27 07:59:26 2009 -0700

    Merge branch 'talmdal_dev' of git@github.com:gallery/gallery3 into talmdal_dev

commit 60339d4584e7a729d96256c59a48ad6a4692da1d
Merge: 5149154 9b2b460
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 27 07:59:02 2009 -0700

    Merge branch 'master' into talmdal_dev
    
    Conflicts:
    	modules/gallery/views/login.html.php

commit 514915438b91f44cab1682ee7495e2ef43aeeab1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 27 07:57:51 2009 -0700

    Add a flag in the module.info (no_module_admin) to indicate that this module shouldn't be managed by the default module administration screen.  This module will always be locked on that screen.

commit 0c6840dea28f9bd5d3bc15704708e51ed60aded9
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Mon Oct 26 23:36:46 2009 -0600

    Put margin between g-inline items. Update login menu in the admin theme. Set h1 size in all g-dialogs, rather than a few specific ones.

commit 02b6366dd2be9d9834eb1a4358960bb6ac6c662b
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Mon Oct 26 23:08:05 2009 -0600

    Switch instances of first to g-first.

commit 6ce8733efcb7392a8e653aa6538ea2e2f8ea4fbf
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Mon Oct 26 22:53:51 2009 -0600

    Correct tag admin list markup that I likely hacked up during recent commits. These HTML lists now validate.

commit e77822a9429074213ea061072728ed1bc6c74878
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Mon Oct 26 22:07:14 2009 -0600

    Removed g-progress-bar, it's now in gallery.common.

commit f10403826a0ff2ef17f2ae4c56ec7d7503258e28
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Mon Oct 26 21:42:15 2009 -0600

    This should have been included in a1847df83bfddf350fc71fd0e0e1c054bc94ce2d

commit ca372213373ac91c3099f049bbe9686eb9426acb
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Oct 26 14:32:04 2009 -0700

    When rebuilding dirty images, start a batch on initialization and stop it when the task is complete.  Fixes ticket #670

commit 2dcd8f8a25fc698f2279a09752cc7bb9dfe1d7ec
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Oct 26 11:37:03 2009 -0700

    When we are changing the password using the change password from as part of the password reset, the input value is in the post[hash] variable as opposed to the get(key) value.  This should fix ticket #850.

commit 9b2b4602cc061f065ee4cacfab4f261adc51398c
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Mon Oct 26 23:36:46 2009 -0600

    Put margin between g-inline items. Update login menu in the admin theme. Set h1 size in all g-dialogs, rather than a few specific ones.

commit 3e80851162f924e77d9e1a67e826525a7094fa33
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Mon Oct 26 23:08:05 2009 -0600

    Switch instances of first to g-first.

commit 3aedd95341450e3bc4f9040c76d5616ad5e54c05
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Mon Oct 26 22:53:51 2009 -0600

    Correct tag admin list markup that I likely hacked up during recent commits. These HTML lists now validate.

commit ccb18753cfe5b65d411e91d7f9dda29308088aba
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Mon Oct 26 22:07:14 2009 -0600

    Removed g-progress-bar, it's now in gallery.common.

commit 03caee07b44f35c57efec6e61ce9d67a573cc1f3
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Mon Oct 26 21:42:15 2009 -0600

    This should have been included in a1847df83bfddf350fc71fd0e0e1c054bc94ce2d

commit b8624ba71af69c7708b09479a5964126cf97d796
Merge: ada451f e496e5f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Oct 26 14:32:39 2009 -0700

    Merge branch 'master' into talmdal_dev

commit e496e5f6bfa943a0f7e663c94d97bf071f61153d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Oct 26 14:32:04 2009 -0700

    When rebuilding dirty images, start a batch on initialization and stop it when the task is complete.  Fixes ticket #670

commit ada451f78743351804d40f3527f1d0b19541aad9
Merge: 599cfab cb3d619
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Oct 26 11:39:28 2009 -0700

    Merge branch 'master' into talmdal_dev
    
    Conflicts:
    	modules/user/controllers/password.php

commit cb3d619b06ce8c72e5e69d3a3d360ef5b759e3b1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Oct 26 11:37:03 2009 -0700

    When we are changing the password using the change password from as part of the password reset, the input value is in the post[hash] variable as opposed to the get(key) value.  This should fix ticket #850.

commit 599cfab3b30be4a7495ec4bf58b06a805e23c829
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Oct 26 10:04:09 2009 -0700

    Update the install.sql to reflect the current version number(16) and the refactoring of the user module into an idnetity provider

commit 274d4680fad4aa8254b35b4906847d262b53cd33
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Oct 26 09:36:51 2009 -0700

    Upgrade the gallery module to version 16 to reflect the refactoring of the user module into an identity provider. Change how we determine if there are available groups that we need to export

commit e4eedbce2298535540cb651d75ba6f1bf42cf02b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Oct 26 09:35:41 2009 -0700

    Change the upgrader so that it never deactivactes the gallery nor the current identity provider modules. Call module::deactive to truly deactivate the module.

commit 6fb116c53be947018e02de933d724273e76a251d
Merge: f0f7bc2 f517ef4
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Oct 26 06:24:51 2009 -0700

    Merge branch 'master' into talmdal_dev

commit f517ef4baf48ef7e1f8cbf1ed073c13c0cdf131f
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Oct 25 23:58:54 2009 -0600

    Moved rotate image bg css to gallery.common.

commit 288e14756d948acecbc98fdd76ddb851f5d3e74b
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Oct 25 23:50:24 2009 -0600

    Moved admin-comments styles from admin theme to module.

commit 2b7a21dcbc39c8e11b46feb36fbf899e0a76bd8e
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Oct 25 23:46:09 2009 -0600

    Add clearfix to search results gallery-grid to clear the pager navigation. Other minor search results style updates. Don't display legends in short forms.

commit 76aa4bd1efc3db62326fa2c008de568b53b8710e
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Oct 25 23:32:49 2009 -0600

    Move comment and recaptcha CSS to their respective modules.

commit 6403becb3f466288192f852d5191d62801e6b6f0
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Oct 25 23:28:37 2009 -0600

    Remove #g-welcome-message, it's not needed anymore.

commit a1847df83bfddf350fc71fd0e0e1c054bc94ce2d
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Oct 25 23:07:56 2009 -0600

    Remove unused and/or redundant admin theme styles. Correct bg's (again) in admin > maintenance tables for IE.

commit 49b94fbb3ddd26fe04e65d238f6462409c68357c
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Oct 25 23:05:43 2009 -0600

    Apply g-inline to the user menu and footer.

commit eb93e343e21a9f7dc30bc20802790b580000d206
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Oct 25 23:02:58 2009 -0600

    Make "move item in photo view" comment a todo.

commit b3059ab6d6824928445b2a44893fb85f06eb3360
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Oct 25 22:18:38 2009 -0600

    Move g-editable styles from admin_wind to gallery.common, they'll be useful in themes as well as admin themes.

commit db4379a91d3e2048166336c0a58df0acd535f0c8
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Oct 25 21:03:33 2009 -0600

    Move Superfish menu width overrides to gallery.common, leave color overrides at the theme-level.

commit 0875ad6fd99d0e2cb1904f9550f6407d19f9021c
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Oct 25 20:55:26 2009 -0600

    Rename g-unselected to g-deselected.

commit 6ba60c82de2a4923a9f493de1c599d5933d66588
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Oct 25 20:53:10 2009 -0600

    Don't make g-editable items bold by default, let the theme or module handle font-weight of editable items.

commit a249460d63cd0727c0030f2d30f9054bb4589e11
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Oct 25 19:01:15 2009 -0600

    Widen Superfish submenus to avoid wrapping with current items.

commit 02ecf5749c12967b8a742a734711c9c216592195
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Oct 25 18:34:36 2009 -0600

    Make menu label adhere to our capitalization standard.

commit c5faa3560e53fa8547199f60545ba550c2c60345
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Oct 25 16:53:54 2009 -0600

    Created gallery.css file, moved simple uploader, move, and permissions CSS there. Removed  relocated styles from theme css.

commit a5d2af336a94c4cf4fd1a5732b3f64197a3f2dd2
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Oct 25 16:51:24 2009 -0600

    Move g2_import styles from the theme to the module.

commit 9136090a23f47a42e459fc7e9f2b058df649e587
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Oct 25 16:33:58 2009 -0600

    Quote Trebuchet MS since it contains a space.

commit f0f7bc2d12c93bf1ba4a5d41bb82be87efd46cd6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Oct 25 08:10:27 2009 -0700

    Undo the merge from master because it is actually identity not user in this branch.

commit 174e8ef3f7e40cff163c83a960f6610cbc0d4d6b
Merge: e88d2c8 576337c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Oct 25 08:08:09 2009 -0700

    Merge branch 'master' into talmdal_dev

commit 576337c508d173d0639b8754653a135b46bc47cb
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Oct 25 08:07:05 2009 -0700

    Replace reference to identity with the reference to user.  Dangers of flipping back and forth between branches.

commit e88d2c880000ea59f0dd3279e53d68f3ffdf4fd1
Merge: 24bd8e4 b33762a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Oct 25 07:41:28 2009 -0700

    Merge branch 'master' into talmdal_dev

commit 24bd8e4c289e999c401e77da761ccbd938707407
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Oct 24 11:32:09 2009 -0700

    Remove a redundant comment, change the name of the identity change event to 'identity_before_change' and change the name of 'login::get_login_form()' to 'login::get_form()'

commit abb080f2323f93aeb6c5a7d90e3fe4236e4c5b7f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Oct 24 10:56:56 2009 -0700

    phpDoc fixes.

commit 73a01d475bec334b3af76d46b36f68c00e78138a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Oct 24 10:55:22 2009 -0700

    Minor style tweaks.

commit b33762a9f803e156f5f4e28af4c8ea350ad1addb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Oct 24 10:38:48 2009 -0700

    Update themes::load_theme() to work with mod_rewrite's short urls.
    
    Conflicts:
    
    	modules/gallery/helpers/gallery_event.php

commit 91e9df7834b98088ba478f691fee73f75ed092fa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Oct 24 10:37:12 2009 -0700

    Update themes::load_theme() to work with mod_rewrite's short urls.

commit 5212deb5b117fd93911c40d5427b55b3063eea4e
Merge: 7afb4c5 607662d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Oct 24 10:09:57 2009 -0700

    Merge branch 'master' into talmdal_dev

commit 607662d66be4361c20322c7db84f9e7b1c529ba2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Oct 24 10:08:48 2009 -0700

    When an item is renamed or move insure that the target file name doesn't exist. fixes ticket #694

commit 7afb4c5c30faeb700c6d17b1746b051382e0d418
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Oct 24 08:40:16 2009 -0700

    Re-enable the redirect to the root album if we can't load the active user from the session.  This will most likely occur if the administrator has switch identity providers while a user was logged in.

commit f0610ccaa0329866113120dbf3b2e3bd4047f3a1
Merge: 0a6b540 571d7fe
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Oct 24 08:23:51 2009 -0700

    Merge branch 'master' into talmdal_dev

commit 571d7fe43c4987d75924e1185b5d9ebe0034acd4
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Oct 24 08:18:17 2009 -0700

    When doing a search we need to "OR" the view permissions not "AND" them.  Fixes ticket #805.

commit 0a6b540092f2fda55a864a6beec6df9f5dd1b902
Merge: 18b402a e13f92a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Oct 24 07:28:22 2009 -0700

    Merge branch 'master' into talmdal_dev
    
    Conflicts:
    	modules/server_add/helpers/server_add_theme.php

commit e13f92abab2cef2d58cc4e560e18aa65c138a264
Merge: bb47b49 5fb0434
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Oct 23 22:28:40 2009 -0600

    Merge branch 'master' of github.com:gallery/gallery3

commit bb47b495a7d719ee679e4747e9fd5b8f7c39b58a
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Oct 23 22:28:26 2009 -0600

    Moved remaining user and group admin css into the new user.css style sheet.

commit 38141865926730506f55b62a499cb548b94d4bfe
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Oct 23 22:25:36 2009 -0600

    Created user.css. Moved user-related form css to the new sheet.

commit e3f90a889d5bb4cb1214445bbf5be8c9815d8733
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Oct 23 22:24:06 2009 -0600

    Adjust order of items on server_add admin page. Restore autocomplete to the add form. Created a server_add.css file.

commit 18b402a1e55d9450eee79f2079fc91a8d856e26b
Merge: e5cf93c 5fb0434
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Oct 23 21:16:30 2009 -0700

    Merge branch 'master' into talmdal_dev

commit 5fb0434a478051f77ab241f62656ad941225c397
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Oct 23 21:15:16 2009 -0700

    Clean up the rss feed for the slideshow.  It now validates using "http://validator.w3.org/feed/". Fixes ticket #806. Doesn't fix ticket#23.

commit 85affaf23faba36a6cb266bc66875d2cb6555a81
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Oct 23 21:56:33 2009 -0600

    Remove left and right padding inside list items to remove gaps between text inputs and submit buttons when a g-short-form is in error.

commit f1f2c384cb4236f29ecdf9025c3da3166eeb4c34
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Oct 23 21:54:00 2009 -0600

    Rename dimension and scale classes in increments of quarters and thirds.

commit e5cf93c22a70ea30adc90aa71d274cc04a44114b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Oct 23 20:14:29 2009 -0700

    This is the one i should have checked in last time

commit cdf5a4fcbf8ccbe90b0d2a41d08e8dc65626f305
Merge: 8d43025 68411cc
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Oct 23 19:58:15 2009 -0700

    Merge branch 'master' into talmdal_dev
    
    Conflicts:
    	modules/gallery/helpers/gallery_event.php

commit 68411cc903a1fedd5014763f55f3925c5a971b0f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Oct 23 17:58:55 2009 -0700

    Allow themes to override event handlers. In gallery::ready() grab the server
    PATH_INFO and pass it to the theme::load_themes method.  If it starts with
    \"/admin\", then set the theme to the active admin theme, otherwise set it to
    the active site theme.  Fixes ticket #841: Themes cannot overload event classes."

commit 8d430259fe641f2680eeacad519744de1d02aac4
Merge: 45690fa cd5485e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Oct 23 13:26:18 2009 -0700

    Merge branch 'master' into talmdal_dev

commit cd5485ee845aed96e5ab2eaeb5f92c093ccf260a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Oct 23 13:25:54 2009 -0700

    Put logic into gallery.panel.js so that when the panel is submitted, the submit button is disabled and the user is no longer able to submit multiple clicks.

commit 45690fa8976bbb30272939ca8e43326cdd9e5888
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Oct 23 13:24:51 2009 -0700

    Put logic into gallery.panel.js so that when the panel is submitted, the submit button is disabled and the user is no longer able to submit multiple clicks.

commit 14427a01580df88011e052ca0b8f3bfa9c67f9ec
Merge: c24d01b 6af6976
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Oct 23 13:12:17 2009 -0700

    Merge branch 'master' into talmdal_dev

commit 6af697686ae10620f084559d366d0e658300c1b3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Oct 23 13:08:10 2009 -0700

    Put logic into gallery.dialog.js so that when the form is submitted, the submit button is disabled and the user is no longer able to submit multiple clicks.  This should fix tickets: #623, #790, #799

commit c24d01bb9cb8c5bcccfe8a8bf944038dc15cf433
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Oct 23 10:52:42 2009 -0700

    Standardize the use of the lookup methods

commit d0186436de5b282490779a6add014f5f31bd8834
Merge: e3d6920 aa85d27
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Oct 23 10:01:40 2009 -0700

    Merge branch 'master' into talmdal_dev
    
    Conflicts:
    	modules/gallery/tests/Albums_Controller_Test.php
    	modules/user/helpers/user.php

commit aa85d27eab10b47f7c7cfc5bfeb26f41baed8753
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Oct 23 09:52:03 2009 -0700

    Initialize the slug field when doing the update tests

commit 703f22abcbf6c44818709d9daf3d272de98d9198
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Oct 23 09:24:09 2009 -0700

    Only look for tests that are in the active modules. Update the controller golden file to reflect the current location of files.

commit 2e998664d57bcaf38e8d1dc19606768bd6f557a3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Oct 23 09:23:02 2009 -0700

    move controllers and views to the user module to make the Identity Provider refactor smaller

commit e3d6920cd9fdec948ebd5d2954260c67c6aff145
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Oct 23 08:36:49 2009 -0700

    synchronize with the master branch

commit e386aba77a650df706c820a8994869e537c1f9f8
Merge: 69d2b3c 3643706
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Oct 23 08:26:34 2009 -0700

    Merge branch 'master' into talmdal_dev

commit 3643706a2e9a0cef3c75ec82a6609726ab3421c7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Oct 23 08:25:58 2009 -0700

    Apply local fix for Kohana ticket 2276.

commit 69d2b3ce0814d27e9c976d5bd374399702bcd6a2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Oct 23 08:01:46 2009 -0700

    Revert "Temporary fix for a bug in Kohana::include_paths where the file_list_paths cache is not reset when the include_path is rebuilt.  Still need to open a ticket on Kohana and revert it an reapply when i figure out how not to delete the trailing whitespace"
    
    This reverts commit 2554316df24bef2c8bb1d0d044c322066a1a3cd3.

commit 8a73b81dd966dfddec22ae64ca7d7161e8ed3203
Merge: 9297325 94cd078
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Oct 23 07:57:12 2009 -0700

    Merge branch 'master' into talmdal_dev

commit 94cd07805dfad6131f0bcb33bf437a31d1f4d336
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Oct 23 07:49:14 2009 -0700

    Change the gallery_unit test to only intall into the test environment, modules that are active in the non-test environment.

commit b3e175006cc3be2c1793797e726095520ba16d9c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Oct 23 07:48:07 2009 -0700

    Move the filters that the File_Structure_Test use into a seperate file so other tests. can use them.  Add a No_Direct_ORM_Access_Test to find all places that the user or group table are accessed outside of the user module.  This test will fail at this point, as it in preparation for the IdentityProvider refactor.

commit 9297325c2797d74aa9516e340d45d425bda85b3b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Oct 23 06:52:08 2009 -0700

    Minor changes to more closely align this branch with master

commit 923a322ef57fec97fdf5cbb2a0fd5efd67668911
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Oct 23 06:09:24 2009 -0700

    Change the Admin_Identity_Controller to not destroy the session until after the new provider is installed.

commit 3573544104c68b3f329fd291ab3093d85dbd5694
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Oct 22 23:36:05 2009 -0600

    Poor man's merge. Note to self, git pull before working. Next pound the steps to merge into your head.

commit 2c588338bfddb0695deb3fa655de94a889d68fc8
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Oct 22 22:43:53 2009 -0600

    Update white space in form layout. This removes scrolling in dialogs with forms.

commit 040c840b66e588678a62aea680f80c42bd5f2d4a
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Oct 22 22:28:55 2009 -0600

    Make g-inline more specific, replace universal selector with an li since this class will most often be used with order and unordered lists. Apply g-inline to the the login menu and footer credits.

commit 367e6a8983a6d0fbd76fd36b6627e8adc35332da
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Oct 22 22:06:36 2009 -0600

    Standardize message markup, make the update block status message translatable.

commit 2d5b65a419908eed028d96c76ef2d01273376f13
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Oct 22 22:01:02 2009 -0600

    Use jQuery fadeIn() for message display effect, it fades bg icon and color at the same time.

commit 19a787b35454d276890d55580f1da86751d6ab9b
Merge: da73c0c 3607ddf
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Oct 22 23:55:49 2009 -0600

    Merge

commit 2554316df24bef2c8bb1d0d044c322066a1a3cd3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 22 22:39:52 2009 -0700

    Temporary fix for a bug in Kohana::include_paths where the file_list_paths cache is not reset when the include_path is rebuilt.  Still need to open a ticket on Kohana and revert it an reapply when i figure out how not to delete the trailing whitespace

commit da73c0c25f406ccef8351be06ab30fd0d71977b8
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Oct 22 23:36:05 2009 -0600

    Poor man's merge. Note to self, git pull before working. Next pound the steps to merge into your head.

commit b74b131e25ca0ddb42d2545a5d0ea2d796452f1d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 22 22:29:56 2009 -0700

    Change Identity adminstration to use the uninstall/install methods when changing providers.

commit 89ca1590e4435da56fc15c74fcff74b467bb8717
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 22 17:05:00 2009 -0700

    When uninstalling a module call graphics:remove_rules instead of graphics remove_rule.

commit 267c54d4381a9a8522e33f8d877b35adf0615e4c
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Oct 22 22:43:53 2009 -0600

    Update white space in form layout. This removes scrolling in dialogs with forms.

commit 80c6bf789b4a9925e86abdb3275cc570f9c2d6ad
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Oct 22 22:28:55 2009 -0600

    Make g-inline more specific, replace universal selector with an li since this class will most often be used with order and unordered lists. Apply g-inline to the the login menu and footer credits.

commit ba62fb4b0e9fe2d64803c165a21756e0919c0238
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Oct 22 22:06:36 2009 -0600

    Standardize message markup, make the update block status message translatable.

commit 412ee0e385c1ddd4708c224a9b75c7b7dee10d18
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Oct 22 22:01:02 2009 -0600

    Use jQuery fadeIn() for message display effect, it fades bg icon and color at the same time.

commit 3607ddf7ff434794bc61ed1a30d068abcdf1270f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 22 17:05:00 2009 -0700

    When uninstalling a module call graphics:remove_rules instead of graphics remove_rule.

commit 36adc11f058404c78bf0d804d8fe5be6cfa6f515
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 22 13:30:32 2009 -0700

    move the direct orm test to the users module.

commit f4176ae97dc9ea56d15c9d9f0fdd7bf28b44a656
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 22 13:29:12 2009 -0700

    Rename No_Direct_access_Test and change the require_once to fully qualify the path to Gallery_Filters.php

commit 6b51de49c5c6a4030505ff1f979e3e14da06c457
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 22 13:28:23 2009 -0700

    Change the modifier on activate and deactivate methods to static as they are in a helper class.

commit 1cb6e3950d82d5f0c03f066a4cb7d27619114970
Merge: 3c936d6 6a4d175
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 22 13:12:17 2009 -0700

    Merge branch 'talmdal_dev' of git@github.com:gallery/gallery3 into talmdal_dev

commit 3c936d661a088fb43b47eb5b208958180e8f65eb
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 22 13:09:20 2009 -0700

    Change the name of identity library from Identity to IdentityProvider. Create a helper class called identity to simplify call the Identity Provider. Move the contents of MY_Session.php to the new helper class and remove the MY_Session class

commit 4cb9ec1d6d37b49ebafc68d0a94d794a1acb8b28
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 22 10:09:25 2009 -0700

    Use the request::referrer to determine if we are editting the photo or album
    from the context menu or from its photo or album page.
    Fixes ticket #745.  Thanks to jankoprowski for the referrer approach.

commit 6a4d175b85567cb54938bce0fa0628b222875ee3
Merge: 51a69d7 e906e6b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 22 10:13:31 2009 -0700

    Merge branch 'master' into talmdal_dev

commit e906e6bcbd6ed99b1029d4ceae45c03d77edc9ff
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 22 10:09:25 2009 -0700

    Use the request::referrer to determine if we are editting the photo or album
    from the context menu or from its photo or album page.
    Fixes ticket #745.  Thanks to jankoprowski for the referrer approach.

commit 51a69d7218de1cb4e82872e64560d4e3d3a01f8d
Merge: 6502b61 95f3eb3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 22 07:40:50 2009 -0700

    Merge branch 'master' into talmdal_dev

commit 95f3eb3aad3700c883ef6d865ae8d6512883b432
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 22 07:37:14 2009 -0700

    When an album or photo is updated always return the photo/album location as
    part of the response.  This insures that if the internet address changes, then
    the page will reload properly.

commit 6502b613487a00e53e2c2716991bed6a8ab4b1c8
Merge: 5e45766 416470f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 22 07:36:37 2009 -0700

    Merge branch 'master' into talmdal_dev

commit 416470fcb2063359bcf5bd2f11c4ae82e1cf43be
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Oct 22 07:35:26 2009 -0700

    Internationalize confirmation message.

commit 5e4576632d0938cc7c2947db6ee35a7d59fb6edf
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Oct 21 16:02:34 2009 -0700

    Correct white space

commit 7638834e97be905efd80acff6312330db34ba0bc
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Oct 21 15:17:23 2009 -0700

    Address the issue of the administrator changing the identity provider whilst users are logged onto the system. Addressed the issue by adding try/catch logic to the Session::load_user() method.  If load_user fails for any reason, then assume that the identity provider has changed, destroy the current session and redirect to the root album.

commit b994ea9d6274a6b479da06e9b97ed6e5126587c0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Oct 21 11:53:41 2009 -0700

    use the appropriate API's

commit 21383dddc372c26e1de30c0d17d1e308428ce033
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Oct 21 11:52:55 2009 -0700

    Make sure we set the active identity provider when the user module is installed.  This is mostly for the unit_tests as when the gallery3 installer is used, the user module is activated by default.

commit b528fbde579b76cdab098a0319fdfbded93bee4a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Oct 21 11:50:42 2009 -0700

    Change this files to use the API instead of referencing the group tables directly

commit f04177f138df71e6317073b12b754a1c32d0c523
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Oct 21 11:49:42 2009 -0700

    re-add the lookup_group_by_name API Method.

commit 182c8414a1535f7f141ebca350a2b79d0d4a63ff
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Oct 21 11:48:40 2009 -0700

    Add the Gallery File Filters and a test to check that the user/group table is only accessed from the user module.

commit 59a001b49131874e732091e5b190cabd70d28e78
Merge: ea2ab0c b91da74
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Oct 21 11:47:40 2009 -0700

    Merge branch 'master' into talmdal_dev

commit b91da7472651ac5efab668ea6215a4fbaea43f0f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Oct 21 11:47:21 2009 -0700

    Correct phpDoc

commit ea2ab0c654c5b13c12ad424268d5755aa712dfc2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Oct 21 09:32:27 2009 -0700

    Create a No_Direct_Access test which initially checks to insure there is no direct access to the users and groups table defined by the user module.

commit c5f89967f05fd42f606b51763df94d0860aba398
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Oct 21 08:20:41 2009 -0700

    When activating the user module set all items to be owned by the administrator user.

commit 55ac081a5d47c4446a7f800e0d9fde145dac1ea8
Merge: a2048ab 312811c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Oct 21 08:08:14 2009 -0700

    Merge branch 'master' into talmdal_dev

commit 312811c783a14d33556acfb4ecdbd335c2605df0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Oct 21 08:07:49 2009 -0700

    Change the default install.sql such that the owner id of root album is the defined admin (id = 2)

commit a2048ab3038b93925bff9a29cb22366e5670e067
Merge: 9792880 e025abe
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Oct 21 07:07:53 2009 -0700

    Merge branch 'master' into talmdal_dev
    
    Conflicts:
    	lib/gallery.common.css

commit e025abea4179bc059b8fef195bafe0c3f60f1220
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Oct 20 23:37:03 2009 -0600

    Added confirmation message for block admin actions.

commit 093b20980755c1c566689a3ae83ac5cdee1322fe
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Oct 20 23:22:16 2009 -0600

    Removed console.log() debug output.

commit 055c410126d3ec56aac34dabf1cee5a57459afaf
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Oct 20 23:20:38 2009 -0600

    Fix block management UI. Block list height is now dynamically set based on the total number of available blocks which will grow without hardcoding CSS heights and setting the div to be scrollable.

commit bb8ece06e26c1163f6013b5c8b849cf5eff9dee5
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Oct 20 22:47:12 2009 -0600

    Remove g-add-photos selectors from admin_wind, they're only needed in wind. Updated case in hex color spec., prefer lowercase.

commit fbb8e92497a041561e6bea53cb3c6e7a9ab52cd7
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Oct 20 22:35:39 2009 -0600

    Added generic .g-message class to mark form validation messages. Minor form layout updates.

commit 3ac9e84e200dc2c883a080bbdc834bbd4355255c
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Oct 20 21:35:35 2009 -0600

    Move basic form styles from wind themes to gallery.common.css.

commit 5d66416b267eafd822d570c74f1c0f3368b61fd9
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Oct 20 21:34:47 2009 -0600

    Minor tag admin style updates.

commit 97928804ad5f7b69fefe6ff2b50115af1159dbbc
Merge: b49b213 ba2d4b9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 20 20:29:56 2009 -0700

    Merge branch 'master' into talmdal_dev

commit b49b2130729fee34b61873f20bf7822f120bc163
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 20 20:29:28 2009 -0700

    Only show the user/group administration screen if the active idenity provider is the user module.

commit 1dd4e4a4277f77c1055911ca7d64130aaf026810
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Oct 20 20:56:14 2009 -0600

    Update tag error messages to use g-action-status and g-message-block. Style g-error for short forms.

commit ba2d4b923b3786495eede2098906399224f4f262
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Oct 20 20:20:48 2009 -0600

    Rollback tag admin to fix. Now functioning.

commit 0d53ed619ad8c1ab3f6b57d3ecd62ad10f648877
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 20 17:24:17 2009 -0700

    remove the lookup_group_by_name as it is not referenced

commit b28c758d4a98c9e877fb81f7b88f9c8597de74b6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 20 17:21:33 2009 -0700

    Add lookup_group Identity provider API and change the permissions controller to use it to get the group it is modifying

commit 3ece1a01f25270939b3c12f754d555d6ac54d375
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 20 17:01:19 2009 -0700

    Add a groups api method on the Identity provider and change access_Core::_get_all_groups() to use this to get the defined groups.

commit 7f9441c33da07b215efcb51668434b3957559fd3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 20 16:32:22 2009 -0700

    Changes to Identity interface to allow for multiple Identity providers.  What I've tested to this point, is you can install a new provider, switch to it, login as administrator, uninstall the default user module, reinstall the user module, switch back to the user module and login.

commit 098b57bf18112d0a3173dbe28b5ed76782431ff7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Oct 19 12:53:44 2009 -0700

    Simplify the user interface by moving the password reset functionality into the user module
    Bagging the User_Definition and Group_Definition abstract classes and replacing them with interfaces with the same names.
    Make sure all the unit tests work.

commit 1b530e4680b09391d7f99e91f1b0b1eb6b2069fc
Merge: 9a6a404 b2d0b3e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Oct 19 06:27:18 2009 -0700

    Merge branch 'master' into talmdal_dev
    
    Conflicts:
    	modules/user/views/admin_users.html.php

commit b2d0b3ebbb1764593e387a2e07e0d4e67f4f5474
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Oct 18 23:38:27 2009 -0600

    Fix sidebar block admin layout. Don't hardcode block list height, use the equal_heights() function to set it.

commit f421593c1d8fcd4fbfa385e8d2619d2bf79ddaee
Merge: 8860233 b976f9b
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Oct 18 23:18:51 2009 -0600

    Resolving conflicted merge

commit 886023331afffb3af58e55e965159af1ac0a4339
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Oct 18 22:49:53 2009 -0600

    Resolve merge conflict.

commit c2b32cc2b802034a98051b713a3f06c09dcb3f34
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Oct 18 22:45:13 2009 -0600

    Resolve merge conflict.

commit 6a7db5bea15c346d069d42fef173a0f99393bf3d
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Oct 18 20:39:31 2009 -0600

    Resolve merge conflict.

commit 47d4cd5cb4a276d9eba997b09ae38238994e9a47
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Oct 18 20:32:33 2009 -0600

    Resolve tag module conflicts.

commit 5f56cbf997c12ab1aaf14403873fd9dfc33690ef
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Oct 18 20:22:10 2009 -0600

    Wrap all admin views in g-block and g-block content. This provides the means to visually separate the view's title and description from everything else. Primary admin view title should always be h1, and only one h1 per view. Removed some unused admin CSS id's.

commit 9a6a404a3239c964528b501d3c187ead84b1f7a0
Merge: 301754d b976f9b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Oct 18 18:20:11 2009 -0700

    Merge branch 'master' into talmdal_dev

commit 301754db7365262804a40a59d4cbf277d7d1085e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Oct 18 18:16:19 2009 -0700

    Create a administration page that allows the administrator to change the the Identity provider if more than two are Identity providers are installed

commit 91ab6f161fa1e118418922fbf0a42f1924d7df0e
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Oct 18 18:01:42 2009 -0600

    Apply g-block and g-block-content, remove hover effect, alternate row color.

commit b976f9b3665771444c30e914fe21cbce5848bd21
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Oct 18 10:30:36 2009 -0700

    Move away from embedding the tag id in to the CSS id.  This is brittle
    and causes us to do silly things to extract the id.
    
    Use rel instead so:
      <span id="g-tag-1">
    becomes:
      <span class="g-tag" rel="1">

commit 8cd8fa2b99e92af94df7081fc398172eec48ba2a
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Oct 18 10:53:18 2009 -0600

    Fixed add tag short form layout.

commit c9ccc2461880de141c37c3c7a7df3b26530ce806
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Oct 18 10:32:08 2009 -0600

    Moved the short_form init function to gallery.common and made it jQuery plugin. Dropped gallery.form.js. Applied short forms to server_add and tag admin pages. Added tag.css to admin views. Added .g-wide {}.

commit 090c4d016baec6376d6d26c347c3e1ca11a929d5
Merge: c9a030d 4949a2c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Oct 18 09:28:48 2009 -0700

    Merge branch 'master' into talmdal_dev
    
    Conflicts:
    	lib/gallery.common.css
    	themes/admin_wind/views/admin.html.php
    	themes/night_wind/views/sidebar.html.php
    	themes/wind/views/sidebar.html.php

commit 4949a2ce0b5daca7afe86a261be447440fce7eff
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Oct 18 09:23:59 2009 -0700

    Optimize the get method to retrieve the module information from the loaded modules.  In addition add a method "info" to return the module information contained in the module.info file

commit c9a030dd08711f89a985504ce26378a315d7ff1f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Oct 18 09:21:34 2009 -0700

    Add a menu item to manage the Identity drivers if there is more than one installed

commit 6d5c12e13e6f1199a96180e69cac69d77ecbbcc2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Oct 17 10:36:50 2009 -0700

    Move the default identity config into the users module and change the Identity constructor to look in module::get_var(gallery, identity_provider) for the current identity driver.
    In addition, don't just arbitrarily lock the use module.  Only lock gallery and the module that is referenced by "user_driver_module" variable.

commit 08a22f4a39a1dad4b63f1303aa9cb3e758a784f3
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Oct 17 21:59:53 2009 -0600

    Add tag.css to tag admin page.

commit 3387b54fe36b573ec5d9b1fd42844cfd6b8d4ff6
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Oct 17 18:43:47 2009 -0600

    Add clearfix to force pager nav below dynamic g-album-grid.

commit 6e4fe792174dfa15ec38cbec8c07c0fbc124e446
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Oct 17 16:40:55 2009 -0600

    White space fixes.

commit 387adbbc9d3c8be117a4c89ab284eeb7dba00959
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Oct 17 16:02:18 2009 -0600

    Added comments, minor white-space fixes.

commit 661369b50f08c6256ed6f90922d0a9eeb6d4dad2
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Oct 17 13:01:30 2009 -0600

    Remove remaining clearfix selectors from fix-ie sheets.

commit ad0497a8d2956a73d174445a30d9190b1f970caf
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Oct 17 12:58:31 2009 -0600

    Drop our g-clearfix in favor of using jQuery UI's ui-helper-clearfix.

commit b677eeb5ee4f5e408c3edf890a36d3ccbda9ac3b
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Oct 17 12:57:34 2009 -0600

    Missed this in last commit.

commit f2b6ec6637c130044cc08ff186433f10ad2f3839
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Oct 17 12:48:54 2009 -0600

    Move tag css from theme to the module. Introduced generic .g-inline class for inline elements, including lists and forms.

commit 78ee4193b70329c8e0929efd18c22324dd2ad8e0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Oct 16 10:06:58 2009 -0700

    Remove all non Identity API methods from Identity.php.  Created an MY_Session class to provide the user state changes in the session and a login.php helper that has the login form.

commit bc241e44c2e4d10ac19ccc32a40c90426672d963
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Oct 16 07:41:33 2009 -0700

    Cleanup merge of user/group helpers into Identity interface.  Reduce redundant code in the user module and remove references to the Identity helper from the user module as the user module should be able to access things directly. Simplify the get_user_list api method to just accept an array of ids to return user objects for.

commit 00eacd659f27df9c13246c510057c4f42c8866a2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 15 14:37:57 2009 -0700

    Start simplifying the interface by moving the static methods from user.php and group.php.  Tried creating a identity helper, but the helper identity.php was confused with the library Identity.php.  So got around this by making the methods on Identity static and calling the instance within the static methods.  Also temporarily moved the user.php and group.php back into the user module.

commit be6765336eb894535d62055fab577dfc951b6b6a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 15 10:44:25 2009 -0700

    Finish integrating the move of the user edit/update functions into the user module.  The premise is that the plugable user module will provide the update screens if the user backend supports updates.

commit 9e833c9443bee5230ab0dbdf7f800d34287a84ce
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Oct 16 01:35:05 2009 -0600

    Remove bg icons when an <li> in a form is tagged with g-error, etc. Minor consistency updates for form layout styles in views and dialogs.

commit 9ce46c1df60de90e1386acf313b05213795897eb
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Oct 16 00:56:37 2009 -0600

    Apply g-dialog-link class directly to login link markup, not via jQuery.

commit 9693f703ecc4994362c3d484ba5bbf6b3a9941e3
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Oct 16 00:54:20 2009 -0600

    Deal with IE flicker during Superfish menu init solely in ui.init.js with .hide() and .show(). Since the menus in the header are the only SF menus, use those selectors for initialization.

commit 0f7de6d13733e0f085cd24b1fd5f5cf91fefcc6b
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Oct 16 00:00:52 2009 -0600

    Apply g-short-form directly to short forms rather than via JS. Comment updates in ui.init.js.

commit ed00914baaa04af37051a02c7a1ff38ca7ce6c5c
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Oct 15 23:38:39 2009 -0600

    Restored g-buttonset class to the view menu, for now.

commit 035ea917108aabb2e6083eec94ccd193d9337ca4
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Oct 15 23:25:55 2009 -0600

    Remove g-toolbar, it serves no purpose for styling or JS.

commit 35351bcd4e1fcbaf9874bc77047e4e1cac9b8f6f
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Oct 15 21:21:32 2009 -0600

    Removed final two specific clear fixes for the developer module and the admin theme's main menu.

commit 3ecff22edb99cefe3b6c20fdc6418544ed5e20c9
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Oct 15 21:20:30 2009 -0600

    Added missing hashes before g-languages-form selectors

commit 99db7e274818e4c3331cf55aba1d8a47d6ab8dde
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Oct 16 01:35:05 2009 -0600

    Remove bg icons when an <li> in a form is tagged with g-error, etc. Minor consistency updates for form layout styles in views and dialogs.

commit eb3e36f1325785807e4e5d01dfdf51f0e3d8faef
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Oct 16 00:56:37 2009 -0600

    Apply g-dialog-link class directly to login link markup, not via jQuery.

commit 568017d8ccd230a5075a5b3e02654e129b4929d0
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Oct 16 00:54:20 2009 -0600

    Deal with IE flicker during Superfish menu init solely in ui.init.js with .hide() and .show(). Since the menus in the header are the only SF menus, use those selectors for initialization.

commit c876ec1f500c605f58c7e70c4d0a3c6f8787df71
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Oct 16 00:00:52 2009 -0600

    Apply g-short-form directly to short forms rather than via JS. Comment updates in ui.init.js.

commit b52b2005206928110120bb2ecfbc868abe979040
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Oct 15 23:38:39 2009 -0600

    Restored g-buttonset class to the view menu, for now.

commit c459482692d816987f5a48ba022b611eef8355be
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Oct 15 23:25:55 2009 -0600

    Remove g-toolbar, it serves no purpose for styling or JS.

commit 7a5168238338077925dbfb82b3e541863cea35dd
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Oct 15 21:21:32 2009 -0600

    Removed final two specific clear fixes for the developer module and the admin theme's main menu.

commit b4ef3affd2988a3dcfafcc04753501571db9fb9c
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Oct 15 21:20:30 2009 -0600

    Added missing hashes before g-languages-form selectors

commit 7e4c0e7135976173ddfee799b84234a10b9c3fdb
Merge: 1ca835c f5dd8d4
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 15 09:05:44 2009 -0700

    Merge branch 'master' into talmdal_dev

commit f5dd8d487eefe9aa0b4e1f38db79d3ee952b783a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 15 08:56:31 2009 -0700

    Move all the edit/update forms for users and groups back to the user module.

commit 1ca835cea7d738b911e7371f64e8c038a85b471d
Merge: 968cd98 0d5d4c8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 15 07:58:46 2009 -0700

    Merge branch 'master' into talmdal_dev

commit 0d5d4c81bcca44f037deb847a4c837752f774e49
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Oct 14 21:20:30 2009 -0700

    Move the ui for user adminsitration back to the user module.

commit 8e1ab75530b2085ed5ae67e714c624b06cae3695
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Oct 14 21:07:19 2009 -0700

    Recreate group::lookup that somehow got removed.

commit 968cd98dfed42e858d3d2953794b21d49dd692d9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Oct 14 10:19:47 2009 -0700

    Indentation and phpDoc fixes

commit 5b4f3091636afc8de5f81707e95f43baa50b7b4d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Oct 14 09:47:04 2009 -0700

    Clean up phpDoc and change the Identity driver so only one configuration can be active at a given time.

commit 5250bd2c79fe0f1131224099c56eb15c548b2b19
Merge: 1c1b726 8641b51
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 13 20:21:26 2009 -0700

    Merge branch 'master' into talmdal_dev

commit 8641b51217a312a0136e6e8f6d691dee205e4d9b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 13 20:20:45 2009 -0700

    Correct moving albums on mouser over, as a css border definition had been removed.

commit 1c1b726d077dc4db27b8af526384e74b9ae50e4f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 13 19:56:02 2009 -0700

    Change the user config setting "allow_updates" to true in the identity config file and correct a missing variable in the view.

commit 468b715a4dba01a93dbff637f6500d7d31638e64
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 13 14:42:45 2009 -0700

    reference to user::cookie_locale changed to locales::cookie_locale

commit 10720b3891e7f7a45616a50f866f507115915d7e
Merge: 435119f b46346a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 13 14:04:15 2009 -0700

    Merge branch 'master' into talmdal_dev

commit 435119ff3ced53792eb87acc94825f7e0efb35d2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 13 14:03:25 2009 -0700

    remove the cookie_locale which is now in the locales helper

commit b46346aab6df6272c9b1106783ea9b3006519ecf
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 13 13:56:44 2009 -0700

    Optimize the creation of the language block

commit 819d87cd9a940b42c40f82d077941f7e51aaa256
Merge: df302d2 14e1400
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 13 13:41:28 2009 -0700

    Merge branch 'master' into talmdal_dev
    
    Conflicts:

commit 14e14003de0ae5dfe1886bec5bec435d15c7554f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 13 13:37:37 2009 -0700

    refactor the user and group helpers into the gallery core module.  2 reason, first it makes sense that users and groups are a gallery requirement and belong in core. secondly, prepares the way for the Identity refactor.

commit 2af48060117bdf30fb48929dd8c9d22800a70843
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 13 13:19:17 2009 -0700

    Refactor the ui component of the user module into the gallery core module.

commit df302d28e62f9bd83d2d504578aec8e6434711bd
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 13 13:05:37 2009 -0700

    remove duplicate function definition

commit 673cea0a2ba5d83b99c2ec8666a3d175756fdcaa
Merge: 1f9d458 fcd1e79
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 13 12:55:06 2009 -0700

    Merge branch 'master' into talmdal_dev

commit fcd1e79bac7980eae61de05de9949a7e18b0d557
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 13 12:54:30 2009 -0700

    forgot to add a break statement when i pasted

commit 1f9d45861d68b95c4a4069e7d862a7076fae6ba4
Merge: ab73a40 1c313e9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 13 12:53:33 2009 -0700

    Merge branch 'master' into talmdal_dev
    
    Conflicts:
    	modules/gallery/helpers/gallery_block.php
    	modules/gallery/helpers/gallery_theme.php
    	modules/gallery/helpers/user.php
    	modules/user/helpers/user_event.php

commit 1c313e9d2da84a9dd839ea6a4910cdf6809007fb
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 13 12:46:27 2009 -0700

    Continue to refactor locale and gallery3 ui from the user module to the gallery module

commit f8eee907057d92e16888549ce1c674ea968971a8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 13 12:38:21 2009 -0700

    remove the unused private function user::_md5Salt()

commit 2c711d8908137b6ff25941f06fe0a3f9ac02596d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 13 12:33:00 2009 -0700

    refactor locale related functionality out of the user module and into the gallery module.

commit ab73a4092ff70a87ced1d7ffcfbe9bcee788f1f3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 13 12:03:55 2009 -0700

    Correct typo in method name

commit d9720b77e9c4455df3e3237c285ad5a33afdd591
Merge: 4dd6e4c 53393a1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 13 11:48:42 2009 -0700

    Merge branch 'master' into talmdal_dev
    
    Conflicts:
    	modules/gallery/controllers/admin_users.php
    	modules/gallery/controllers/password.php
    	modules/gallery/helpers/group.php
    	modules/gallery/helpers/user.php
    	modules/notification/helpers/notification.php

commit 53393a144609c0d8402b14606f52422bf3f28daf
Merge: 79b4b8b 3fc1eb5
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Oct 9 01:28:17 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 3fc1eb58428c4ecdfdf7d54f51fd2fa4449cc02f
Merge: 0a66ef9 f67bfd0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Oct 13 10:39:25 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 0a66ef9cc785fa5fb3614e7664c424d13ff09728
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Oct 13 10:36:50 2009 -0700

    Don't allow users to change the file extension of photos/movies
    
    If you can change the extension, then you can alter the way the server
    handles the file, which is a security problem.  So for example, you
    can change a .JPG to a .PHP and then if you put some malicious PHP
    code in the EXIF data, you can get the server to execute
    it. Vulnerability is low because only users who have edit permissions
    could do this.
    
    Fixes ticket #846

commit b6c1ba7ea6416630b2a44b3df8400a2d48460b0a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Oct 11 11:21:51 2009 -0700

    Use SQL_CALC_FOUND_ROWS instead of doing the search twice, for better performance.
    Fixes ticket #835, thanks Joe7!

commit bc63e4fcf95d1626341a2dedc72e2e516aed673c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Oct 11 11:16:07 2009 -0700

    Make the slug field required for all items.
    Make the filename field required for photos/movies.
    Fixes ticket #838

commit 80bb78fa4ef3fe718cdee56fc98d5584dcd7d5b2
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Oct 9 12:07:27 2009 -0600

    Fixed resized photo float issue, added g-clearfix to g-pager on the photo view. Tightened up g-pager styles. Removed a few unecessary !importants.

commit 79b4b8bdc606ecd46b258e32b3973511a43d38b0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Oct 9 01:25:03 2009 -0700

    update the Access_Helper_Test to use the user::lookup_by_name API method.

commit 1ee7d24766a3055d4199251f6ce990714b9c3641
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Oct 9 01:12:05 2009 -0700

    Add support for the in filter to get_user_list and get_group_list. Convert the notifications to use user::get_user_list instead of accessing the table directly.

commit 00ee91837faf4807fb17dde3272ca8248a9dcd94
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Oct 5 14:04:27 2009 -0700

    Convert direct lookups for the user table using ORM to using the user::lookup_by_name and user_lookup API methods.
    Convert the Admin_User controller
    Convert the login and password change controller
    Change the item model to call user::lookup to get the owner.
    On the log model, delete the relationship between the log and user table, and replace with a
    call to user::lookup
    (cherry picked from commit 194cc3b27a73afe5119da9f09407c1e068dc6fa3)
    Create the get_user_list, lookup_by_name, lookup_by_hash and get_group_list api functions

commit 4dd6e4cc4c3353b36a5c69a845ad879ddf085d2f
Merge: 7ad203b f67bfd0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 8 23:30:37 2009 -0700

    Merge branch 'master' into talmdal_dev
    
    Conflicts:
    	modules/gallery/helpers/user.php

commit f67bfd099296602f60d48914ae4b09d65b0ad8d3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Oct 7 20:26:26 2009 -0700

    Change the users.php controller so its no longer restful.  The problem with our approach to restfulness is that it assumes that the resource will be found in the gallery database.  It may well be there, but in the case of using plugable drivers for users management, there are no guarantees that it is in our database or it could be in a ldap directory.  So it was just easier to remove the restfulness and just call user::lookup instead.
    (cherry picked from commit b3211cb2a8282556d410c91771baeb764d47ed10)

commit 2a5a3098018ca6f5a765a35c2dc9c66f277fad2e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 8 22:48:31 2009 -0700

    Apply commit 80bb78fa to the nightwind theme

commit 7ad203b97a148c1e3b0585bf2554819bdc87ce98
Merge: 6f315ad b6c1ba7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 8 13:47:30 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3 into talmdal_dev

commit 83203a11f8f3da23dbd2a75e94ca66a5d53ebc3f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 8 13:06:29 2009 -0700

    Add the rotate clockwise and counter clockwise to the theme images

commit 39dbd820fa48fb8765fec404073e692c800e8d84
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 8 11:54:56 2009 -0700

    Darken the body background.

commit 4b6452127583761e052cf397645688247faf404d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 8 11:24:21 2009 -0700

    Change the color of the icon pack to darker shades instead of orange

commit 23ba9a2a4eaef62408d52286d573f2be6820afca
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 8 10:11:57 2009 -0700

    A clone of the Gallery Wind theme that is based on darker colors.  We can move it to -contrib if that's the desire, but i'd thought i'd put it here for now.

commit 6f315ad89c06431b408fcdf24393ad13daed845d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 8 06:35:38 2009 -0700

    Part of the previous commit, forgot to save... again

commit 052491e258ec72746839298a545fecad18a947a0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 8 06:26:12 2009 -0700

    If the Identity backend is not writable don't display the "Forgot Your Password" link

commit 3a0413901fb4422fb34d786ba935dc63486bd187
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Oct 7 21:46:26 2009 -0700

    Forgot to save these before the last commit

commit 62ad5c26854bc53566e5941c0a410789b891545f
Merge: 03d0311 0356164
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Oct 7 21:40:54 2009 -0700

    Merge branch 'master' into talmdal_dev

commit 03d0311618267cf0b16445161c4d275749d64a5e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Oct 7 21:40:05 2009 -0700

    Implement a user::is_writable() API method and disable the user add, updates and display if the Identity driver does not support writes. This is set in the config.identity.php

commit 03561649ea3d04d96c8911d39b05b71845912b1d
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Oct 7 21:52:45 2009 -0600

    Grouped rtl styles in the admin theme. Removed #g-forgot-password-link, it doesn't style the element. Added g-left and g-right in missing places.

commit b3211cb2a8282556d410c91771baeb764d47ed10
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Oct 7 20:26:26 2009 -0700

    Change the users.php controller so its no longer restful.  The problem with our approach to restfulness is that it assumes that the resource will be found in the gallery database.  It may well be there, but in the case of using plugable drivers from users, it could be in a ldap directory, it could be the gallery3 database, but the model could be wrapped in a control structure.  So it was just easier to remove the restfulness and just call user::lookup instead.

commit c787e46c2a11e5d34a14cb575aa561969073fa78
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Oct 7 20:14:51 2009 -0700

    Change the __set method on User_Definition to actually set the value as opposed to return it.

commit 609072d3b94b403faedb4d3a36a53aee9432fe60
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Oct 7 20:29:16 2009 -0600

    Update fix ie style sheets to include .g-clearfix.

commit fa2ec8825dcaeaceb4857e3880ee4eee5de5bf71
Merge: e1a394b d71a8ef
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Oct 7 19:09:10 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3 into talmdal_dev

commit d71a8ef5d0d2d1ddbc450f1c5962b4c3b3a6fdcd
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Oct 7 20:06:48 2009 -0600

    D'oh! Forgot the :after pseudo selector for .g-clearfix

commit 121fcab5c81fd4f942eea11577e4381ab4d86ddc
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Oct 7 00:46:02 2009 -0600

    Replaced most clear fix hacks with generic class.

commit 617076e8970872ba0355caeadb70cbf6735f2a39
Merge: 859f8dc 13fb033
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Oct 7 00:21:47 2009 -0600

    Merge branch 'master' of github.com:gallery/gallery3

commit 859f8dc558555cee4c106099c1a44aa6866aaa0f
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Oct 7 00:21:23 2009 -0600

    Consolidated the rest of the base message styles into lib/gallery.common.css and applied updates to views. Moved over draggable/droppable styles. Use g-target consistently for drag/drop interactions. Minor re-ordering of selectors in gallery.common.css. Updates to css comments.

commit 13fb033235a057445d58f5c2663951d1e0738423
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Oct 6 23:05:35 2009 -0700

    Remove debugging lines (thanks talmdal!)

commit fcbce09fc4dc85a47a78ce01abe801225beb9a94
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Oct 6 21:50:41 2009 -0700

    Update gallery::find_file to look for subdirectories in lib, then fall
    back to looking in just lib itself.  This is not consistent behavior
    with the rest of our module structure, though so we should probably
    make it more consistent.
    
    Fix up the permission images to use gallery::find_file again.

commit 0c7e4581c9f89aa462d951fae46f137f5a3566c0
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Oct 6 22:18:31 2009 -0600

    Rename permissions icons to correspond to view states, move to lib/images. Fixed references to them in the edit permissions view.

commit e1a394b6bfb6b7c830eb353f2056d39fd8d1b0f7
Merge: 7f38d6f dc0d344
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 6 18:34:16 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3 into talmdal_dev

commit 7f38d6ff29e3554031496c3f98e357f7a87a2671
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 6 18:30:11 2009 -0700

    Change the focus of the user module from providing user/group management to providing the default Identity implementation.
    * Remove the user_event callbacks and move them to the gallery_event callbacks. This will insure that the active user is always loaded (because the gallery callbacks are always called first) to its available to other gallery_ready handlers.  Moved the method set_request_locale to the locales helper as it is more related to locales.
    * Move the user controllers and views into the gallery module.
    * Move the theme and block processing out of the user module and into core.

commit 6671bd8b855758763e3111ea18647d2cb51b9365
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 6 17:32:58 2009 -0700

    Allow a groups property on the User implementation and load the Identity drivers early in the process so the session deserialization works.

commit da84a46ccbfcff0966caea8ca54c32469c5c175f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 6 13:24:55 2009 -0700

    Clean up extra single quotes from copy and paste

commit b35051ff6f14dd591d5aee0beed3aec14f3e5eac
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 6 12:58:53 2009 -0700

    Move the graphics::rotate to gallery_graphics::rotate to be consistent with the other gallery graphics functions.

commit dc0d344b4acb7a7d7d60628d5928163bf121ab1a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 6 12:58:53 2009 -0700

    Move the graphics::rotate to gallery_graphics::rotate to be consistent with the other gallery graphics functions.

commit c0683845048a0610316b5f3aaa9111793273f420
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 6 11:20:51 2009 -0700

    Encapsulate the user and group model in Gallery_User and Gallery_Group classes which extend the User_Definition and Group_Definition classes defined in the Identity API

commit 194fba6fa8c87517ea70c41514f75ebc2d9bdf12
Merge: 6e59de2 49505f2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 6 07:59:45 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3 into talmdal_dev

commit 6e59de2fb5b379a7a839e27c92f7546ee568cf00
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Oct 6 07:55:31 2009 -0700

    Change the notification handler to use the Identity API to lookup subscribers
    for event notifications.  This drove out some issues in the user::users and
    group::groups API backend.

commit 49505f28bb68e84b926d7907a33c7f814e78eb3c
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Mon Oct 5 22:27:30 2009 -0600

    Refer to sidebar elements as blocks, rather than panels.

commit 8285cd58e27dfdc2f013f44c1e69aa82f87b7c83
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Oct 5 18:10:39 2009 -0700

    Handle the filters on Identity/Gallery::list_users and Identity/Gallery::list_groups

commit ca17727478b44b8bec6bb7f8ed1c8c688818b8f6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Oct 5 17:08:27 2009 -0700

    Access the form validation rules via the API for groups and users

commit 194cc3b27a73afe5119da9f09407c1e068dc6fa3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Oct 5 14:04:27 2009 -0700

    First pass on converting calls to the Identity interface. Will worry about writes and saves later.
    Convert the Admin_User controller
    Convert the login and password change controller
    Change the item model to call user::lookup to get the owner.
    On the log model, delete the relationship between the log and user table, and replace with a
    call to user::lookup

commit 08c01fec6cc590eb578522164de81114b889c4b5
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Oct 5 11:51:08 2009 -0700

    The initial commit of refactoring the user/group adminsitration into a driver.
    Create an Identity library that defines the interface the Gallery3 expects
    Move the user and group helpers into the gallery module to provide the familiar
    interface into the Identity library.
    Create a Gallery Identity back-end that is supplied by the user module.
    
    The vision here is that all user and group code that is gallery or ui specific
    is contained within the core product.  Anything that relates to manipulating a
    user or group is contained in the back end code that can be replaced.

commit 225fb42f744954d7154111d44c7481fbaba477c0
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Mon Oct 5 00:36:11 2009 -0600

    Added g-block-content

commit d581bbbd1eaeb242b7279e5a6d75f015dd5a5e6f
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Oct 4 15:53:00 2009 -0600

    Renamed more CSS selectors from gName to g-name.

commit 048e540a985cda0e092572eeea44855a0cb0428c
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Oct 4 15:44:24 2009 -0600

    Fixed previous over zealous find and replace.

commit 4be3210f1d4301c215514122b5cae218eac13972
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Oct 4 15:30:05 2009 -0600

    Fixed previous over zealous find and replace.

commit 61d7ab7d5784635a7ec23fcb3dbc03da61de5eba
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Oct 4 10:05:09 2009 -0700

    Revert "Create a modules and themes directory in the application directory.  All subdirectories are ignored by git, so provides a place to put 3rd party themes and modules separate from the core release."
    
    This reverts commit e8733e262b37461b6e162ca065521165c6dc31a1.

commit 2634a683b30982963264faf9867d32d1aa71a182
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Oct 4 10:04:35 2009 -0700

    Revert "Create a gallery::plugin_path which returns the appropriate path to the module or theme.  This checks for the existence of an application/modules or application/themes first."
    
    This reverts commit e1e1461a77caf5bff457927f098366497de6ffff.

commit aa0529d557ed0609bf7e5b23a5cf2437f7998c4b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Oct 4 09:45:17 2009 -0700

    Create a gallery::plugin_path which returns the appropriate path to the module or theme.  This checks for the existence of an application/modules or application/themes first.

commit 60c15e41b37fbe6b2adc7789b21b7e5acea3e949
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Oct 4 07:49:20 2009 -0700

    Create a modules and themes directory in the application directory.  All subdirectories are ignored by git, so provides a place to put 3rd party themes and modules separate from the core release.

commit dfc7f02cccda6dc68cf35fac06fc2bc3b3c4faca
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Oct 4 01:21:31 2009 -0600

    Restored avatar.jpg as it is used on the comment admin page.

commit 3e6ba7acc3291f2268cbe9c9bef0a492b557babb
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Oct 4 00:27:22 2009 -0600

    Renamed most, if not all css selectors from gName to g-name. Moved a few shared images from wind to lib. Deleted unused images in the admin_wind. This will likely break a few ajax features.

commit 9145331fd420ec3fe86833a7b9567ec42f1d84e8
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Oct 3 12:33:53 2009 -0600

    Renamed and moved gOdd/gEven CSS classes.

commit 5ab0be3e6263f2955c58e81e1a41495af94a66d4
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Oct 3 09:58:57 2009 -0700

    Add the swfobject (http://code.google.com/p/swfobject/) to gallery3/lib.

commit 7236208655c3a4c9fba59b36efaeb8f6175a0819
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Oct 2 13:20:44 2009 -0700

    Log the stack trace when non-admins get the error.

commit ace6949664c99a291823b960cb6166bca08d522f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Oct 2 08:00:15 2009 -0700

    Set the height of the gAdminBlocksList ul so the user doesn't have to struggle to find the drop target. Thx floridave fir pointing it out.

commit b2a9bf43afa2aaf845368ea04beef56f2ed035de
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 1 12:43:30 2009 -0700

    Change gallery::find_file to not assume that the absolute path is relative to the document root. Instead ignore all th path parts until one of application, modules, themes, or libs is found.  Fixes ticket #827

commit 3ceb2775f890925f7c2251778e803f5c32811c9c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Oct 1 10:59:45 2009 -0700

    adjust whitespace

commit 3243feeeb6bce395f346342a793c2506b5d3fcad
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Sep 30 22:58:51 2009 -0600

    Apply gModuleStatus to server add status message.

commit 966c475dd03b8ad6dc415fabc49798024373fe71
Merge: e1e8904 4d76a99
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Sep 30 22:49:57 2009 -0600

    Merge branch 'master' of github.com:gallery/gallery3

commit e1e8904e4a82792effd721fc0b4c028d86cf177a
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Sep 30 22:49:36 2009 -0600

    Convert gDialog and gCancel over to g-dialog and g-cancel. Refactor CSS id's and classes in the login/reset password dialog.

commit 1f02c1ef6ef26a1f96e27b6ecede6388e4132e15
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Sep 30 22:48:05 2009 -0600

    Apply gModuleStatus to server add status message.

commit 4d76a99872202de139c943478845c8972348e97c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 30 21:27:21 2009 -0700

    Fix a problem with trying to display item related menu items on a dynamic page like tags

commit 8f3691d502555cd497af56999d3a657b096dfd15
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Sep 30 22:20:34 2009 -0600

    Apply button style and hover effect to password reset button.

commit 1f252f0609435b41ab085a24bafab94a0269052d
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Sep 30 21:52:51 2009 -0600

    Missed g-right application on add group

commit 0c3c13d27f4c199ac23020edfa5b463f0bf64acf
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Sep 30 21:12:00 2009 -0600

    Removed blank line.

commit e3f3a4cbe17035bba3f76256a2411eef1729a734
Merge: 0787ef8 06070c7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 30 18:06:16 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 0787ef8b206a84778f04aa36604e0d8ea60cd13c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 30 17:54:37 2009 -0700

    Added active_sidebar_blocks and deactive_sidebar_blocks to allow the installer to activate and deactive the side bar blocks when a module is activated or deactivated.

commit 7e78d125b202d476fbf4e41addf85cfbaa838ec4
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 30 17:50:06 2009 -0700

    Correct version numbers for image_block and info modules, they inadvertently got set to 2, they should be 1

commit 4ec2654a69a116709056d0311c38449c7968ad3a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 30 17:49:08 2009 -0700

    Correct version numbers for image_block and info modules, they inadvertently got set to 2, they should be 1

commit 81eaf1e46cb1646bf6b5d5c2f86ea3b3c7a0bd06
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 30 17:30:01 2009 -0700

    Add functionality to activate sidebar blocks when the module is activated and deactivate the sidebar blocks when the module is deactivated.

commit 06070c78eef1ffc95d14cc017ed20622c56e19da
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Sep 30 18:05:15 2009 -0600

    Move primary status message icons to lib/images/, update css urls accordingly.

commit e197e4017daa0833cec84d8392e4d05cdf81503d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 30 17:02:48 2009 -0700

    Set the gallery version to 15 and provide upgrade processing to set the default sidebar.

commit 4de412e72270587cbd656ebafe08892344055a4d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 30 14:25:33 2009 -0700

    Enable the administration screen for the sidebar. Fix for ticket #110.

commit 19b875723b37ac7121c64c0c882ccbc2e6353d08
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 30 10:53:22 2009 -0700

    Make the  parameter to block_manager::get_html() optional as its not applicable to admin sidebar blocks.

commit 8bf246f5148730b6596fd34b946ee97771b3bfc6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 30 07:52:43 2009 -0700

    Forgot to reset the version number

commit 612bc3f0913f7f410f417ee02934491b9d2e410d
Merge: a210878 19cb27c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 30 07:48:19 2009 -0700

    Merge branch 'talmdal_dev' of git@github.com:gallery/gallery3 into talmdal_dev
    
    Conflicts:
    	modules/gallery/helpers/block_manager.php
    	modules/gallery/libraries/Theme_View.php
    	modules/image_block/helpers/image_block_block.php
    	modules/image_block/helpers/image_block_theme.php
    	modules/info/helpers/info_block.php
    	modules/info/helpers/info_installer.php

commit a2108787257739a83708ea5c3bc21bd11e6dad17
Merge: 60d35b8 72672bd
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 30 07:37:14 2009 -0700

    Merge branch 'master' into talmdal_dev

commit 60d35b89929d9029c794f72d6a9c38b676e282f6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 30 07:31:11 2009 -0700

    Use the block_manager to manage site sidebar panels. Fixes ticket #110.
    * Extend block_manager to handle sidebar blocks. get_available has become get_available_admin_blocks, get_list becomes get_admin_list.
    * Create new functions get_available_site_blocks which will look for gallery_block get_available_site_blocks.
    * Refactor sidebar_blocks into a separate function and then call block_manager::get_html(site.sidebar). Convert image_block to use block management instead of theme::sidebar_blocks
    * Change the block_manager api so that the theme is passed into the get method. convert info to the new sidebar block approach
    * Convert the user module to use the new sidebar block structure. remove the installers for info and image_block modules.
    * Convert tag and rss modules to the new sidebar framework. reset the version number to 1 for info and image_block modules.
    * Change the get_html method to ignore empty blocks and change the individual handlers to return an empty string if no block is generated
    * Add a warning message if no sidebar blocks are active and provide a link to the admin page that configures the sidebar.

commit 72672bda39b76dae698805c3e0e6efdbdcf21105
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Sep 30 08:04:49 2009 -0600

    Replaced gButtonLink with g-button.

commit 1c68190de0f148b27eacbfba8f1e290149e7dd1b
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Sep 30 00:42:38 2009 -0600

    Floated elements in table headings should appear before anything else. Fixes odd white space between column heading and and button on admin maintenance page when browser window is narrow.

commit daa3a2b43cd6e1458014e763e9640b8db16cc0c1
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Sep 30 00:32:52 2009 -0600

    First round of CSS refactor updates. Added calls to gallery.common.css from wind and admin_wind. Replaced basic text align and block float classes. Removed section #2 from both themes screen styles.

commit fbb6a86f94deba1c2a65e7371be210fe4520351e
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Sep 29 23:21:08 2009 -0600

    Set available graphics block heights with gallery.equal_heights().

commit 3ea3a4325e91f9176eaf0d00e5e078c7e258c5cc
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Sep 29 23:11:15 2009 -0600

    Don't display bg color on success and info module status messages, only errors and warnings.

commit 19cb27c9a4489c357c0e516c69ebcb218f8832c1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Sep 29 15:07:53 2009 -0700

    change the block_manager api so that the theme is passed into the get method. convert info to the new sidebar block approach

commit 39a40e49a19f00baeeeefe375d67e915ccc7e09a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Sep 29 14:35:15 2009 -0700

    Refactor sidebar_blocks into a separate function and then call block_manager::get_html(site.sidebar). Convert image_block to use block management instead of theme::sidebar_blocks

commit d77045f60de98eaa6400deddd11690a1401044ea
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Sep 29 12:04:47 2009 -0700

    Extend block_manager to handle sidebar blocks. get_available has become get_available_admin_blocks, get_list becomes get_admin_list. Create new functions get_available_site_blocks which will look for gallery_block get_available_site_blocks

commit 39cd84d86c69090ccf861b9bd2b4758350a47de2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Sep 29 09:11:43 2009 -0700

    Remove a debugging log statement

commit e6f62396111e2cd9aef8e3244851eca3ec65aee4
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Sep 29 09:10:41 2009 -0700

    Remove the @todo and optimize the gallery_event call for 3 and 4 arguments... context menu events have 4 arguments.

commit 89a67dba63f8ac61b90e4c4f1ba1b0cdbdf20b26
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Sep 29 08:50:53 2009 -0700

    * Remove the @todo in module event and always try to call gallery_event::$function first
    * Refactor gallery.php to move site_menu, admin_menu, and context_menu to gallery_event.php
    * Change Theme_View and Admin_view to call module::event("site_menu|admin_menu|context_menu"...)

commit dd5471b8600a9a6efbfbfab81972db59e512493a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 28 21:05:07 2009 -0700

    Create and throw the exception, instead of logging.  The theory behind
    exceptions is that they only need to be logged if they can't be caught
    and handled.  If we don't throw it, then the error gets swallowed and
    the code that errored out just blithely continues.

commit a0a62a09922d855cd87d35ccc42ea7cf407a8df7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 28 19:30:34 2009 -0700

    Do a pass on the gallery::find_file and Gallery_View::{script,css} PHPdoc.

commit f9b351559c8ec826961fc17fc00c910133b4a43b
Merge: 28624bb a0d13cd
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Sep 28 09:08:07 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 28624bb8f1a153208ae811ffb56c436055f74249
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Sep 28 09:04:44 2009 -0700

    Update the PHPDoc for gallery::find_file and convert Gallery_View::script/css to use gallery::find_file

commit a0d13cd324e75bc5ff630d5ead09c9d5734b6de9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 28 08:03:14 2009 -0700

    Clean up upgrader for version 14.  Put {} around table name,
    capitalize reserved words, use single quotes in the query to avoid
    escaping the double quotes, remove table alias.

commit cec4493545dba0c1dbbf1ed825d06aa8f5d2cf0e
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Sep 27 23:14:58 2009 -0600

    Don't show bg colors on success and info log messages in the log block shown on the dashboard

commit bb74d2f3609b9ffc0877eaec16ef19c04af97ce2
Merge: 6cd8679 ab5e680
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Sep 27 22:50:04 2009 -0600

    Merge branch 'master' of github.com:gallery/gallery3

commit 6cd8679dec24cd643fa3c2d9bdbf6ac8b938600c
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Sep 27 22:49:46 2009 -0600

    Set .gItem height dynamically based on the tallest item in the grid. Addresses ticket #757

commit ab5e680265dfe9c42bd4d6fb8d1d9fccd95eed7b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Sep 27 20:31:56 2009 -0700

    Clean up the task initialization for rebuild thumbs and resizes.

commit c97a88599eb7b199294edbfae382353456061bef
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Sep 27 17:55:48 2009 -0700

    Change gallery installer to do a direct update to the database, preppending gallery_graphics:: to each of the defined rules operations

commit 467b74c3106558d1656301b9c73236417d4421ac
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Sep 27 15:24:51 2009 -0700

    This path requires the upgrader to be run and applies the following changes:
    * moves the composite method back into core
    * requires that the operation be fully qualified i.e. gallery_graphics::resize
    * caches the graphics rules on each request

commit 0ab73cd1adb2acac0f2b2f97acc8362083d9cdfa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Sep 27 11:35:03 2009 -0700

    Fix some whitespace issues.

commit 74328584205c6685af44de6ea011f5e337fa9155
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Sep 27 11:25:03 2009 -0700

    Fix one more place in the installer where we referring to the old default
    theme names.
    
    Update installer.sql

commit 8060a8a6594c8bc089098329c52bd1d42a0c7adb
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Sep 26 18:34:04 2009 -0600

    Removed unused toggleClass()

commit 484dd7abaa03009c66edad50ce60dd872a80ae92
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Sep 26 15:50:16 2009 -0600

    Remove IE 8 compatibility mode, it's not really needed after the latest context menu update

commit 7b001c982797f4eccc4943d41dfe03caaf85a18b
Merge: d1792ab f5094ed
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Sep 26 15:44:55 2009 -0600

    Merge branch 'master' of github.com:gallery/gallery3

commit d1792ab3e03dd151041f2b044ebad6422ce47d38
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Sep 26 15:44:34 2009 -0600

    Clean up hover effect, move some CSS out of ui.init.js to screen.css. Fix context_menu, it wasn't closing. Fix context_menu in IE7 by putting a bg color on the menu

commit ef35f0900170c9c375d5c1c87fc79c613ee96c51
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Sep 26 14:28:43 2009 -0600

    Force IE 8 into IE 8 compatiblility mode

commit f5094ede3c4564d2a3947e0ff2f6e23c2d4105c9
Author: jhilden <jakobhilden@gmail.com>
Date:   Sat Sep 26 13:28:10 2009 -0400

    minor improvements to simple uploader
    * removed CSS from the view to wind/css/screen.css
    * started changing CSS classes/IDs to new prefix "g-"
    * and more

commit 21341d552f7e56341b29c020e1149d9c41182c84
Merge: 4345e96 0abd6f6
Author: jhilden <jakobhilden@gmail.com>
Date:   Sat Sep 26 11:27:45 2009 -0400

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 4345e96d1db63c8488eb7a35cdc8e42987ba53f5
Author: jhilden <jakobhilden@gmail.com>
Date:   Sat Sep 26 11:27:07 2009 -0400

    first try at improving the upload user experience with the file selection button

commit 0abd6f63bc8a1976a62bc4b57bbabe10d62b5c8d
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Sep 24 22:11:36 2009 -0600

    Force status message box to fill the full width of the content area

commit 639c9c2d55164eab8ef1f8c21a7f9b69b54686ff
Merge: 16c97eb e204e18
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Sep 24 22:08:08 2009 -0600

    Merge branch 'master' of github.com:gallery/gallery3

commit e204e18b3c6a4b4b1aa76b6d4a5392bd238490eb
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Sep 24 20:28:26 2009 -0700

    Refactor the graphic rules processing to accomplish 2 goals: First separate the grapics library from module supplied rules and secondly, allow for modules to provide new processing rules callbacks.  graphics::generate will now look for <module_name>_graphics::<rule> methods.

commit cd240ebaada9ddff112a40a5f80201f23449337e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Sep 24 20:06:14 2009 -0700

    Refactored the rebuild_dirty_images handler to simplify the counting and end processing.  It was getting all confused with trying to figure out the completed and remaining.  Now on initiation it sets the total images that are dirty and then counts the completed until it equals the total, then exits. Fixes ticket #771

commit 970158f4d9904d00319c3da421024c68777a855d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Sep 24 16:59:33 2009 -0700

    Fix unit tests by updating the xss golden file and declaring gallery_error::error_handler as static

commit c51c76dcaa41085eb5cb7a1a0299bb378a175372
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Sep 24 15:06:40 2009 -0700

    Fix Admin_View to look for the the variable active_admin_theme instead of active_site_theme. In addition check for the existence of THEMEPATH .  instead of theme/

commit 59c1c36639af36b3b9ec99664402f9501c290a40
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Sep 24 14:50:30 2009 -0700

    Hopefully the last 2 errant occurrences of default as it relates to theme names

commit 8e16cee2c3b7df19354af366f212ce52a2a7b5c8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Sep 24 14:24:43 2009 -0700

    Forgot to change the defaults theme names on initial install... Duh

commit 054a8dedac11ffbaa030fdc178031e5f975bbbdf
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Sep 24 10:28:02 2009 -0700

    Oops, forgot to change the install version number to match the upgrade version number

commit d727716af71d6b5d13a64075ba5a91cd0aead74a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 23 19:51:46 2009 -0700

    Change the simple uploader dialog to use the new gallery::find_file api method.

commit 8bab030883647ffaf0e0bd4d172261159d19dd08
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 23 19:45:23 2009 -0700

    Add a new api method gallery::find_file.  This wraps the Kohana::find_file function, but allows the extension to supplied as part of the filename. Changed the Edit permission dialog to use the new api method to locate the icons from the active theme.

commit b038e9cbb4d913088a26f8c4e6e4699de9c860d7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 23 17:03:25 2009 -0700

    set the version number to 13, so we will update the default themes in the gallery vars

commit 65051a4bf77321518a0cf80bc328a7ed609dfc90
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 23 15:06:17 2009 -0700

    Rename the default themes to wind and admin_wind.  Change xss_data.txt file to reflect this move.  Not completely moved yet, but the git st is rather large so lets commit this now as a base for the cleanup.

commit 3efaf4b1a11fbc7ef1cfd265086e92a9b1ef4eb8
Merge: a24d9d6 719b111
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 23 15:00:32 2009 -0700

    Merge branch 'master' into talmdal_dev

commit 719b111219608f6a19a3a460d2953bc3362c9c28
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 23 14:38:38 2009 -0700

    Correct indentation

commit fed41eae6cdaa83ac65a8565526cb76ced9b2783
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 23 12:04:26 2009 -0700

    Fix a typo

commit b79129e3651a92250b61a501b8c6a1d53bf4928c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 23 12:02:35 2009 -0700

    Clone the photo::get_edit_form to the movies helper and use it to generate the movie edit form. Fixes ticket #726.

commit d3b55622827adbb9d9ab36a9947b45e0d49aec78
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 23 10:50:32 2009 -0700

    Commit cbba45 accidently attached the gallery_ajax widget to gDialogLinks in the admin default theme. This change corrects it

commit bdb6b17bf5d3929d6d762bf605f25f944b393e62
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 23 09:09:45 2009 -0700

    Correct whitespace

commit faee4391a3283dbafc0ec101b4902fd01bc2e329
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 23 07:12:17 2009 -0700

    Remove a commented line I forgot to take out

commit a24d9d67a6d6ee0b976068880476e69b432b1406
Merge: 05275e2 7f066b3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 23 07:04:59 2009 -0700

    Merge branch 'master' into talmdal_dev

commit 16c97eb6ebd8c5514dff8ed9242d7eb0a4e7178a
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Sep 22 23:03:48 2009 -0600

    Convert tabs to spaces

commit 7f066b34c9d965814c0a07a8f71e016edeb383d2
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Sep 22 22:31:05 2009 -0600

    Apply thumbnail hover effect to context menu's list items, which holds the menu open in ie6 and ie7 now. Items which appear above the meta data list underneath flicker, though. I'll fix later.

commit 91c99c9627c8a6352054200d242fd81e963a1c73
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 22 20:36:12 2009 -0700

    Simplify the "unchanged" status message.

commit 28060d9dce3128cb0254d61a66d865fe8f4e1583
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Sep 22 14:25:52 2009 -0700

    Create a gallery error handler that traps php errors and rethrows them as Exceptions.  This fixes ticket #763

commit 1dc3f375bf2f0d035d2c6b90449f248e348d7290
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Sep 22 12:35:40 2009 -0700

    Updated to Exifer r4477. Fixes ticket #763.

commit 2117d7725e636ce408b85501032bc8aff86d3000
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Sep 22 12:10:52 2009 -0700

    For those that run gallery3 at the top level, include a robots.txt file to exlude gallery3 working directories from index by robots. Fixes #794 - thanks nigel_aves

commit 1e7a2f58088cfef97be067d5b307ba95a170209b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Sep 22 11:09:04 2009 -0700

    Implement the updated version of gallery3-vendor/exifer which has gettext replaced with calls to the gallery t method to provide translation. Fixes ticket 672.

commit bec620487af86f566dc7a82549cd4dcb1cf99c9a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Sep 22 09:48:24 2009 -0700

    Wrap the login form with a view in order to include a forgot password link. Fixes ticket #620

commit f1366d275e007141a28a933a6221c6337d7aa1d7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Sep 22 08:46:07 2009 -0700

    Issue an information message if the user clicks "Save Settings" indicating that the key was not changed as it as identical.  This addresses the obscure issue raised in ticket #756

commit b310fab1f8e88371e4f2f1fa41173e1fc5eddb60
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Sep 22 07:59:26 2009 -0700

    Change the link on the "Be first to comment" link to do a request to the server to get the comment add form. Fixes ticket #699.

commit 78cce555c377b4dd3078a007c6c407cf4eb9f6dd
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Sep 22 07:31:00 2009 -0700

    Change the gallery.show_full_size widget to only scale the image if one of the dimensions is greater than the browser window size. Fixes #695

commit bf93473de529fc20ecb774e4f1ef5ca521f6a3b0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Sep 22 06:56:28 2009 -0700

    Revert "Change the exif module to respond to the gallery_ready event and check to see if gettext is installed. The 3rd party library used in the exif module expects gettext to be available.  Rather than doing all the time use the gallery ready event to only do it when it might be needed. Fixes ticket #672"
    
    This reverts commit 33690a32bcf132e5ab470ff77ba23c073ac26271.

commit 05275e2c07549ae9c40e647154fa442d796918b8
Merge: dd31b1d 2229690
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Sep 22 05:35:21 2009 -0700

    Merge branch 'master' into talmdal_dev

commit 22296907b77a00aa28e174b6e0231faed7c10fcd
Author: Chad Kieffer <ckieffer@bernie.local>
Date:   Mon Sep 21 23:17:12 2009 -0600

    Don't add in contextual menu height if the menu's empty

commit 95945ca18bde4b4ca096d660581fd60d7f06bff5
Merge: 68f3dab e5a78d3
Author: Chad Kieffer <ckieffer@bernie.local>
Date:   Mon Sep 21 23:08:57 2009 -0600

    Merge branch 'master' of git://github.com/gallery/gallery3

commit e5a78d39ec49332054cbc1a398d7c110e1d9191c
Merge: 529ded3 33690a3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 21 21:29:13 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3 into bharat_dev
    
    Conflicts:
    	modules/gallery/controllers/albums.php

commit 529ded3388673036314eefd5bfb1cfc0b76f7f9e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 21 21:28:00 2009 -0700

    2nd attempt at gracefully dealing with sort columns that contain
    nulls.  This time around, do a query to determine whether or not the
    sort column has nulls in it.  If it doesn't, then use our comparators
    as before.
    
    There are NULLs in the sort column, so we can't use MySQL comparators.
    Fall back to iterating over every child row to get to the current one.
    This can be wildly inefficient for really large albums, but it should
    be a rare case that the user is sorting an album with null values in
    the sort column.
    
    Fixes #627

commit 123afc954281c1f924f851a33ae5016774e6d9f3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 21 21:22:07 2009 -0700

    Set children_count to 0, photos have no children.

commit 88350c5b88abb8bfc56b26177b64e049f6b7440f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 21 21:21:52 2009 -0700

    Update the next/previous item calculations to match what we do in photos.php
    Force the children_count to be zero, movies have no children.
    Rename $photo to $movie everywhere.

commit 68f3dab7f202fbd9b690f4db27cc4f4038e58d2f
Author: Chad Kieffer <ckieffer@bernie.local>
Date:   Mon Sep 21 21:56:27 2009 -0600

    Don't try to initialize contextual menu unless it has items

commit 9e6be40e31b06e5dffe7552928cb8b2d9ee7ad59
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 21 20:47:55 2009 -0700

    Add viewable() protection to children() and children_count() calls.
    This is not currently necessary (nor is it a security hole) because we
    don't constrain permissions at the child level in the core, but it
    makes our security audits easier and will enable the scenario where
    somebody writes a module to add per-photo permissions.

commit 218493c50be9362d4abed6900a816308fee5d978
Merge: d92c5a8 33690a3
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Sep 21 18:36:41 2009 -0700

    Merge commit 'upstream/master'

commit dd31b1d39f9a342afc82cc7e446e36454a882cf9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Sep 21 13:56:52 2009 -0700

    Revert "* Move the captured field into the exif module where it is created and populated."
    
    This reverts commit a00619b812393cf73d1c188af7961af820d36185.

commit ed6dfbc0e8eabf7662d128fd4241a92fa3a140b8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Sep 21 13:56:10 2009 -0700

    Revert "If captured had been used for any sort orders, reset back to weight"
    
    This reverts commit c01e467466eff51926108d030f21385179fa24d2.

commit 33690a32bcf132e5ab470ff77ba23c073ac26271
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Sep 21 13:33:45 2009 -0700

    Change the exif module to respond to the gallery_ready event and check to see if gettext is installed. The 3rd party library used in the exif module expects gettext to be available.  Rather than doing all the time use the gallery ready event to only do it when it might be needed. Fixes ticket #672

commit a6581ede0b7a50c6159eb5d36cf6be340a072609
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 21 11:35:27 2009 -0700

    Fix Item_Model::get_position() so that our sort is stable when the comparison
    row has a null value in the sort field.  Fix for #627
    
    Note: this changes get_position() to take an Item_Model instead of an id!

commit c01e467466eff51926108d030f21385179fa24d2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Sep 21 09:11:31 2009 -0700

    If captured had been used for any sort orders, reset back to weight

commit 76a9e5b40fe7c0a40032ebb22471b1c3d0586099
Merge: a00619b 62863f5
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Sep 20 21:05:51 2009 -0700

    Merge branch 'master' into talmdal_dev

commit a00619b812393cf73d1c188af7961af820d36185
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Sep 20 20:59:18 2009 -0700

    * Move the captured field into the exif module where it is created and populated.
    * Create a new API event get_sort_fields that allows modules to contribute new sort fields that they manage. the only condition is that the module needs to add it to the item table.
    * Changed g2_import to call this api to get the allowable sort fields
    * Changed album::get_edit_form to call this new api to get the available sort fields
    Partial fix for ticket #627, as the Capture date is not available until the exif module is installed.

commit 62863f5fead46480cf1a3f5a96eb52ce439d0f0e
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Sep 19 18:55:49 2009 -0600

    Address IE8 hover effect issues. Closes #666.

commit d92c5a8a845baefc31743330f0a348a6f0c0c4fd
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Sep 19 12:39:58 2009 -0700

    XSS test checkpoint

commit 09f998e7a5a58720636c7b1140279b5efbdb33c6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Sep 19 10:51:27 2009 -0700

    On the edit album form, add dirname and slug asa hidden fields, so that when the edits are being validated on input, the fields are found and can be referenced

commit cf89015a29f41321e49ea8024cc33bb0d6c68df1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Sep 19 09:34:27 2009 -0700

    Change the fix for ticket #775 to always add the Add menu, but not add any items if the album directory is not writable.

commit 4e6f2f1b4c489c21546c2ae685b814c42e689d71
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Sep 18 23:53:48 2009 -0700

    Don't display the add menu if the underlying operating system directory is not writable.  THis should fix ticket #775

commit be84c7be2557dae92426e64ab44170e8999cfc44
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Sep 18 12:17:58 2009 -0700

    * Changed the close functionality so the page is reloaded when the dialog is closed.
    * Renamed the ServerAddCloseButton.
    * Added Pause and Continue buttons. Now when add is clicked, A Pause button is shown,
      once the adding is complete, the add button is reshown andpause button is hidden.
      Clicking the pause button will hide it and show a continue button.

commit 4f4b2995ae4f33d706f11b15da76c1d25cdd1988
Merge: 33bb2d9 15c3f0b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Sep 17 22:17:24 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3 into talmdal_dev

commit 15c3f0b1aaf43a1b627266d569971b08c11d5835
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Sep 17 21:26:55 2009 -0700

    Refactor the server add javascript into a ui.gallery_server_add widget.

commit 33bb2d9177b5d00d1d124145151c082ff4edadc6
Merge: 191ce02 2e23ae9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Sep 17 16:51:48 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3 into talmdal_dev

commit 2e23ae98c43ae099a0b7b18f3c65fae21401aa43
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Sep 17 14:12:43 2009 -0700

    - Add theme->movie_menu() to whitelisted methods.
    - xss_data checkpoint

commit d050f0a2466fedfe96c3bbc072374d01b17951c5
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Sep 17 14:04:13 2009 -0700

    Minor style fix: (string) $var, not (string)$var, and move the explicit cast down where it's needed.

commit 2eeacd2656083739a588738b28d578e616d46c9c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Sep 17 13:55:11 2009 -0700

    use an implicit cast to convert the translated error message to a string as it is encoded by the json routines and will be treated as an object otherwise

commit 6458b47e3ed3ef31d08080a66781ee53bf0f25ed
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Sep 17 12:38:59 2009 -0700

    Remove the update code introduced with 9d7d79.  In addition, captialize MyISAM correctly.

commit 48326ad01708fcfa020283e2ad8b2cae4ede1600
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Sep 17 12:11:00 2009 -0700

    Cleanup issues with the original fix for #779

commit 191ce0245d9f200f7d70bffc0499a2cece10487e
Merge: 2ca2e5b 6469763
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Sep 17 11:18:31 2009 -0700

    Merge branch 'master' into talmdal_dev

commit 6469763225b1f74bc5391f09446bcf280bea389e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Sep 17 11:10:15 2009 -0700

    Reload the album when server_add dialog is closed

commit c7f8d8be6fe9e15b11ef781bdd6ed279fcb5f1a4
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Sep 17 10:57:22 2009 -0700

    Don't try to creat an album that corresponds to the staging directory.  Just add the contents of the staging directlyinto the album that server_add was invoked from. Fixes ticket #785

commit 599d6377e8d439c5cf808a14ff7240dfb42fdf61
Merge: be1d49d 7c8e904
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Sep 17 10:56:07 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit be1d49d017a71ee0967c47325986f482532a4f16
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Sep 17 10:55:50 2009 -0700

    Change the timeout on resubmitting the next task iteration to 25ms instead of.  This allows the jQuery.ajax method to complete its processing. Otherwise, the browser can spend time thrashing around trying to send the next request.

commit 7c8e904388952c9331552bec9a728d732149eabb
Merge: 88c374d 86681ee
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Sep 17 10:02:59 2009 -0700

    Merge commit 'upstream/master'

commit 88c374dee8b63957b7523850508c9bd7b8c4f100
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Sep 17 10:01:15 2009 -0700

    Arg, fixing the "Sharing your Translations" text, thanks engineer@gmc

commit 86681eebf7ee2bf28b12fd12ee6a5fe70bc36d0a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Sep 17 07:29:37 2009 -0700

    Move the check_environment into the installer helper and call it from the command line installer as well as the web installer.

commit a5af531fbee1db0c3a0ae0d23388245b2d2ec2de
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Sep 17 07:04:11 2009 -0700

    Don't show links as part of the auto complete list

commit 2ca2e5b6f42e3c201827309535a4a5f5825f212a
Merge: b6306c7 30b5c38
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Sep 17 06:07:49 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3 into talmdal_dev

commit 30b5c389e6baae397d6c5c9fe9c7ed91a5296568
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Sep 17 01:21:06 2009 -0700

    Fix: Make "Sharing your translations" a localizable string

commit 86996dcac7ca07e789df6ce1d5b13867d8aa57f6
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Sep 17 01:17:30 2009 -0700

    Mark permission's display name for translation

commit 74d9d0901ff452762d70562cb63d66563bd3860e
Merge: 9d76797 e94eaa6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 16 22:24:15 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 9d76797b17d65540a903ef37eee6edca3e83108b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 16 22:23:32 2009 -0700

    Changed the search module installer to explicitly specify MyISAM as the database type. Changed the packager to not remove the engine specification if the table is search_records. Fixes Ticket #774

commit e94eaa6b88f1311455e12df4f1e5099a4c314f94
Merge: 4e1e24b 5490057
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Sep 16 20:37:06 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 4e1e24ba1a976cd0bb7ca7dd03c6001f906a25dd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Sep 16 20:34:42 2009 -0700

    Add a movie_menu() theme callback, and have the default theme call it
    in the sidebar on movie page types.

commit b6306c7726552ab19c280057948fcecd5fc2388b
Merge: eb8e235 5490057
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 16 19:53:07 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3 into talmdal_dev

commit 5490057480f17e5810cf8b9e558769ebd74d4b27
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 16 12:27:13 2009 -0700

    When editing tags in place, and there is a validation error, highlight the tag with a red border and show a statust message. This fixes ticket: #779

commit eb8e23582f8c11062868811854417a8a8ec0122b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 16 08:46:55 2009 -0700

    Update the jquery-ui.js with the patched version from vendor

commit b8201a71127a096a51ed03e0e08a98a66f847c8f
Merge: 15515fd f188742
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 16 07:02:22 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3 into talmdal_dev

commit f1887422f8b4ba68dc273fe6f7d3f1123681e89a
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Sep 15 23:07:41 2009 -0700

    Stricter input handling (cast to int)

commit 39632c4689842b3e3bb0715c0e9be757149c257d
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Sep 15 23:01:26 2009 -0700

    Also check for rss feeds in controller auth check

commit 7608870537503ec571f45a175c8486d7945e7c63
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Sep 15 22:51:49 2009 -0700

    Controller auth / CSRF fixes

commit 7ba93e264512a8a29213f680723e34007b737935
Merge: dc3d45e ffccfb9
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Sep 15 22:05:02 2009 -0700

    Merge commit 'upstream/master'

commit dc3d45e7607acce91253e44c29998b8797131f93
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Sep 15 22:01:59 2009 -0700

    Add exception for REST controllers (no fixes necessary).

commit e168e0dfae28bb56289b4debae8825c104ee69f9
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Sep 15 21:50:48 2009 -0700

    CSRF / auth fixes, golden data file checkpoint

commit 61bbe1d78c409dbc2d4af771146878f8f720959a
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Sep 15 21:03:23 2009 -0700

    First functional version of Controller_Auth_Test

commit 17254799d1069e9f67de14460264cda76395746f
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Sep 15 20:27:04 2009 -0700

    Initial skeleton of Controller_Auth code audit test (non functional).

commit ffccfb9e634de527261dca8e46ac4053806ec87b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 15 20:23:32 2009 -0700

    Move the code that adds the .gShortForm CSS class out of
    gallery.short_forms.js and into the theme, since this is really a
    theme decision.

commit 8b7e3e6c1a6a708b7b60837c33a895682c7de32f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 15 20:21:12 2009 -0700

    Refactor all the short form code to tighten it up, and make it such
    that the form button is disabled if we're showing the placeholder
    text.

commit add3bed2750f74edb6586f5379c135245ea428bd
Merge: 548bfc9 c3f8b62
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 15 20:02:22 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 548bfc9455c859251d62ba406d1d40135b158f67
Author: Jan Koprowski <jan.koprowski@gmail.com>
Date:   Sun Sep 13 07:00:31 2009 +0200

    Autopopulation text form now clear content after getting focus every time. Problem described in #630.

commit c3f8b623766fe20768fb86c21e8455785b8e9928
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 15 19:57:12 2009 -0700

    Adjust the text of the symlink error message.

commit 7cc37451f4b7f7fe833fd5d355dab0f2a904d35e
Author: Jan Koprowski <johny@falcon.(none)>
Date:   Sat Sep 12 20:36:02 2009 +0200

    Forbid from add symbolink link in admin server add.  Read ticket #744 for more details.

commit 15515fd3c64dd626746468862d5b8777679d88f6
Merge: 4a44933 59eadac
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Sep 15 13:12:12 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3 into talmdal_dev

commit 59eadacc67acb10d803ca7ef1bdc0635041a1d41
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Sep 15 11:19:32 2009 -0700

    Improve language preference (Acccept-Language header matching): Boost same-language match over exact locale match for lower qvalue.

commit 4a44933a816fa093b843958130c719b30a383b0c
Merge: 7a379e6 5f343ab
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Sep 14 08:12:23 2009 -0700

    Merge branch 'master' into talmdal_dev

commit 5f343ab8a0538d68b905e86968cfd80902512d8a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Sep 14 08:11:12 2009 -0700

    Change the variable  to  to resolve ticket #769

commit 7a379e689a1ce99c4db7aebba39b206b0c35f242
Merge: 0b0586a 8fa370c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Sep 14 07:37:54 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3 into talmdal_dev

commit 8fa370c49fa28741d6ff1bd9ca4ccc1f70dc37af
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Sep 13 22:59:58 2009 -0700

    Set the version to "3.0 git (pre-RC1)"

commit 0b0586a224777bb12d86b5661f7826d48137873c
Merge: dbeadfc c527e70
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Sep 13 22:31:23 2009 -0700

    Merge branch 'master' into talmdal_dev

commit c527e70f26a85403633c9c8c7d32cc3b30cf625e
Merge: 71a2e36 6c0732e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Sep 13 18:55:48 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3 into beta3_staging

commit 6c0732e16fa904125d9d437f8f3e96d377c448d9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Sep 13 16:24:03 2009 -0700

    Set the AlbumTreeContainer instead of the height.  This fixes ticket #755

commit 75c68084136321b108e379643065fd21167990f8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Sep 13 14:25:56 2009 -0700

    Only show the block anchor if one exists.  Show block anchors for
    admin themes too.

commit aed7ce916138ec31798bec9cbee66a8742670633
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Sep 13 14:25:17 2009 -0700

    Specify a page anchor for the comments block.

commit 21d6e17efafbbb249f13c0344abf2dad9a812103
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Sep 13 14:19:04 2009 -0700

    Don't add another comment form every time you click the [Add a
    comment] button.

commit 827c845abbfe0767cb5063fea372477c24713b1e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Sep 13 14:14:01 2009 -0700

    Use the absolute url format for the root item.  html::anchor() will
    not prepend the base url to that.

commit 2a17de3401735d09e7c0660b7eb4dae9f50819fd
Merge: 1499778 51c995b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Sep 13 14:13:28 2009 -0700

    Merge branch 'master' of git://github.com/nivekiam/gallery3

commit 1499778b4aaf010cbb766d83770284a54044a836
Author: Kevin Nehls <kevin@kevinnehls.com>
Date:   Sun Sep 13 09:26:30 2009 -0700

    Remove raw HTML that's wrapped around the name of the file
    to create if not logged in as admin

commit 51c995b26aeeaceee7f510de5b26ee69e209e20b
Author: Kevin Nehls <kevin@kevinnehls.com>
Date:   Sun Sep 13 09:26:30 2009 -0700

    Remove raw HTML that's wrapped around the name of the file
    to create if not logged in as admin

commit 645cf6347cda049dc09664e60626c7a4f5609f89
Author: Kevin Nehls <kevin@kevinnehls.com>
Date:   Sun Sep 13 09:14:25 2009 -0700

    Fix "Back to the gallery" link in upper-right corner
    in Admin Dashboard.

commit c62d1f440f077ba806b7ff0c6b90ef89c79b2fd3
Merge: b96ac1e caa2002
Author: root <root@sleepydogs.net>
Date:   Sun Sep 13 09:01:55 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit 71a2e3624e05302725281c19b23beba252183a15
Merge: bc69dfb caa2002
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Sep 13 01:04:41 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3 into beta3_staging

commit caa2002d7777e0ceb884d4c628650804620ca2b6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Sep 13 01:04:16 2009 -0700

    If there's a show= param and we can't find the given id in the current
    album, just ignore the parameter.

commit dbeadfc2ab7e645a9e5a92e05cb5d90f4329480c
Merge: 4a9bd31 711cdde
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Sep 12 23:22:12 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3 into talmdal_dev

commit bc69dfb410ac0b35e4f2caa2230858eb15322a9a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 12 22:30:05 2009 -0700

    Updated README for beta 3

commit 2dacf6268674ba0fc76fe6bd19ae18cc47e1445e
Merge: 51f6329 711cdde
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 12 21:11:40 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3 into beta3_staging

commit 711cdde5b9755140981000adc6dd7897d836ccc5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 12 20:46:54 2009 -0700

    Only tack ?show=<current_id> on for the last parent, because that's
    the only parent for which the id is relevant.  In a perfect world each
    parent's link would have a ?show=<id> for the next child's id.  But
    that would require some confusing code and I don't want to put that
    into the default/example theme yet.

commit 51f6329a89be3382b7319b0add30283e9c9bce6a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 12 17:11:10 2009 -0700

    Update version to "3.0 beta 3"

commit 823fa2fc8339a6638ef4f0fcdae7f96e99a4f0bd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 12 10:33:46 2009 -0700

    Updated for url format changes applied in 2aad580f53dbc06bb170c710467b47a5a532c6c8.

commit 6e2597f9f9d8ddbbc9e6d37c0df52cab34b32df1
Merge: 961bc3b 1d40c77
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 12 10:12:38 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 961bc3b18571b5f3ad2a355b71d40c4830dd44ba
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 12 10:06:24 2009 -0700

    Use user::display_name() in another case where it was missing.

commit 0bb489b69438266359bfd22955f4d5c8f9d6ade3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 12 10:02:27 2009 -0700

    Properly internationalize the text for the By: line.  This gets rid of
    the escaping problem.

commit 4a9bd312c3246733fa877236c11b3d1a9ebb4633
Merge: bcf795f 1d40c77
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Sep 12 08:58:37 2009 -0700

    Merge branch 'master' into talmdal_dev

commit 1d40c77c4c05a85fbf6bbb96820fb98cbaa989eb
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Sep 12 08:53:24 2009 -0700

    Update the organize module to use the release version of jquery Selectable.  Unfortunately this does not have the functionality to select additional thumbnails using the ctrl or alt-keys, it is preferable to forking the Selectable component.  This functionality should arrive with ui.jquery 1.8.x

commit 42454cad5afc7f78b557766f4182299327dee9b1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Sep 12 08:50:19 2009 -0700

    Update the jquery-ui.js to use the release version of Selectable

commit bcf795f365a263dfbed7ae486a0f3d35ac080686
Merge: 82d61c6 e1b9565
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Sep 12 08:11:12 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3 into talmdal_dev

commit 82d61c698e47b7b838b9289a9d86bb275da30abb
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Sep 11 12:56:42 2009 -0700

    Revert "Upgraded to the latest svn version of selectable and applied local fixes to address ticket #696"
    
    This reverts commit afc1de54b1119680c144f474f1c587f3c69b6813.

commit e1b9565232fac63ce63b29c434211ad9763b13ac
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Sep 11 11:16:52 2009 -0700

    Change all booleans to use php_flag instead of php_value.  And turn off
    suhosin.session.encrypt by default.

commit 7ec490b6009965920fea35e971b29f11df6e6bff
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Sep 11 11:04:35 2009 -0700

    rawurlencode() path components in relative_path_cache and
    relative_url_cache so that they're safe for browser use.

commit afc1de54b1119680c144f474f1c587f3c69b6813
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Sep 11 09:41:01 2009 -0700

    Upgraded to the latest svn version of selectable and applied local fixes to address ticket #696

commit 3ac3d1e520f95cc859d990000561dbb727411e0c
Merge: 35f7f65 af4411a
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Sep 10 23:27:07 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 35f7f653634f295d5fe9ca1443c5e6d481f860fb
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Sep 10 23:26:37 2009 -0600

    Fix breadcrumbs in all dialogs rather than piecemeal.

commit e15426abab6017ad13d8a5f30f4b613c6ee193e8
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Sep 10 23:18:51 2009 -0600

    Clean up server add dialog a bit.

commit 935a898c02030e3371b6662749979ec7181a3bc1
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Sep 10 22:58:37 2009 -0600

    Clear the Upload queue label from the breadcrumbs in the Add Photos dialog.

commit af4411a44750b373916b841e01dac8ab434be68c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Sep 10 21:55:36 2009 -0700

    Put the buttons for album/photo dialogs in their own group in the form
    so that they appear at the end, after any other groups that other
    modules add.  Thanks Glooper!

commit 882a6d9a5dbf04ac26e046713f47068cd1361b74
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Sep 10 21:33:04 2009 -0700

    Convert a couple of instances of Item_Model::url(array(), true) to Item_Model::abs_url()

commit 7fddd2aced1821f977323fc75f2954f2b240ae37
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Sep 10 21:31:50 2009 -0700

    Use abs_url() inside url::redirect() calls so that we don't just wind
    up tacking onto the base url.

commit 3d60e39a7b46e61316780405616a47bf2000eb42
Merge: 3dd40bf fbb5867
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Sep 10 21:23:19 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit fbb58671d1a6dd1719566c7e3813a0deee6d00ca
Merge: 25ea608 190d7aa
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Sep 10 21:26:21 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 25ea6085b78423ee651dc21b639c5f10f59dcaf0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Sep 10 21:26:07 2009 -0700

    Reset the margins when the mouse is over a thumbnail when dragging. When the border is displayed then adjust the margin to account for the border. Just hidding the border causes things to move.

commit 3dd40bf97c45c4cb2cc40e9f20796a799f4e1255
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Sep 10 21:22:07 2009 -0700

    Trim the input line to get rid of carriage returns on Windows.  Fixes
    ticket #740.  Thanks to jankoprowski!

commit 190d7aaa55b4f55ea3d93fb8a3d4650d7e1fc85c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Sep 10 21:12:15 2009 -0700

    Remove debug code.

commit b8053c9ddf3e393f76594e7dccc2f81f7116fd85
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Sep 10 21:10:20 2009 -0700

    Rename "after_installer" to "welcome_message" in the code to make it
    clearer what its purpose is.  Add some spacing in the theme for it
    so that it's less cramped.

commit edb33334f13139ee9a40c2849900767585cb9097
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Sep 10 10:55:21 2009 -0700

    Revert "Update the ui.selectable.js to dev r3202"
    
    This reverts commit 3f4868aac5d5248d3cd5721601c737bf646f3fc1.

commit 0633bfb2af90e2c2c73443b7b9edc84f916990bb
Merge: 7925d5e 752c857
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Sep 10 10:53:23 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3 into talmdal_dev

commit 752c85711659eb7f83e6556665175266db8f24f5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Sep 10 10:28:43 2009 -0700

    Rename ORM_MPTT::is_descendant() to ORM_MPTT::contains() to make the
    API a little clearer.  Write a test for it, too.

commit b550a060450923b5c02d531d33785b5c9eb0d3e9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Sep 10 10:08:29 2009 -0700

    Rename $album to $target in move_to()

commit 2bbe162339075d385431029c713c48c9f6b92639
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Sep 10 10:09:09 2009 -0700

    A better fix for #741... the original problem was that the source and album variables were reversed

commit 7925d5e292c99520003a395035bfd20dc449ad6e
Merge: 90764b0 bea89be
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Sep 10 08:33:34 2009 -0700

    Merge branch 'master' into talmdal_dev

commit bea89be268f242a381e77f94f44b8bdbf3f90ff9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Sep 10 07:59:29 2009 -0700

    If the current drop target is not defined, in that we have moved out of the range of the current li elements, then assume the drop is occurring at the end of the list items. Fixes #742

commit 90764b02e4e295847a2b084d341aaa70d423c136
Merge: 3f4868a eb345cb
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Sep 10 06:21:10 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3 into talmdal_dev

commit eb345cb8702f3443087c7fab815301c0a08281a3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Sep 10 06:17:21 2009 -0700

    Changed the check in organize_Controller::move_to:
    1) check that target and source are not the same.
    2) check that the source is not already a child of the target (use to be a
       descendant) Fixes #741.

commit 3f4868aac5d5248d3cd5721601c737bf646f3fc1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 9 22:34:08 2009 -0700

    Update the ui.selectable.js to dev r3202

commit 76df072e8e27239ab4c8f2abe07f664b4b1a1cbf
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Sep 9 16:18:00 2009 -0700

    Reformat error messages in dialogs so that they don't overflow in weird ways.

commit 6e65a8208ff374e46cdc2b212ba116a9146b803c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 8 21:52:15 2009 -0700

    Fix a thinko-- of course we want urls to be the path to the file itself.

commit 0df4b7d7058a9b02faa8ff11993873f7e31a979d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 8 21:49:28 2009 -0700

    Fix line > 100 chars.

commit 77bd3d3d40e3a51bce9f41f996222107fc8a7427
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 8 21:49:09 2009 -0700

    Replace two preg_replace() calls with a single trim() call.

commit 0709f7526d58ea239a55cbe3edd82a56ba9b5eb9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 8 21:33:45 2009 -0700

    Change $this->_photo to just $photo

commit 5d76a73596eedd8e473c58dc69b1959e8736377f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 8 21:32:21 2009 -0700

    Fix test to support new slug code.

commit 2ca20e8ab17de6d53200c8ace0595f7a6e27bd27
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 8 21:19:00 2009 -0700

    Check for subscribers *before* going through the process of creating
    and rendering the email message.  Fixes ticket #724.

commit 3bd8be2651d22f9dbe3d0302df15a3cb2ef1d729
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 8 21:02:45 2009 -0700

    Change the relative_path_cache and relative_url_cache columns to store
    urlencoded data for ease of use when we're dealing with the data.
    This fixes ticket #569 by not allowing the urls that we put into our
    RSS feeds to have bad characters in them.
    
    We have to convert a path like var/albums/foo/"quotes"/bar.jpg into
    something like var/albums/foo/%22quotes%22/bar.jpg.  If we take the
    approach of storing native data in the cache, then we have to explode
    the path, urlencode the bits, and implode it again to avoid escaping
    the / char.  By storing it escaped, we avoid this problem. I believe
    (but have not tested) that this is more efficient.

commit 6cfcab2a5ee054e6e04857c86fbd363895e5ea83
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 8 20:59:39 2009 -0700

    Amend the v12 installer to empty out the relative_url_cache and
    relative_path_cache columns.

commit 48becbe017758fb6fb95f0806ece879764249f37
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 8 20:03:55 2009 -0700

    Update item::convert_filename_to_slug() to eliminate leading and
    trailing hyphens.

commit 453fb76443898746b72a0a2ddd419cf8e54f4207
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 8 20:00:04 2009 -0700

    Actually use the slug when creating new albums (instead of just converting the
    filename over).

commit f69dee8841d2285a7068d349053bd429f4bb9b40
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 8 19:58:27 2009 -0700

    Trim leading and trailing hyphens from the slug.

commit df85f43aa1199bcbd7f87e6ecb1843d0b942a543
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 8 17:05:38 2009 -0700

    Remove unused $feed->link.

commit cf0c8b63196cb856dd8de0759f6cbb74243d41f1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 8 17:01:59 2009 -0700

    Minor tweaks to the url refactor.

commit 2aad580f53dbc06bb170c710467b47a5a532c6c8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 8 13:44:52 2009 -0700

    Move specialized (pretty) url generation back into Item_Model so that
    we're not relying on overriding url::site() to do tricks around item
    urls.  This means that you won't get item urls by doing
    url::site("albums/37"), for example, but it also means that we won't
    get pretty urls where we don't expect them (like in the action of a
    <form> element).
    
    Incidentally, this will help us move over to using the slug format
    because if you've got a bad character in a url, the edit forms will
    now work on it since they'll be id based.

commit 60848480887594e61339000259e5322340518071
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 8 10:20:06 2009 -0700

    Improve comment.

commit 2c9447bc1ae01abc549ed7f4f25330cefedf7dc7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 8 09:59:27 2009 -0700

    Update to gallery module v12.

commit 714a82d1e01996df451ebffb321181441ed065df
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 7 21:49:19 2009 -0700

    Automagically generate pretty urls for movies, too.

commit 7889ae1085963eaf40afbb72c044da7630a5af63
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 7 21:33:00 2009 -0700

    Fix a bug where we were not properly decoding the path in the fallback
    code in get_item_from_uri() by using relative_url() instead of
    relative_path().

commit 86f88769f9f636d5fbc75cc39b6f3b78b6ed5893
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 7 21:30:48 2009 -0700

    Update Item_Model::save() to consider the relative_xxx_cache fields as
    insignificant, in addition to the view_count field.  This means that
    we won't trigger an event, nor will we adjust the updated field if
    *only* those fields are changed.

commit 78a42d9b8397e36bdd2a84e1fd6b4f49f0873b78
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 7 21:09:52 2009 -0700

    1. Actually set the slug to the new value in the controllers.
    2. Fix up an issue where we were crashing if there were no conflicting rows
    3. Amend Item_Model so that if you change the slug, it flushes the cache
       for all children

commit f28353f4e1c573a33dc1c3375585ab040f8be2fc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 7 21:01:51 2009 -0700

    Add the 'Internet Address' field to all items, along with proper
    validation for the fields.

commit dccfce4c00024fa170a060b1c4b1d2bb227964ae
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 7 21:00:52 2009 -0700

    Correct a mental mistake in the prior change.  All the xxx_url()
    methods actually refer to the url to the file on disk, not the logical
    item.  That's relative_url().  Perhaps some API renaming is in order?

commit a73b5e822684ae0138f3baa733b0013122b0368c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 7 20:59:42 2009 -0700

    Switch to using Item_Model::relative_url() for the url path.

commit 83ebc2e2b053a0d9fb100b1663471127ca281bda
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 7 20:59:11 2009 -0700

    Remove unused item::validate_no_name_conflict() and a debug line.

commit 2f666f4c527a89df235c7fdaab4b5483c5dd2595
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 7 19:52:47 2009 -0700

    Add item::validate_url_safe() with a test.

commit d6ca88166291a5084a5e22f8b305dd497c3cc799
Merge: 6bc2235 8e223ec
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 7 16:30:43 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3 into bharat_dev

commit 6bc2235b277c23c7c56ec5244406e283ca641d60
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 7 16:29:51 2009 -0700

    Populate the slug field from the title as well.

commit 795675e2b5eeee30d90e2efdda28c3df10677af3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 7 16:19:41 2009 -0700

    Add the slug to album, photo, and movie forms.

commit 991bb0c06319a4d1d0ed1194826f5438a97964b6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 7 15:45:18 2009 -0700

    Update golden file.

commit 8e223ec4c19b6ccaf87672d5b6b68a58bf5b3465
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 7 15:45:18 2009 -0700

    Update golden file.

commit 3f997562dee7fa45fec58604dd894d9c523a1113
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 7 15:41:03 2009 -0700

    Add support for a per-item "slug" which will be the user-visible url
    component for that given item.  Album hierarchies are represented by
    nested slugs.  By default, we convert the filename to a slug when you
    create an album, photo or movie.

commit 68a78f7cced4f26436d7bdbc6acdd9e0a9ada4df
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Sep 7 15:34:01 2009 -0700

    Quiet down ffmpeg in movie::extract_frame()

commit 14ba8505cccd361a4618c4b26868240a0b2fb226
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Sep 6 11:45:41 2009 -0700

    Don't allow users to take away their own edit permissions.  If we
    detect that they did, just give it back.  There's no visible message
    in that case.

commit 6c6031052257bdccf82ce2b598b42d743f455728
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Sep 6 11:34:51 2009 -0700

    Don't show clickable link for breadcrumb items where the user doesn't
    have edit permissions.

commit 610c99cd04343233af63f3ad841e7de2bad91520
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Sep 6 11:26:33 2009 -0700

    Restore button text for any open panels when we open a new panel.
    Fixes ticket #723.

commit ac8c9d6670b5dc0b56e1acf7cb468d5fa846fc28
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Sep 6 11:26:20 2009 -0700

    Fix indentation.

commit d8f5b0f5a30adb97d48fa49999c6ec7407666c44
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 5 21:14:25 2009 -0700

    Change click() to change() so that we immediately update the UI when
    the user picks a new option.

commit b3d0cb5a4c88c42e29e67f3b3eb4e91151802164
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Sep 5 18:55:44 2009 -0700

    Bugfixes for locales::locale_from_http_request(), and adding tests.
    (And the tests should illustrate that kohana 2.4's API doesn't quite fit our purpose of simply getting the best match between the accepted (client) and the installed (g3) locales.)

commit b01596c0f08f00e5fc2d1019b3905fe5fd76a223
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Sep 5 18:19:13 2009 -0700

    Update XSS test golden data file.

commit beb232a1cc6f081b432f32a72bddadcaf3f90df4
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Sep 5 17:43:47 2009 -0700

    Revert previous edit. Prefer « none » (sweet, nice Unicode characters) instead of HTML entities.

commit 047196b23c5fb12b3c517892d8016679a0ea8799
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Sep 5 17:39:49 2009 -0700

    Add missing view for language selection

commit 9fbdcf3efd37e2c6bf67b197b8c93f8790a79cbe
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Sep 5 13:39:30 2009 -0700

    Change the module installer so that you don't need to provide your own
    install() function if all you're going to do is to set the version of
    the module from module.info into the database.  This means that for some
    simple modules, you don't need an install.php file at all.

commit ab7323d17b3c3e445fb51d7b4330e89b4e16aaa9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Sep 4 21:27:23 2009 -0700

    Fix the url in the call to get subsequent entries to have the right
    url, and to be json.  Fixes #719, which I introduced in my refactor.

commit add134cc75214c3852566ae27e5eb7b35c59c53e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Sep 4 20:29:12 2009 -0700

    placeholder for a missing view

commit a25640f9b26c75e14109f07fcc4863adc300f062
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Sep 4 20:28:46 2009 -0700

    Shorten the name in the block so that it doesn't wrap.
    Use &laquo; and &raquo; in the << none >> text.

commit bca7080debcdf67bc0b35e67f2697e56414b5159
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Sep 4 20:23:00 2009 -0700

    Fix typo: loading-arge.gif -> loading-large.gif

commit 49de9bba68dd466dadd3c4df3d5024b3820568ff
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Sep 4 20:19:15 2009 -0700

    Add @todo to replace locales::locale_from_http_request()
    request::accepts_language() when we upgrade to Kohana 2.4

commit ca1947a1ce9d3f70df88c6a5f6260923c5f035c1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Sep 4 20:15:21 2009 -0700

    Updated upstream to r4554

commit f63766556a701c173f578caea58597ea7febb865
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Fri Sep 4 11:20:02 2009 -0700

    XSS test golden data file update

commit 75e99c9ea33fa5723dec9a2f5250e8bb38755718
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Fri Sep 4 11:17:11 2009 -0700

    When changing user preferences, reset the session based locale preferences.

commit 001623c755777846a468255d4396d30b253dcdfb
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Fri Sep 4 11:06:20 2009 -0700

    Add new locale preferences: Adding per session (cookie) locale preferences and check the browser's / OS' locale preferences.
    Ticket 582.

commit c453c0ef8239bc79e484dd3feb9e275e942e9d48
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Fri Sep 4 10:11:42 2009 -0700

    Simplifying SafeString a bit: From a XSS HTML security point of view, treat clean() and purify() the same.
    No longer run a safe HTML string through the HTML purifier (since it's already marked as safe).
    
    This also addresses the issue of calling purify() when no purifier is installed. In that case, we'd run clean() on a clean string (double HTML encoding).
    
    If this approach doesn't work out, we can still modify the fallback code of purify() to check if the string is already clean before calling clean() instead of purify().

commit 1ffb5b24dff439b4a3e9e7f2df3af1a0f8e9e5a0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Sep 3 11:34:02 2009 -0700

    Checkpoint.

commit 1405e8ed9e2003d1b06853bae4ce3413de1910ce
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Sep 3 11:29:57 2009 -0700

    Fix tests for new purifier API.

commit 1dca0b9d6be5a96e79e3de776e231e21ed824589
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Sep 3 11:28:42 2009 -0700

    Fix test for new purifier API.

commit 82dd468002d5d21a5c8c391d6fce543b3df43de1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Sep 3 11:25:02 2009 -0700

    Refactor interaction with the purifier module so that the API is
    cleaner and we don't need to know about the module innards.  Move the
    config file over there too.

commit 53e2df01ebc26337fab13da2c38e6f2555a673d0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Sep 3 11:21:45 2009 -0700

    html::purify an item title.

commit 46f1276886e845a522392cbf8c1dddf43ee1d111
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Sep 3 10:39:38 2009 -0700

    Remove extraneous changes to the CSS so that it's just the ones that
    we need.  They'll be documented in our vendor repo.

commit 8972d5f05ce4f37061bdd4dd2c8a1a19c1235611
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Sep 3 10:20:54 2009 -0700

    Move the loading images into lib/images and adjust everything to point
    at them, including jquery.autocomplete.css so that we don't have stuff
    from lib that points into a theme directory.  They were common images
    anyway.  Incidentally, rename sm/lg to small/large.

commit e2d5944e56f7e7433e7f1bda290ba779df447c3c
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Sep 3 08:49:14 2009 -0700

    Minor performance improvement: Reduce module var cache lookups in SafeString.

commit 8f6a120b52360475859c361514500e46698f0e74
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Sep 3 08:39:44 2009 -0700

    Ensure that purify isn't applied twice for an already purified SafeString

commit c4b449add1a64bc464f695248a2435afa81a437d
Merge: 33bcf11 dcdd441
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Sep 3 01:11:52 2009 -0700

    Merge branch 'master' into talmdal

commit dcdd44109b13a2cd2b29884edb6090e970178f32
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Sep 3 01:11:28 2009 -0700

    fix the expected return value of photos controller

commit 41e3773417a78949f44f463b28c41d55413c850b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Sep 3 01:07:02 2009 -0700

    fix the expected return value of album controller

commit 33bcf11e2714f727f16136a1c09926cd5b6c8212
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Sep 3 01:05:03 2009 -0700

    Change the Html_Helper and SafeString tests to change the expeced results based on whether HtmlPurifier module is installed or not

commit 3dc7e2e78cab117726385e29d47bb1487b5d755d
Merge: de61da5 640d84a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 2 23:53:35 2009 -0700

    Merge branch 'master' into talmdal

commit 640d84aba46f4dcd813d7c9ade320f665c1958c0
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Sep 2 23:20:45 2009 -0600

    Noticed that loading.gif kept showing up in my logs. Probably not maintainable, but updated jquery.autocomplete css to use the default theme's equivalent.

commit 6feab02c864755c8e0bb2a8439fcd7161a1e5f68
Merge: 02409d3 d007f31
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Sep 2 22:36:19 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 02409d3b99fe7601cf5ed03d07b03112f2fe0c38
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Sep 2 22:35:54 2009 -0600

    Fix bg images in tables bug in webkit and ie. #718

commit d007f31686e182e65cd18806ad3e4e29614fec81
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Sep 2 21:29:22 2009 -0700

    Undo rest of the indentation issue accidentally created in 8312eb and
    partially fixed in 2c30dc

commit 9237ab9bc1e7b3286ceecd5bf6b03cdbfcfa98a5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Sep 2 15:29:00 2009 -0700

    Change graphics::generate() API so that it doesn't return a boolean,
    instead it throws an exception if there's a problem.  The normal case
    for graphics::generate is that it's going to succeed.  It'll only fail
    if something un-handleable went wrong, so just use the resulting
    exception.

commit de61da5bfc9dac7d778f5ca3ff763125a212ec3f
Merge: aea3488 2c30dc2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 2 14:29:00 2009 -0700

    Merge branch 'master' into talmdal

commit 2c30dc2d5b451ebd5623becd71c42b43be91d0b9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 2 14:28:00 2009 -0700

    fix a leading space that was causing the file_structure_test to fail

commit 417c983491a7708a1d60e909caead239ef02eadd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Sep 2 20:04:11 2009 -0700

    Tighten up the mod_rewrite text a bit.

commit aea34882b4121176a04d2eadba54aedccda5c08a
Merge: f2bbb29 417c983
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 2 13:44:37 2009 -0700

    Merge branch 'master' into talmdal

commit b842a9d9ca21d07241b5fa11c5263e18f830c88b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Sep 2 11:58:04 2009 -0700

    Fix formatting, and use a properly named file in
    change_photo_no_csrf_fails_test() so that GD doesn't bomb.

commit b9293755c03a6bf55a33732968481aa7a73fcce0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Sep 2 11:57:20 2009 -0700

    Deal with the aftermath of adding sharpen() calls.  Since GD does not
    support it, this causes crashes as soon as you try to use it, which
    breaks a bunch of our tests.  Also, give the user some idea that
    sharpen() is missing in the UI.  Fixes #689.

commit 79754c2ef477c98740166a2a86fb491e0b07944e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Sep 2 11:53:10 2009 -0700

    Run 'graphics::choose_default_toolkit();' to pick a toolkit, which we
    normally do as part of a regular install.

commit a09a6a06bef1ff08e09a2855b308e20ea739ca1e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Sep 2 11:28:41 2009 -0700

    Refactor how we use $this->relative_path() so that we're not calling
    it twice on both sides of a ternary operator.

commit f2bbb2963a03c7f838772fa89facc0e38c3e4f4e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 2 07:07:47 2009 -0700

    Remove debugging statementes

commit 7fbd012d71a21ac7a30e6b1bb045208dff225903
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Sep 2 07:06:28 2009 -0700

    Move HTMLPurifier from core to contrib and make it optional. Delete the modules/gallery/lib and HTMLPurifier.php

commit dc6167bffaf291c4d207e5d6cb842f8033dca4a9
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Sep 1 23:35:17 2009 -0600

    Missed this in recent commit.

commit c4a53a017697d3da330393a3190a05268ecb93f1
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Sep 1 23:25:08 2009 -0600

    Forgot to delete admin_screen in prior commit. Done.

commit adc7f39f7d1b3cedb0a353b3048e95479df553b0
Merge: bc147d1 d26f914
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Sep 1 23:22:44 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit bc147d1c6c95c1ba1394f0198d9e5b810071a4ac
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Sep 1 23:22:06 2009 -0600

    Merged admin_screen and screen style sheets in the admin theme. Removed some unsused admin styles in the process. Fixed problem in admin header that broke the theme's layout in IE7. Moved the Gallery logo and shortcut icon to lib/images for easier reuse.

commit d26f9147a000ed907695b5fa593ee9c1d9b3354d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 1 21:15:50 2009 -0700

    Updated for modules/gallery version 11.

commit 064038a24fe10c63328a3b9f679a8a7fd80f6b0e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 1 21:12:42 2009 -0700

    Escape backslashes (\) in the $salt in create_admin() as they will
    interfere with our hand rolled UPDATE statement.  Big thanks to
    paulepanter.

commit d5cd6a92e7f9b88b76cfa5e4b8104a701e58c9f0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 1 20:40:18 2009 -0700

    Rename $comment_model to $comments, this time without stomping on the
    pre-existing variable.

commit eab5d71d06a5b34b34efbbc53a23e3026fcae47d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 1 20:39:08 2009 -0700

    Revert "Rename $comment_model to $comments."
    
    This reverts commit d85a8b20bbe0a5be0a03da70354169d41f418d41.

commit ecc0d89cd4c7e8f0b0ba42588d3ee24062fdb1d2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 1 20:34:19 2009 -0700

    Fix up incorrectly applied html::mark_clean().  Resolves #698, thanks fperwth!

commit b14b9e0d7b22945f4934ff6fac8f89dae119cb8f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 1 20:23:44 2009 -0700

    Allow anything to be made an album cover, except for direct children
    of the root album (which has no visible album cover, so no point in
    offering that option).  This fully resolves #705.

commit 2ec11c5c4da1eb1d45b192d2df9c1a08c71d7362
Merge: 03c5c11 95ea310
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 1 20:17:57 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 03c5c117759aca8a3d898c6c4f03da6ddf67e81d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Sep 1 20:13:23 2009 -0700

    Allow the RSS feed page size to be customizeable, up to 100 items (to
    mitigate DoS attacks).
    
    Have PicLens request a 100-item page to mitigate the bug where it
    refuses to load the 2nd page.
    
    Mitigates #23.

commit 95ea310aff41f7c16b0a48ec35a5f47c32a4d801
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Sep 1 14:39:08 2009 -0700

    Remove unused l10n message

commit 1d3069145273bcb3514f08fa9eee2dbf55a07b01
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Sep 1 12:14:23 2009 -0700

    Add missing mark_clean() for t() calls with %attr parameter.

commit b50d7f0d69122e15a91b9838eedeeb5c922040bb
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Sep 1 11:11:22 2009 -0700

    Fix bug #522 - Handle "save settings" correctly in the "share translations" form.

commit 295fc0c14ce938e02bf17c350a50d36b73802ad0
Merge: fe37483 dfb2e3d
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Sep 1 01:30:45 2009 -0700

    Merge commit 'upstream/master'

commit fe37483aca648b6f7de65f1eb53b8cfd49401f71
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Sep 1 01:29:42 2009 -0700

    Update XSS scanner golden file

commit 53711225ac9d116e72c159de943284fd55fe26e4
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Sep 1 01:28:52 2009 -0700

    XSS / style fixes for newly detected issues (after fixing XSS scanner)

commit 94c201f265c758fad38eb69c0a5878970119197a
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Sep 1 01:17:39 2009 -0700

    XSS escape in form helper and forge where missing.

commit ff1979e12e0b012374e2ab3712b19f87e1a92e64
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Sep 1 01:12:02 2009 -0700

    Fix XSS in tags JS

commit d2cea7905e342c2a9a7cec03058ab762d0d1ba7f
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Sep 1 00:53:17 2009 -0700

    Remove debugging code

commit c0d4937e433b66b0ac4042f7b38c1af6c94f80bf
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Sep 1 00:52:21 2009 -0700

    Fix bug in XSS scanner for <script> block @ position 0 of inline_html

commit dfb2e3dd0260a2cb073c5e0e808b47f1a5ca6c42
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Aug 31 23:27:46 2009 -0700

    Add an icon to the context menu option.

commit 39ca803af7a4439fdda3164d79d9435bdaa2b948
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Mon Aug 31 23:51:27 2009 -0600

    Set CSS cursor to hand for jQuery UI ui-state-hover elements. Fixes all but progress bar cursor. #669

commit 9cb8c10bb5d0e7ae80045a121e03d07757cb8d1c
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Mon Aug 31 23:25:42 2009 -0600

    Use min-height to hold the banner's height. #706.

commit ee2070abe8681caeacc0dea4452a0dd00035e5e9
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Mon Aug 31 23:20:52 2009 -0600

    Revert 12903f59965b6c95e91ffa8210adc7f18e0b4c03 overflow: auto hides the site menu drop downs.

commit 7331e2e77c0249b7e9ab03eaefd1ae03a8160b58
Merge: 12903f5 285e2b9
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Mon Aug 31 23:16:35 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 12903f59965b6c95e91ffa8210adc7f18e0b4c03
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Mon Aug 31 23:13:39 2009 -0600

    Hold the banner's height when header text is set or the logo's yanked.

commit 19e49bea0646902dd85aebf0b7fe4c7f213a2ecf
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Mon Aug 31 23:07:17 2009 -0600

    Don't include Make this the album's cover in context menu's for albums. #705

commit 285e2b9cbeddb241655e42f824b5dadec94445c4
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Aug 31 21:57:15 2009 -0700

    Update XSS test golden file

commit 7b2c03c2b9d61ce945199505d8c2f273a84725b9
Merge: 559f9a4 5ca13fe
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Mon Aug 31 22:56:11 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 5ca13fe5e83ec7d6dcc1f5d2ac19a3f4ebfc782c
Merge: 2bc73e2 e648ea4
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Aug 31 21:53:17 2009 -0700

    Merge commit 'upstream/master'

commit 2bc73e2e36fefc3c1ee1b8e97e686c6729e58dcb
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Aug 31 21:51:57 2009 -0700

    Fix XSS vectors in HTML attributes (mostly t() calls)

commit 559f9a4b9d770a37048db73e82f84bc1f0ec09f1
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Mon Aug 31 22:51:36 2009 -0600

    Add icons to context menu for albums. I'm open to other options, if folks think there's something better in the jQuery UI themeroller set.

commit e648ea4dbdb423e80d79ba9e4c9f3ebde6ed22a0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Aug 31 21:45:34 2009 -0700

    Escape single quotes in the password so that we don't break our config
    syntax.  Related to (but unclear that it fixes) ticket #650.

commit 8c3a2db3803ccaa3572f0bf061ca7faf62f13fca
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Aug 31 21:28:37 2009 -0700

    Fix typo in description

commit b3cac5c17320af380b18552a40ff809e598668cd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Aug 31 21:26:14 2009 -0700

    Suppress errors to mysql_connect().  We had this before, but it
    appears to have been accidentally removed in 177a854d

commit 50c8b964053d0b16fe842ff70f5b6c8e27c1a757
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Aug 31 21:17:35 2009 -0700

    Add XSS check for HTML attributes

commit 81073aeb5bd86de18832d8960cb2ecbd18aa4c1e
Merge: c887170 48050ac
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Aug 31 21:11:57 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit c8871705550914f295f887d4a05bdec6a42a8d9e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Aug 31 21:10:22 2009 -0700

    Stay on the same page when editing albums/movies/photos.  Fixes ticket

commit 0513713fde119bd50978237506cd6e21df001e61
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Aug 31 21:05:21 2009 -0700

    Add 'organize album' to the context menu.

commit 48050aca410a845087b7d43589180aa7a7130944
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Aug 31 19:53:53 2009 -0700

    Add XSS check to ensure that html::js_string() is not preceded by a quote.

commit 8312eb116e65195e3fc70d59b3b0817b9c807287
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Aug 31 02:12:01 2009 -0700

    XSS review fixes (mostly adding missing html::mark_clean()) calls.

commit 26f6d8192ffdfd0280987ec2b9df0305e983746d
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Aug 31 01:11:50 2009 -0700

    Adding XSS test for href="javascript: and onclick="..."

commit ddb84c84e16766c6b79bd7fea61532257e83ef8b
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Aug 31 00:42:18 2009 -0700

    Rename mark_safe() to mark_clean()

commit 6d26b0dd6e900250072ca723c388cf3c5d987aeb
Merge: 2bf9b8e 12e0030
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Aug 31 00:32:41 2009 -0700

    Merge commit 'upstream/master'

commit 2bf9b8ee550a805605f862c392839e49ae42f89d
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Aug 30 23:11:13 2009 -0700

    Fix double -> single quotes (::js_string returns a double-quotes delimited string)

commit afb0111fe60620195a11764e6809140ff5cb5d0c
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Aug 30 21:36:14 2009 -0700

    Updating golden XSS-test data file

commit bd52a85f98c321543fc1ad0bd06863efd19c7e89
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Aug 30 21:34:55 2009 -0700

    (mostly harmless) XSS fix in server add

commit fc294c2777e74ab171709c08eeae1675711add5a
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Aug 30 21:26:23 2009 -0700

    XSS fixes in admin_comments.html.php

commit 0a0c7a78e6333728bad19611cccb095241545cc6
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Aug 30 21:25:21 2009 -0700

    Check for href="<?= $foo ?>" (malicious "javascript:..." string)

commit 3aef420d485871ed95be742bae0d971e637e4a75
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Aug 30 18:37:01 2009 -0700

    Updating XSS golden file

commit e7f5e0a9a3a19d535a69e19c4527800096ae1aaa
Merge: df38a89 31dcdcc
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Aug 30 18:27:40 2009 -0700

    Merge commit 'upstream/master'
    
    Conflicts:
    
    	modules/gallery/views/l10n_client.html.php
    	modules/organize/views/organize_tree.html.php
    	modules/server_add/helpers/server_add_event.php

commit df38a890a64dd33eafe3aed51ce8fde732cf8b8b
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Aug 30 18:07:13 2009 -0700

    Tabs to spaces cleanup

commit 12e00309cedb3ed4349ab70a38d64e2b439c5f20
Merge: 74a124b 80ae2fe
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 30 17:41:52 2009 -0700

    Merge branch 'master' of git@github.com:/gallery/gallery3

commit 80ae2fe4bf8d5872d0aeb18559fa8b099d07282f
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Aug 30 23:51:31 2009 -0600

    Finish this pass at the Admin Maintenance view. Re-introduce status icons, put Cancel All, Delete All buttons in the action heading cell.

commit 74a124b261dabfae2613449addbcabc4310994ac
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 30 17:41:34 2009 -0700

    Oops, fix up the show argument that I "fixed" in the last change.

commit e6c2fe60c42efee8ce898e208befe63565d98ffc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 30 17:17:14 2009 -0700

    Use $theme->item() instead of $item.

commit 1747335bde4b0bff81a8ee6569b1c76f01a7e638
Merge: c10b5cc 1e79ca2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 30 17:13:59 2009 -0700

    Merge branch 'master' of git@github.com:/gallery/gallery3

commit 1e79ca2dcbad102aab876169f706e7c5eef587f3
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Aug 30 23:22:54 2009 -0600

    Move header and footer into page.html.php since they're not included in any other view template.

commit 9d4876b6aab5780e354f6e9d1844059ed1413930
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Aug 30 23:20:49 2009 -0600

    Added comments, formatted CSS, added status message styles.

commit ce733e0f481e34f213d159cbb05dd6377cec4f54
Merge: 93b542c 7015948
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Aug 30 22:33:12 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 93b542ccd8a64bdd037d0e4824be06cb9fe6ad49
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Aug 30 22:32:23 2009 -0600

    Apply hover effect to buttons in progress indicator dialog.

commit 138ef5d65c31966dec9cfb72ea60cb80cd27991c
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Aug 30 21:57:04 2009 -0600

    Remove jquery.dropshadow. It's only used in one place, not worth keeping.

commit c10b5cc69cc0e9a38fc3968abf293089add26599
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 30 17:00:33 2009 -0700

    Minor refactoring.

commit 7015948357f91e79bb10595cd7c6bc2513d0863e
Merge: 74e204b e4eedad
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 30 16:20:52 2009 -0700

    Merge branch 'master' of git@github.com:/gallery/gallery3

commit e4eedadcbb42e831f9649e6b52bd1ee9bf86f544
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 30 21:12:35 2009 -0700

    Add back mysql_fetch_object() call that I accidentally removed in my
    rush to catch a plane.

commit 74e204b557618520d7bc56266a25d230946f02e7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 30 16:17:53 2009 -0700

    Don't mark colors !important.

commit 0dba5857fa63b6e8f0c201cd480aad7416b9a631
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 30 16:16:39 2009 -0700

    Make comments consistent.

commit 459329753333c7de2d5bcfc4337fcedf661ff16e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 30 16:15:54 2009 -0700

    Remove extra padding line

commit d47a4de029d01d1f14a1f348873c9f5614837464
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 30 16:11:28 2009 -0700

    Get rid of as much jitter as possible in the organize tree.

commit 2cf52a4718299cb038912a97c81e13e9e614a7fb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 30 15:54:56 2009 -0700

    Tighten up a class attr.

commit 6fdb5cddf89d9c4f10bd112111649abac6eae837
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 30 15:45:35 2009 -0700

    Make the lasso more prominent and the colors consistent.

commit a015078ccad388e9be05cd45207ebd12bfdd015c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 30 15:42:43 2009 -0700

    Change the higlight/selection behavior so that we don't use opacity to
    indicate selection state.  It's too difficult to tell opacity
    differences on light colored photos.  This approach models what
    WinXP does.

commit 64d40397fe0738e961b9102652bd36cfe051fc9a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 30 15:34:47 2009 -0700

    Simplify over-targetted CSS.

commit 00c73ec852c29c214d72193ce368bc12a7305794
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Aug 30 15:34:46 2009 -0700

    Updating uses of html::js_string and SafeString::for_js (value now contains string delimiters)

commit beb711d6a0fedac0d4ca3b9bae162a6ce9d6cdeb
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Aug 30 15:21:02 2009 -0700

    Rename clean_js to js_string and have it return a complete JS string (with delimiters) instead of just the string contents.
    
    Benefits: Using json_encode(), which is very robust. And as a user, it's clearer how to use this API compared to what it was before.

commit 31dcdcc6ad6ce47c03265f3d6e499774a17ff727
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 30 15:18:20 2009 -0700

    Remove unnecessary cleverness in stripping off the hyphen for mysql
    version checks that was causing problems in the case where there's no
    hyphen.  version_compare handles hypens fine.

commit db03c5d799dbe34301b7034018a254ab0f0f32f3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 30 15:09:13 2009 -0700

    Don't try to move an item into its own descendant hierarchy.  Just leave it out of the move for now.

commit dee0abfab9c613855c9145bd189776cc23d92973
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 30 15:04:39 2009 -0700

    Use is_descendant() API inside move_to() for clarity.

commit 53390ba79a78eab54d2c4fe8f00b79f3b3fc5648
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 30 14:58:26 2009 -0700

    CSS rename: gMicroThumbXxx -> gOrganizeMicroThumbXxx to make it clear
    that this is organize only.

commit 5cce88cd040fe33ee0f7037e0b045792d60ed9d8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 30 14:50:53 2009 -0700

    Rename gAlbumText to gOrganizeAlbumText for consistency since this is
    an organize-only construct.

commit a498d3776365b6d0d14ce07a4ccd564f41b7f7be
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 30 14:49:51 2009 -0700

    remove unused #gOrganizeDialog

commit c615918829fae1496a09886ef929869fce9b9f6a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 30 14:40:55 2009 -0700

    Manage the selection so we don't automatically select an album
    whenever we expand a tree.

commit d1ade6620e814ecf536dfde17c95593a311d1c2c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 30 14:35:27 2009 -0700

    Precalculate the organize tree based on the selected album and render
    it right away while still allowing incremental tree loading.

commit fd954fe86e2852c245dd599f9476fdf8ea3642e4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 30 13:43:29 2009 -0700

    Print out the version of MySQL that we found along with our error
    message, which should resolve http://gallery.menalto.com/node/90646

commit af6bfa3c71ccc2d45d3029c96f934a7ecd2c2143
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 30 13:29:05 2009 -0700

    Change the processing time for search_task and exif_task to start the
    1.5 second counter only after we've done any expensive queries.  This
    guarantees at least some time to do work.
    
    Fixes ticket #693.

commit eca8a366e0623bbfc6aa07e6347a9b0cc768f6d9
Merge: 4bc7165 c9d2e22
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 30 12:31:02 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit b5813f92c7a73e11d47d1943c217fdf6b7e41de9
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Aug 30 07:42:37 2009 -0700

    Improve no_tabs test to print out a complete list of files + line numbers + line snippet.

commit 22aa0b3092458d6de77837be45721f2722b8d5e0
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Aug 30 07:25:49 2009 -0700

    Add $theme-> methods to Xss whitelist for HTML safety.
    Updating XSS golden file.

commit effccfd41d2618cfd41ce6db0834c2298fdb42d8
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Aug 30 07:00:56 2009 -0700

    Change all instances of SafeString::of_safe_html() to html::mark_safe() in views.

commit 52b542b25353419d2895ecd6dd23cddf3b5dfe3d
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Aug 30 06:55:24 2009 -0700

    Fixing typo

commit d3b03026907b63e90d90cda1b9f777e0fbfe29b7
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Aug 29 23:15:28 2009 -0700

    Minor cleanup

commit b9bd1681a3b1496c0f1bbe5e6254ab4fd0c9fe30
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Aug 29 22:54:20 2009 -0700

    Update all code to use helper method html::clean(), html::purify(), ... instead of SafeString directly.

commit 952c8856098dcfd9673d344fc71be85b303c8fb1
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Aug 29 22:31:23 2009 -0700

    Adding html::clean(), ::purify(), etc.

commit 4bc7165dab267311407294b11a77e6c2689ad4a1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 29 16:42:33 2009 -0700

    Delete obsolete comment and tighten the code in site_menu().

commit 878b9c91b234f464eb9e1a3bdfbd0e6285a1a0e7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 29 16:38:53 2009 -0700

    Remove try/catch in resize() since that will swallow any exceptions
    that we generate when resizing.

commit a2258b2232760032f4920fce6eccd40414aff8cc
Merge: 483d8df a1ce2d3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 29 16:34:41 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit c9d2e222662746c1a8d1866dcd480f1440898735
Merge: 75ee962 a1ce2d3
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Aug 29 17:34:39 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 483d8df91b443a20a614eb5864cabb2a66ac72d2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 29 16:33:22 2009 -0700

    Change the organize tree to expand/collapse.  It doesn't properly open
    up to the album that you're viewing, and if you move a photo to a
    different album it'll reload the entire album tree.

commit 75ee962c9e1b6a0c24928f80245430db71780a3d
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Aug 29 17:32:34 2009 -0600

    Apply hover effect to dialog buttons.

commit b4b638be44375c93f5222c7b48ed547845d6d7e5
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Aug 29 16:28:30 2009 -0700

    Undo url helper changes - url methods no longer return a SafeString.
    
    Adding SafeString::of_safe_html() calls where urls are passed as parameters to t() and t2().

commit a1ce2d3f0aff6dcb7149f2d7327a10079e5c78f8
Author: jhilden <jakobhilden@gmail.com>
Date:   Sat Aug 29 19:19:04 2009 -0400

    you can close the l10n client directly from its interface now, without going back to the languages admin page

commit ed9be096535dfbac4d62e0cc74f416a71f67648d
Merge: 39559fd 0aceba6
Author: jhilden <jakobhilden@gmail.com>
Date:   Sat Aug 29 19:12:57 2009 -0400

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 39559fdfd09491dce669d0351768fe2b13ccdd03
Author: jhilden <jakobhilden@gmail.com>
Date:   Sat Aug 29 19:11:16 2009 -0400

    initial version of the the file with common CSS styles that should be reused if possible

commit 60cfa54b828b28b93473d583b8d00f8e9a87c691
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Aug 29 17:02:43 2009 -0600

    Fix error text color.

commit 0204617b602183a3e157bc7e23c617acd22a5212
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Aug 29 15:41:02 2009 -0700

    XSS fixes

commit 0aceba6f48e5542d3edfbb1f195af50187adbac4
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Aug 29 15:20:27 2009 -0700

    Fix for ticket #628:
    1) increased gallery module version to 11
    2) added image_sharpened parameter to the gallery module
    3) sharpen all resizes.

commit a5ddef021c1ca4920e40c0657de082ae0d7008ee
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Aug 29 15:03:46 2009 -0700

    Fix invalida syntax on trying to parse the progress bar percentage

commit c4d5ecde66c7bffde2259b9815c050e6a4d8f333
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Aug 29 14:38:47 2009 -0700

    L10n fixes for the admin_languages page, and JS/XSS cleanup of the organize views.

commit f327b4ad38923d40fcd6540467604cb0f24cd8bf
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Aug 29 14:24:52 2009 -0700

    Fix link in l10n UI (for SafeString changes)

commit a5dfc81a8f7bef0305b62254252de6df23684199
Merge: d5660d2 a9fcec7
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Aug 29 14:17:48 2009 -0700

    Merge commit 'upstream/master'
    
    Conflicts:
    
    	modules/akismet/views/admin_akismet.html.php
    	modules/comment/helpers/comment_rss.php
    	modules/gallery/helpers/gallery_rss.php
    	modules/gallery/libraries/I18n.php
    	modules/gallery/views/permissions_browse.html.php
    	modules/gallery/views/simple_uploader.html.php
    	modules/info/views/info_block.html.php
    	modules/organize/controllers/organize.php
    	modules/organize/views/organize.html.php
    	modules/organize/views/organize_album.html.php
    	themes/default/views/album.html.php
    	themes/default/views/movie.html.php
    	themes/default/views/photo.html.php

commit d5660d2d3ea6e8172272f1eb27e8071a1a42d87b
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Aug 29 13:41:18 2009 -0700

    Fixing all detected XSS vectors in PHP->JS code.
    
    Xss: Rename UNKNOWN back to DIRTY, JS_XSS to DIRTY_JS.
    (using a different flag value to highlight potential XSS vectors in JS)

commit a9fcec755a835e284465bafcc9aba9ec9c2f0f62
Merge: 5db0b68 6b633e8
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Aug 29 14:02:29 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 5db0b68a70434a16d8881a6e560a9526530a8a60
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Aug 29 14:01:04 2009 -0600

    Update status message styles. Lighten backgrounds, don't show background on Admin Maintenance rows, and added gModuleStatus class.

commit 83344b9e7d5bdde05956a0a5c0b6578e19974066
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Aug 29 12:50:20 2009 -0700

    Bugfix: Don't forget to copy the _is_purified_html flag when cloning a SafeString.

commit c01ac42c4604b3b129e8089e0dc683ebd418b380
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Aug 29 12:48:40 2009 -0700

    Refactor all calls of p::clean() to SafeString::of() and p::purify() to SafeString::purify().
    
    Removing any p::clean() calls for arguments to t() and t2() since their args are wrapped in a SafeString anyway.

commit a10063ff68cf5988297dcad889384ab2080c3850
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Aug 29 12:34:09 2009 -0700

    Add more factory methods for convenience:
    SafeString::purify() and SafeString::of_safe_html().
    
    Removing SafeString::mark_html_safe() since it's no longer needed.

commit 6b633e87489acbe79d65fc5e089d35cc27ee691c
Merge: 35f83ff cd1fd49
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 29 12:24:44 2009 -0700

    Merge branch 'talmdal_branch' of git@github.com:gallery/gallery3

commit cd1fd4989f394f6e8084b8101a8dbdb3030c52aa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 29 12:22:00 2009 -0700

    Add a test for Comment_Model::viewable().

commit 50c624ed1b5a09d965d4e0f18a32bf3c2a94db15
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 29 12:20:03 2009 -0700

    Fix active() to not use user::guest() as the fallback for our Session::get() call.

commit 0d16cc1c106dc324fde59cac54fa82e4a70e04e2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 29 12:12:53 2009 -0700

    Clean up the test and get it working.

commit 7adb9ea2e3a42e1c5472024a1699912ae26eacb3
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Aug 29 11:48:55 2009 -0700

    Adding SafeString::for_html_attr()

commit d85a8b20bbe0a5be0a03da70354169d41f418d41
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 29 11:48:49 2009 -0700

    Rename $comment_model to $comments.

commit 38b2efc44cf3345d97798e9637db241b05e2dded
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Aug 29 11:43:10 2009 -0700

    Fix for 641... extend viewable functionality to comments. Viewable unit test is not working.

commit 35f83ff31d8422e56c417ac761272168a97c8546
Merge: 775987d 22c7f44
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 29 11:33:29 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 1d633457c4482ab96bf936e9951ded2d5ebc8c74
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Aug 29 11:31:00 2009 -0700

    Have url::site() and other methods return a SafeString, just as t() and t2().
    
    Benefits:
     - url::site() is often used in views and we can ensure in the url class that returned strings are indeed safe for use in HTML. Makes the list of vars of unknown safety status shorter.
     - url::site() is often used as message parameter to t() and t2(). The parameter would be HTML-escaped if it wasn't marked as safe HTML already. Makes the usage simpler / shorter.

commit 22c7f44d0bfce250c3b70bcc0d3b7de9e02a7daf
Merge: 746609b 27b8125
Author: jhilden <jakobhilden@gmail.com>
Date:   Sat Aug 29 14:29:54 2009 -0400

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 775987dff99b4459d6fef255d67da3bd6cdeb7c5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 29 11:29:38 2009 -0700

    Fix a bug where organize doesn't properly generate the tree at the root album.

commit 746609b967532a6570a229d5b1e2997527316305
Author: jhilden <jakobhilden@gmail.com>
Date:   Sat Aug 29 14:27:08 2009 -0400

    * created new generic "Add" dropdown in the site menu. this should take care of ticket #537
    
    * removed start/stop translation menu items from the admin, since they are on the languags admin page now

commit 27b81257fa3b65de555111372648a65e7152633a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Aug 29 11:24:12 2009 -0700

    Standardize the access to the create_random_item method

commit 08d7fda7f8ae68f06dfc063a8cf1acfa1a11eec7
Merge: 6de10a5 1527f14
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Aug 29 11:22:19 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit 8d256898c7533f2d61e2c0672f70314c68cd0187
Author: jhilden <jakobhilden@gmail.com>
Date:   Sat Aug 29 14:21:53 2009 -0400

    improved translation interface so that it now can be closed without going to the admin

commit 6de10a54ddc4273499848be6508b9fd3c9d2c492
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Aug 29 11:21:30 2009 -0700

    Fix typo in the parameter list

commit 4408ed0684ad8b1a2e1623ef2103fdad8ae5d895
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 29 10:56:35 2009 -0700

    Remove stray blank line.

commit 1527f149a90a46428c48b4b811d4b8ecc10b9d2c
Merge: b833cb6 b518a51
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 29 10:49:25 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit b833cb607323000b987428c94995e18a9d07df65
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 29 10:48:23 2009 -0700

    Get rid of the task infrastructure.  The multiple requests greatly
    slow down simple operations.  We may run into problems with more
    complex operations, but let's only add tasks into the mix when it's
    clear that we need them.

commit 020281d932c566476222e6c825ada3affff239a6
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Aug 29 10:45:47 2009 -0700

    Adding SafeString which is going to replace p::clean() and p::purify().
    Refactoring of Xss_Security_Test.
    t() and t2() return a SafeString instance.
    
    TODO:
     - Update all code to use SafeString where appropriate.
     - Update golden fole of Xss_Security_Test
     - Stop reporting CLEAN vars in Xss_Security_Test

commit a2e2a2178b1b84a9895fdddd020c5ec8dddf89c5
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Aug 29 10:40:34 2009 -0700

    Using SafeString in album controller / view

commit f257cd3d69a771ce245c432e37c9f9e7e53ad03d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 29 10:00:47 2009 -0700

    Major refactor of organize:
    * Clean up naming conventions for variables in the controller
      so that we specifically refer to albums with $album_id, etc.
    
    * Move complexity for drawing tree out of the controller and into
      the view.
    
    * Simplify task definitions to get rid of extraneous text
    
    * Change __PLACEHOLDERS__ to clearly define which is the album
      and which is the item that we're moving before/after
    
    * Remove as many CSS ids as we can from the tree view to keep
      things simple

commit acce8cbafd1987c72b8e3c7be54e91473ab2a525
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 29 08:47:44 2009 -0700

    Log the actual exception details, before swallowing the exception.

commit b518a5173da57d65d454518fd2400fe28cdfef3c
Merge: c234f9f 974e8f9
Author: jhilden <jakobhilden@gmail.com>
Date:   Fri Aug 28 20:54:20 2009 -0400

    Merge branch 'master' of git@github.com:gallery/gallery3

commit c234f9fd392d355bb7a143e28474bb689ed65e48
Author: jhilden <jakobhilden@gmail.com>
Date:   Fri Aug 28 20:53:06 2009 -0400

    improved translations admin interface

commit 210ba966f8fde3d9285a5492dd9f7ed5eac0b126
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Aug 28 18:20:56 2009 -0600

    Fixed issue where button classes and cancel link weren't being re-applied to forms when an open dialog is reloaded.

commit 974e8f9547284e052eef2d8b9668f9e85c585b49
Merge: fc1c4d5 1ce8643
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Aug 28 16:38:02 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit fc1c4d5119959a4db0d49b7c0aa618749f27c740
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Aug 28 16:37:14 2009 -0600

    Button styles and event handlers weren't being applied in dialogs, fixes #669.

commit 1ce8643b8056266139552045fcdb48bbdb9c665b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Aug 28 15:17:07 2009 -0700

    Fix for #440.  Basically add a check that the mysql version is > 5.0.0.
    It was felt that actually listing the requirements might be overwhelming
    to novice users.

commit d1a44af862e08676eaecde62e71597ed1eae85ec
Merge: c428e49 31d63a0
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Aug 28 15:50:52 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit cb2171d0825251d619b53f6f80d217326fb6bab5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Aug 28 14:27:37 2009 -0700

    Display the sort order in the Organize dialog, and allow users to
    change the sort order on the fly.

commit c428e49f3273f04fd220107b4992e6177aa1b265
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Aug 28 15:24:21 2009 -0600

    Make gMessage 100% of the width of its container.

commit 31d63a0d0a27212435a78eb38461320f486b5f95
Merge: 1d5262f 1855642
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Aug 28 13:47:36 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit 1d5262f9c354a8564f05a8a31b915ad479f4d361
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Aug 28 13:44:01 2009 -0700

    Fix ticket #591: reCaptcha always on the page.
    1) move creating the "Add a comment" button into the comments.html.php
    2) use $.get() to retrieve the comment add form

commit 1855642bd169a1cae69cd9efb8da4458ea6e4a3c
Author: jhilden <jakobhilden@gmail.com>
Date:   Fri Aug 28 16:19:41 2009 -0400

    improved UI for the languages admin
    this should take care of bug #329

commit 5a2853bca1ea9a9231e01814df9aa373bf50d19c
Merge: f1e008a 6dcfdb6
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Aug 28 13:48:54 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit f1e008a14f2dfb51d1204dad3deb19e2e3df16c8
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Aug 28 13:47:35 2009 -0600

    Don't clone hover item, apply styles to the original container. Contextual menu rotates are now immediately visible. Fixes ticket 667.

commit 94b5749d4604dc0d6b7a057d48a0f9d733e035ea
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Aug 28 13:42:45 2009 -0600

    Convert tabs to spaces.

commit 6dcfdb6432d556f43736d60de8f310f247868bfa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Aug 28 12:42:37 2009 -0700

    Fix a bug in notification where were using get() instead of current()
    to get the first item in an ORM result set.

commit dcead39dfbd1885720e888446d0572e11b7ad47c
Merge: 36d1a8c e24d23b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Aug 28 12:37:01 2009 -0700

    Merge branch 'talmdal_branch' of git@github.com:gallery/gallery3

commit e24d23bf14af8ac3bbcc2431c56be118f9f881b4
Merge: b9aca31 5133f93
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Aug 28 12:33:47 2009 -0700

    Merge branch 'master' of git@github.com:talmdal/gallery3 into talmdal_branch

commit 36d1a8c4f2c85ed2ece0212ce1e0b682056d0d2a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Aug 28 12:08:21 2009 -0700

    Rename sort columns:
      * Order Added => Manual
      * Capture Date => Date captured
      * Creation Date => Date uploaded
      * Updated Date => Date modified
    
    Set the default sort order to "created" which mimics what we had
    before, expt that it is not manual.

commit 5133f93290e3ab0052909c27dcec05983c819ebe
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Aug 28 11:51:41 2009 -0700

    Don't record mail failures when we throw the exception, record them
    when we catch the exception instead.

commit 16fc4465d0e773239bfe11681f7303b46e6419f0
Merge: c0c65c6 430b575
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Aug 28 11:42:54 2009 -0700

    Merge branch 'master' of git@github.com:talmdal/gallery3

commit b9aca313fade910254be14f8e25d9a6c41752851
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Aug 28 11:41:06 2009 -0700

    Fix a couple of off-by-one errors.

commit 48e84243d24c52638042d3b5edc3cbd3765daac3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Aug 28 11:21:19 2009 -0700

    Update help text to eliminate 'edit' since we don't do that yet, and change "items" to "photos".

commit 76e541745f40dc684ddbbc58c6f178cd395911e2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Aug 28 11:13:04 2009 -0700

    Refactor rearrange_task_handler to have a more linear flow.

commit 8ca573741e49e6320124f08631979dca3562c086
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Aug 28 10:48:47 2009 -0700

    Indentation fixes.

commit 430b57578b048366f054743e47de1b66cebb574e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Aug 28 10:27:02 2009 -0700

    Wrap all the notification helpers call with a try catch that swallows the exceptions, so the exceptions don't interrupt the upstream processes

commit 9c79afcff53807f649cbcfaa0fc06e78799e43ec
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Aug 28 10:24:16 2009 -0700

    Add logging to sendmail library when exception encountered

commit 47fd2dc65ec275203af745440e0ee264a2e9d75c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Aug 28 09:53:54 2009 -0700

    Clean up in preparation for some refactoring.

commit 98361e76134fd7ed5df40f2bcde30fd7f5d51708
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Aug 28 09:25:29 2009 -0700

    Add a @todo to defer loading the script/css to the organize dialog.

commit 83e850bc332ce6c13f9b0b7a396f2fe8d9260eb6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Aug 28 09:19:20 2009 -0700

    Minor style fixes.

commit e8a3fe97a43dc257a70431defbcc6fb330cdfee2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Aug 28 09:09:33 2009 -0700

    Fix whitespace.

commit 7c5275a63c5e17e519e2ccd497e4d2af97e84503
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Aug 28 09:08:39 2009 -0700

    Fix indentation.

commit b72b09163bcae960d15625c7687cd40b19152dd2
Merge: 8d2cd12 f27919a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Aug 28 08:48:56 2009 -0700

    Merge branch 'master' of git@github.com:talmdal/gallery3 into talmdal_branch

commit c0c65c6fcc971b1ea9c0afb75854aec502591d56
Merge: 3d2e36f 826e104
Author: jhilden <jakobhilden@gmail.com>
Date:   Fri Aug 28 11:27:38 2009 -0400

    Merge branch 'master' of git@github.com:gallery/gallery3

commit f27919aa1e5625de50e25c215b17099134a18e22
Merge: 377bdf2 826e104
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 27 21:56:27 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit 3d2e36f5b601b5a274efd0c55bf161448409682a
Author: jhilden <jakobhilden@gmail.com>
Date:   Thu Aug 27 20:34:42 2009 -0400

    fixed CSS bug in the simple uploader  #629
    and improved permissions UI to include breadcrumbs (consistent with the uploader dialog)

commit 826e104fa98eca33afd8cb59ebf8123021145609
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Aug 27 17:15:20 2009 -0700

    Get rid of the extra "Folder name" row.  It's noisy.  Fixes ticket #593.

commit a28dd09c4eac11ce406525ffd871df7605d5175f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Aug 27 17:04:48 2009 -0700

    Properly deal with invalid images.  This fixes ticket #611 which shows
    a BMP masquerading as a .jpg causing us to be unable to rebuild
    resizes and thumbnails.  Now if that happens, we discard the file, log
    it and move on.

commit 377bdf2803eb69efe0d16e4580a922f4b83cbf0b
Merge: bfc6468 5235c7a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 27 16:29:22 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit 5235c7a0b79d12305d99fdafe2710583f5368fcc
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 27 15:37:18 2009 -0700

    Allow clicking on the overlay to close the fullsize and remove some debug code

commit 254feecd0af2da2bfb92ce3995ed65dcbebfd02b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 27 15:22:27 2009 -0700

    Fix ticket #644
    1) remove close button
    2) extend the grey overlay to the document size
    3) allow any keypress to close the fullize image
    4) click on the fullsize will close

commit 93138f6ae78fd5ef11ea5095156827592f61bc56
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 27 15:04:14 2009 -0700

    Don't display the slideshow icon if there are no descendants. ticket #660

commit 8d2cd12c58508c58520d4df2875a3f7974343d8f
Merge: e0e430b bfc6468
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Aug 27 16:15:01 2009 -0700

    Merge branch 'master' of git@github.com:talmdal/gallery3 into talmdal_branch

commit e0e430bd84d8c82eb425c0bc828dae2b9c0d86be
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 27 15:37:18 2009 -0700

    Allow clicking on the overlay to close the fullsize and remove some debug code

commit 5db90d432de180b361b2160bc48cb7bafd6fdaf1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 27 15:22:27 2009 -0700

    Fix ticket #644
    1) remove close button
    2) extend the grey overlay to the document size
    3) allow any keypress to close the fullize image
    4) click on the fullsize will close

commit 74363ced870d4114e7570729636875e0258917b3
Merge: 98e9a96 4828db0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Aug 27 16:11:47 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3 into HEAD
    
    Conflicts:
    	modules/slideshow/helpers/slideshow_event.php

commit 98e9a96ba4d2419e02717369be8c0d886bc35ef7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Aug 27 16:10:38 2009 -0700

    Don't display the slideshow icon if there are no descendants. ticket #660
    
    Conflicts:
    
    	modules/slideshow/helpers/slideshow_event.php

commit 4828db003f3ee505eb9e6d056cdb142da34b78ff
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Aug 27 15:47:54 2009 -0700

    Remove 'ENGINE=InnoDB' specification from tables that we create.  Use
    the system's default table specification.  Fixes ticket #597.

commit bfc64685e4ae4bbd2c0308e9520194215ab51469
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 27 15:37:18 2009 -0700

    Allow clicking on the overlay to close the fullsize and remove some debug code

commit 84b018b08ddbaac2fe5688cfbd6b007ea72c019c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 27 15:22:27 2009 -0700

    Fix ticket #644
    1) remove close button
    2) extend the grey overlay to the document size
    3) allow any keypress to close the fullize image
    4) click on the fullsize will close

commit 56937cac5b00f1840e4d73dc840d015b80d75e41
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 27 15:04:14 2009 -0700

    Don't display the slideshow icon if there are no descendants. ticket #660

commit 77ac00c3b8ca498e3a7eeb51185139a2b2335c50
Merge: 980ee6b 752594f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Aug 27 14:57:35 2009 -0700

    Merge branch 'master' of git@github.com:talmdal/gallery3 into talmdal_branch

commit 980ee6b4b263481251c92da6f7382bc7235fb11c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Aug 27 14:54:10 2009 -0700

    Revert "delete the simple slideshow"
    
    This reverts commit 940edac81c854227d1a25f482cb38c96b6937bb2.
    
    Revert "Add window resizing support. Just can't seem to get loading icon to show up"
    
    This reverts commit afd85945d7028cefd703c3f6bbebdf92f8e0477a.
    
    Revert "Resolve issues with show the wrong album when slideshow is invoked from a photo page.  In addition, implement the slideshow based on tags."
    
    This reverts commit 152caf5195e3bbcdb353707fed5683ed07927f47.
    
    Revert "Initial commit of a basic slideshow"
    
    This reverts commit 5943761df282bfdfe68453de5c1682030006cd11.

commit ea717bbe2a75cb33c4c42d5a6574172bf81c14bf
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Aug 27 14:13:47 2009 -0700

    Add a comment about putting the mod_rewrite block into the apache
    config files, since .htaccess will get clobbered.

commit 2c6328a47bedffe15791c518d6e9e42caedbbe3c
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Aug 27 14:27:49 2009 -0600

    Make the info block display 'File name', instead of 'Folder name' when showing a photo. Fixes #631

commit db1f6e3e35485df041631e6d86baa17572ab7d4d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Aug 27 13:29:39 2009 -0700

    Don't ask for csrf when we're resetting passwords.  They're not gonna have one.  Duh!
    Fixes #642.

commit 88149a5afaa48711ccecda67036ec9a6755b9050
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Aug 27 11:41:19 2009 -0700

    Convert tabs to spaces.

commit 752594f87a8d10e02b2212745f84f7e6e3cfcdae
Merge: 940edac 75c0982
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 27 14:47:42 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit 75c098204f44538b79932f852469ae9d4338074c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Aug 27 14:13:47 2009 -0700

    Add a comment about putting the mod_rewrite block into the apache
    config files, since .htaccess will get clobbered.

commit 7771d0cf83154772bcb47d3273220285cfb47f54
Merge: e586389 b7803e9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Aug 27 13:30:22 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit e586389f6573d4b4b817990064b61276d068b766
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Aug 27 13:29:39 2009 -0700

    Don't ask for csrf when we're resetting passwords.  They're not gonna have one.  Duh!
    Fixes #642.

commit b7803e99c1ec931b95619f65ce8bdc6f899ff975
Merge: ddddfc5 5f86332
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Aug 27 14:28:23 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit ddddfc5e8e505f83276acaa89057d5b9a9f6426f
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Aug 27 14:27:49 2009 -0600

    Make the info block display 'File name', instead of 'Folder name' when showing a photo. Fixes #631

commit 5f86332db94966a635904e5f59cd00d1de9ccd13
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Aug 27 11:41:19 2009 -0700

    Convert tabs to spaces.

commit 940edac81c854227d1a25f482cb38c96b6937bb2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 27 11:35:14 2009 -0700

    delete the simple slideshow

commit dc67de520d58838d0bf1ab2ba13135745b59facf
Merge: 88995e5 0be38d1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Aug 25 15:00:44 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit 0be38d143c44902f9482044da5f43c7a05134460
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Aug 25 13:32:57 2009 -0700

    Workaround to make G3 work with Turkish locale.
    Thanks to katpatuka for providing the fix.

commit deafc01c21887d8b699f26f9358a7acbf765151b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 23 15:05:18 2009 -0700

    Remove accidentally submitted .DS_Store file.

commit 2264a80368be16b8ab898eec9234cd6ce9fe7652
Merge: 4577083 256822a
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Aug 23 15:00:00 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 457708311a466d8b116d5b28575be1bc3baad864
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Aug 23 14:58:26 2009 -0600

    Cut down on jittering of the context menu on open on resize view.

commit 88995e5a2e72fa45202f82ecd9220d3053ad2348
Merge: afd8594 256822a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 20 16:26:54 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit afd85945d7028cefd703c3f6bbebdf92f8e0477a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 20 13:51:53 2009 -0700

    Add window resizing support. Just can't seem to get loading icon to show up

commit 256822a1e8d387ef9cc29e354a36099dbab17992
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Aug 21 03:53:20 2009 +0800

    Refactor the _auto_fit method in gallery.show_full_size to a common method in gallery.common.js
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 74d79dc81929111edebfb47912f18521639241f0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 20 12:53:20 2009 -0700

    Refactor the _auto_fit method in gallery.show_full_size to a common method in gallery.common.js

commit 152caf5195e3bbcdb353707fed5683ed07927f47
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 20 08:47:42 2009 -0700

    Resolve issues with show the wrong album when slideshow is invoked from a photo page.  In addition, implement the slideshow based on tags.

commit 5943761df282bfdfe68453de5c1682030006cd11
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 20 07:30:49 2009 -0700

    Initial commit of a basic slideshow

commit 230b9a26ac56c3ca978a7c5df413464068b60812
Merge: c85df82 2da7f93
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 20 05:23:52 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit 2da7f937840b79b65bacb96e8dad06f2e7d41305
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 20 12:24:05 2009 +0800

    Fix the setting of the mime type header. as per
    http://gallery.menalto.com/node/90306
    Thanks rWatcher
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit c85df82fde97b9428e61e25d9de9d512f415ed68
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Aug 19 21:24:05 2009 -0700

    Fix the setting of the mime type header. as per
    http://gallery.menalto.com/node/90306
    Thanks rWatcher

commit 7d36f43d0bf3ab8765820b9496a41f2f75ca85c4
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Aug 19 18:51:14 2009 -0600

    Update docblocks and todos

commit b989383fe6f875d48c48c4b5481299ddc70e5766
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 20 07:06:36 2009 +0800

    Modified the conversion of the margin-top and margin-bottom css values. The
    problem arises because $(selector).css("margin-top) does not return a string
    and therefore the replace function is undefined.
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit bfcbb600394c33b9cc176d8e0ec4293e1e22620a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Aug 19 16:06:36 2009 -0700

    Modified the conversion of the margin-top and margin-bottom css values. The
    problem arises because $(selector).css("margin-top) does not return a string
    and therefore the replace function is undefined.

commit bb24ce26b4774b60b28c6eef19275d1a8189d1a9
Merge: b184f99 407ce45
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Aug 19 14:03:00 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit 407ce45bc547be23595f225dbd020f490ff58afe
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Aug 19 21:12:29 2009 +0800

    Correct indentation
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit e3f5a8be903dd54a72b9c7694a21d63655999127
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Aug 18 23:40:52 2009 +0800

    Change the setting of page type from "item" to "photo".  Thre is no page type
    of item.  All other references use photo for non album and non dynamic pages.
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit b184f995f8a9db78b0603a7c19e44f4e26d605cb
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Aug 19 06:12:29 2009 -0700

    Correct indentation

commit bc42df35ee6cce419cbd9f514f245dcf8c70262b
Merge: 2ac9167 3b8323d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Aug 19 05:14:05 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit 3b8323d5b4db4904aba9ea2f922140ab235dd681
Merge: bb6bf17 67d770f
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Aug 18 23:08:32 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 2ac916783ad81f49185fa5c8514aefcb330a6128
Merge: 6e05427 67d770f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Aug 18 18:48:17 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit 67d770fb2a417359526923712899e8d799363bef
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Aug 18 13:48:00 2009 -0700

    Don't call dirname() on the toolkit dir, it's already a directory!  (Thanks Kaare)

commit 6e054273f3da6f2b7dc9cf6d7b06a52740e2f4dc
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Aug 18 08:40:52 2009 -0700

    Change the setting of page type from "item" to "photo".  Thre is no page type
    of item.  All other references use photo for non album and non dynamic pages.

commit 82edd2a37bde6f42f5ff69c1363c5dbeb3cec599
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Aug 17 19:52:40 2009 -0700

    This patch adds some security to the organize dialog.
    1) If images are dragged from the content pane and dropped on a branch in the
       tree that the user only has view priviledges, then the drop is cancelled
       and the images are reverted.
    2) The user cannot click on a branch, to which they only have view priviledges,
       the content pane does not change to the new album

commit 848c5439b3c17da58c2cfd94ccc62193a3fe7bd2
Merge: 8156eb9 24d7f5d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Aug 17 16:12:37 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit 24d7f5df8c8a18b9ac017fb7b4fc92974b5435cc
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Aug 17 23:47:39 2009 +0800

    Refactor the get maximum weight functionality into a method in the item helper, so that we can use it else where (i.e. the new organize module)
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit afa8cade7fc948b064636d4e9ecfb03e4c2c67d7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Aug 18 05:16:11 2009 +0800

    Fix for ticket #590. The gallery.dialog.js looks for an element "#dialog #gProgress" and if it finds it assumes that it is a progress dialog and removes the title.  This pathc changes the name of the div containing the progress bar to gServerAddProgress and avoids the issue.
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 8156eb9651dd1f0eeb9c83366f929e85b14fe99f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Aug 17 14:16:11 2009 -0700

    Fix for ticket #590. The gallery.dialog.js looks for an element "#dialog #gProgress" and if it finds it assumes that it is a progress dialog and removes the title.  This pathc changes the name of the div containing the progress bar to gServerAddProgress and avoids the issue.

commit 6f6d5b306b3ad673eedc08116a651c53e27fcd1f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Aug 17 12:56:05 2009 -0700

    remove the batch start/stop and replace the ORM update of the weight, with a direct sql update.  This bypasses the gallery3 event mechanism.  Fire a album_rearrange event when the rearrangement is complete

commit 69d1b168189541fbdf2c91e30e59dbd96f600921
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Aug 17 12:32:33 2009 -0700

    Change back to using the ORM to update the child weight, but use the batch::start() method so notifications are queued

commit 5e9c602b094a9290e1caa0ffaa53e291e739edfd
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Aug 17 11:46:10 2009 -0700

    Fix the performance problem related to setting the child weight, by bypassing ORM and generating the sql directly.

commit dd9f4b6d7feb6664fa1aaeed41b8a9dce02197c2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Aug 17 08:49:37 2009 -0700

    The rearrange functionality works.  but it is slower than shit.  I've left the debug statements in until we can solve this issue.

commit 7fc833a392aaa4a25e98bab122cddb50f3abcde7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Aug 17 08:47:39 2009 -0700

    Refactor the get maximum weight functionality into a method in the item helper, so that we can use it else where (i.e. the new organize module)

commit 5f546050d1128bf6aaf3a55b58a89c14bdb46cfd
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Aug 16 16:20:43 2009 -0700

    The progress bar appears during a move. Still having an issue with unable to do a single select after a drop operation.  I think its related to needing to destroy the existing selectable before creating the new one.  The error I get is "this._selection[i].data("selectabe-item") is undefined."

commit 76f320ab3d6b1f67055dd913eb5811d0d113682a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Aug 16 12:36:14 2009 -0700

    In this patch, drag now works to the album tree, but the progress bar is not
    showing. As well fixed a problem where selectable single clink no longer
    worked when the album was reloaded.

commit eeae2dc56c822a2fa32278bfe0f52bc43f665ec2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 13 21:31:20 2009 -0700

    Added javascript portion of the drop functionality.  At this point you can drag selected images and drop them on the micro thumb grid in a different position or onto a branch in the gallery tree.  No ajax call is made, it just writes the generated url and post data to the console, so it only works in ff right now.

commit d758266fabff6c9fe4de22fce57bf00962150ee2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 13 18:58:40 2009 -0700

    Add a visual indicator of the insertion point

commit 5a84df9ac501b57cb5b472dc57590eef5e165dc3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 13 10:56:50 2009 -0700

    Vertical scrolling of the thumb grid seems to work better now.  Wasn't able to get the draggable autoscrolling working, so this is a poor replacemment.

commit 3823f65dfb4114caf9bd9cfbf730638927f6c970
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Aug 12 21:55:25 2009 -0700

    Implement the first part of drag functionality.  Having trouble getting visual feedback of the drop position between thumbnails, so this commit provides a checkpoint for trying various options

commit 628199538526a2da8d32afe15ec0a2827f5a19c3
Merge: 39b37cc 693e95e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Aug 12 16:01:24 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit 693e95e7b092fdbbae6ab59314230d234efffd5b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 13 05:13:39 2009 +0800

    Use the jquery-ui library that contains a prerelease version of the slectable component
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 39b37cc585b7e5413c472176e880da93a2de4e11
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Aug 12 14:13:39 2009 -0700

    Use the jquery-ui library that contains a prerelease version of the slectable component

commit bb6bf17076eff74ee490d17b510150d68f5faa54
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Aug 11 00:41:07 2009 -0600

    Move context menu to gallery.common, forgot to include in prior commit

commit 65e97fda48620a0808c0cd4414aa9e0656f482ed
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Aug 11 00:40:14 2009 -0600

    Move context menu to gallery.common

commit 99d7a0c0dbb799ba64d769475a1534650e98e5b6
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Aug 11 00:33:15 2009 -0600

    Make each context menu button clickable from side-to-side

commit a10c309c36b0c5e8adf55cde8ffb2dd093938ea5
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Aug 11 00:28:38 2009 -0600

    Replace tabs w/ spaces.

commit 3e3bbd5d2e71419109eaecc0677962e9efa0b59a
Merge: e3a58b7 cbba45f
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Aug 11 00:15:04 2009 -0600

    Merge branch 'master' of git@github.com:bharat/gallery3

commit cbba45fffc7368280e9529f55e108d0080175b6a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Aug 10 23:05:05 2009 -0700

    Create the concept of an "ajax link" and use it for thumbnail rotation
    and album covers in the context menu.
    
    Notes:
    - This requires context_menu() to have a CSS selector that refers to the
      <img> that we're operating on, otherwise we don't know how to find the
      thumbnail, etc.
    - Create Menu_Element_Ajax_Link which has an ajax_handler attribute
      that contains a snippet of JS that we're going to run when the ajax
      call returns.
    - Add $.gallery_replace_image in gallery.common.js
    - Add lib/gallery.ajax.js which can be used to ajaxify any link, and have
      ui.init.js in the themes call that on all .gAjaxLink elements.

commit e3a58b76c14c64a5254f4efd73730866818bd0b3
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Mon Aug 10 23:11:31 2009 -0600

    Return .each() to work with more than an individual photo.

commit 790545ac97358dd92ce954e617d5255e6644c1a7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Aug 10 10:49:50 2009 -0700

    Add missing semicolons.

commit 351532d858b8071e23176bf3bf0eff8a5eab53f6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Aug 10 10:07:54 2009 -0700

    Fix indentation.

commit f7a23e0a9cdd4a85e4bc50964917d6995b7d54ab
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 9 23:08:35 2009 -0700

    Fix up context menus a bit.
    - Update digibug_event::context_menu() to take the actual item
    - Change gallery::context_menu() to not require the page_type as an argument

commit cea1d4f1f3d295284f3ba19f0d73bb2785b6ed29
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Aug 9 23:32:53 2009 -0600

    Forgot to commit the css for the resize photo view context menu.

commit c85d9b41d9fdc7f6ca19386f5eedbd2dea119b46
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Aug 9 23:12:25 2009 -0600

    First stab at context menu for resize. It's quirky and needs work.

commit 24e29b0b68c364239bf79d7224e1f3dd3ac2c8a1
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Aug 9 23:10:02 2009 -0600

    Rename fit_image to fit_photo for consistency.

commit 69b7b1803a73090429efd09299ea15d73102f34c
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Aug 9 23:08:18 2009 -0600

    Move hover effect to a function.

commit a961211f569d51631a8ac12327cb72b4818c4853
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Aug 9 22:51:21 2009 -0600

    Move the get photo filter out to it's own function for re-use. Docblock cleanup.

commit 13546d0be70764af812bb52c6022c4eeb0438ac0
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Aug 9 13:59:48 2009 -0600

    Fixed case

commit 85afa537df540bf60ea58029b8954753903f53e6
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Aug 9 13:56:39 2009 -0600

    Add jquery ui print icon class to menu

commit 1c4e1344c6899f1abbfd914d36e7686afec2e5cc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 9 12:14:17 2009 -0700

    Update photo_menu() and context_menu() to work with recent menu changes.

commit 6404e75a0b5125aa2d8481294325bb199a4e3287
Merge: 1231e09 d3ea304
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Aug 9 13:02:35 2009 -0600

    Merge branch 'master' of git@github.com:bharat/gallery3

commit 1231e095c824ed9961b1156d89f6a1cae231f96f
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Aug 9 12:46:17 2009 -0600

    Keep image placement from shifting on hover, set gHoverItem height properly.

commit d3ea304f7d03cd1c98e3c93fa070236aa3dca684
Merge: 7aac471 5c25973
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 9 11:13:41 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3 into bharat_branch

commit de00a4ac394de6ce2df4bd6e52ae52f17701f702
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Aug 9 11:40:39 2009 -0600

    Explicitly use gValign class rather than first child.

commit 2f4c4a3f706d98be7dd41f8fa7c9124314c515c8
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Aug 9 11:31:31 2009 -0600

    Rename resizeImage gallery_fit_image to follow convention. Move the function to gallery.common.js.

commit 39d0098038b828c3cf5d63caa06f1b6d57904f32
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Aug 9 09:00:10 2009 -0700

    Enable microthumbnail selection

commit ea17a51148884d0297baf3fc8b94916d9c60a5d3
Merge: 9fa4e89 7aac471
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Aug 9 09:51:40 2009 -0600

    Merge branch 'master' of git@github.com:bharat/gallery3

commit ebb44b05a2240ab0142539b1d985cf0f8471a038
Merge: dafe222 5c25973
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Aug 9 08:43:18 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit 5c25973ee8f9601353917767d31f0af49cd93737
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 9 00:02:13 2009 -0700

    Require a valid url for users.  Fixes ticket #612.

commit dafe22299428580e834734fac1bcc20e491ac809
Merge: 78b9754 12f25a7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Aug 8 21:29:13 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit 12f25a7e55d5aab4c4170eaa3bcb761cf5514be2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 8 21:26:55 2009 -0700

    Fix the after_install loader to immediately open the "Welcome to
    Gallery 3!" dialog, but not immediately open the "change your
    password" dialog.

commit 78b97545631eca7a51808e8b3ef78c1a7547c566
Merge: 1c5b04a c9f5000
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Aug 8 21:22:51 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit 7aac471b828d4405b3fb0d736a06a5b92875883e
Merge: 3a8f1f4 c9f5000
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 8 20:56:06 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3 into bharat_branch
    
    Conflicts:
    	modules/gallery/js/quick.js

commit c9f5000e65f66b3342f2cc6e2e9623eac72ff223
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 8 20:31:16 2009 -0700

    Improve the graphics toolkit detection code so that properly
    identifies situations where its restricted by open_basedir.
    
    We now track more informatoin about the toolkit including the version
    and any errors we encountered while doing the detection so that we can
    provide more info downstream.  This makes graphics::detect_toolkits()
    a little heavier, but that's ok because it should not be called very
    often.
    
    In the process, refactor the controller and view hierarchy so that
    it's a little more straightforward in the code.
    
    Fixes ticket #616.

commit 9fa4e8972596d015d4e4259aabb600c886d6381e
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Aug 8 20:39:19 2009 -0600

    Fixed typo. Dialog links still broken. Now, wiht more speling!

commit 1c5b04a2c5d58838dbea413359c9b114f7077ca8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Aug 8 16:26:34 2009 -0700

    Fix the problem where the login page and edit permission pages were
    supersized based on ly last commit.

commit e4fb6959aff3d688db9821eadd0d24006c9c77d6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Aug 8 16:18:33 2009 -0700

    Forgot to save this one before committing the last two times... duh. Completes the conversion from using 1 to true for the immediate paramter to gallery_dialog

commit aac06342b3a1979f10e1365fe173ebe0a382d173
Merge: 685b1dd e046754
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Aug 8 16:11:28 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit e04675470bc43b8abd792c4c1621e5c0dc61f36a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Aug 8 16:01:20 2009 -0700

    Forgot to save this file when i changed the value from 1 to true

commit ae428a7e21ab712718e2d4d20381c2772011ff1f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Aug 8 15:52:04 2009 -0700

    remove a debug statement left over from previous commit

commit 35c6bc3cfabdea1f0af16bc2a81e14bd6914bd70
Merge: cb1ae14 6641fec
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Aug 8 15:48:13 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit cb1ae141bb65a5da42e94910214abbf5ac367920
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Aug 8 15:46:53 2009 -0700

    Create an new option 'immediate' and if set to true then don't try to set up click events, but just show the dialog.  Also remove the destroy method and put all the cleanup into the dialog close handler

commit 6641fec60da715161f0f7f11235c1720d17ec19e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 8 14:37:55 2009 -0700

    Use the same pager layout as we do in photo.html.php.

commit 7863aa16f9304e3c457898f22bce035bf4fedfd8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Aug 8 14:30:21 2009 -0700

    Update tags module to notify modules when items related to a tag are
    affected.  Practically speaking this means that we'll reindex items
    when tags are added or removed from them.
    
    API change:
      Remove item_related_updated_batch event.
    
    Rationale:
      While this is an efficient event, it requires module developers to
      support two event APIs for staying up to date and increases the
      likelihood that they'll forget one and have data corruption.  Force
      them all through the slower but more reliable pipe, for now.  We
      can always try to improve efficiency by using the batch_start and
      batch_stop events.

commit 3a8f1f426294737aac145d15462caa808aef14b1
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Aug 8 13:20:00 2009 -0600

    Cleanup context menu styles a bit

commit 00098b4d1468b09ccbd5514c6b9634e92955a078
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Aug 8 11:59:32 2009 -0600

    Handle icon markup and styles in content menu before applying album grid hover affect. Dialog link's in context menu are broken currently

commit ed6302a0adbdee604722ce93ad975a55e1d02397
Merge: 6357f33 828f6ad
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Aug 8 01:14:51 2009 -0600

    Merge branch 'master' of git@github.com:bharat/gallery3

commit 6357f3332b9bc33b10c11dc93b83ba9e72eec109
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Aug 8 01:14:22 2009 -0600

    Added basic context menu affects and styles. Simplified some of the action labels in the menu.

commit 685b1ddf88c8dd7c055c1fb2571060ad1e4f4530
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Aug 7 21:40:35 2009 -0700

    Enhance how the organize dialog degrades if the browser window is not optimal

commit 7b0ea229b8591c3fba5eb3cb853aa2ac3efd2d97
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Aug 7 17:07:04 2009 -0700

    Make the organize dialog open properly in IE8, Chrome and FF. For some reason (probably a timing thing) the height of the contents was not being set correctly in FF. So we just hard code an estimate of the size of the Draw handle, and message areas.

commit 85d07d0f909201f274377d065223d0c85b7b7b36
Merge: 10c98a3 34d4675
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Aug 7 13:52:55 2009 -0700

    Merge branch 'master' of git@github.com:talmdal/gallery3

commit 10c98a3944977c9b1ac83497056c93884bac4035
Merge: 49d46e4 e4eec71
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Aug 7 13:52:30 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3
    
    Conflicts:
    	lib/gallery.common.js
    	lib/gallery.dialog.js
    	modules/organize/js/organize.js
    	modules/organize/js/organize_init.js

commit 828f6add509c26ee183b44b4ad4f927f34d04509
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Aug 7 13:17:56 2009 -0700

    Remove stray js-breaking "#" symbol that I accidentally added in 63ddac5d

commit 63ddac5d018af3933ac820672de530c34074319e
Merge: c09e2ef e4eec71
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Aug 7 12:37:25 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3 into bharat_branch
    
    Conflicts:
    	themes/default/js/ui.init.js

commit 34d4675baf5d76ee3e3e915248ce902cc3d201b1
Merge: 49d46e4 e4eec71
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Aug 7 12:20:43 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3 into talmdal_branch
    
    Conflicts:
    	lib/gallery.common.js
    	lib/gallery.dialog.js
    	modules/organize/js/organize.js
    	modules/organize/js/organize_init.js

commit e4eec71efa5f7b1902155a34f8655cebe523c358
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Aug 7 11:53:40 2009 -0700

    Rename gallery.common.js functions to conform to our naming standards
    and have some basic namespacing:
      showMessage --> gallery_show_message
      vAlign      --> gallery_valign
      showLoading --> gallery_show_loading
    
    Convert gallery.show_full_size.js to be a jQuery function and give it a namespace:
      show_full_size --> gallery_show_full_size

commit a5137f59722bcb4867ed4c863b34ddb71d7df3d9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Aug 7 11:17:07 2009 -0700

    Remove boilerplate comment.

commit 445a8fb1b6b6f410d1ea432da6d704bf2f59a14d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Aug 8 01:47:56 2009 +0800

    Change galleryPanel and galleryDialog widgets to gallery_panel and gallery_dialog respectively
    
    Signed-off-by: Bharat Mediratta <bharat@menalto.com>

commit 30b77b5714c66f1f73fb98b61f1b17e2c84ece53
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Aug 8 01:33:11 2009 +0800

    Forgot this file on the gallery dialog commit
    
    Signed-off-by: Bharat Mediratta <bharat@menalto.com>

commit a302a9c3fa7ec8d11373dc5eeb9c94400a255b1a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Aug 7 23:58:57 2009 +0800

    Refactor the gallery dialog into a jQuery widget
    
    Signed-off-by: Bharat Mediratta <bharat@menalto.com>

commit 49d46e4010e428b9df97a6e7c5e55708d1c674a8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Aug 7 10:47:56 2009 -0700

    Change galleryPanel and galleryDialog widgets to gallery_panel and gallery_dialog respectively

commit 1591c3871a41b9b0ef240c227c6049de8ae066e3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Aug 6 13:32:41 2009 +0800

    Don't show the ajaxy login link in the top right corner if we're on the login page itself.
    
    Signed-off-by: Bharat Mediratta <bharat@menalto.com>

commit 46b9375d9050ba7f46def18b59ee80f0ffc15d3a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Aug 7 10:33:11 2009 -0700

    Forgot this file on the gallery dialog commit

commit bc6c5207be18cf978cf4e8f5c22a3adbb8254476
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Aug 7 08:58:57 2009 -0700

    Refactor the gallery dialog into a jQuery widget

commit 9dce5685afb173e1c87991a60e6ad0768ad07570
Merge: 2f3cef4 6abcc06
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Aug 7 06:29:57 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit 6abcc06e21d0b7827e395f6a6eef673f83d4d0ec
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Aug 7 21:15:07 2009 +0800

    Refactor the gallery.panel.js as a jQuery widget.
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 2f3cef44cc87bfc81778dd4ff3ad6d7b94a514b0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Aug 7 06:15:07 2009 -0700

    Refactor the gallery.panel.js as a jQuery widget.

commit 36a46de19099ee9c4eeb7b58b14862a9f3b8a4f2
Merge: 99c57b2 a245c57
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 6 22:15:17 2009 -0700

    Merge branch 'master' of git@github.com:talmdal/gallery3

commit 99c57b2036c6fbef757762a7faccc27150471892
Merge: 144a0d7 8759828
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 6 21:58:45 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3
    
    Conflicts:
    	modules/user/helpers/user_theme.php

commit a245c57400398d2b4b1c2aea94f590a9c0a7d8a8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Aug 6 21:36:17 2009 -0700

    Further streamline the code.
    
    Organize_Controller:
    * Remove unnecessary constants
    * Rename index() to dialog()
    * Simplify _get_micro_thumb_grid
    
    organize.js:
    * Move sizing code in here from organize_dialog.html.php
    
    organize_dialog.html.php:
    * Move CSS and JS links in here so that we only load them when we need them.
    * Move sizing code into organize.js
    
    organize_thumb_grid.html.php:
    * Move pagination logic in here, since it's view centric
    * Collapse the css class determination code and inline it

commit b2ef37f612f4369a72966e0efbc362039fba1734
Merge: d3f4643 144a0d7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Aug 6 21:02:52 2009 -0700

    Merge branch 'master' of git@github.com:talmdal/gallery3 into talmdal_branch

commit d3f46436999b7326e88986daa5a99516430dbf15
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Aug 6 21:02:22 2009 -0700

    * Rename setContents -> show_album to be consistent style wise (no camel
      caps) and more explicit about what it's doing.
    * use toggleClass() to simplify the +/- css management.

commit 87598288f493cadcc5c273dd7305ad579d251678
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Aug 6 20:38:42 2009 -0700

    If we fail the version check, at least show the version of PHP that the server is using.

commit 144a0d7d34d1d56aebd990f0fed8a4ef1633665d
Merge: 362b4d7 6e4023a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 6 19:28:37 2009 -0700

    trying to restore the branch from a failed revert

commit 362b4d70f72fa6baed15bd323a2ca5deea7d6ab3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 6 10:03:38 2009 -0700

    Remove 6 more lines by removing the generalization of the close dialog processing

commit 93c0dffab3ba3631c9ebf4693571bd38e5613d1c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 6 09:46:39 2009 -0700

    Remove the complicated calculation to determine the height of the
    micro thumb grid, by setting all the parent elements to 100% in the
    css and then subtract the height of the button bar

commit 0fc96621d55e1e6b3b5f7f84760a39ff06f0e641
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Aug 5 22:32:41 2009 -0700

    Don't show the ajaxy login link in the top right corner if we're on the login page itself.

commit 6e4023a7207b721694403f38d6afb7a507468498
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Aug 6 16:16:11 2009 -0700

    Fix indentation.

commit 3850587519b6f281531651e6790803c3eaa41244
Merge: 7ea05ea 794a7a5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Aug 6 16:15:40 2009 -0700

    Merge branch 'master' of git@github.com:talmdal/gallery3 into talmdal_branch

commit 794a7a5abf38ed828329cb0023df938479e90901
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 6 14:55:03 2009 -0700

    Leverage the gallery.dialog/js functionality in order to reduce duplicate code

commit c09e2ef7af5411f239ba7f1adb01be39b2950b84
Merge: b826182 ad19e29
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Aug 6 12:44:39 2009 -0700

    Merge branch 'master' of git@github.com:bharat/gallery3 into bharat_branch

commit 7ea05eacd7b8bd18d817996c5240b33b2a79fd18
Merge: cd5c996 7ed15ea
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Aug 6 11:21:18 2009 -0700

    Merge branch 'master' of git://github.com/talmdal/gallery3 into talmdal_branch

commit 7ed15ea481565b1364573a814c0529adaf9f2eb7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 6 10:03:38 2009 -0700

    Remove 6 more lines by removing the generalization of the close dialog processing

commit d7c7a06efe0171f65c120a8cf8fe7b41382d36c9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 6 09:46:39 2009 -0700

    Remove the complicated calculation to determine the height of the
    micro thumb grid, by setting all the parent elements to 100% in the
    css and then subtract the height of the button bar

commit b826182b7a7b2d630b478d3e2bcf0628989a92d9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 6 22:22:24 2009 +0800

    Cleanup the javascript for enabling dialog or panel links.
    1) We don't need to loop over the elements to bind the event handler.
    2) Just include gallery.panel.js for all the admin pages.
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 5997f57323ff6608de75c3700bbcde8b8d0f3bbf
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 6 07:22:24 2009 -0700

    Cleanup the javascript for enabling dialog or panel links.
    1) We don't need to loop over the elements to bind the event handler.
    2) Just include gallery.panel.js for all the admin pages.

commit 7bdf382e813515ce7ab6e14f0b8e3e0b7b6bd867
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 6 07:02:41 2009 -0700

    Revert "Revert "Revert "Allow a theme to override the page refresh mechanism.  Create a new"""
    
    This reverts commit 7b1cca168cb9b29fcccdcdce9e32efb190e4575e.
    
    Basically remove it and Bharat and I will fight it out in SF for a resolution :-)

commit 8131e6fa380d52faa7c1dc9a59c2e83a4adb9134
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 6 06:33:17 2009 -0700

    Tighten up the code by loading all the albums in the tree at once, removing
    the events to populate the button bar.

commit 26362ae7e2917a33858ebde7274ccb0f90351293
Merge: cab46cf f0b3d37
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Aug 6 04:50:30 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit cd5c99668bf578561d978c2549330a338b775199
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Aug 5 22:32:41 2009 -0700

    Don't show the ajaxy login link in the top right corner if we're on the login page itself.

commit cab46cf0386061840498f3efe32c7030e07d2e04
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Aug 5 22:28:37 2009 -0700

    Remove the resize dialog on window resize functionality

commit f0b3d37d18c19a170dc737dc01e002d26535a9b3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Aug 5 22:17:03 2009 -0700

    Chain some jQuery calls together to reduce lines of code.

commit a6fb9a69a0cf8bfc6de73ce5a86c38da4d5859a4
Merge: a03f8b1 b394b0b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Aug 5 17:47:33 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit a03f8b1003093b385e9c839c1e5e2e4f80f0cd0b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Aug 5 16:45:44 2009 -0700

    Fix up formatting of items in thumbgrid

commit 824a80b0d4b5c12f5bd6981cac08b406de637dd3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Aug 5 15:24:31 2009 -0700

    Change the content pane based on the selection in the album tree

commit a92a46b0cda18a3ba794a67c07181a2ca405a2a6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Aug 5 11:04:42 2009 -0700

    Change to use the new children and children_count API

commit b394b0b2c67d680fad61880a01885e8b2c750ce5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Aug 5 11:01:48 2009 -0700

    Fix the default $orderby to be an associative array in descendants() and children(), thanks Tim!

commit fb4bfa5711f6db61205b58628ec978b68c3d36df
Merge: 63f3efe e8c5729
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Aug 5 10:45:38 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit e8c57290a2e98e3cbb7cf47875e6e5dae2e41fa2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Aug 5 10:38:53 2009 -0700

    Change the children and descendants APIs to be more consistent and to
    remove Gallery3 concepts from ORM_MPTT.
    
    The following API methods:
      ORM_MPTT::children
      ORM_MPTT::children_count
      ORM_MPTT::descendants
      ORM_MPTT::descendants_count
    
    All now take a $where clause that allow you to pass through additional
    field parameters.
    
    old API:
      $album->children(10, 0, "photos")
      $album->children_count("photos")
    
    new API:
      $album->children(10, 0, array("type" => "photos"))
      $album->children_count(array("type" => "photos"))
    
    This gives us a more flexible API and simplifies the code.  While I
    was in there, I changed the way we deal with default orderby values so
    that we just assign the default value in the function definition,
    which allows us to get rid of all conditionals in the implementation
    which results in simpler code.

commit 63f3efef37839ffba8cd75b9098d56cd03b06376
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Aug 5 10:26:49 2009 -0700

    Revert "Revert "Enable the expand/collapse of branches by clicking on the plus/minus""
    
    This reverts commit e37526f94df74a52a9cf36f0a5a5e641958ebbb3.

commit 65c850c393ce6159289e3fd05056c33e7d62e961
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Aug 5 10:26:11 2009 -0700

    Revert "Revert "Checkpoint the organize module rewrite.  At this point, it doesn't really do""
    
    This reverts commit 397468c47b8fc3fefeb54ff19a73980ed1dd8c20.

commit 7b1cca168cb9b29fcccdcdce9e32efb190e4575e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Aug 5 10:25:23 2009 -0700

    Revert "Revert "Allow a theme to override the page refresh mechanism.  Create a new""
    
    This reverts commit 9f396178cedc96abb282e72ff0e843e255c8225a.

commit 9f396178cedc96abb282e72ff0e843e255c8225a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Aug 5 09:24:27 2009 -0700

    Revert "Allow a theme to override the page refresh mechanism.  Create a new"
    
    This reverts commit 1f014aae6c16bbda62d8f5937180f11ccb0eb1b1.

commit 397468c47b8fc3fefeb54ff19a73980ed1dd8c20
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Aug 5 09:23:32 2009 -0700

    Revert "Checkpoint the organize module rewrite.  At this point, it doesn't really do"
    
    This reverts commit a25f08d433d504a53763feb358a1aa7f5f798de6.

commit e37526f94df74a52a9cf36f0a5a5e641958ebbb3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Aug 5 09:23:01 2009 -0700

    Revert "Enable the expand/collapse of branches by clicking on the plus/minus"
    
    This reverts commit 869c3de9612a598dae0ce400991bdbe173a2decc.

commit 869c3de9612a598dae0ce400991bdbe173a2decc
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Aug 5 08:31:58 2009 -0700

    Enable the expand/collapse of branches by clicking on the plus/minus
    icons.  Branches with no albums, will not have an icon.

commit 5f47271e3216c0a3c533174d8ff0937f9947584e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Aug 5 07:51:19 2009 -0700

    Remove tabs as whitespace

commit 81d39a9bb15577b0c8a59b2b14fd27fb1b7d26d9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Aug 5 07:47:17 2009 -0700

    Remove the trigger definition code

commit 187d4b209d6bd3fce2fa81a88e31f587d9eb4624
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Aug 5 07:38:35 2009 -0700

    Change the children methods on Item_Core and ORM_MPTT in order to
    specify a type parameter, so tht we can filter the children based
    on type (i.e. album, photo, etc).
    In addition, expose the sort order, so that we can specify the order
    we want to return the children.

commit 2f63a5379f668188d4e1a46231246a25445e40fa
Merge: a25f08d b9a6cd4
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Aug 5 06:51:27 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 3a8837726a6618139813ea88b007909d32da752b
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Aug 4 23:52:36 2009 -0600

    White space fixes.

commit 58dbee03e5ef44280fff57637c7b51e5d614ba66
Merge: 9a55eb4 b9a6cd4
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Aug 4 23:38:11 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit b9a6cd45ba0b32a115dedd8b3fa3962eb82202e1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Aug 4 20:35:13 2009 -0700

    Skip empty files, since we know they're broken.  Fixes ticket #610.

commit a03b9273b2afc61dfdea43f679e75639238cdcd7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Aug 4 20:34:46 2009 -0700

    Dump any exceptions into the standard Kohana log as well as the task
    log for maximum exposure.

commit 1e72860566b80c009d657d6b45cea09986983e6f
Merge: fb9efa6 703e84a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Aug 4 20:21:35 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit fb9efa664b686c540708098ed6b55305c3a6084e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Aug 4 20:20:43 2009 -0700

    Check for the SimpleXML module, thanks to geekonek.
    Fixes ticket #599.

commit 703e84a94d29d0f4798ad60540ee87734bbdd6d9
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Wed Aug 5 09:58:49 2009 +0800

    Fix l10n message for akismet, extracting URLs from the message
    
    Signed-off-by: Andy Staudacher <andy.st@gmail.com>

commit 2d63348ef6c89386f5aec9f567cb4c270bcbe02a
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Aug 4 18:58:49 2009 -0700

    Fix l10n message for akismet, extracting URLs from the message

commit 9a55eb4df8346f9a81fbd4a1fb4daa7b807e80e0
Merge: 9104fa7 ad19e29
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Mon Aug 3 22:53:47 2009 -0600

    Merge branch 'master' of git://github.com/bharat/gallery3

commit ad19e29c469295189a2d13772706e39e3bd3dfc7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Aug 3 21:50:01 2009 -0700

    Add the context menu to the photo/movie pages also.

commit 52147cf6f857c4c54a2f3d753e72b27b5141d028
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Aug 3 21:45:54 2009 -0700

    Combine the quick menu and the thumb menu into a single menu called
    the "context" menu.
    
    This new context menu is generated using the typical event processing
    system, like our other menus.  The specialized quick CSS and JS is now
    gone, replaced by our generic menu handling code.  It's all rolled
    together currently using the thumb_menu UI for easy packaging.  All
    the CSS and JS is updated.
    
    NOTE: the non-dialog links (rotate, album_cover) have a broken UI
    because they return JSON which the quick.js code handled specially,
    but we don't handle properly now.  I need to fix this.

commit 9104fa7b55d4613792208956bbd0098bd89b033c
Merge: cc2711d 7ad0808
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Mon Aug 3 21:41:38 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit a25f08d433d504a53763feb358a1aa7f5f798de6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Aug 3 09:19:17 2009 -0700

    Checkpoint the organize module rewrite.  At this point, it doesn't really do
    anything, but get the dialog up, populate the album tree and intelligently
    populate the micro thumb grid.
    Still to do:
    1) get the microthumbs laided out ptoperly
    2) expand and collapse functionality in the album tree
    3) use the album tree to change the content of the micro thumb grid
    4) Actually add some functionality
    
    At the moment, it supports a callback "" to allow modules to add icons
    to the organize drawer label.  The close button is added outside of this
    framework as it will always be last.

commit 2e82c5e9ca3a924e98d8998b397d25c83d716d55
Merge: bb8c83d 7ad0808
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Aug 3 08:12:39 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 7ad0808a117fd1db4e94da8d7763ccca1d69350a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Aug 2 12:09:00 2009 -0700

    Change the API for getting to the original state of an ORM.
      Old API:  $obj->original("field_name")
      New API:  $obj->original()->field_name
    
    This allows us to revert the varous xxx_updated events back to passing
    an original ORM as well as the the updated one.  This makes for a
    cleaner event API.
    
      Old API:  comment_updated($comment) { $comment->original("field_name") }
      Old API:  comment_updated($old, $new) { $old->field_name }

commit cc2711dce99972f60bf590fe858b2eaa9d0d2397
Merge: 9d70f14 f034c6c
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Jul 31 23:07:38 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit bb8c83db819a99e34ba45e9c1c31a79e08b7c194
Merge: c4937bb f034c6c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 31 14:51:37 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit f034c6c534ad6a07dacc6e64c7e6b43f139c3831
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jul 31 13:32:07 2009 -0700

    Add new events:
      graphics_resize
      graphics_resize_completed
      graphics_rotate
      graphics_rotate_completed
      graphics_composite
      graphics_composite_completed

commit c4937bb895d294fea4bee40f8ea7dc1ab2727dfb
Merge: 0a2da77 86c7fab
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 31 11:03:08 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 86c7fabeaf6fcc9fbbdf1c1a7dc2a3cf9c9a6366
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 31 20:27:53 2009 +0800

    Simplify getViewportSize function to use the jQuery height and width functions
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 64aa96b5527b0a887800bb4d7868495b4397da74
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 30 21:00:10 2009 +0800

    Move the getViewportSize method to gallery.common.js
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 0a2da7731ad7d1cf7c0164a455457d91ba767e83
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 31 05:27:53 2009 -0700

    Simplify getViewportSize function to use the jQuery height and width functions

commit 7aa03e59bad72d549c348a597c0d9b6fd63e0fa6
Merge: d3ce7f7 19d89f9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 30 19:25:43 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 9d70f142199f4f3c3ec63fcbb125f5c33c91d9ec
Merge: ca4f03b 19d89f9
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Jul 30 17:28:05 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 19d89f94f9939bbd879d6c8ead4e802f592ec808
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 30 09:57:24 2009 -0700

    Remove debug statements

commit 031a19724ae361825f18d3e29d3fdf1fa9f9b303
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 30 09:55:09 2009 -0700

    Update golden file

commit 0f43b35747b671f76a3b4393e870804ad8a930d4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 30 09:54:59 2009 -0700

    Fix a static function declaration.

commit d3ce7f7e36bac0e03db7028eb915ab066124a669
Merge: d34c6b6 fc3273d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 30 08:09:40 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit fc3273da4d0b34310ba304310396527430c98ce2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 30 08:02:54 2009 -0700

    Add some code to guard the weight calculation against zero rows when
    we're doing an initial install.

commit d34c6b6fb398f7b5f529dd2524fe0895a4b92e8c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 30 06:00:10 2009 -0700

    Move the getViewportSize method to gallery.common.js

commit fc7ef17e0fb08459a84ba9ba0654664e519e6a0f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 30 05:27:19 2009 -0700

    Remove try statement w/o catch

commit 29f5a231c710dc1fb63a1ae06bbc985b9c459711
Merge: 6f1da3a 67d4ae2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 30 05:15:24 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3
    
    Conflicts:
    	modules/gallery/models/item.php

commit 67d4ae21d5f7363f54782c23d2a7ff1d9e9f0505
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jul 29 17:43:12 2009 -0700

    Clean up user form events.  Thanks to Ben Smith (glooper).

commit 2473418ea3156e75d10afe9d9e10b7a974f2c6dc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jul 29 17:35:56 2009 -0700

    Show the author's username if the author has no fullname.  Fixes ticket #601.

commit 15f148349e8dd9145d33fbdbc85142b9a864b6ed
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jul 29 17:25:53 2009 -0700

    Make body_attributes() a theme callback instead of a method on the
    View.  This allows modules to piggyback on it.

commit ca96d4719608d4a8a62457ecf3e54ac8ca29629a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jul 29 16:58:29 2009 -0700

    Oops, I removed too much in my last change.  Put talmdal's query back,
    but change it to use Database instead of ORM for a little more
    efficiency.

commit 6f1da3aba426329eef312831365de29f89529d9f
Merge: 653c291 9d2420e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jul 29 16:47:16 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 9d2420e789cd02d459e7b1504b995bd9f4e84d00
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jul 29 16:45:26 2009 -0700

    Updated for gallery v10

commit 5d0413631fcb4f84bcdcf26a6f102573911af89f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jul 29 16:44:51 2009 -0700

    Bump the gallery version to 10 in install()

commit 7438a9c8893a5f584df3fb6a1552262c7da39b86
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jul 29 16:40:01 2009 -0700

    Remove some scary debug code.

commit ead6a61d9e96d37ca3a0aecb93d18755099e341c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 30 01:55:56 2009 +0800

    Fix for ticket #576
    Add a weight index to the item table and changed the retrieval of the maximum
    weight to select weight from items order by weight desc limit 1.
    
    Upgrades the gallery module to version 10
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 653c291d94f02e3e292541fe39d9fc95bf3d22ba
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jul 29 10:55:56 2009 -0700

    Fix for ticket #576
    Add a weight index to the item table and changed the retrieval of the maximum
    weight to select weight from items order by weight desc limit 1.
    
    Upgrades the gallery module to version 10

commit eb90fc9e63e35e1131f19204a370fe711f5ecc01
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 30 01:25:50 2009 +0800

    Remove debugging print statement in search.php
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 5a677975d044f088677d00d04c8e0ff5e3254959
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jul 29 10:25:50 2009 -0700

    Remove debugging print statement in search.php

commit a533099e8ad549d39b21230d12a2099d5d679f4e
Merge: 3461b4e e6d6e49
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jul 29 05:17:25 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit e6d6e498c0acbe1e97b07c0c5a357a84b65f06f9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 28 21:21:09 2009 -0700

    Adjust the velocity based on whether or not we're waiting for more
    updates to get smoother scrolling.

commit 3461b4e8e65791ae4e01fd45da5df76a9a929dbf
Merge: 2d770f1 3058623
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jul 28 20:49:50 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 30586236a5b6c71542a02fa13a0018ff4da6eb19
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 28 20:44:50 2009 -0700

    Make sure the thumb_menu has the gThumbMenu CSS class.

commit 544e92adc983a15ab3789c87b41b047cdc453aac
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 28 20:32:11 2009 -0700

    Move site_menu and admin_menu into gallery helper so that site_menu
    can call admin_menu.

commit eda2d75fa0fc1fa3f4c8b5f1dcbdc446419f7bd5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 28 20:31:24 2009 -0700

    Disable smooth progressbar scrolling when we're at 100% (else the
    progressbar trucks along slowly even though the task is done).

commit 44bc74edb9ae77bfaeb70f708411026131ec12bb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 28 20:30:34 2009 -0700

    Change search callbacks to use the event system, so move them out of
    xxx_search helpers and into xxx_event helpers.

commit 1e90e40d3a9fe2cb826b56686f23a33879418048
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 28 13:47:22 2009 -0700

    Use events to generate menus, instead of having xxx_menu helpers.
    This is the first step towards having a simple, lightweight and
    unified API for module interaction.

commit 2d770f1d2784f5559c3ca892c6cfd8db381f2854
Merge: dfaf870 f5c4d23
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jul 28 13:31:42 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit f5c4d23e5756c460099f04ca5a57c0002292d9da
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jul 28 21:33:25 2009 +0800

    Convert the album add dialog to use the new Form_Script library
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit dfaf8703101be049def4cfabbd4c44194a2bd3f7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jul 28 06:33:25 2009 -0700

    Convert the album add dialog to use the new Form_Script library

commit a7f4d7aced009007d36e48685648e9bc3382f8cb
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jul 28 20:40:28 2009 +0800

    Revert commit 078c77a62b623322956457bfd7bfbdaf56203b00 and change the
    tag_event:item_edit_form to use the new Form_Script library to inject
    script into a form.
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 2e8f73d4e96e4e114493f703a5c2c0207fad5cf5
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jul 28 05:40:28 2009 -0700

    Revert commit 078c77a62b623322956457bfd7bfbdaf56203b00 and change the
    tag_event:item_edit_form to use the new Form_Script library to inject
    script into a form.

commit 69f9aea5db38c020a350c5505c2694f3e79f77b5
Merge: 4550969 2f969c8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jul 28 05:03:49 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 2f969c80eb2e228f2c5729c6f4660c99555f9c9f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jul 28 11:59:58 2009 +0800

    Create A Forge Script element. Form_Script allows the specification
    of either a url to a script file or in line text which will be included
    in a script block.
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 4550969101f04dda6573afc59c57897710a3f149
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jul 27 20:59:58 2009 -0700

    Create A Forge Script element. Form_Script allows the specification
    of either a url to a script file or in line text which will be included
    in a script block.

commit 975a5ded7b6cc11ce55f2a9bbaa43d4897687b37
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jul 28 09:04:55 2009 +0800

    Clean up amd simplify the tag processing: Only allow comma separators between
    phrases.  Using only 1 separator cleans up the javascript as well, as we
    can use some of the jquery autocomplete to set the tag separator.
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 4b6775e614040e91fce8a142f840d44258713a85
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jul 27 18:04:55 2009 -0700

    Clean up amd simplify the tag processing: Only allow comma separators between
    phrases.  Using only 1 separator cleans up the javascript as well, as we
    can use some of the jquery autocomplete to set the tag separator.

commit a4c807232abaa4edd501ad5f4d7f06dac64f7ff8
Merge: f21044a ecc9203
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jul 27 15:49:20 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit ecc9203c2352bdfa3738998f27268293345ec0e9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jul 28 04:54:20 2009 +0800

    Standardize the specification of tags.
    With this patch a comma(,) is the only valid tag separator.  Spaces
    are allowed in tags and phrases no longer need to be specified with a
    dot.
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 7efb4b4cdfba4c0280b18d1980cd8ad011360b87
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jul 27 15:17:14 2009 -0700

    Remove the unnecessary ORDER BY on $this->sort_column in
    get_position(), and instead apply an ORDER BY on `id` in the 2nd query
    so that we have stability among the equal elements.  This should
    result in cheaper (and more sensible) queries.

commit f21044ae1d4574daa992818afec85045598cd057
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jul 27 13:54:20 2009 -0700

    Standardize the specification of tags.
    With this patch a comma(,) is the only valid tag separator.  Spaces
    are allowed in tags and phrases no longer need to be specified with a
    dot.

commit 1f014aae6c16bbda62d8f5937180f11ccb0eb1b1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jul 27 12:39:12 2009 -0700

    Allow a theme to override the page refresh mechanism.  Create a new
    javascript lib (gallery.reload.js) which defines the functions
    gallery_reload() and gallery_location(new_location).  They just
    do a window.location.reload() and window.location = new_location.
    
    This change breaks the assumption that all themes will handle page reloads
    the same and allows the theme to customize the page refresh.

commit b3fe70e654c1519f8f1d54a80f99d0af7a8f2e49
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jul 27 11:34:27 2009 -0700

    Updated.

commit e68599f6d7dd2e18beaf48d9ba635ae93670101f
Merge: d18f31a 4edf86f
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Jul 27 11:27:50 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit d18f31ab218c8d79d97b19079ac0078e6155bc39
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Jul 27 11:25:23 2009 -0700

    Revert "Remove an useless ORDER BY."... the order by wasn't all that useless.
    
    This reverts commit c80d2da0a95a63b76f5a4c835f1a0e1022ec2f53.
    
    Conflicts:
    
    	modules/gallery/models/item.php

commit 4edf86f0ebfedbbdfda3daf71ed55a461edf9c6c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jul 27 11:14:03 2009 -0700

    Revert "Fix for ticket #452"
    
    This reverts commit 809e52d80cbf3beb75b238fddb0da3951fb9a8e7.

commit 5fd82a2edea41209a6936f89c56bbd53083ed182
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jul 27 11:13:20 2009 -0700

    Back out the fix for ticket #452
    Revert "Changed access::user_can to force the owner of an item to have"
    
    This reverts commit 0b97cfd6f098be08be5f3cf1dbca1cce580ae330.

commit 1ec1f19f1a388ed8f49af13d0de77e714c286811
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jul 27 11:12:27 2009 -0700

    Back out fixes for ticket #452
    
    Revert "It helps to save before committing :-)"
    
    This reverts commit 0d76d6fd77f53e9e92a9a013cd112c69217f3ceb.

commit 482e223b602d60eec424081d0328cde66d28a758
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Jul 26 23:58:46 2009 -0700

    Updating install.sql with the packaging script, basically re-adding the charset (utf8) expressions that were removed by merging in rledisez's left/right -> left_ptr/right_ptr changes.

commit 570e0b0267a2a7acd00f1936a62f13f7f2e973c9
Merge: a7af9bb 23bb6eb
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Jul 26 22:45:53 2009 -0700

    Merge branch 'master' of git://github.com/rledisez/gallery3 into rledisez/master

commit ca4f03b93e1c5eb90d1677684fd5220c000d7d34
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Jul 26 16:32:42 2009 -0600

    Backed out vAlign change, it isn't working.

commit a7af9bb456fa840d0be2f83145a642e202be3325
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Jul 26 16:02:53 2009 -0600

    Missed committing the gBanner addition to the view template.

commit 04ed02fedd264bb3fb4f638176aae7595a8da7ca
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Jul 26 15:57:26 2009 -0600

    Updated wording of tag separator tip

commit ab02c2a40b0359dce959b2734dc50cbee276d591
Merge: 26117ac 0d76d6f
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Jul 26 10:54:44 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 26117accb62a58728da5e3c9b9166980a955ab44
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Jul 26 10:54:21 2009 -0600

    Update to how gSiteMenu is positioned. Required addition of a new container, gBanner. This will ensure proper positioning across most browsers and simplifies gBreadcrumbs styles. Removed inaffective IE opacity style.

commit 0d76d6fd77f53e9e92a9a013cd112c69217f3ceb
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jul 26 09:33:44 2009 -0700

    It helps to save before committing :-)

commit 0b97cfd6f098be08be5f3cf1dbca1cce580ae330
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jul 26 09:29:29 2009 -0700

    Changed access::user_can to force the owner of an item to have
    view permission on the parent. Added a whitelist of allowable
    owner permissions.
    
    If the requested permission is view and the user requesting access
    is the owner, check that they have view permission to the parent.

commit dcc3249f2186843ff81a9fa604d103a535842b27
Merge: 8f9b5dc 809e52d
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Jul 26 09:24:36 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 809e52d80cbf3beb75b238fddb0da3951fb9a8e7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jul 25 23:45:48 2009 -0700

    Fix for ticket #452
    1) Change access_Core::user_can to return true for all permissions if the
       owner is the specified user.
    2) Change Item_Model::viewable to set the owner_id is the first view_restriction
       This allowed simplification of the generating the where clause to a single
       $this->orwhere instead of a where and an orwhere.

commit 8f9b5dcf83ffde65f45d9eb4f103407103764dfa
Merge: eca46d7 f8516b5
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Jul 25 19:33:11 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit f8516b55d2f0fcf145bb6c27475d633e8a89ccf8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jul 25 15:18:41 2009 -0700

    Fix for ticket #594. Forced the directory name to be required when editting the album.

commit 00cd2b646d535e48a21b0b7ceff028ad1bdc2c28
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jul 25 15:00:57 2009 -0700

    fix for ticket #574. The user->url database wasn't being set when the user was updated via the admin panel.

commit 7a6952720c5aa210d76c3cc716e536edd710cf56
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jul 25 14:48:10 2009 -0700

    Pass the  variable when the "user_edit_form" event is fired.

commit 23bb6eb7e35637c8a2124216dbb6d3246ad3d702
Author: Romain LE DISEZ <romain.git@ledisez.net>
Date:   Sat Jul 25 19:06:54 2009 +0200

    Rename columns that use reserved SQL words : items.left and items.right

commit eca46d76a7832f771d377edb3939ea1aded2fac9
Merge: 6351131 50d6cc0
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Jul 25 09:25:31 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 0aa3ec3ae90a101b2bfc1b395a1749551da22287
Merge: b181707 50d6cc0
Author: Romain LE DISEZ <romain.git@ledisez.net>
Date:   Sat Jul 25 13:59:04 2009 +0200

    Merge commit 'upstream/master'

commit 50d6cc0150b930d79d3e8b90956ffa9655fcc9c5
Merge: 5c8a2a7 078c77a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 23 22:08:29 2009 -0700

    Merge branch 'master' of git@github.com:/gallery/gallery3

commit 078c77a62b623322956457bfd7bfbdaf56203b00
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 24 14:18:15 2009 -0700

    Add tag autocomplete to the album and photo edit pop up dialogs.
    This required putting a wrapper view around the forms and passing
    this view as the parameter to the item_edit_form event.  The view
    contains a $script variable that the modules can add script to be
    included in the form html when rendered as part of the ajax response.

commit fa1d32e6466d8c6ffe77d163e2da9c71688a3c61
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 24 11:24:43 2009 -0700

    Partial implementation of ticket #80. Provide auto complete and suggestions on the tag add form in the tag sidebar block.  Updated the xss golden file as well.  Still to do figure out how toget it into the edit popup dialog

commit 5c8a2a750ccc16b5e8b0dd97ff21dbfb9860d856
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 23 20:43:32 2009 -0700

    Smooth out the animaation for the progress bar.

commit 6246a917978e5d955c5e2fc49fc8c1a045aabedf
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 23 17:33:57 2009 -0700

    Add in more images referenced by CSS that I forgot to copy over from the default theme when I combined the CSS

commit 01aea268e67e2e036da138abc66de45ff62540ee
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 23 17:15:53 2009 -0700

    Disable the album cover icon if the item is already the current album cover.

commit 0bf69c63d852e2a33b79a5bca2dcdc16066e8937
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 23 16:58:26 2009 -0700

    Don't escape & in JS text; it triggers the "Disallowed key characters
    in global data." check in the Input library.

commit e3a1bb2c7265af5467fbe0f3a41e8718db3a94a4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 23 16:38:47 2009 -0700

    Updated version of installer sql:
    - gallery_version is gone
    - access related columns are now binary (Postgres)
    - for some reason we've reverted back to the /*!40101*/ style settings
      in mysqldump.

commit 0e9b80d2efb942167fef269441e65722abac5f54
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 23 16:20:40 2009 -0700

    Updated golden file

commit b0475ca4508ae3a8cf0f624bb3ca2f25377b20d8
Merge: 6719041 913d63b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 23 11:59:10 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 67190412e6e3196eeb43aab4bb86b970cdf1595c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 23 11:57:34 2009 -0700

    Respect the $type parameter on Tag_Model::items_count()

commit b181707c1651af8737c2e6ff550fd20f480b781b
Merge: 3861301 070884d
Author: Romain LE DISEZ <romain.git@ledisez.net>
Date:   Thu Jul 23 19:44:40 2009 +0200

    Merge commit 'upstream/master'
    
    Conflicts:
    
    	modules/gallery/helpers/access.php

commit 913d63b1a0cf45922639f43159027e7221344b73
Merge: 1fbdf1a 070884d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 23 10:43:40 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 1fbdf1a1e00a176686b051bb932d998ad683b2be
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 23 10:33:04 2009 -0700

    Add form processing events:
     user_add_form_admin            admin adding a user
     user_edit_form_admin           admin editing a user
     user_add_form_admin_completed  successfully added a user (admin)
     user_edit_form                 user editing their own settings
     user_edit_form_completed       successfully edited a user (admin and user editing own settings)

commit 070884d9e248ba692e49949851099e4d79285ef2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 23 10:23:00 2009 -0700

    Fix for ticket #496. replace the src attribute (non standard) with the title attribute to contain the url of the tag cloud controller.

commit 41b8f943a63fe2b183ea683016cefd792ef39bf3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 23 10:20:49 2009 -0700

    Convert instances of theme_url() to just url() to match the API change
    made in dbeadc1407293d0c7af36723db6fe5699890b845

commit ac23b9be185d98e3b672dc4c9051dba1ec9d10fc
Merge: fa0c17a 7f1a7ea
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 23 09:29:29 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit fa0c17ab5be2724b7fa850f2077afe7e69d6ef4d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 23 09:26:04 2009 -0700

    Make tag handling consistent by converting spaces to periods and using commas or semi-colons as separators

commit 7f1a7ead589ce85e029ff0eb7f7e88bd04b8c8cb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 23 09:24:33 2009 -0700

    Fix a typo in a comment

commit 216a21ba8a2580811596b353261dfb88e2b09bd6
Author: Romain LE DISEZ <romain.git@ledisez.net>
Date:   Wed Jul 22 15:40:49 2009 +0200

    Upgrade code to migrate the ACL from integer to boolean.
    Related to 719c59e0402464a0e2b14915f6d10218ff5d4729
    (cherry picked from commit 831bf63c236fe88624470d2906729e035e9dbfc8)

commit 2282f9977eab2c32b5192506a124c9a3ccda7578
Author: Romain LE DISEZ <romain.git@ledisez.net>
Date:   Mon Jul 20 10:51:07 2009 +0200

    Improve PgSQL compatibility in Kohana
    ( see http://dev.kohanaphp.com/issues/1855 )
    (cherry picked from commit 8cbf43ed2abe9772045766e598bb9fe3d4def983)

commit 7c7d4c0ec0386550e121da8ef0adf3fb65f7881e
Author: Romain LE DISEZ <romain.git@ledisez.net>
Date:   Sun Jul 19 01:11:13 2009 +0200

    Consistency : always use self::XXX
    (cherry picked from commit c9017ae2f21ff8f5d745f296a636b80a30add6a1)

commit 350c1b02670d971d3a389f786f46fb9be2dec8ed
Author: Romain LE DISEZ <romain.git@ledisez.net>
Date:   Sun Jul 19 00:49:47 2009 +0200

    Use BOOLEAN instead of integer to describe the permissions :
     - DENY = false
     - ALLOW = true
     - UNKNOW = null  (for intent only)
     - INHERIT = null (for cache)
    
    Upgrade is not included for now.
    (cherry picked from commit 719c59e0402464a0e2b14915f6d10218ff5d4729)

commit 386130114b3e3a9cf1617a1ea62407f569ee391c
Merge: 06fd89e 5999ccb
Author: Romain LE DISEZ <romain.git@ledisez.net>
Date:   Thu Jul 23 18:08:57 2009 +0200

    Merge commit 'upstream/master'

commit 5999ccb512d65ad9ae06a0a5542eb1123b44e9db
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 23 08:40:00 2009 -0700

    Remove extra error log line

commit 6a8cace027525e50070681d6e962b4c61cac3c2e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 23 08:37:39 2009 -0700

    Test cleanup:
    1) Specifically catch Kohana_404_Exception and let other exceptions pass, the
       test framework will report them as errors
    2) Simplify some testing idioms
    3) Change malicious address to a legal addr

commit 7c2cea01a50227088d9da567b08b9fde54b4b95f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 23 07:02:10 2009 -0700

    Fix for ticket #502
    This patch allows users with only view permission to request fullsize
    prints using Digibug.  There is now a Digibug config file that contains
    the IP ranges of the Digibug servers.  Any request for the full size
    image via the print proxy must come from within the ranges in the config
    file.
    
    The reason for the "if (!Test_Mode) {..." is that the print proxy makes a
    call to Kohana::close_buffers, which closes all the output buffers and then
    we see the image download on the console which messes up the test output.

commit 85ed445e2333a884e140afebaeba35d08079cda6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jul 22 15:20:30 2009 -0700

    remove an extra ->reload() that was there for testing

commit d4104a23ec504e451e7a96f9798ea4ed695e9d97
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jul 22 15:16:56 2009 -0700

    Add explicit unit tests for access::user_can

commit c8d215bf8015d9390201e49977b580319210a017
Merge: dbeadc1 427e113
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jul 22 14:28:33 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit dbeadc1407293d0c7af36723db6fe5699890b845
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jul 22 14:27:57 2009 -0700

    Use the Kohana cascading filesystem to locate resources loaded by the
    theme.  Because the theme comes first, this means that themes can
    override any module resources, at the cost that we no longer have
    namespacing for JS and CSS files.
    
    The only file getting used outside of this model is
    themes/default/screen.css which is used in the admin theme.  I fixed
    that by copying screen.css into admin_default and renaming its
    screen.css to admin_screen.css.  I also copied over all the images
    that it was referencing.
    
    Fixes tickets #48 and #539.
    
    Theme API changes:
    - theme_script(), theme_url() and theme_css() are no longer needed
    - script(), url() and css() now refer to the first matching asset in
      the module load path, where gallery3/lib is at the end of the path

commit 4854003f41fa8a57dc687b9a65a99498fc7c46bc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jul 22 13:03:01 2009 -0700

    bump version to "3.0 git (pre-beta3)"

commit 427e1130b26a75a59b5e180e2008f5eace398920
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jul 22 11:11:48 2009 -0700

    Modified the notification get_subscribers to ignore any users that don't
    have "view" access to the item the notification is being generated for.
    Fix for ticket: #538.

commit 06fd89e8bcad2142f0b6158d5db7a91d2b6956d8
Merge: 831bf63 4ddaaeb
Author: Romain LE DISEZ <romain.git@ledisez.net>
Date:   Wed Jul 22 19:04:16 2009 +0200

    Merge commit 'upstream/master'

commit 4ddaaeb9dd3359226d0406f85c58ea219f559e4e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jul 22 09:39:22 2009 -0700

    Duh... when I added user_can, I passed in the user, but still used the groups from the session

commit 831bf63c236fe88624470d2906729e035e9dbfc8
Author: Romain LE DISEZ <romain.git@ledisez.net>
Date:   Wed Jul 22 15:40:49 2009 +0200

    Upgrade code to migrate the ACL from integer to boolean.
    Related to 719c59e0402464a0e2b14915f6d10218ff5d4729

commit 317b7b98c094386407251c2baf8f6e7c391c7bff
Merge: 00b3ca8 f533aee
Author: Romain LE DISEZ <romain.git@ledisez.net>
Date:   Wed Jul 22 08:38:06 2009 +0200

    Merge commit 'upstream/master'

commit 63511316be51f193d37c4f3b9dd3455a9ab60de8
Merge: 7f9e71d f533aee
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Jul 21 19:40:48 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit f533aee1cc71e8db739406859ac0cf43dce030ec
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jul 21 15:52:46 2009 -0700

    Add an API method user_can that allows for checking a specific user has the
    specified permission to the item.  Changed can to delegate to this method
    passing in the active user.

commit 9f410ec764cdb8ece4dc6ce1fb1754afad929335
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jul 21 15:49:42 2009 -0700

    Always display the option menu so that modules with options that require
    menu items with view permission have somewhere to hang these menu items
    from.  If its empty it will get removed by $menu->compact()

commit 0546f0df13471664255a18b45c7464cc7f7f370e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 21 13:39:40 2009 -0700

    Fix the bug that the quick menu fires for the wrong photo.  This stems
    from using a single gQuickPane <div> that we move around.  A race
    condition happens when you mouse over two thumbnails quickly.
    Whichever server response loses the race gets displayed, and sometimes
    it's the one that you're no longer hovering over.
    
    Fix it by changing gQuickPane to be a class and creating a <div> per
    thumbnail.
    
    Fixes ticket #290.

commit 80f48b084af874fea52ed29f06a1337954b137bf
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 21 13:02:20 2009 -0700

    In the logout link, urlencode the continue url so that ampersands, etc
    don't break encapsulation.  In the logout controller, don't run the
    url through url::redirect because that uses url::site().  Just set the
    Location header directly.
    
    This fixes ticket #483.

commit f83db99d39cc65b212f894c7e4ed66a52625f3c8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 21 12:26:16 2009 -0700

    Properly display thumbnails for private movies by backtracking from
    the thumbnail to the movie and then showing it as a JPG.  Fixes ticket
    #570.

commit 8f1bca7459af7eeebb30bf116ae03c25d30836f3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 21 12:18:49 2009 -0700

    Remove the fallback code.  It should trigger extremely rarely and seems highly inefficient to me, so let's see if we can live without it.

commit 90ba32065578289898040f686cce766bfeb9cb51
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 21 11:25:03 2009 -0700

    The RSS link should go to the parent album when looking at photos/movies.
    Fixes ticket #566.

commit 2de6b77d61f79248eff99f439a96de6d5cb68f6f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 21 11:20:36 2009 -0700

    Use php_uname() instead of PHP_OS for greater accuracy.  Fixes ticket #563.

commit 050c82cf80b06a555252efaf701434b0cfd59bed
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 21 11:09:23 2009 -0700

    Escape bare & symbols so that we use valid entities.  Fixes ticket #577.

commit 7f9e71d8cdcf99267adc2b4a6332e379a0fca0fc
Merge: 329b6ce d7814f3
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Jul 21 00:06:11 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit d7814f37cb2194098bd8aa3887bd830033200e8b
Merge: ce963c9 b99774a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jul 20 22:23:34 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit ce963c9db00c25b3c1e6add1fe6032aef61a5bed
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jul 20 22:23:21 2009 -0700

    Remove the access permission call from here; this is too low level.

commit b99774ac49999e4701f1c410f0018a417a5f613e
Author: Shai Ben-Naphtali <shai@shaibn.com>
Date:   Tue Jul 21 12:13:13 2009 +0800

    Fixed grammer and set lowercase for the word project (minor change)
    
    Signed-off-by: Bharat Mediratta <bharat@menalto.com>

commit 5a0424f458323578a6b2e5395a58f3d2bfc034dc
Author: Shai Ben-Naphtali <shai@shaibn.com>
Date:   Tue Jul 21 03:30:21 2009 +0800

    Fix some consistency in text.
    This fixes ticket #546
    
    Signed-off-by: Bharat Mediratta <bharat@menalto.com>

commit 67e83e66c6c302d3bf2d0a6aa52d1f7d2ed991e5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jul 20 22:12:39 2009 -0700

    Fix indentation

commit 653badc2e1b9753f29bbb1d9fec8098716a4a2f4
Author: hiwilson <wilsonpscheung@gmail.com>
Date:   Tue Jul 21 09:44:51 2009 +0800

    set wmode='transparent' other than flowplayer.js
    (cherry picked from commit 79a46658196a98a3972983cc422d1ee544b09d4a)

commit 329b6ce28ce0424303fece0fa0f542a0f1cb39ae
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Mon Jul 20 23:06:08 2009 -0600

    Fire vAlign after gQuick ajax load is complete.

commit 1a96ce145cfa529708852a46d4cab3c0d4d1b37e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jul 20 20:47:47 2009 -0700

    Don't let the task status message exceed the size of the status column when there's an error.

commit 3aea4dd118208d6d7859ebf1d32249a8644b655b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jul 20 18:47:32 2009 -0700

    Dump out the error message along with the stack trace when we catch an
    exception from View::render()

commit 8a4fb5017ba76f6556252a43f43a15ef05eddae1
Merge: ae22abc fb7d997
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Mon Jul 20 18:29:57 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 00b3ca82de3a4858745988943a46d07b1c0fd006
Merge: 8cbf43e fb7d997
Author: Romain LE DISEZ <romain.git@ledisez.net>
Date:   Mon Jul 20 18:46:41 2009 +0200

    Merge commit 'upstream/master'

commit fb7d99740d9868938ec21449d57b9b3fe991f513
Author: Shai Ben-Naphtali <shai@shaibn.com>
Date:   Thu Jul 16 13:10:53 2009 +0800

    Changed "Forgot Your Password" text to use capital 'Y' on the word Your
    
    Signed-off-by: Bharat Mediratta <bharat@menalto.com>

commit 60d605888094f34b4f5185adcdfd01c0338eb8cc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jul 20 08:51:12 2009 -0700

    Make some API changes simplify the tag editing code.  We now have a
    good pattern for allowing modules to add their own hooks to item forms!
    
    1) Album, photo and movie forms now all use edit_item as the group and
       we publish item_edit_form and item_edit_form_completed events which
       makes it much easier in the module to handle all events.  They can
       still differentiate based on $item->type if they want to.
    
    2) Added tag::clear_all() and tag::compact() functions which takes the
       place of hiwilson's tag::update() function and is now used in
       tag_event::item_delete().  This provides a simple API that allows
       us to have a lot less event handling code.  It's less efficient
       than what hiwilson was doing before in that it will delete and
       re-add tags, but if that ever turns out to be a performance issue
       we can do something about it then.

commit 709d6c5faf7ece54046c0e2bc431a559a6b9d735
Author: hiwilson <wilsonpscheung@gmail.com>
Date:   Sun Jul 19 17:02:20 2009 +0800

    (1)Add tag edit field in album/photo edit form. (2)provide edit functionality. (3)support multi-word tagging.

commit 8cbf43ed2abe9772045766e598bb9fe3d4def983
Author: Romain LE DISEZ <romain.git@ledisez.net>
Date:   Mon Jul 20 10:51:07 2009 +0200

    Improve PgSQL compatibility in Kohana
    ( see http://dev.kohanaphp.com/issues/1855 )

commit d3fa2bed687438ead8ea64b40c23f90e231b6b61
Merge: aeff79b 33d0b82
Author: Romain LE DISEZ <romain.git@ledisez.net>
Date:   Mon Jul 20 10:49:47 2009 +0200

    Merge commit 'upstream/master'

commit 51dca582cd2cda9416ec0172f8ed9a19ba828fec
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jul 19 16:50:35 2009 -0700

    More thorough fix for #421.  Create User_Model::display_name() which
    uses the full name if there is one, or falls back to the name if
    that's all we have.

commit 2572e5810f9d66fa39fa97838818a25bf4f393f3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 21 07:29:14 2009 -0700

    Updated Kohana to r4468

commit 59e410bb792cf1d8703c17f9034b681d4114f8fc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 21 07:25:34 2009 -0700

    Updated for movieplayer.html.php update

commit 33d0b82d024df8fd85798cc4f6b9bab377f4f783
Author: Andy Staudacher <staudacher@dhcp-172-18-67-210.mtv.corp.google.com>
Date:   Sun Jul 19 15:45:16 2009 -0700

    Fix l10n message inconsistency, ticket 546

commit ae22abcdf64e10dc9f96357fbd74b3efd918d4c1
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Jul 19 16:45:14 2009 -0600

    Fire .vAlign() when gItem's changed, ex. rotated. Fix for #304.

commit 1ab8bf07ad15c1ab53afb335d32e71e01a00d4b2
Author: Andy Staudacher <staudacher@dhcp-172-18-67-210.mtv.corp.google.com>
Date:   Sun Jul 19 15:36:17 2009 -0700

    Html validation fix, ticket 572

commit b3f91167c14e98bbb35f62d7003efb0a82f142eb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jul 19 13:55:22 2009 -0700

    Remove excess success logging.  In the rebuild images case, it can
    make a huge log file.  In the l10n_client case, it's not really
    necessary to know that level of detail and it makes for a weird API.

commit bad6d215846cb115c88be0dae0039e89318b21b1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jul 19 13:48:38 2009 -0700

    Remove success logging from exif_task.

commit 5ee2e3e02c5ce927e2ecf553549f443aa4356551
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jul 19 13:46:22 2009 -0700

    Create tag::item_tags which returns all the tags for any one item.

commit 788a458a11f04e47fe1c241463785d0f0b12cf3c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jul 19 13:43:06 2009 -0700

    Remove success logging.  Only log on errors, otherwise the log is huge.

commit c46188111015a128ac4ffa1882a63924cd49b25e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jul 19 13:20:08 2009 -0700

    Don't post the item_updated() event if we're just updating the view count.

commit 0e4a7a5133dab7d834657c67fcf5d07bc1ea3211
Author: hiwilson <wilsonpscheung@gmail.com>
Date:   Sun Jul 19 18:43:08 2009 +0800

    make tags to be searchable. work with http://github.com/hiwilson/gallery3/commit/a5eef648c00ec3ddee40ebd716380ae0a50e90e7
    
    Signed-off-by: Bharat Mediratta <bharat@menalto.com>

commit aeff79b6345d01d74d8389bb6d2a3a6f401f2183
Merge: c9017ae 322e2fa
Author: Romain LE DISEZ <romain.git@ledisez.net>
Date:   Sun Jul 19 01:21:00 2009 +0200

    Merge commit 'upstream/master'

commit 322e2fab6be0717a95ca98a1d97f2e284ce5fcc2
Merge: 3b78550 df22832
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 18 16:12:40 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit c9017ae2f21ff8f5d745f296a636b80a30add6a1
Author: Romain LE DISEZ <romain.git@ledisez.net>
Date:   Sun Jul 19 01:11:13 2009 +0200

    Consistency : always use self::XXX

commit 3b7855010f3b3ef84fc7a3b8889f58edaab9c5cc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 18 16:07:28 2009 -0700

    Reduce import logging to errors only to reduce the size of the logs.
    Excessive logging results in a very slow import.

commit 719c59e0402464a0e2b14915f6d10218ff5d4729
Author: Romain LE DISEZ <romain.git@ledisez.net>
Date:   Sun Jul 19 00:49:47 2009 +0200

    Use BOOLEAN instead of integer to describe the permissions :
     - DENY = false
     - ALLOW = true
     - UNKNOW = null  (for intent only)
     - INHERIT = null (for cache)
    
    Upgrade is not included for now.

commit c78744d4f8a0cfad7ca5aa3d2867fb66d4c6b8c4
Merge: 7f5030a df22832
Author: Romain LE DISEZ <romain.git@ledisez.net>
Date:   Sat Jul 18 17:51:23 2009 +0200

    Merge commit 'upstream/master'

commit df22832a5b7e7c1962940becab1c90aaec3392f9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jul 17 18:35:06 2009 -0700

    Rename "locale" helper to "locales" to avoid conflicting with PHP 5.3.
    Fixes ticket #194

commit d692002bcfca1cc630ddd0e55b693744ef7fa924
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jul 17 18:24:31 2009 -0700

    Don't show the combined CSS/JS elements if we didn't combine anything.
    Fixes ticket #554.

commit 6200955003844ba9a196db72f068650f8056acda
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jul 17 18:19:43 2009 -0700

    Don't bother making gzencoded version of combined CSS/JS if zlib.output_compression=On

commit bb981bb7b60d6b0155b73bbb37edb25f2f207ec0
Merge: e7c6861 cd907c2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jul 17 16:58:15 2009 -0700

    Merge branch 'master' of git@github.com:/gallery/gallery3

commit e7c6861507ea7ca01d3d4ed7b4189c030c8d07b3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jul 17 16:58:00 2009 -0700

    Don't send back the gzipped version if we're using
    zlib.output_compression in PHP, since that means that the stream is
    already compressed.  Fixes ticket 555.

commit cd907c2b42f8b50ebe6d490aab42365e16deb258
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jul 17 12:51:27 2009 -0700

    Change model_cache::clear() API to clear everything.  This prevents
    old ORM relationships from hanging around, which was causing problems
    when doing MPTT manipulations (resulting in incorrect permission
    propagation-- very bad!)

commit 8a6556b30bc34d69284df6246f4010a8835f3bc2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jul 17 08:14:08 2009 -0700

    Fix a bug where moved items don't properly inherit permissions from
    their new target.  After each move, recalculate the permissions for
    the new parent's hierarchy.
    
    Fixes ticket #552

commit 0f766b149d0cee7af664f2321fddc6f04cda70ac
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 16 12:29:16 2009 -0700

    Second non-trivial change to the event code.  We now publish model
    related events from within the model handling code.  The only
    exception to this currently is item_created which is challenging
    because we have to save the item using ORM_MPTT::add_to_parent()
    before the object itself is fully set up.  When we get that down to
    one call to save() we can publish that event from within the model
    also.

commit 43324fd12a23b35707300ff110f207552c3811f1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 16 12:29:01 2009 -0700

    Update golden file to match recent changes in event code.

commit 5b3b675b6d8a1cd9a5f2b9455c551791e18d88ff
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 16 11:19:34 2009 -0700

    Non-trivial changes to the event handling code:
    
    1) The item_updated event no longer takes the old and new items.
       Instead we overload ORM to track the original data and make
       that available via the item.  This will allow us to move event
       publishing down into the API methods which in turn will give us
       more stability since we won't require each controller to remember
       to do it.
    
    2) ORM class now tracks the original values.  It doesn't track
       the original relationships (no need for that, yet)
    
    3) Added new events:
         item_deleted
         group_deleted
         user_deleted

commit 2864aceb8117d0644b264ceca4d0f84fd028538f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 16 10:58:42 2009 -0700

    Add missing ) dropped in 8f9a943f.

commit ec634c91a6824185485f9349cfe15d6e759bb23e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 16 10:45:06 2009 -0700

    Stripped the trailing ?> without changing whitespace.

commit 2cd0d6389c39badc1c3c7963e03f80097eaac3c2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 16 10:44:23 2009 -0700

    Revert "Remove trailing ?>."
    
    This reverts commit a333e01bd1c8cb3ad08cd0ad16023e3fcdfc4181.

commit a333e01bd1c8cb3ad08cd0ad16023e3fcdfc4181
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 16 10:32:18 2009 -0700

    Remove trailing ?>.

commit d9f3e0bc0e6e7e21025f65ec34c83717af47ba9b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 16 10:27:18 2009 -0700

    Remove spurious blank line at the top of the file introduced in 09c9b1a75561881a40ada71f02710355923602e2

commit b46998e392bbf52fadc9c8e13271d911dff01cbe
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 16 10:24:10 2009 -0700

    Update Xss_Security_Test to know about p::purify() and checkpoint the
    golden file.

commit 49f445ce153f321688db970fbcbc9742183b9ed0
Merge: 39fa93e 85b0f58
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 16 10:20:46 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 7f5030ac208c30a7dc576a57cd9e665022ccbde5
Merge: 923732c 85b0f58
Author: Romain LE DISEZ <romain.git@ledisez.net>
Date:   Thu Jul 16 17:31:20 2009 +0200

    Merge commit 'upstream/master'

commit 85b0f580291e375a2c5ec21b8210e59023ee24c2
Author: Kevin Nehls <kevin@kevinnehls.com>
Date:   Thu Jul 16 12:28:00 2009 +0800

    move fix for backslashes on windows outside of loop per bharat's suggestion
    
    Signed-off-by: Bharat Mediratta <bharat@menalto.com>

commit 5cb2f42628bdfa66a1a0821efb5f9d8e78f06626
Author: Kevin Nehls <kevin@kevinnehls.com>
Date:   Wed Jul 15 11:41:10 2009 +0800

    Fix backslashes in relative URLs of combined css files.
    
    Signed-off-by: Bharat Mediratta <bharat@menalto.com>

commit b96ac1eb81b7ccd5bd050ffab0ca9ce1feec8f4f
Author: Kevin Nehls <kevin@kevinnehls.com>
Date:   Wed Jul 15 21:28:00 2009 -0700

    move fix for backslashes on windows outside of loop per bharat's suggestion

commit 39fa93eec7f81a32b63c4ecff2b64ae34ad365d3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jul 15 21:06:42 2009 -0700

    Simpler solution for #545.  Just don't show the form if the storage dir isn't set up yet

commit 9b69dc823741856197f397d144affe16d9e32d9a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jul 15 20:58:22 2009 -0700

    Revert "Fix for ticket #545."
    
    This reverts commit d192f2f1bc1227938d3144381ef311c7e07b47b0.

commit 33495256407e9cad69cc44c4da96b4f5cfdba1d6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jul 15 20:58:20 2009 -0700

    Revert "Fix for ticket #544."
    
    This reverts commit f6973431b7f8df24c081a03c7c989f621ab2a708.

commit 1026054147a0b3bd4b3280c415485d4b75f6a57b
Merge: c4fce2c f697343
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jul 15 20:51:38 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit c4fce2cc680c3257cf6ea7844b8ee9e61c02db09
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jul 15 20:32:53 2009 -0700

    Remove a completed @todo.

commit f6973431b7f8df24c081a03c7c989f621ab2a708
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jul 15 21:48:47 2009 +0800

    Fix for ticket #544.
    * Separate the portion of get_db_info.html.php that displays the status
    of the var directory into a separate view var_dir_status.html.php
    * Change the processing to always generate the database information request
    screen unless there is an environment error, the var directory is not writable
    and the install was successful
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit d192f2f1bc1227938d3144381ef311c7e07b47b0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jul 15 20:38:37 2009 +0800

    Fix for ticket #545.
    Changed get_db_info.html.php to not display the database information
    request form until the var directory is successfully tested as
    writable.  This prevents users from thinking they can enter the
    database information prior to successfully accessing the var
    directory.
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit a2930cfa613ef12e91909a9351d2a01019f53937
Author: Kevin Nehls <kevin@kevinnehls.com>
Date:   Tue Jul 14 20:41:10 2009 -0700

    Fix backslashes in relative URLs of combined css files.

commit 2cba5d93956ce38f6d08ca350124d9bd21270be6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jul 15 07:56:52 2009 +0800

    Fix 542 by changing the wording from you to your, thanks Floridave
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 7de339a676f32ed445f3e4215c994a5fe16c1188
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 14 16:10:37 2009 -0700

    Remove extra debug statements.

commit 4720e456418f5b3933a6fdfc9e3b88372792dab1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 14 12:55:03 2009 -0700

    Don't use "else" clauses in upgrade() -- it prevents multiple version bumps at once.

commit c4a30930112e9ab14678fe96f21741f1832c20f7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 14 12:36:57 2009 -0700

    3rd attempt to fix localization messages.  Last time around I didn't
    dig deep enough, but now we form the complete message using t() style
    semantics to replace % placeholders with __ style JS placeholders.
    Also, stop appending the (completed) text to existing messages.. roll
    it together.

commit 768a1485e19021f4a4b3b0b529f3df36167a7881
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 14 12:07:29 2009 -0700

    Remove references to missing organize_edit_drawer.png

commit 8cfb0677091a6bc7e666338fc15f2e23d8934f7c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 14 12:03:31 2009 -0700

    Revert "Remove the reference to organize.css is it is no longer used and is"
    
    This reverts commit 31ffb82382d76390f1206944329dde86c687349c.

commit c3f93957d7af6c6058582fcb1acbe5b8374a70ed
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 14 10:56:10 2009 -0700

    Move the gallery version out of a module variable and into a constant
    in the gallery helper.  This will let us bump the version without
    having to bump the gallery module number.

commit cc05d279ea9c7317f6393b0336df724dbb4a898f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jul 14 07:55:30 2009 -0700

    Update HTMLPurifier to version 4.4.0

commit 94e33c821f28601b60d51581c632ba1e10288298
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jul 14 06:42:50 2009 -0700

    Removed unnecessary contructor from the HTMLPurifier.php library class

commit be635df6d98bb5bbc08302a00d29ea5a016ca37b
Merge: 021e6ec 2a40f48
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jul 14 06:37:53 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 2a40f48d659c5b0ac3ab90e25aaaef12dce99c39
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 14 06:36:48 2009 -0700

    Add /opt/bin as a binary path.

commit e2a9a1d28459b96e412004df4d4ec010fb9b30e2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jul 13 10:36:55 2009 -0700

    Add quotes around all values that contain spaces in them, and add a
    test to make sure that we continue to do so.
    
    This makes sure that we don't have problems with 5.3 which treats the
    literal "on" as a boolean.

commit 021e6eccd03df460fddb0d2bdcab335ddd2d6c52
Merge: 75be4ab a944bf4
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jul 13 07:11:02 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit a944bf4259a6ff31ac647a3d8336bd5175c3640a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jul 13 06:43:44 2009 -0700

    Avoid using the bare word "on" in a value; it breaks PHP 5.3.
    Fixes ticket #540.

commit 027f6b522132a1ffdbb4ce184bc14525351917db
Merge: ff0b66a ac181d6
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Jul 12 22:54:04 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit ff0b66a1a4ed189c3e02a8ad50a63f4d65b3bfa7
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Jul 12 22:53:47 2009 -0600

    Put owner's url into user link. Seems better than displaying email until we have something like a user profile page.

commit 50cd41655a5e083de3fee5b43fd72c21ffb3dd25
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Jul 12 22:41:57 2009 -0600

    Minor style tweaks.

commit 9588e8604d46e548dc4ac8788589f9f89b1992ab
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jul 12 20:08:02 2009 -0700

    Use %27 instead of &#039; (the latter is the wrong form of escaping for urls).

commit 75be4ab2e62004811ba7086376bf5abeca4cf791
Merge: aa0209d e2967aa
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jul 12 12:37:01 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit aa0209d6d3d8535b9bbaaaa6664aa5769ab5f8a6
Merge: 1d7ed9e 30346ec
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jul 11 23:11:55 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 30346ec84214027e5e192020ce60608e48cb9530
Author: Shai Ben-Naphtali <shai@shaibn.com>
Date:   Sun Jul 12 01:41:24 2009 +0800

    Fixed indentation of commit 2760e119bbfc3e2d436c404de194dbeea738a735
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 245f4d39a731b60ac31a755ab4678bb83f211720
Author: Shai Ben-Naphtali <shai@shaibn.com>
Date:   Sun Jul 12 01:37:20 2009 +0800

    This fixes ticket #513
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 1d7ed9e76b4e8368ccf4d53b6887d9e4d402a98f
Author: Shai Ben-Naphtali <shai@shaibn.com>
Date:   Sun Jul 12 01:41:24 2009 +0800

    Fixed indentation of commit 2760e119bbfc3e2d436c404de194dbeea738a735
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit b0aab73364d08083475b8e152e97332f6a36947b
Author: Shai Ben-Naphtali <shai@shaibn.com>
Date:   Sun Jul 12 01:37:20 2009 +0800

    This fixes ticket #513
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 872b5eed4644bdd3e3645eb38a69fdd1ca5ee360
Merge: 8bfcf09 214d977
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Jul 11 23:17:30 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 8bfcf09b4c9628f13fdee2b958b3d11c9abce474
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Jul 11 23:14:26 2009 -0600

    Styled thumb menu, still needs script to set up interraction.

commit ac181d6227f77cfa33585704fdbc1b041a129e6a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 11 20:12:32 2009 -0700

    Whitespace fixes.

commit 980923839930fde45120872dcadd437abfbbc09d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 11 19:17:12 2009 -0700

    Unescape &#039; also (single quote)

commit 895fbfd95b5e7a42dd865f4a18401fd2e1491bc2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 11 17:59:55 2009 -0700

    Get the thumbnail menu working.
    
    1) Stop changing the menu classes in JS, instead allow us to specify
    it in the Menu class itself and then set it to be gThumbMenu in Theme_View
    
    2) Move the gThumbMenu init code to the bottom of the $(document).ready() block;
    something in there was interfering with it.

commit b4c279ebb453459a37550b6413a830bed6c74b17
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 11 17:40:32 2009 -0700

    Fix whitespace typo.

commit 413174e89edb36b311237aea4ab8386d75d16760
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Jul 12 16:07:16 2009 -0600

    Second attempt at showing and hiding the thumb menu. Renamed gThumbMenu to gPhotoMenu for use on both album and photo pages, eventually.

commit 58d0a5013d4cda1be0cf528b8ff08d44b123d75f
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Jul 12 11:43:41 2009 -0600

    First attempt at animating gThumbMenu. Doesn't work.

commit e2967aa1c1a0232e1a1f162db46e6f6db7154dac
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 11 07:45:41 2009 -0700

    Fix a problem in delete() where we were referencing $parent without
    saving its value before $item got deleted.  Further fix for #528.

commit cbd80b5ff948e23a1fa8b0994291953d38f6a7bd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 11 07:37:49 2009 -0700

    Get rid of the form from server_add, we're not using it.
    
    Turn the cancel link into a themed close button which triggers a page
    reload.
    
    Add some padding to the left of the tree.

commit 171522bf231e4fca13dd522e8f755e65a8d48b3b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 11 07:23:31 2009 -0700

    Add a "close" button.

commit 8c6c3801bb6b9f9d4d68aef0cf808abcc667d342
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 11 07:12:29 2009 -0700

    Fix a typo in the last commit.  I left off a closing paren.

commit f2a3fa46f5a5cc31d251c1557f8b1cfbb6f46027
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 11 07:10:05 2009 -0700

    Change 'completed' status message to be a full sentence with javascript placeholders.

commit 214d977f4dc9ac78f4571a7cc89109fd95f5a2eb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 11 06:51:21 2009 -0700

    Don't close the dialog window after we successfully complete an
    action.  The expectation is that we're going to reload the page (or
    redirect to a new url).  If we close the dialog, then we can trigger
    the onhover for items we've just deleted causing errors.
    
    Simplify the API while we're at it by getting rid of the no-longer-used
    on_success argument to openDialog()
    
    This fixes #528.

commit 4d0099e7165a4a1508eea58613cdc75e116464ff
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 11 06:24:10 2009 -0700

    Fix a bug where we're referring to $photo when we just uploaded a
    $movie, that causes the simpler uploader to throw an error for all
    movies.

commit 6b013060aabc1d13545958fdb3c096faac2ba5a7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 11 06:15:44 2009 -0700

    Fix style: space after ) before {.

commit ecc7d881e3bad1dd8edf5cbd4382bda9a668fcb8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 11 05:52:50 2009 -0700

    Fix bug introduced in e0e450d90fe67ac199d82d2b8e902cff5c8b6c7d where
    it got rid of the 'img' var which is used when we set the click action
    on buttons.
    
    Partial fix for #528.

commit 6281ed03d54a010efdee3988a893cfcd7f3663b5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 11 05:36:31 2009 -0700

    Turn off extended inserts when creating install.sql so that it's
    easier to see what's changed.

commit 9f753a53f0371e60f62b8c88d39733d87b4af8f0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 11 05:30:39 2009 -0700

    MySQL 5 generates backwards compatible code-containing comments so:
      SET character_set_client = @saved_cs_client;
    
    becomes:
      /*!40101 SET character_set_client = @saved_cs_client */;
    
    for MySQL 4.0.1-01 and newer.

commit 22fcb4c776d8034766c861847ead8e0f18518ed0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 11 05:14:02 2009 -0700

    Forgot to bump the version up to 3

commit 0098ef05c3dafd8b6a8357e004cbe10ebcf0c51b
Merge: 954ab5a 4132d6c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 11 05:07:41 2009 -0700

    Merge branch 'master' of git@github.com:/gallery/gallery3

commit 4132d6c55ed91ca66607680bc44775c4ba650da6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jul 11 15:47:04 2009 -0700

    Put quotes around the href param (href="#")

commit 954ab5a5051edb67eca8ae74283a80a226e39672
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 11 05:03:36 2009 -0700

    Further simplify server_add (and bump it to version 3).
    
    Now we don't have checkboxes, but instead we restrict you to selecting
    directories and albums from only one level in the hierarchy.  This
    makes it easier for us to make sure that we properly create the
    hierarchy that you want and avoid confusion about what's going to wind
    up where.
    
    Modify Server_Add_File_Model to have a parent_id and item_id and then
    modify them as we go so that we can build up a tree structure there
    *before* we create any items.  This makes it much easier to figure out
    where a new item is going to go and get rid of a bunch of probably
    buggy code in the main task.

commit 8e8a9f728b4e04f281eacc1467e79f55cb2343c5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jul 11 04:41:06 2009 -0700

    Update comments

commit f1b2a14f4fe1bfd9419d4023b6b6223bc39c379b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 10 23:45:29 2009 -0700

    Add a title attribute to the li of a menu

commit 782431ec134449e23658fbdd213a3ef92c62e717
Merge: e0e450d 6320bab
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Jul 11 00:41:07 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit e0e450d90fe67ac199d82d2b8e902cff5c8b6c7d
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Jul 11 00:40:57 2009 -0600

    Position gItem and gPhoto relative, then position quick and thumb menus as absolute within them. Moved css from quick.js to quick.css.

commit 6320babf78deb66f0916e569b36eaeb598603997
Author: Shai Ben-Naphtali <shai@shaibn.com>
Date:   Sat Jul 11 13:56:43 2009 +0800

    Fixes ticket #526
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit fe6320ef4c976df037c259c85bab26c508659ba9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 10 18:11:12 2009 -0700

    Fix for ticket #341.
    Change the wording for the sort order from "Default" to "Order Added"

commit fabdde9bb97bc01c52de41069fed0d046717d3fe
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 10 17:46:33 2009 -0700

    Reference exif consistently as EXIF ticket #526.

commit f887fd32a46f4c5daa4c0adf8e6a297237c043c3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 10 14:19:33 2009 -0700

    Forgot to add this file when change "Done"'s to "Close"'s

commit 15bb52a7767d141ff10179f36ea8389f461df801
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 10 14:12:13 2009 -0700

    Change the word "Done" to "Close" to make translations easier

commit 863deab3d34359b2e33df718f3da4db1f97a7c7d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 10 12:54:25 2009 -0700

    Fix a bug where the task message was not being set

commit 09c9b1a75561881a40ada71f02710355923602e2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 10 11:35:28 2009 -0700

    Added the upload::required validation in order to insure that failed uploads
    are not treated as successful.
    Log any exceptions to the Kohana log and return the error message

commit 5b6a5134cacd5d1da695fbc6bf7e69fdde1309fd
Merge: acf920f 016e04d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 10 11:33:11 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 016e04d228c65fa19eb51dc40ee87c97b96c8873
Merge: 86a7b15 7c99338
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jul 10 10:40:20 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 86a7b15d206d29387637864f63b7ac795fce981d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jul 10 10:39:59 2009 -0700

    Compact all menus.  This fixes the problem that the new [Options]
    thumb menu shows up when it has nothing in it.

commit acf920fc7ed1a9d1d69bd12bdfa136d4bb5af0d3
Merge: 4f24a5f 7c99338
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 10 10:07:33 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 7c993387dadeb721f4c74185fc5ee0e376c4300b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 10 23:01:53 2009 +0800

    Move the dynamic module to gallery3-contrib
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 12796ec2ca386895a713583c683348e7d02bc66b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jul 10 08:20:00 2009 -0700

    Create a new [options] submenu under the thumb menu, and move the
    Digibug print button into it.  Right now, it doesn't display properly.

commit b3785e176145b10c84b3b27850679b13ab54bc81
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jul 10 08:04:37 2009 -0700

    Remove debug code.

commit 4f24a5f5930472fa23265228e5d7a6605b74ade2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 10 08:01:53 2009 -0700

    Move the dynamic module to gallery3-contrib

commit 5cf267cc4c4af79389276d786914cbb2b7a2ec25
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jul 10 08:01:32 2009 -0700

    Fix a bug where we were not properly locating the parent album when
    adding a new album or photo.
    
    Simplify the data structure that we pass down to
    server_add_tree.html.php so that we just pass a file list and let it
    do whatever it wants with it.

commit de39dcbce67f934085621ac7838980d42bfd1bb9
Merge: ab5695c a059eff
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jul 10 07:37:20 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 4f6eed627681387ebbb1c6a1a7a572eab03c1439
Merge: 311794d a059eff
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 10 06:36:17 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit a059eff25d3e4975f39ad04181039d4544e47059
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 10 13:11:49 2009 +0800

    Make the tag event handle the iptc keywords consistently with
    other tag add mechanisms
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 311794dbcec07b8e3e0480203f3373488eb6c904
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 9 22:11:49 2009 -0700

    Make the tag event handle the iptc keywords consistently with
    other tag add mechanisms

commit f4f6dacf7dd6f96c47db0486ab56c3ab546ba4ac
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 10 12:41:59 2009 +0800

    Correct the pattern match to compress multiple spaces into a single
    dot.
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 67d78e8d58fa5060e42fcef73d3c6de19209c216
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 9 21:41:59 2009 -0700

    Correct the pattern match to compress multiple spaces into a single
    dot.

commit e3e56827d5724c6ec5174d4186db99ab2c55e8f7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 10 12:33:37 2009 +0800

    Corrected a problem where the number limit value was being set the
    same for both popular and recent changes.
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 4b28f7f50e0901ee3abe864a3881ff11d08a73ce
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 10 10:15:14 2009 +0800

    A few minor changes to add to the dynamic albums module
    1) cleanun the two displays of the recent changes page
    2) change the name to recent changes.
    3) Change the description in module.info
    Not quite ready for prime time, some issues with the limit to be
    resolved
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 7862e8b02ddd41eb68e858278cd909c8ff371550
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 10 09:59:04 2009 +0800

    Created the dynamic albums module which provides a dynamic album
    containing either recent updates or most viewed images.
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 17ab2c35d76f6179f4bebd1c5a0fd549d260d031
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 9 21:33:37 2009 -0700

    Corrected a problem where the number limit value was being set the
    same for both popular and recent changes.

commit cb3be4abc761a661549501d32c67b11fccd29758
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 9 19:15:14 2009 -0700

    A few minor changes to add to the dynamic albums module
    1) cleanun the two displays of the recent changes page
    2) change the name to recent changes.
    3) Change the description in module.info
    Not quite ready for prime time, some issues with the limit to be
    resolved

commit 3347178eee9c0d4b779a172af1139885db5655dc
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 9 18:59:04 2009 -0700

    Created the dynamic albums module which provides a dynamic album
    containing either recent updates or most viewed images.

commit 1475b772bd256238e7e5e8c0985daede9e18a16f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 10 08:18:58 2009 +0800

    Change the tag importer to convert spaces to a dot in multi word tags.
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 512f22a600362415f58197842248acc2f2f68be8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 9 17:18:58 2009 -0700

    Change the tag importer to convert spaces to a dot in multi word tags.

commit ab5695ca575da4d5842d4c94924c3ee5c4a6faad
Merge: b1f93f3 31ffb82
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 9 16:34:21 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit b1f93f358ab717ccd66ceadd51801fb0bc0db82f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 9 16:18:39 2009 -0700

    Fix typo in p::purify() call.

commit 41ba1e8380689d096f1bc051e1a397bba0abe377
Merge: 577a566 31ffb82
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 9 14:13:22 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 6fbb1e2dafdaa51c1a8fd5479819ff787c758c59
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 9 14:03:07 2009 -0700

    Avoid blowing the task data column by only adding directories to the queue instead of directories and files.

commit fad6c4783ebec8591e1b61bddcc7bd5f17d8cf0e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 9 10:46:27 2009 -0700

    Add status output to make it clearer what's happening when you add files.

commit 31ffb82382d76390f1206944329dde86c687349c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 10 01:35:51 2009 +0800

    Remove the reference to organize.css is it is no longer used and is
    producing errors in the log.
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 577a56603a68e176141272533dc86b405cecf469
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 9 10:35:51 2009 -0700

    Remove the reference to organize.css is it is no longer used and is
    producing errors in the log.

commit b0429797fc7db5464717deffebdccc9705ca7820
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 9 10:00:16 2009 -0700

    Use p::purify instead of p::clean

commit a6ac9b3059749ba8cfeea8ef1712c9b9859b8b9e
Merge: e7e2d99 74d4a4c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 9 09:58:59 2009 -0700

    Merge branch 'master' of git@github.com:bharat/gallery3

commit ac56d84a098a3280addb5ee3763f82686dea5ab2
Merge: e7e2d99 74d4a4c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 9 08:47:23 2009 -0700

    Merge branch 'master' of git://github.com/bharat/gallery3

commit e7e2d99255259a708999727ae3a56777898a3426
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 9 08:43:42 2009 -0700

    Revert "Revert "Add task logging to the "Update Search Index" task""
    
    This reverts commit 5118afc959650469874733a1060fbe22364d8c28.

commit 724d2af960c55b5a60b3c5e6bf68585426d46ab0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 9 08:42:54 2009 -0700

    Revert "Eliminate temporary variables by passing the $item into the view and"
    
    This reverts commit 1a587fd01686cf603b2c7eefd406cf200c6e0ee1.

commit 703d93a1eac6d6332361067ffd74b697149c1feb
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 9 08:42:32 2009 -0700

    Revert "ORM::Factory -> ORM::factory"
    
    This reverts commit b1f9eb1d12fbb9acb97ece2333c21ab76d909101.

commit 5118afc959650469874733a1060fbe22364d8c28
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 9 08:39:00 2009 -0700

    Revert "Add task logging to the "Update Search Index" task"
    
    This reverts commit 6ac5238b83d58824eb9327406a2ee50b7e603214.

commit 1a587fd01686cf603b2c7eefd406cf200c6e0ee1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 2 20:11:03 2009 +0800

    Eliminate temporary variables by passing the $item into the view and
    making API calls on the item.
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit b1f9eb1d12fbb9acb97ece2333c21ab76d909101
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 2 19:37:03 2009 +0800

    ORM::Factory -> ORM::factory
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 6ac5238b83d58824eb9327406a2ee50b7e603214
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jul 8 09:27:37 2009 -0700

    Add task logging to the "Update Search Index" task

commit ac797e609c8c319ca77f9b746a7cecad8dd69004
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jul 8 09:08:15 2009 -0700

    Add task logging to the Update translations

commit 43c63362575264f473e8bba3345524fa7e58afe1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jul 8 08:37:40 2009 -0700

    Add Task logging to the Extract EXIF data task

commit 9f00e734ed28f9c359fa52cfc4694ead5e4cf84e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jul 8 08:26:14 2009 -0700

    Added the button formatting to the other links on the Admin Maintenance page.

commit 47fbb56fa25fc98d4e0695ed08b7fbaec916c003
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jul 8 08:22:40 2009 -0700

    Added task logging to the Rebuild Images task.

commit 2852161ca31f1a5b90bfd16a14615dd1812bd78a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jul 7 21:49:54 2009 -0700

    Provide some clarity on the action links by formating them as buttons on
    the Maintenance Tasks admin page.

commit 74d4a4c0fd0d1aa2e93e62397b0b0a10d55b986d
Merge: faabae5 6ac5238
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 7 21:20:37 2009 -0700

    Merge branch 'master' of git@github.com:/gallery/gallery3

commit faabae5dae712ebff656abe8ebc493d8e031d4a3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 7 21:16:36 2009 -0700

    Rework server_add.  It's smaller and leaner now, storing the list of
    files out in a separate model for scalability.  Removed the "pause"
    functionality.
    
    - Server_Add_Controller extends Admin_Controller so that we don't have
      to check for admin every time.
    - Task completion time now factors in the time it takes to walk the
      arbitrarily deep trees
    - Moved checkbox management entirely into JS using jQuery
    - Simplified the JS considerably

commit 67e61d30e5ae22a8c01d76d8e202ead443ae19d4
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Jul 7 13:08:35 2009 -0700

    More fixes for ticket 470 (capitalization of reCAPTCHA)

commit 5d9e334fe6d7c7c1cf6d39a12684e215e797b4b3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jul 7 12:49:21 2009 -0700

    Added a wee bit of phpDoc.
    Changed the name of the method get_task_log to get_log
    Changed the default name of the file when the log is downloaded to
    gallery3_task_log.txt

commit e5cd7052e810d9bbd4a4a53b5519b91b9f9f2245
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jul 7 12:25:19 2009 -0700

    Revert "Forgot this when i was cleaning up for ticket #519"
    
    This reverts commit 31969a1d8211187e415eac51d155b4efded365f3.

commit 72ebc2fb34a419d9fcc47b121b5279bf27fa37ad
Merge: b0cd0a5 4e0848a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jul 7 12:17:38 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3
    
    Conflicts:
    	modules/g2_import/helpers/g2_import.php

commit b0cd0a52be1d58e451daa52950deb7d5257e1162
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jul 7 12:10:50 2009 -0700

    Allow the task::log method to take an array of lines and change g2_import.php
    helper to use this approach.

commit 31969a1d8211187e415eac51d155b4efded365f3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jul 7 12:09:55 2009 -0700

    Forgot this when i was cleaning up for ticket #519

commit 4e0848a1a5d024cecae6bacb524bb73ed861fad7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jul 7 11:22:13 2009 -0700

    Clean up some indentation.

commit b59e94e7dccc2ce1710ae98bda97ef537fd0c9b7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jul 7 07:32:36 2009 -0700

    Change references to Gallery 2 and Gallery 3 to consistently refer to
    Gallery n as opposed any variants of this.

commit 493fb27825327e14168c3c0b133c338a53457e0e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jul 6 22:20:04 2009 -0700

    Cleanup remove task processing. Change Task_Model::delete to call parent::delete
    instead of parent::save. :-) Also change admin_maintenance_controller to delete
    via looping over all of the completed tasks and delete individually, so we can
    delete the associated cache entries at the same time.

commit 6588f3bbd16c0ca91809a11a2e9b341d6a7c85a6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jul 6 21:46:50 2009 -0700

    Change wording of failed to import tags to make it consistent with the other failed import messages. Thanks shai

commit dfc704516ac8fe850874a62e5b982addabe813c6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jul 6 21:10:59 2009 -0700

    correct spacing in a message. thanks shai

commit dff0ffc4f533f02193472438ba804801ccb81449
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jul 6 20:05:35 2009 -0700

    Fix for tickets #312 and #370.  Added a task logging api.  Changed g2_import
    to write all activity to the "log file".  The "log file" is stored in the
    persistent cache.

commit 30aa065013507c18ed64cc189e60e0959b7c4d7d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jul 6 12:41:54 2009 -0700

    Don't use jQuery in the error page, it interferes with the jquery lib
    in the outer page when we load it in a dialog context.

commit 6dbd36d1ccc482ff542884da0cdc60612436c002
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jul 6 10:29:55 2009 -0700

    Always log the task completion status message

commit f381927ec6bca75e9c588725318f6682bf74d103
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jul 6 07:39:36 2009 -0700

    Catch exceptions that are thrown within the task and log them to the task log
    and then set the task to done, the state to error and the status message set
    to the Exception Message.

commit 04f02b49c5d524345bc916aad6e247c714177662
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jul 5 17:38:49 2009 -0700

    Add task logging functionality. When a task runs, it creates a log that is
    stored in the persistant cache for 30 days.  On the admin_maintenance page
    there is a new link for completed tasks "browse log".  Clicking this will
    open a dialog box that has the the contents of the log displayed.
    
    The user can then view the log and close the dialog, or press the save button
    to download the log to their local machine.

commit fcb031c2b60ac9e1888592296cba25791e77b446
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jul 4 22:47:43 2009 -0700

    Rename the get_url function in organize.js so that it doesn't collide with the
    one in server_add

commit 85de2088798e2b5eac7cb26bf48e17b8034f3fb7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jul 4 20:30:13 2009 -0700

    Lets try the BBCode conversion again... go with basic tags even if some are
    deprecated.

commit 4f0b4469f936e91143f8e488b3dce4e2f00bee80
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jul 4 17:33:10 2009 -0700

    Forgot this file when i was fixing #477

commit 50462edd9c72156d841991245a4ef34624f9a3c7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jul 4 17:14:21 2009 -0700

    Change the BBCode Transformation to use the <span class=""> where possible

commit 799d82fd6a47196bc69d1e9f23fc61ea2d331208
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jul 4 17:01:47 2009 -0700

    Revert "Change the bbcode transformation to more standard tags that can be"
    
    This reverts commit 4ba022438e29dd305435a18e94a0bc08b5dd76a4.

commit 4ba022438e29dd305435a18e94a0bc08b5dd76a4
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jul 4 16:18:48 2009 -0700

    Change the bbcode transformation to more standard tags that can be
    easily style via css

commit 0f9bfbdd572c44ab6b095e18f376c6d340f5fd26
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jul 4 09:10:03 2009 -0700

    Use TMPPATH in the purifier config instead of var/tmp

commit 7a9a4b9e8b4ca1a99b7668b1e212ec9a41687929
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jul 4 09:00:11 2009 -0700

    Found another place that p:purify was required.
    Generalize the dynamic.html so it doesn't require a tag element

commit d6648c0affd122407b7567442aa924e9138104e7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jul 4 08:17:12 2009 -0700

    Fix for ticket #477. Use nl2br method when rendering comment::text and
    item::description.  In addition add p::clean or p::purify to places that
    xss cleaning had missed (i.e. rss feeds)

commit 54ffea24196e8f5d88cf9d8607455f0f6aab305c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 3 21:44:10 2009 -0700

    Split the clean method into two clean and purify. clean is a light weight
    approach using html::specialchars and purify uses HTMLPurifier to intelligently
    cleanse the output fields. Use purifier for text and title fields where it is
    likely that a user would enter html to format their data.

commit 22b2e1044fd3b7be30caba9316f41bdbed8c8a8b
Merge: 715d714 fcb031c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jul 3 18:09:02 2009 -0700

    Merge branch 'master' of git@github.com:/gallery/gallery3

commit a633c134b754305eaa611c5d67af4ca7c79beafe
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Fri Jul 3 16:14:05 2009 -0700

    Ticket 104: Adding "Copy sourc text" button to l10n UI (usability / productivity improvement)

commit fb472da0ba7237b0d9a7a1dde5dd71ff51f87c3b
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Fri Jul 3 16:11:17 2009 -0700

    Ignore lib/ folders in l10n_scanner task.
    1. Because it makes sense.
    2. As a quick fix - For some reason it wouldn't work properly anymore now with the HTMLPurifier lib

commit bafbe5a2d2848d6de3e758f4e5de4385c4dc7542
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Fri Jul 3 14:58:33 2009 -0700

    Fix for ticket 510: i18n fixes - localize module / theme name in some status messages

commit f6d847739a9149531d0649bf3d38f9e30078106a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 3 14:18:45 2009 -0700

    Update the source so the third party code passes the File Structure Test

commit 8d5900f63956d6746a78a4bd5ac0c4f8086752bc
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 3 12:56:59 2009 -0700

    Fix for ticket #400: Add HTMLPurifier to gallery3 and change p::clean() to call HTMLPurifier->purify()

commit b6e5bf6eaade677187f99182e7face7c4b711bec
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 3 12:56:29 2009 -0700

    Fix for ticket #400: Add HTMLPurifier to gallery3 and change p::clean() to call HTMLPurifier->purify()

commit 715d714ade637b6292bab378c4d7deb332542477
Merge: bd1b2f4 0f9bfbd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jul 3 09:26:31 2009 -0700

    Merge branch 'master' of git@github.com:/gallery/gallery3

commit cf279fc315841836f92c8a81935db00bb3a919ff
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jul 3 08:14:28 2009 -0700

    Fix for #364 = G2 Import Doesn't support markup
    Create a _transform_bbcode which coverts the g2 bbcode to html.
    The html won't be rendered until ticket #400 is implemented as
    pclean() excapse the html

commit bd1b2f414741bb9bb68c8f94a291bedd5c9925c0
Merge: eb5538d 54ffea2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jul 3 04:48:54 2009 -0700

    Merge branch 'master' of git@github.com:/gallery/gallery3

commit 85ea66d51e762aab511fcc549c5d6ba06aa556d0
Merge: adb820e 72281d2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 2 20:52:55 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 72281d2b448d77afde709929abaf3ab92883ccce
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Jul 2 20:50:29 2009 -0700

    Fix for ticket 470. Replace ReCaptcha with reCAPTCHA in user visible strings.

commit 93e9efed971c1eee8e754c900972c863984e066e
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Jul 2 20:49:47 2009 -0700

    Use Unicode characters (looks better to translator, and fixes normalization issue in translation server)

commit adb820e37c95277b07ade93b2404fb3bc213380a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 2 20:48:47 2009 -0700

    Fix for ticket #359 and a partial fix for ticket #345.
    In G2, text strings have the &, ", < and > replaced by &amp;, &quote;,
    &lt; and &gt; respectively.  Created the _decode_html_special_chars
    method in helpers/g2_import.php to revert these character strings.

commit eb5538d1357dade9e6e08d1b603033928944011c
Merge: 1a5fe42 a633c13
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 2 18:00:22 2009 -0700

    Merge branch 'master' of git@github.com:/gallery/gallery3
    
    Conflicts:
    	modules/server_add/controllers/admin_server_add.php

commit 1a5fe42b555d51d22bde1521100a31d2b434486b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 2 17:54:48 2009 -0700

    Temporary version add() that just dumps out the values for now.

commit 9eee3b07a8abb1cd798372a20725290130ec183f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 2 17:54:22 2009 -0700

    @todo if we uncheck all the children for a parent, we should uncheck the
    parent itself, otherwise in the code we'll add the entire parent since if
    we find an album as a leaf, we assume that it's never been expanded in the UI.

commit 1cd321901b7225e0297ee4b14a9f7234e09748e3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 2 13:02:26 2009 -0700

    Properly manage disabled state for the [add] button.

commit d4075a4657eddcf1aca71de9996a421cd577ec36
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 2 11:49:45 2009 -0700

    Only enable the [add] button when boxes are checked.

commit a619bb81966102a9f684dd8d37f1127b4f16a390
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 2 11:30:21 2009 -0700

    Add some jsDoc.

commit e5b6193b26cf0f8509a98f7913a1d87fa354da05
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 2 11:23:40 2009 -0700

    Partial pass of server_add cleanup.  It's broken at this stage since
    I've redone the browsing code but I have not implemented the adding
    code.
    
    1) Rename index() to browse() since index is too generic.
    2) Simplify the data that we pass to _dialog and _tree
    3) Change _tree to return list items only, so that the outer dialog
       can be a <ul> for consistency.
    4) Simplify the data structures so that we're not tracking checked vs.
       unchecked status in the PHP code, it's all done in jquery where we
       can do it with just a line or two of JS
    5) use glob() which pretty much entirely replaces _get_children

commit 1c9dee93de837e7bf4a2ba038388ae1836653e0a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 2 09:54:50 2009 -0700

    Fix for ticket #390.
    Added a call to GalleryCoreApi::fetchItemViewCounts to retrieve the gallery2
    view counts forthe imported items.

commit e0927b55d9b3310c2752b2b34fb02eccfb5d8288
Merge: a13ddfe 768657d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 2 08:18:12 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 768657d8b1a3dae8b7da4a7de8996d40294ec31d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 2 22:53:24 2009 +0800

    Suppress the filesize error if the thumbnail is not found so we can get
    an EMPTY_INPUT_FILE exception which we can then log and continue.
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 3dfe19e99a9a808640087c00eaa7096f7a9300f6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 2 14:14:01 2009 +0800

    Start of fixing a problem with importing movies w/o a thumbnail
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 8687278954f27fdcd962eee7c36a6287abc1f0e8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 2 13:18:52 2009 +0800

    Fix for ticket #357.
    Changed the set the created date as part of the import and change
    models/comment::save() to not set the creation date if it is already
    set.
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit a13ddfea8fb461d38263fc90f40ecbe37a15029b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 2 07:53:24 2009 -0700

    Suppress the filesize error if the thumbnail is not found so we can get
    an EMPTY_INPUT_FILE exception which we can then log and continue.

commit b6bf7a58813046904c429a3390dd8e6576d574f6
Merge: 7bc40fd a674170
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jul 2 07:36:00 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 495c76f729372e09f7511967c63948e36303e3d7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 2 05:11:03 2009 -0700

    Eliminate temporary variables by passing the $item into the view and
    making API calls on the item.

commit d4e976cc53b32122c2047d9b697a9d5155e66937
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 2 05:06:17 2009 -0700

    Remove empty <script> block.

commit c60d7f431dab7b294790b7636257699668a0f91f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 2 04:37:03 2009 -0700

    ORM::Factory -> ORM::factory

commit 14d7797cda340f373e6b2d048155e4d670c8fa68
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jul 2 04:35:03 2009 -0700

    In remove_path(), if the path is invalid don't echo it back in the UI.

commit 7bc40fd3152c35d95b69b320c351d91a7ca0675a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jul 1 23:14:01 2009 -0700

    Start of fixing a problem with importing movies w/o a thumbnail

commit a674170bf779ab373ef52fe4dd491c2401c4033b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jul 1 22:55:43 2009 -0700

    2 fixes:
    
    1) Include the url in the cache key so that if the Gallery moves, we
       don't use old cached entries.
    
    2) Use the relative path to files in the comments that we embed in our
       files so that we don't leak local paths.

commit 6f3ec5f03914324f596e51f22f2df49ec48e8053
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jul 1 22:18:52 2009 -0700

    Fix for ticket #357.
    Changed the set the created date as part of the import and change
    models/comment::save() to not set the creation date if it is already
    set.

commit 588f991d558e86a07389e27c9ca9b1b4ab0f9fe7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jul 1 21:56:02 2009 -0700

    Updated to Exifer r4159

commit 60b201f23b70ab8a2fe8508e35adc6c2a11e792e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jul 1 18:01:15 2009 -0700

    Add the partner id to the message being sent to digibug

commit 8f9a943f55c1342177d7687e3d891f5d1c9eff30
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jul 1 17:57:39 2009 -0700

    Fix a bunch of XSS vulnerabilities turned up by manual inspection
    using the checklist in ticket #385.

commit 7b1e3c50218b235a7d25ebe21f93eb8dd9acfb84
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jul 1 11:32:27 2009 -0700

    Reapply c65bfb5a10b125b2cf04ebd5c5d1b58051281f8c without extra
    whitespace changes.

commit 8f4c1c4ddf8473fbe401c2f8682ab1d69975eb6f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jul 1 11:31:12 2009 -0700

    Revert "Fix for ticket #437"
    
    This change had unintentional whitespace changes.  Reverting for now, will reapply it.
    
    This reverts commit c65bfb5a10b125b2cf04ebd5c5d1b58051281f8c.

commit c65bfb5a10b125b2cf04ebd5c5d1b58051281f8c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jul 1 10:45:37 2009 -0700

    Fix for ticket #437
    Tracking vendor ticket: http://bit.ly/16b7Zj

commit f79e26b919edc5e816e1a305fdf0a9f1952a1551
Merge: 9beac11 b943b0f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jul 1 01:08:17 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 9beac1132e7d6ffec2192d5a4e54e14985218d6e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jul 1 01:08:00 2009 -0700

    Fix a typo in the Doctype.  Fixes ticket #497.

commit b943b0f7c120774e5461e14185cac6982eacc590
Author: jhilden <jakobhilden@gmail.com>
Date:   Wed Jul 1 02:39:00 2009 -0400

    made the 'back to gallery' link in the admin a lighter grey
    (and removed the commented out <img>)

commit 0add4ced22662918b6e5c3f0d0447e6e8aad4962
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Jul 1 00:35:33 2009 -0600

    Add a bit more contrast to superfish sub-menus.

commit 979d32759514cdff790b3fd4a5a59764edfb6b02
Author: jhilden <jakobhilden@gmail.com>
Date:   Wed Jul 1 02:17:38 2009 -0400

    change to the 'back to the Gallery' link from the admin.

commit 0d105bcf9dfa0b34b390bd80f49965c563d48534
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Jun 30 23:29:53 2009 -0600

    Display owner's full name rather than username, ticket #421.

commit 58e3e469b97e5afa10e76af751130111a14b9c54
Merge: 79de82b a9b27fb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 30 21:09:38 2009 -0700

    Merge branch 'master' of git://github.com/hiwilson/gallery3

commit 79de82bcccd3ec4412a1b5015644c40e082777f4
Merge: 132bd83 200b78e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 30 20:53:18 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 132bd8306e444c46d3e588bdc1b21fa4474f2a98
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 30 20:51:02 2009 -0700

    Re-add Session::abort_save(). It was reverted as part of the earlier
    change, but this is the part that we want to keep.

commit 4e46a6edf69208dc1e6f3d7fac0421a0c07988df
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 30 20:48:16 2009 -0700

    Updated Kohana to r4434

commit 666c807fccf4f360fac667e9a7ab6b7e560b3a6c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 30 20:47:51 2009 -0700

    Revert "Add Session::abort_save() to Kohana."
    
    Obsoleted by upstream fix.
    
    This reverts commit 06f066164f60fe0babbc7a480e6319a0702e0c46.

commit 200b78ee59ad54eb18d36334e2302b88511429ba
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 30 20:32:59 2009 -0700

    Revert the change that removed adding the click handler for the digibug print
    functionality.  Just return false when using javascript:digibug_popup was not
    enough from having the browser switch pages and show a page with the word false.
    Using an event handler allows us to call event.preventDefault which cancels the
    page switch.

commit b541935d6f2dd0a135b923683a41c4488b896f55
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 30 20:17:48 2009 -0700

    Fix issues with Digibug printing where the preview ws not showing up.

commit 0b34ec4e8b1f97db0dc6807bdb3a5ece8e1b83e4
Author: jhilden <jakobhilden@gmail.com>
Date:   Tue Jun 30 22:22:29 2009 -0400

    UI enhancement: made the 'back to the Gallery' links a little bit easier to discover

commit 3ef39d457693a6744d468876aa7316b65cd3c9cd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 30 19:17:45 2009 -0700

    Update Exif_test to match change made in 4943103700332a11f16319496e485cfd7fd9e36a
    Get rid of vestigial third column in exif::_keys().

commit d8e776cc88df1314a03b7d4fa95ef677dadaed5b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 30 19:12:46 2009 -0700

    Checkpoint.

commit 5e8e3ab6b59731733d830acadd4b218619eb3656
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 30 18:28:55 2009 -0700

    Rejigger the way we handle "done" status in the upgrader.  Now we
    present the done box if you're done and let you get rid of it if you
    want.  It's not beautiful, by any means, but it gives you an easy link
    back to your Gallery when you're finished.
    
    Fixes ticket #479.

commit 050c5a0383b6b1729dbd828d820d5eb347d1b795
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 30 17:58:33 2009 -0700

    Unlink the old rewritten path files in var/modules/g2_import when we
    validate the embed path.  This resolves an issue with b1 installs
    which had versions of the rewritten code that were buggy and can be
    replaced.

commit 8ed6d1183b50de62d495361ff37be71fcc00d48b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 30 08:21:00 2009 -0700

    Fix for #319.
    Created a new view "movieplayer.html.php", which is rendered by
    Item_Model::movie_img().  Changed movie.html.php to use movie_img to render
    the movie player link.

commit 4943103700332a11f16319496e485cfd7fd9e36a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 30 07:22:03 2009 -0700

    Fix for #437.  Use Exposure Time instead of Shutter Speed as suggested by
    hiwilson.

commit 4dfb5aaf250164d9096e8fafc6b1a27386f8c8e5
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Jun 30 00:22:16 2009 -0700

    Fix i18n issue - accidentally called t() on translated messages. Please truncate incoming_translations after this
    update to get rid of bad messages in your DB.

commit 176030f68a5cf5f6822cc11aaa3f324c29686085
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Jun 29 23:09:05 2009 -0700

    Partial fix for ticket 471 - Fix parsing of module/theme info files in l10n scanner.

commit dd30ec012bddf06992988e6a931ee696e24ad8f3
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Jun 29 22:48:22 2009 -0700

    Partial fix for ticket 471 - i18n of module names in upgrader.

commit a9b27fb352490a48d4035966b8c8d463c62c7726
Author: hiwilson <wilsonpscheung@gmail.com>
Date:   Mon Jun 29 22:40:13 2009 -0700

    Let the "Popular tags" sidebar block display on tag or search page.

commit 3bd5990056ffe6cd216aafda47702e55350eb05f
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Jun 29 22:22:27 2009 -0700

    i18n theme name / description in admin themes. Partial fix for ticket 471.

commit b0bc99a81f933a6bfa6cca2d3a34102de1eee7ba
Merge: d4738ce c9e8ff8
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Jun 29 22:10:10 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit d4738ce4844d39d55fec7f149c6aff5c061c0a38
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Jun 29 22:05:55 2009 -0700

    Partial fix for ticket 471 - i18n of "Translate Text" button in l10n client

commit c9e8ff8fcb4c42948c8272ae367adda83957c101
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 29 21:59:00 2009 -0700

    Use the appropriate content-type for javascript (application/javascript).

commit 02b46833d60b462b70e3b00d6712059cc3547809
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 29 21:52:42 2009 -0700

    Pass back Cache-Control and Expires headers when we send back a 304,
    otherwise some browsers (Firefox, at least) thinks that it needs to
    revalidate.  At least in my case, it appears that my proxy tacks on
    restrictive Cache-Control headers if they aren't there.

commit 3a260ed3f74a7db6484a39c4d2ac25fb12a5626e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 29 21:38:22 2009 -0700

    Add instructions for using mod_expires

commit 980c589e3d674b31a2ee734e2767b6460edfc4da
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 29 21:38:04 2009 -0700

    Fix a few more issues
    1) Don't use $_SERVER, use Input::instance()->server().  This fixes the problem
       that when you use a browser that doesn't pass in an Accept-Encoding, we'd
       barf on a missing array key
    
    2) Don't bother looking up the _gz key if we don't have gzencode, because we
       probably didn't store one.
    
    3) Only emit the gzip Content-Encoding header if we're actually sending back
       gzipped data.

commit 6e80330e19ea8385da35b170f508556cfadf0340
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jun 29 21:16:42 2009 -0700

    Remove the testing code to force rebuilding the cache.

commit 21f228b1aed8b32dc9856add51f4ef8a3c7ced95
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Jun 29 21:03:40 2009 -0700

    Ticket 86 (addendum) - Guard against themes that don't define MSG_CANCEL and add the message to admin_default as
    well.

commit 0eb9a2aacd33d9d98726d08f828f10df4e462e9e
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Jun 29 20:55:23 2009 -0700

    Fix for ticket 86 - Make Cancel button in doalogs localizable.

commit 77a78b49909f9d2ca598871f0588497837cb9f6a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 29 20:53:55 2009 -0700

    Revert to serializing and deserializing data.  The cache table can't
    accept PHP constructs like arrays (the tests were choking on this).
    
    Update tests to reflect the new `key` column.

commit df17d576ab111b2a71337e486f9631eb16bad4b6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 29 20:33:34 2009 -0700

    Checkpoint.

commit 937fd1355233f44bd069e2039a14204ab0958df8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 29 20:24:48 2009 -0700

    Change XXX to @todo

commit b78bfa5c4a8717ed889a1f8fd16cfa150a4e699b
Merge: df84861 e3b4c6a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 29 20:23:42 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit df848618334259f09ebae271452a8b67374943bf
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 29 20:23:23 2009 -0700

    If the argument to app() is not an album id, switch to the item parent.
    Fixes ticket #489.

commit e3b4c6a57747429033ad9fd3d4ee321b93dcc1ad
Merge: fe668ab f5f74e3
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Jun 29 20:21:25 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit fe668abcb3612ec1b769e8b976a0aec856c21426
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Jun 29 20:20:15 2009 -0700

    Fix for ticket 481 - Better plural handling for 2 messages with multiple %count variables.

commit f5f74e3638e31517e7513a3d9cbda48d9806a904
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 29 20:12:27 2009 -0700

    Remove fix-ie.css scripts from the combined bundle, since we only want
    to load them conditionally.

commit b579db51733135a49c3d936caa80b61eba7cfb87
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 29 20:08:35 2009 -0700

    Oops, "head" => "admin_head" to make the admin dashboard work.

commit 06172ecdb9e7a4acf158387c4804b6424e8b1b15
Merge: 333c9d4 8af19c0
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Jun 29 19:56:52 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 333c9d47e30125bcd7092adacedabaf1fcb417b6
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Jun 29 19:53:05 2009 -0700

    Fix HTML in l10n message

commit 8af19c0625eca7cd7360ebc1036cd654bdf88145
Merge: 8865d78 b57be64
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 29 19:33:42 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit b57be646fe9fb07b5ebdd38a66b16de1b87d2a2d
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Jun 29 19:24:48 2009 -0700

    Don't repeat the default locale in the installed locales list.

commit 8865d78483c5967da17e3f3d185eb19909ea7fe0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 29 19:18:10 2009 -0700

    Fix permissions for files to remove executable bit.

commit 95b900d4f47489a285024e3037f375a8dd79efd7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 29 19:11:59 2009 -0700

    Fix some bugs in the combined JS/CSS code (most of which I introduced
    in my last refactor):
    
    1) Actually combine the JS (I was only combining the CSS)
    2) Add line breaks between the files and comment them so that we can
       find a specific file inside the blob.
    3) Add an HTML comment to help developers figure out why they can't
       find their CSS/JS.

commit 325203e1caeb1bc1e957c4d50be76baaed6ba10c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 29 18:27:29 2009 -0700

    Add a media type using the most common media type from our CSS.  This
    doesn't fix the problem that we need to support multiple media types
    (the original code had superfish using just "screen", and some other
    deviations).
    
    There's no code yet to support multiple media types, but it would not
    be too difficult to create buckets based on media.

commit fa8ca2f7ad21980f0b45e7acc67be4be296f9f87
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 29 18:12:53 2009 -0700

    Refactor combine_xxx() functions together into combine_files() and use
    html functions to generate the resulting elements.  Add phpdoc.

commit 3080317d6e5e4ea9e56b1fd5444c4bcf5852c362
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 29 17:44:02 2009 -0700

    Refactor combined controller a bit
    
    1) Create public javascript() and css() functions and turn __call()
       into a private function to protect us against having some random
       type show up in there.  Otherwise anything you put in the 2nd
       argument gets emitted in the header which is a security hole.
    
    2) Fix a bug ("$key = $key[0]") which was breaking functionality.
       Eliminate the hex check, it's not really necessary in the majority
       case and doesn't hurt us in edge cases.
    
    3) Convert some empty() calls to !, no need for a function call there.
    
    4) Add phpDoc.

commit 006b63030a364677143799c7ce41eabb10c86eee
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jun 29 15:38:55 2009 -0700

    Combine the Combined::javascript and Combined::css into a single  method implemented
    by the magic method __call. The first parameter is the content type for text/xxxx
    and the 2nd parameter is the key of the combined file.

commit 86596f9595393159b32504ad3238031ab57722c8
Merge: 34c76c0 4dab7f8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jun 29 15:04:15 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 4dab7f8dd04a68349e5174c8d6a4958305ad3005
Author: jhilden <jakobhilden@gmail.com>
Date:   Mon Jun 29 16:23:12 2009 -0400

    admin dashboard blocks can now be moved from left to right sidebar
    
    fix for bug report #92
    removed containment parameter for the jQuery sortable plugin
    seems to work in Firefox, Chrome and IE 8

commit b31b3bd5bff4f8d5b5721e0fdd86579028a5b03a
Merge: eb82f6a 5de6de6
Author: jhilden <jakobhilden@gmail.com>
Date:   Mon Jun 29 16:03:45 2009 -0400

    Merge branch 'master' of git@github.com:gallery/gallery3

commit eb82f6a64a6b4e0b4e18ca92689bd467cba6e1bd
Author: jhilden <jakobhilden@gmail.com>
Date:   Mon Jun 29 16:02:11 2009 -0400

    added textual description of upload progress
    moved the cancel link to above the upload queue (where the textual upload progress also is)

commit 34c76c0906a639321dedfe0e77d9fd123ed7c792
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jun 29 12:32:11 2009 -0700

    A Combined javascript seems to work.
    1) CSS files are added to the combined version by use of $theme->css() or $theme->css_theme() methods
    2) url references in the css are converted to full paths as opposed to relative
    3) @import statements in the css are resolved as well.
    4) need to move the [if IE] statements into the css files so the will be honored in the browser. currently the ie fix css are always included.

commit 5de6de6a133c6c906ee63b5a2ab1b08bc14ca17e
Merge: 16d4922 b0bb107
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 29 09:08:57 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 16d4922e3af7309c1a3747cd1c49f981a9066ee4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 29 09:07:29 2009 -0700

    Remove unused $theme_relative arg from theme_script().

commit 6ec293dfe70665c528d803b78a2bb295633496ec
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jun 29 08:24:42 2009 -0700

    *Note* work in progress.
    Implement the combined css functionality.  Local url references and replace with absolute urls instead of relative.

commit 10b4eda6f0cbb44fde9fb3158bd174c82467f2ee
Merge: 42c82ef b0bb107
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jun 29 06:44:05 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3
    
    Conflicts:
    	modules/gallery/libraries/Theme_View.php
    	themes/admin_default/views/admin.html.php

commit 42c82ef7f081630c15a5d354205896764348a76a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jun 29 06:08:50 2009 -0700

    Temporary checkin to allow merge with trunk... don't integrate

commit 6e8a8c53e685a6c3f35f1426ab4dd6dcc18578e0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 28 19:49:48 2009 -0700

    Rename $theme->url() to $theme->theme_url() for consistency wiht
    $theme->theme_script().

commit c4f991bb7d7e90f8c55897f89888d9196c7e438f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 28 19:45:11 2009 -0700

    Clean up the combined javascript change and refactor out the
    Gallery_View base class from Theme_View and Admin_View.
    
    1) Move all the theme specific jquery stuff from gallery_theme::head()
    and admin_head() into the theme files.  Use $theme->script() as
    appropriate.
    
    2) Get rid of the extra boolean on $theme->url() that we were using so
    that we could call $theme->script($theme->url(...)) -- add
    $theme->theme_script() instead (poorly named, but still clearer than
    what we had before)
    
    3) Fix the bug that combined scripts didn't work at all in the admin
    theme.
    
    4) Get rid of $theme->display() in favor of new View(...)

commit 228962f0e836c303174d0be6d0ff246628ea85d9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 28 19:42:41 2009 -0700

    Use Number() instead of toFixed().. FF 3.x doesn't seem to like toFixed() on native types.

commit b0bb107b7ebb5edbf3bec69ae2e716552eb1adf5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 28 19:26:41 2009 -0700

    Get rid of references to vestigial check.html.php page.

commit 177a854dbb540efa01048e31e655828ded9490b5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 28 19:23:19 2009 -0700

    Move the mysql_xxx() override function definitions inside
    installer::connect(), otherwise they're defined before we call
    check_environment, then we think we have mysql_query when we really
    don't.

commit 24f0c4bd1914e5dc62d4fef936c901227620abbe
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 28 18:10:42 2009 -0700

    Undo my last change; it's not the right fix for the problem.

commit b235fd6e5f2197869c8ef04637d990d2017a19bf
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 28 18:00:00 2009 -0700

    Pass the item into the block.

commit 5b2c08d797697430dca716cce5b51a4c128027c0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 28 17:37:14 2009 -0700

    Set the gallery module version to 6 in install() (missed this in my last change).
    
    Refresh the install.sql.

commit df37b5ce70318bbd3e6b39a6e2d671d6e1ca7bf0
Merge: 9bdc847 d90e30c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 28 17:09:45 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 9bdc84733de3786652004f083cade989c00c5240
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 28 17:07:41 2009 -0700

    use jquery.scrollTo to scroll the active upload into view.

commit d90e30c37881d4e715b2c798046830242e382d1c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jun 28 17:07:12 2009 -0700

    Rename the combined javascript controller from javascript/combined to combined/javascript.

commit bf79d4372cbaac63f4fee55dbba58bc19f52bc14
Merge: 2b804eb ce6d453
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Jun 28 17:57:23 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 2b804ebdcea2127ca481ae3fb25a33a3bc5a78c3
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Jun 28 17:53:20 2009 -0600

    Convert info module's block to use a list instead of a table. Addresses request in ticket #441.

commit ce6d453b3f32af98e13b62fe10b62173c59bde44
Merge: 5e83ebd fcc57a4
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jun 28 16:51:57 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 5e83ebd6d0e1eccb1a865dc6c5fe2ef712bd421b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jun 28 16:50:55 2009 -0700

    Use $theme->script() method to render module javascript files

commit fcc57a418245b6cac410f70506f6f4b687c8a98a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 28 16:48:29 2009 -0700

    Modify the cache table to make id the primary key for consistency with
    other gallery 3 tables.  Update the driver to match, add more upgrader
    code, update the installer block and change the gallery module version
    to 6.

commit aa31e1f0090522c3cfb3a44b947ad8c33a275979
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 28 16:24:51 2009 -0700

    Tweak the cache implementation
    1) Drop the *_modified key, we don't really need it.  The modification date is not
       relevant to our browser caching strategy.
    2) Fix multiple issues with the Expires header and just hardcode it to the biggest
       possibly value for code clarity.
    3) print the $content out directly instead of using fwrite
    4) Minor cleanups in the installer.

commit f3f8b5eed6bbb4a1697db2ac5a7085439ed35a0d
Merge: bf26ca7 3d7daf5
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jun 28 15:33:20 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit bf26ca727e615e61a8f61a2bbf1a83572cfa5c20
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jun 28 15:30:13 2009 -0700

    Change the combined javascript to use the new caching functionality and respect the HTTP_IF_MODIFIED_SINCE header request.

commit 3d7daf58ed62d0a350ded25ab9bd30c63571807e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jun 29 04:14:47 2009 +0800

    Change the cache column of the caches table to a large blob.  This fixes ticket #485 and gives us the extra adavantage of not having to serialize the data (as the database driver handles that for us)
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 7a3310e91b50f37b09a1c9d10173409244015653
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jun 28 13:14:47 2009 -0700

    Change the cache column of the caches table to a large blob.  This fixes ticket #485 and gives us the extra adavantage of not having to serialize the data (as the database driver handles that for us)

commit 1c44537097e01f50c6c2840d0020d6a2406e2878
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jun 28 22:49:35 2009 +0800

    Clean up code (i.e. preamble, tabs) from the caching implementation so the unit tests pass
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit a0c07d4b549f10dcd954777ae7d846a9b81246d8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jun 28 07:49:35 2009 -0700

    Clean up code (i.e. preamble, tabs) from the caching implementation so the unit tests pass

commit e12ba26c3283de6ebeed52039e74cf6b93e8a7e8
Merge: 2d38370 067e9f8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jun 27 23:40:37 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 067e9f8ef7c7ed5763a5290b0e8d2f4a48123a86
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jun 28 14:34:07 2009 +0800

    The rest of the caching driver implementation that i somehow forgot.
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit aa6bc97c7cc7e8cd1108ffad17c1087f9b3a26da
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jun 28 14:30:02 2009 +0800

    Update the version number and upgrade method for gallery to reflect the addition of the cache table.
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 5bfdd6e328a930abf426628998f82f8fdca2cee8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jun 28 14:24:23 2009 +0800

    Implemented a Database driver for the Kohana Cache library.  Rather then writing our own caching algorithm, we can leverage the Kohana library.  This has the added advantage of allowing the administrator to replace the default caching with a 3rd party caching algorithm.
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 2d38370ec4c7f7d68ed60e78a3a118ae20fcf540
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jun 27 23:34:07 2009 -0700

    The rest of the caching driver implementation that i somehow forgot.

commit 3000c789986d93b3911a3217d7153b0de041c887
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jun 27 23:30:02 2009 -0700

    Update the version number and upgrade method for gallery to reflect the addition of the cache table.

commit 21243bd86270da0d9be03a776a2c2963f703be81
Merge: 52ecdcd 4448b0e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jun 27 23:26:45 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 52ecdcdff2ffd37760c0d0edbe7cd2fcc62a47fc
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jun 27 23:24:23 2009 -0700

    Implemented a Database driver for the Kohana Cache library.  Rather then writing our own caching algorithm, we can leverage the Kohana library.  This has the added advantage of allowing the administrator to replace the default caching with a 3rd party caching algorithm.

commit 4448b0e787404565a7351c8c741edc455a092f7d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 27 21:37:14 2009 -0700

    Try to disable the parts of mod_security that interfere with the Flash uploader

commit 388f7ba3105b0e246a184c96c7a3ec39b5d89e6d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 27 21:12:37 2009 -0700

    Updated for module upgrades:
      gallery 2 -> 3
      comment 1 -> 2

commit 4707a97b826b12958fda6d59d157726b246693cd
Merge: 11f08ee 76f688a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jun 27 16:57:38 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 76f688a070c7c36eb84dc22b21b165f00440a4a4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 27 16:41:05 2009 -0700

    Clean up poor english.  Use the latest recaptcha info from their website. Fixes ticket #470.

commit 6c828a0dd61984da84fa7957f4ea40098dd67ec5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 27 16:30:16 2009 -0700

    We no longer need the digibug section now that we've got a menu for
    thumbnail actions.

commit aad0dd357f44c75703e4d6368a1869a83e7ee8a2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 27 16:27:06 2009 -0700

    Create a new thumb_menu() and convert Digibug over to use it.
    
    1) Eliminate digibug_album.html
    
    2) Get rid of the $(document).ready() in digibug.js and rename popUp() to
       digibug_popup() then just make direct calls to digibug_popup() in the
       menu urls.

commit 2fbc03437ac6f861f597778964cf01737968bb94
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 27 15:55:47 2009 -0700

    Digibug simplification cleanup.  Upgrade digibug module to version 2.
    
    1) Simplify the admin settings page to what most of our users
       want. Eliminate basic_ and default_ ids.  We just have company_id
       and default_id.  Advanced users can use advanced settings for now.
    
    2) Fix security in print_photos (didn't get it right in my last commit)
    
    3) Use the regular thumb and full urls if the images are publicly
       available to reduce load on the proxy.
    
    4) Simplify proxy expiration code.
    
    5) Eliminate all specialized styles from the admin theme.

commit f98b7dc631afc4da595aa149b21b5d38f41afd22
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 27 14:43:40 2009 -0700

    Require view_full to print photos.

commit 6a8dc91f9f1f31657ca67d920283e534de15fa0f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 27 14:35:53 2009 -0700

    Remove empty upgrade().

commit 3ab6f2ed4bc1bf1e46174e273e18b2174e5b6ee2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 27 14:35:16 2009 -0700

    Remove unnecessary curly braces.

commit e78f91c91a178f564dc845905ea4b21928e57c3c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 27 14:29:58 2009 -0700

    Fix XSS vulnerability, get rid of unnecessary curly braces.

commit bbba0a67c22436aa166b1a882f35ddc093faae7c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 27 14:29:24 2009 -0700

    Fix formatting.

commit 11f08ee4399c62cc1d2c36457a214c6db693db06
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jun 26 21:42:02 2009 -0700

    Implement the combined javascript controller.

commit 4cec0201637d21f8e88c264bb1befff4e891ce3e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jun 26 14:37:15 2009 -0700

    Create a theme_view function script which allows modules in the head or admin_head functions to specify javascript files that are required for this page.
    In this commit, these script files are expressed at the end of the head or admin_head calls and appended to the beginning of the block stack.  In a future commit these will be combined and gzipped for download.

commit 57bb1101473365d76420203dc4c0a9e391363475
Merge: 84e98e8 f3e45d4
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jun 26 11:53:10 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 84e98e830c4967c277dfcb5bb6d18c0ec3313355
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jun 26 08:25:24 2009 -0700

    Move the inclusion of photo and movie specific javascript into gallery_theme

commit f3e45d49a3fb621d7a23fe7c24af5ad160859687
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jun 26 23:19:06 2009 +0800

    Change the movie controller to set the page type to "movie". Ticket #467
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit f4778699fc52c045f60d72e20bebc000d9f6bda8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jun 26 08:19:06 2009 -0700

    Change the movie controller to set the page type to "movie". Ticket #467

commit 42a5bd20a550a9edb5ec84625037b9d85889ff63
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jun 26 07:51:29 2009 -0700

    1) Move the generation of script tags to gallery_theme::head and gallery_theme::admin_head. This allows us to potentially manage the scripts like we do in g2 (single file and compressed)
    2) Change Theme_View::_call to always call the gallery_theme::$function first.

commit eee8dbe511a86967cc27d93c26718253b301bec6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jun 25 21:53:47 2009 -0700

    No longer need to set the digibug mode in the installer.

commit 3b873a98d7292b1c9736082fa6c27b44f4fd1018
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jun 25 21:50:37 2009 -0700

    Oops changed my mind... when setting to the default just set the value
    to null and let the cpmapny and event ids be set in the print_photo controller.

commit e2e1aa06834125f10e03f929a41e527ec7c2f8ea
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jun 25 21:41:54 2009 -0700

    1) Rename the basic_company_id and basic_event_id to default_*_id
    2) Removed the tabs on the digibug admin page word count is now at 35.
    3) Added a default link which resets the event and company id's to gallery's ids

commit 1552f0fff77125fbd31f2689154f1ac57acda83f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jun 25 21:41:09 2009 -0700

    Add XSS clean up on the title that is sent to digibug as part of the print
    request

commit 5d4d87e957068b54e2b12abcea5c74bb4f3c012c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jun 25 19:58:14 2009 -0700

    Remove the digibug maintenance task.  Expired imges will be removed when the
    print_proxy is run.

commit 93e4f14c855d3fe4c4e9cc5c7d6a58fb2e25fe99
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jun 25 19:04:45 2009 -0700

    1) Fix potential XSS in digibug_album.html.php
    2) Fix case of text

commit 28f496924f5e6ada3f779c096ab7f463d637760b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jun 25 18:38:43 2009 -0700

    Fix indentation in digibug_form.html.php

commit 4d191b5e925f7d3c36df65d37cde0a2768aaa467
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jun 25 18:35:02 2009 -0700

    Refactor the digibug installer to the new structure of install and upgrade methods

commit 1b263c312f621bc3439d0c6b60645c01424174aa
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jun 25 18:26:31 2009 -0700

    Replace the crappy temporary print image with one that is more consistent with the
    theme.  Thanks again Ben Dunkle.

commit 627b5e144caefb7ff48224a4bdc8faae2debdbd7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jun 25 08:53:04 2009 -0700

    This change to the default/css/screen.css file was overlooked

commit 4502a13a5b67946e798789ff5420877391372fcd
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jun 25 08:47:16 2009 -0700

    1) rename the model proxy to digibug proxy
    2) corresponding table name change to digibug_proxies
    3) change the generate of a unique id to md5(rand())
    3) Remove the helper function as digibug::uuid is no longer required.

commit d9e4ad79bbebb3f439df4403c668271c86c19935
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jun 25 08:14:34 2009 -0700

    1) Move the digibug css in the default and admin_default themes
    2) Remove most of the marketing cruft on the admin pages
    3) Change the name of the admin settings to just Digibug
    4) Remove the "switch on mouseover" approach

commit 923732ca4dca6db218f6252a7133cd72f98fa086
Author: Romain LE DISEZ <romain.git@ledisez.net>
Date:   Thu Jun 25 10:07:12 2009 +0200

    Go back to the upstream version because we choosed to use real booleans.

commit 6345fcede7493010ab78239c3e775d16c2f41458
Merge: be354ab ec67300
Author: Romain LE DISEZ <romain.git@ledisez.net>
Date:   Thu Jun 25 08:16:35 2009 +0200

    Merge commit 'upstream/master'

commit ec67300f9628582bf735468c73aec3c01a6eb57f
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Thu Jun 25 00:06:59 2009 -0600

    Cleanup pass. Fixed formatting, grouped a few selectors. Removed empty selectors.

commit fae6d753e9107f16024e3de69483551a0bed2b59
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Jun 24 23:48:28 2009 -0600

    Group RTL styles together in their own section.

commit f70517a8e88b280c2b380f2bde7ff9d85146506f
Merge: 0434695 766de00
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Jun 24 23:40:57 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 766de009090cd1a49b6726e79bce7a69392491be
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 24 22:25:38 2009 -0700

    Turn off magic_quotes_sybase and magic_quotes_runtime.
    Fixes ticket #394.

commit a19dba9416516fffaa53b0c1955d625c60d7e557
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 24 22:01:08 2009 -0700

    Comment out the whole <IfModule> block; without proper configuration
    it breaks gallery3 if you don't specify index.php.

commit 60442e170ba73641ce5545ca87de794b9fe98132
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 24 21:50:35 2009 -0700

    Oops, remove my own custom RewriteBase.  I can see that this is going
    to be a problem with this approach.

commit a5f1ef48498937621cd0ce4d0344650af2c580ec
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 24 21:47:47 2009 -0700

    Add support for mod_rewrite in the .htaccess file.  There are now
    instructions for how to tweak RewriteBase correctly.  Once that's
    done, index.php will automagically disappear.  \o/

commit 7347d1e50db102142f1c82bfeb70734475f58195
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 24 21:34:07 2009 -0700

    Use ENT_QUOTEs when decoding the $current_uri otherwise apostrophes
    are treated as &#039; which doesn't match in our relative_path_cache.

commit 4384b67be1aedfbc71e3cb7e399df88fcb87ff9c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 24 21:30:48 2009 -0700

    Comment out [reply] and [edit] links because they're not implemented
    yet.  This closes ticket #416, and I'll open a new ticket to implement
    these functions.

commit abbecb9e7e6e26d50cae0754d4c6320892b8def5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 24 21:19:05 2009 -0700

    Look in /opt/local/bin for binaries, too.
    Fixes ticket #423.

commit 2d97a9a8b6b3b45b3cfdc426f8c476dd1ef104d4
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jun 24 18:04:02 2009 -0700

    The image didn't get picked up on the previous commit

commit 292d216f7c133152cb921db1cbc7a0c4843a977a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jun 24 18:02:36 2009 -0700

    Implement printing support on the photo page.  I've used an icon that doesn't
    quite match the theme temporarily.  I'm hoping to have a matching icon soon.

commit 043469587ed03a2a4e05aa2fddcebe53f04b0ce4
Merge: c37fc39 f56d372
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Jun 24 17:49:06 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit be354ab98bbb08abad0a7efd6fb1d110e11381de
Author: Romain LE DISEZ <romain.git@ledisez.net>
Date:   Wed Jun 24 23:40:47 2009 +0200

    Remove an useless ORDER BY.
    It improves compatibility with PgSQL.
    (Replay of c80d2da0a95a63b76f5a4c835f1a0e1022ec2f53)

commit 6111272568a732465c330597a068a048f6705ef9
Merge: de28b03 f56d372
Author: Romain LE DISEZ <romain.git@ledisez.net>
Date:   Wed Jun 24 23:02:57 2009 +0200

    Merge commit 'upstream/master'
    
    Conflicts:
    
    	modules/comment/helpers/comment_installer.php
    	modules/gallery/models/item.php

commit f56d372629df5b08a30d0182d4e1e7c97a44d79f
Merge: 40e27e1 0735cfb
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jun 24 13:14:04 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 40e27e128e34601380079a02dca9346aed54c3bf
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jun 24 13:11:53 2009 -0700

    Create a maintenance task that allows the administrator to remove any proxy requests
    that are still active after 10 days.  Digibug requires that the image be available
    for 5 days, so we'll give them an extra 5 days.
    
    Also correct a few issues with the protocol.

commit 0735cfb30cc018387ae664374fc65bffdecf0907
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 24 11:06:36 2009 -0700

    "the the" -> "the"

commit 0062f8a24a62fe8f5abdffcea8c35382afa32244
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jun 24 05:47:58 2009 -0700

    Add a timestamp column to the proxies table.

commit 0e8164e24e90c5d6dc72e3d1e2df4ab3026ff374
Merge: 231ad4f f9dbd4e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jun 24 05:31:28 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit c37fc39152ceeb5f4d51f9b297b313847bb445e5
Merge: 200e17c f9dbd4e
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Jun 23 23:56:05 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 200e17c884df8c2a265fab828be2ef869e580e35
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Jun 23 23:44:08 2009 -0600

    Use gMessage for "no paths defined" status message.

commit 231ad4f32950f42c76c16ab453246bedea8abf2c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 23 22:13:28 2009 -0700

    This implements the Digibug printing.  When a a print request is made the digibug shopping cart is opened in a new
    window.  When the cart is emptied, the window is closed. Users can close the window by pressing the continue shopping
    button

commit e44053f692109069977c097ecd24c45ab8e2f228
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 23 21:42:25 2009 -0700

    Cache the page_type in pane() instead of looking it up twice.

commit f9dbd4eb2feede5381d481f473bf7f0a77b49e4a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 23 21:31:58 2009 -0700

    Fix broken rotate urls.

commit d01c3d2373cc98a0d6abb1eb5a1f71491e1001e2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 23 21:27:17 2009 -0700

    Remove stray ? that was breaking ccw rotation.

commit 53284ec5b892915c5905ea4f1e3fe76b18d3b576
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 23 18:39:00 2009 -0700

    Add support for Gallery 2.2.2 style bootstrap syntax.

commit 9a0448e5d6f83d93f906e6fe1aec4bbb8d78912f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 23 17:25:59 2009 -0700

    Add gDialogLink to the delete button, since its got a jQuery
    confirmation dialog now.  This was a regression in
    fa4bb5b7ac89bbbd0325e5c336c2e9b31f59d12b.
    
    Fixes ticket #459.

commit 2a190660baeff8cd708926cea79f94f1630418b7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 23 17:09:37 2009 -0700

    Gracefully handle the case when the gallery2 instances moves somewhere
    else (or gets deleted).
    
    Fixes ticket #458

commit b9b68e09527f2680252bcba054019c45db07829a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 23 16:05:32 2009 -0700

    Add a new "show credits" check box in the theme options so that you
    can disable any module credits if you want.  Update the theme to obey
    it.

commit 79522bd4f31f8e4d70e754e42d5d33c4031519c9
Merge: 8f443ce da09185
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 23 15:17:03 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit da09185a4baa739dd011804eb1301cdf2d126c11
Author: Romain LE DISEZ <romain.git@ledisez.net>
Date:   Tue Jun 23 16:08:55 2009 +0800

    SQL is case insensitive
    
    Signed-off-by: Bharat Mediratta <bharat@menalto.com>

commit 297ac6ebd15bc53ce6c7d96b659b22fb3b220d74
Author: Romain LE DISEZ <romain.git@ledisez.net>
Date:   Tue Jun 23 16:05:15 2009 +0800

    Improve compatibility with other RDBMS
    
    Signed-off-by: Bharat Mediratta <bharat@menalto.com>

commit ba7163bd30939f87aa3786dd8583a361bc638baf
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 23 14:50:41 2009 -0700

    Fix get_position() to properly deal with duplicate values in the sort column.   Fixes #389

commit 4e3b84eb391de177d94fd1c4189d456280fd7fdd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 23 14:23:11 2009 -0700

    Escape {$this->sort_column} in get_position()

commit d5ee5741f2afa0e4a2d6406828cdad01bc8c3f2e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 23 14:08:07 2009 -0700

    Don't allow renaming of the root album.

commit 107431f2465e2ce0ddea14af70d1ee329d1d1990
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 23 13:51:41 2009 -0700

    Revert "Remove unsued <span> element"
    
    This reverts commit 65a7967a046c22abadfd526954a2cd0002ea26cf.
    
    Turns out, the span really is in use.

commit 3b0baa827150e457c630052d6ef87853aaad8bdc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 23 13:45:16 2009 -0700

    Replay change from Romain DE LISEZ to change the state column to be a varchar

commit 29de41db252f6c9635093c1ec48aaeec2438dc89
Merge: e49c4a2 da45f12
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 23 13:40:37 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit e49c4a2459fd94d7df167b68432920ca95420767
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 23 13:25:14 2009 -0700

    Upgrade to version 2 and change the state column to a varchar for
    Postgres compatibility.

commit 65a7967a046c22abadfd526954a2cd0002ea26cf
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 23 12:17:37 2009 +0800

    Remove unsued <span> element
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit da45f12a081ac6ade2bcf0ccf282eb1622cd9e50
Merge: bfca0c7 e13cf75
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 23 12:05:11 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit bfca0c79030d5b8a18e41e8b80f5560ebaf6f202
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 23 12:00:49 2009 -0700

    Refactor the install/upgrade code to be more flexible.
    
    Add xxx_installer::upgrade($version) method so that upgrade stanzas
    are separate from install stanzas.  In the old code, to do an upgrade
    meant that you had to re-evolve everything from the initial install
    because we'd step through each version's changes.  But what we really
    want is for the initial install to start off in the perfect initial
    state, and the upgrades to do the work behind the scenes.  So now the
    install() function gets things set up properly the first time, and the
    upgrade() function does any work to catch you up to the latest code.
    See gallery_installer.php for a good example.

commit 342d5e118664274fb1d8329734815640f5169887
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 23 11:53:38 2009 -0700

    Order log entries by id as well so that multiple events in the same
    second are still shown in descending order.

commit 8f443cef3e304c12f9e3555332880395051e7e3d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 23 06:06:33 2009 -0700

    This change implements the print_proxy method.  This method allows a 1 time
    security bypass for the remote print processor to retrieve the fullsize image.

commit 3824f2b52fed7bbbd3e1c91eafff9df21be6c765
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 23 05:26:44 2009 -0700

    Extract the html for the Print button on the album page into a seperate view

commit 5b28cff1da08e297b52556c6c1575527e2f0ffa2
Merge: 58d5624 e13cf75
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 23 04:51:13 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit de28b0350e5d5bf6c3e1eb5a9531298b08fd7cba
Author: Romain LE DISEZ <romain.git@ledisez.net>
Date:   Tue Jun 23 10:14:38 2009 +0200

    Use an integer because the code store 0 and 1. It
    improves compatiblity with PgSQL.
    The right way is to use a BOOLEAN and code with
    booleans. The values would be :
     - FALSE => deny
     - TRUE  => allow
     - NULL  => unknow

commit d601ab93beb9be2cc69d64fa04803ff3c3601c3a
Author: Romain LE DISEZ <romain.git@ledisez.net>
Date:   Tue Jun 23 10:12:09 2009 +0200

    Value stored in comment.state is not 15 char length.
    Use a VARCHAR instead of a CHAR. It improves compatibility
    with PgSQL.

commit c80d2da0a95a63b76f5a4c835f1a0e1022ec2f53
Author: Romain LE DISEZ <romain.git@ledisez.net>
Date:   Tue Jun 23 10:09:46 2009 +0200

    Remove an useless ORDER BY.
    It improves compatibility with PgSQL.

commit 2e6a1d6fdc562b2ff797deaf8b8ab019c17ed113
Author: Romain LE DISEZ <romain.git@ledisez.net>
Date:   Tue Jun 23 10:08:55 2009 +0200

    SQL is case insensitive

commit 04f34516f89451b5a3af6a122f740dc30112e597
Author: Romain LE DISEZ <romain.git@ledisez.net>
Date:   Tue Jun 23 10:05:15 2009 +0200

    Improve compatibility with other RDBMS

commit 58d5624e401f1c369cbbf913008775bc5a165570
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jun 22 21:51:22 2009 -0700

    This commit moves a little further along the path:
    1) moves the print button from the quick pane to thumb_bottom
    2) Creates an entry into the proxy table

commit e13cf758b6a296c80b80b83bdf8f9450365edcfe
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 23 12:17:37 2009 +0800

    Remove unsued <span> element
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit a8a366e3398ef15dcc67f70c25f7a34d99757e12
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jun 22 21:17:37 2009 -0700

    Remove unsued <span> element

commit 34ff60a039ee406ed77ff4b66608ce6b65ba727e
Merge: 6b552fb ec61cd5
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jun 22 15:03:28 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit ec61cd5031c01028dee3435d6b25430ab068ec01
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 22 14:20:28 2009 -0700

    Fix css indentation

commit d8fe96d70b938b6d7f226fdd6564b25877558a04
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 22 13:48:19 2009 -0700

    Update version comparison to match latest gallery module version

commit 18a2ba8b876a354e155df66379403d65da240de6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 22 13:42:36 2009 -0700

    Strip carriage returns

commit fa7adb76b55b9b827cc66c85ff75973161d51e06
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 22 13:37:08 2009 -0700

    Strip carriage returns

commit 9bdeb726acf4eaaa26e5a90672c8646361fcef9c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 22 13:25:55 2009 -0700

    Fix indentation

commit a5eb5e3e80da0200bd70a503ecf3697bec542dde
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 22 13:25:46 2009 -0700

    Updated

commit e3457f8dba9f65b8d2d80833dd01cc40926ee94b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jun 22 21:27:31 2009 +0800

    Remove debugging output that was overlooked
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 6b552fb07c8a162c9755895c132c6985c9dd1ddc
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jun 22 06:27:31 2009 -0700

    Remove debugging output that was overlooked

commit fa4bb5b7ac89bbbd0325e5c336c2e9b31f59d12b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jun 22 20:46:40 2009 +0800

    Change the quick pan from static to dynamic.  This allows modules to add buttons to the
    quick pane.  The quick pane is now divided into 4 sections: left, center, right and
    additional.  Additional items appear in the drop down box.  Buttons are not sorted
    within the groupings.
    
    In addition, the quick pane will overflow onto the "additional" dropdown if there is not
    enough room to display all the buttons.
    
    The use case is the digibug printing module needed to add a button to the quick pane, and
    I don't like putting code into core that says if module is active... That's another one
    of those code smells :-)
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 05f8659a7ffa35cb1458c69e4db1196aa384fff0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jun 22 06:03:55 2009 -0700

    Fix preamble so tests pass

commit f981484a8051c0d5d05dae55882aefdb7094403a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jun 22 05:52:47 2009 -0700

    Add a digibug printing button to the quick pane

commit ee8887045e8f6702b13565173ba80330fcdb4572
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jun 22 05:46:40 2009 -0700

    Change the quick pan from static to dynamic.  This allows modules to add buttons to the
    quick pane.  The quick pane is now divided into 4 sections: left, center, right and
    additional.  Additional items appear in the drop down box.  Buttons are not sorted
    within the groupings.
    
    In addition, the quick pane will overflow onto the "additional" dropdown if there is not
    enough room to display all the buttons.
    
    The use case is the digibug printing module needed to add a button to the quick pane, and
    I don't like putting code into core that says if module is active... That's another one
    of those code smells :-)

commit 284fea0870bd0087db168bb2dfca6ae62c1b0849
Merge: 39cf3c2 49975f1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jun 21 18:21:00 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 49975f10b9982d95b36681be536f3f70fa46dbf4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 21 15:15:07 2009 -0700

    Add width/height to the logo <img>

commit 06f066164f60fe0babbc7a480e6319a0702e0c46
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 21 15:09:32 2009 -0700

    Add Session::abort_save() to Kohana.
    Filed upstream as: http://dev.kohanaphp.com/issues/1801

commit 39cf3c2b046b03691937e112268403130508da63
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jun 21 08:52:26 2009 -0700

    The start of the digibug printing module.  The first cut at the administration
     panels.  <Caution:> This is still a work in progress.

commit 1fa05d2f39604febda698743d78ff0c36cd25f5f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 20 21:41:09 2009 -0700

    Updated to Exifer r4107

commit 6c6259c6c92add7d0c89159232a19c35fdab022b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 20 21:00:17 2009 -0700

    Update jquery-ui to 1.7.2

commit 4378dc460eaf3c2cdd8404539f73b77574375613
Merge: f91c92c 2103c02
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 20 20:43:21 2009 -0700

    Merge branch 'master' of git://github.com/unostar/gallery3

commit f91c92c883aaf0de2ec5e164d93c67438d9a219e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 20 20:41:17 2009 -0700

    Update to 1.4.2

commit 595f48440a1120c32d96cde06db949db5f692c1a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 20 20:41:00 2009 -0700

    Update to 1.2.7

commit 433995941d851ddb25097f034084490f6071fae2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 20 17:48:44 2009 -0700

    Reapply the change from aaac2441241df5565b4fa1562065a387e56578e1 where
    we comment out the code that prevents the file uploader code from
    aborting when there are input elements named "submit".

commit aef6c1e75075dbb78da2e914355cce2e2a45dc1f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 20 17:47:13 2009 -0700

    Updated jquery.form to a9c8862544aa3dde81c0aa1554edce148b31742d (2.28)

commit 8383ea9827048bab9b166a5df24d1384c676d9cb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 20 16:55:09 2009 -0700

    Keywords in G2 are free form.  So we don't know what our user used as a separator.  Try to
    be smart about it.  If we see a comma or a semicolon, expect the keywords to be separated
    by that delimeter.  Otherwise, use space as the delimiter.
    
    Fixes ticket #446

commit ef7f1d07b246c0d58fd5322cfcdd8fb0cfbee2f3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 20 12:09:49 2009 -0700

    Center the "all done" dialog.  Use Jquery and externalize the CSS (I was being
    too conservative before).  Fixes ticket #413.

commit acd54fefdabf9eabd16f04bb76cf128c479b0291
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 20 01:24:21 2009 -0700

    Fix a bug in gallery_installer where on an initial install we were
    only implementing schema version 1.  This caused install.sql to be
    populated from version 1 which meant that after install you'd have to
    run the upgrader.  No harm done, and the pattern is fixed for the
    future.
    
    Alphabetize the tables so it's easier to find stuff.

commit 2103c02326d071d7cd9c7fe2e3cfd919664802e1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 20 06:56:55 2009 +0800

    More minor facelift for the admin/g2_import page.
    
    Signed-off-by:  <unostar@danalan.info>

commit caa5c39ae25a4914c29082a4d7fcc714f2424888
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 20 04:47:38 2009 +0800

    Give the admin/g2_import page a facelift.
    
    Signed-off-by:  <unostar@danalan.info>

commit 4e676c8d0bd640e8cbdc5d32576b8a2bf6b943eb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 20 04:35:53 2009 +0800

    Move 'Permissions' above 'STUFF THAT NEEDS A HOME' since I think that
    the stuff that needs a home is a catch all and should be at the
    bottom.
    
    Signed-off-by:  <unostar@danalan.info>

commit fb888c7598f163e839f204e7d03523c1e0012022
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 20 04:25:42 2009 +0800

    Improve the task dialog
    1) Put a "starting up..." message before there's any feedback from the server
    2) show the title of the task in the dialog.
    
    Signed-off-by:  <unostar@danalan.info>

commit acadb3623b4e6c6ab5c8407c67fa12a8beb7db33
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 20 03:03:35 2009 +0800

    Catch exceptions from tag::add() that can be caused by character
    encoding issues resulting from embedded keywords in encodings we can't
    decipher.  This can lead to weird truncation issues which in turn can
    lead to multiple tags getting truncated to the same value in MySQL
    which leads to mysql complaining that we're adding a duplicate tag.
    
    Signed-off-by:  <unostar@danalan.info>

commit 4e1e429fbfa49c60fb4a24c05af1debcd433c0d4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 20 01:30:59 2009 +0800

    Swap the order of two lines to make the debug output have the right data.
    
    Signed-off-by:  <unostar@danalan.info>

commit 73a34bdff38f1663d2c861bf5780835948cccb3e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 20 01:14:27 2009 +0800

    Fix a javascript error that was breaking IE, and localize
    ADD_A_COMMENT otherwise ui.init.js bombs.
    
    Signed-off-by:  <unostar@danalan.info>

commit 99c780fd769765b75d53925e27b5a540a2d1320e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 20 00:58:36 2009 +0800

    Add an id to the exif link anchor.
    
    Signed-off-by:  <unostar@danalan.info>

commit 2d54edc50e281016fca9f4b2710dd9f305051393
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Fri Jun 19 03:44:05 2009 +0800

    Fix format of source message in l10n client (adding a newline between plural forms)
    
    Signed-off-by:  <unostar@danalan.info>

commit 1d9f9138fb1ab67866f611a92527304a937b9ad8
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Fri Jun 19 03:35:07 2009 +0800

    Fix plural messages in l10n scanner - Bad typo lead to basically breaking all plural ("other") forms.
    
    Signed-off-by:  <unostar@danalan.info>

commit 39b12cb4320a3f9fd7589aa701cbea4996d974a2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 19 03:24:33 2009 +0800

    Make an attempt to catch all situations where loading an item from G2
    returns an error, and log them appropriately.  This should fix a slew
    of import failures from corrupt G2 installs.
    
    Signed-off-by:  <unostar@danalan.info>

commit b72d0db7bee59d04dfc5036b35586210e81718e6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 19 15:56:55 2009 -0700

    More minor facelift for the admin/g2_import page.

commit feab9cfc34d96637243eeefe22c886054caf4a9d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 19 13:47:38 2009 -0700

    Give the admin/g2_import page a facelift.

commit c2faf5f8c811cdab334548289a5f35c1f4e7c8bf
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 19 13:35:53 2009 -0700

    Move 'Permissions' above 'STUFF THAT NEEDS A HOME' since I think that
    the stuff that needs a home is a catch all and should be at the
    bottom.

commit b3226d7cbb4c9dbd2d6244d527cc7c4398489f47
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 19 13:25:42 2009 -0700

    Improve the task dialog
    1) Put a "starting up..." message before there's any feedback from the server
    2) show the title of the task in the dialog.

commit 6029c2bf7a3b57289e16545b98ed2a5aa3f71be2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 19 12:03:35 2009 -0700

    Catch exceptions from tag::add() that can be caused by character
    encoding issues resulting from embedded keywords in encodings we can't
    decipher.  This can lead to weird truncation issues which in turn can
    lead to multiple tags getting truncated to the same value in MySQL
    which leads to mysql complaining that we're adding a duplicate tag.

commit b999b35d2471e65d99e6f90fde9ae96688c7a922
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 19 10:30:59 2009 -0700

    Swap the order of two lines to make the debug output have the right data.

commit d54afb71d42da1b2a3c289a3a95dfa672a172607
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 19 10:14:27 2009 -0700

    Fix a javascript error that was breaking IE, and localize
    ADD_A_COMMENT otherwise ui.init.js bombs.

commit cdb4052b5245315cf6619dfeb3488fd17ebc54e0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 19 09:58:36 2009 -0700

    Add an id to the exif link anchor.

commit b6290b45cfbe875503bb7d6554e960d7007f3a06
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Jun 18 12:44:05 2009 -0700

    Fix format of source message in l10n client (adding a newline between plural forms)

commit 5ef6db85fb501ba39b06b61d312931dd789b5426
Merge: 926eab7 d549000
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Jun 18 12:36:06 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 926eab7168ee2f8de0a02ebbbe82ae8801a360a0
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Jun 18 12:35:07 2009 -0700

    Fix plural messages in l10n scanner - Bad typo lead to basically breaking all plural ("other") forms.

commit d54900032f13d0b1d0e9a56c868073c997da6b15
Merge: cdb02c1 d7e6c71
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jun 18 12:25:20 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit cdb02c10a4212cfa63a82d60821feb75edf09204
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jun 18 12:24:33 2009 -0700

    Make an attempt to catch all situations where loading an item from G2
    returns an error, and log them appropriately.  This should fix a slew
    of import failures from corrupt G2 installs.

commit f75f7af88eccd7e059947f6cbd9af325dad8c6f8
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Jun 18 16:47:29 2009 +0800

    Fix l10n messages (malformed html)
    
    Signed-off-by:  <unostar@danalan.info>

commit 4ec997ee74ab9ad505250a4fd677954cf4cd3142
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Jun 18 16:42:59 2009 +0800

    Fix/remove unnecessary escaping of double quotes in l10n scanner.
    
    Signed-off-by:  <unostar@danalan.info>

commit d7e6c71ede78bd0d38f14578f44a24fc00d56845
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Jun 18 01:47:29 2009 -0700

    Fix l10n messages (malformed html)

commit 06f37b5a53c7dc9b8d79355dcc67c9d378a74cc6
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Jun 18 01:42:59 2009 -0700

    Fix/remove unnecessary escaping of double quotes in l10n scanner.

commit a179d6bdf87dc654d7afc903b48def3562a73af0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jun 18 04:34:18 2009 +0800

    Correct the "inappropriate intimacy" smell that bharat's refined senses pick up
    
    Signed-off-by:  <unostar@danalan.info>

commit 9af8027cf30e346b8cf42ade14efee39a8221b0d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jun 17 21:42:31 2009 +0800

    Fix for ticket #366
    Move the creation of the setting menu back to gallery_menu::admin, now that
    there is a mechanism to remove empty menu items
    
    Signed-off-by:  <unostar@danalan.info>

commit e2863cf1c568b2e88d6c08fa67800a13cd4bd067
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jun 17 21:14:36 2009 +0800

    Fix for ticket #366
    1) Stored the menu element type in the menu element
    2) Scanned the menu before display removing any empty sub menus.
    Went with the removal approach because there will more users than developers
    
    Signed-off-by:  <unostar@danalan.info>

commit 34dd08e150583f62d97ff7fd373d2f628649ea32
Merge: a6a9b25 753ce3e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 17 21:52:00 2009 -0700

    Merge branch 'master' of git://github.com/unostar/gallery3

commit a6a9b256ae7ac686ed1f53c05275ae702fb37aad
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jun 17 13:34:18 2009 -0700

    Correct the "inappropriate intimacy" smell that bharat's refined senses pick up

commit 5b767b6443011031190ce2d7580dca2d6dc33e19
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jun 17 06:42:31 2009 -0700

    Fix for ticket #366
    Move the creation of the setting menu back to gallery_menu::admin, now that
    there is a mechanism to remove empty menu items

commit fbefdd55564d2c14e0a4602784abcc51f0279edf
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jun 17 06:14:36 2009 -0700

    Fix for ticket #366
    1) Stored the menu element type in the menu element
    2) Scanned the menu before display removing any empty sub menus.
    Went with the removal approach because there will more users than developers

commit 753ce3e02596c9dc1bc072707c214197088b4611
Author: unostar <unostar@danalan.info>
Date:   Wed Jun 17 01:26:47 2009 -0700

    Add "custom_translations" instruction to captcha form builder to add possibility to localize and customize form.

commit 1a911d4b5c5b8b337806209611f5eae07dfe9abd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 17 14:51:18 2009 +0800

    Fix a bug that was overwriting the quick-pane HTML causing the quick
    panes not to appear.  Oops.  Bug was introduced in the rss refactor:
    1b656be7135efe51ba0eb34d6ac76c2632ec193a
    
    Signed-off-by:  <unostar@danalan.info>

commit 2531f679902e5e4bc5237017debb468c722d6b15
Merge: 5eeb629 1dccc02
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 16 23:51:39 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 5eeb6296a12127cda3c43e749c2bd854a251f94a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 16 23:51:18 2009 -0700

    Fix a bug that was overwriting the quick-pane HTML causing the quick
    panes not to appear.  Oops.  Bug was introduced in the rss refactor:
    1b656be7135efe51ba0eb34d6ac76c2632ec193a

commit f83a080bf13cc84616d9a1f3e95222651178a628
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jun 17 13:09:02 2009 +0800

    Change the page.html file so that if the type of page is login, the sidebar contents are are not shown
    
    Signed-off-by:  <unostar@danalan.info>

commit 145070d718a6031cc16f823e53bbb1a674f1933e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jun 17 12:41:44 2009 +0800

    Fix for ticket #328.
    Basically copied the default/views/pager.html to admin_default/views/pager.html
    and change the message to reflect the original comment message.
    
    Signed-off-by:  <unostar@danalan.info>

commit cbeee943b11922b147592d2dfb8b0fcba1c764d2
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Wed Jun 17 11:33:44 2009 +0800

    Beautify "Show All" link, and only show when it's not already showing all strings
    
    Signed-off-by:  <unostar@danalan.info>

commit 022d12cb860f57e4ece95686537e5aaa8291d713
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Wed Jun 17 11:25:01 2009 +0800

    Add option to list *all* l10n messages (that have been indexed) in l10n UI
    
    TODO: The "Show All" link is almost invisible (link color ~= background)
    
    Signed-off-by:  <unostar@danalan.info>

commit 236d5ff76dfae5d52a3b3d81b28332b3a33b122e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 17 11:10:25 2009 +0800

    Add support for uploading .jpeg files (in addition to .jpg)
    
    Fix for ticket #428
    
    Signed-off-by:  <unostar@danalan.info>

commit 04853f19965a4b175fd29e823480eb64d7002654
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 17 10:50:26 2009 +0800

    Swap Jakob's placeholder in for mine.
    
    Signed-off-by:  <unostar@danalan.info>

commit 18a313c454d07011bb9707cf2eb806bcb4f764fb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 17 10:44:15 2009 +0800

    Use a placeholder image if ffmpeg is missing instead of throwing an
    exception which would get silently swallowed by swfUpload.
    
    Signed-off-by:  <unostar@danalan.info>

commit 69296a222378bf968ed66d30ae2b2305ea542ffa
Author: jhilden <jakobhilden@gmail.com>
Date:   Wed Jun 17 10:35:44 2009 +0800

    added movie placeholder icon
    
    Signed-off-by:  <unostar@danalan.info>

commit d5e3d60fcf6a74a4fec50fee5ae6874ce2017975
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 17 09:05:23 2009 +0800

    Move the show_full_size code into gallery/lib so that it's generally
    available to themes that want to use it.  It should probably
    eventually be generalized away from just being for full sized images,
    but it's a step in the right direction.
    
    Fixes ticket #427.
    
    Signed-off-by:  <unostar@danalan.info>

commit 15f3d58b0275c1e59d380730e01c061747e95067
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 17 08:57:24 2009 +0800

    Add the real image url to the anchor elements for our full size links
    so that right clicking works.
    
    Turn the full size rendering code into a function and call it with
    arguments, instead of creating a hacky named data structure to hold
    the info.
    
    Further partial fixes for ticket #427.
    
    Signed-off-by:  <unostar@danalan.info>

commit 8af66822e203c8546a293f9c31a3836fb89c97df
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 17 08:17:39 2009 +0800

    Move all the fullsize code into the theme to make it less confusing.
    Partial fix for ticket #427.
    
    Signed-off-by:  <unostar@danalan.info>

commit b48c4300d40224228fb145ade15d431feab660a6
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Wed Jun 17 05:12:40 2009 +0800

    Fix html bug in l10n message
    
    Signed-off-by:  <unostar@danalan.info>

commit 1dccc0286f3d983352e21f8148fdf4d9e9bc205d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 16 22:09:02 2009 -0700

    Change the page.html file so that if the type of page is login, the sidebar contents are are not shown

commit fd54a5010a22ccf359b94e4e46f39883e8ddca15
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 16 21:41:44 2009 -0700

    Fix for ticket #328.
    Basically copied the default/views/pager.html to admin_default/views/pager.html
    and change the message to reflect the original comment message.

commit 41afbcd100d6469aef46a7dd9e599231cdcb14a9
Merge: 4524022 4fd4793
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 16 20:58:42 2009 -0700

    Merge branch 'master' of git@github.com:talmdal/gallery3

commit 452402293e79598a07c92d3e0667353854aba837
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Jun 16 20:33:44 2009 -0700

    Beautify "Show All" link, and only show when it's not already showing all strings

commit 06ed45f0cb867057eefd5a45d04cba6b8be41411
Merge: be226b9 baea5e3
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Jun 16 20:26:49 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit be226b9baa8ce21431e35c32277fda2e8c94a216
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Jun 16 20:25:01 2009 -0700

    Add option to list *all* l10n messages (that have been indexed) in l10n UI
    
    TODO: The "Show All" link is almost invisible (link color ~= background)

commit baea5e3a1b5a258269accb7ee53f5167607833c2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 16 20:10:25 2009 -0700

    Add support for uploading .jpeg files (in addition to .jpg)
    
    Fix for ticket #428

commit b5582b1d6365a1bba818162df6f59c9238b1b899
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 16 19:50:26 2009 -0700

    Swap Jakob's placeholder in for mine.

commit 349aacaed56aa4fefdb4af0f8806497d188002cf
Merge: b4ef00c a5b314e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 16 19:48:16 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit b4ef00c8d4e55fe7db3147da21cb4239fd3c428c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 16 19:44:15 2009 -0700

    Use a placeholder image if ffmpeg is missing instead of throwing an
    exception which would get silently swallowed by swfUpload.

commit a5b314e7e63a67c347bd595f77a114dab5341432
Merge: 0054caa 7ad5e9e
Author: jhilden <jakobhilden@gmail.com>
Date:   Tue Jun 16 22:39:08 2009 -0400

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 0054caa9a8b0984ad8fdce002ad2947c5d75cd06
Author: jhilden <jakobhilden@gmail.com>
Date:   Tue Jun 16 22:35:44 2009 -0400

    added movie placeholder icon

commit 7ad5e9ee2c6c912932e8c38c992c9b1194c9107a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 16 18:05:23 2009 -0700

    Move the show_full_size code into gallery/lib so that it's generally
    available to themes that want to use it.  It should probably
    eventually be generalized away from just being for full sized images,
    but it's a step in the right direction.
    
    Fixes ticket #427.

commit f6e8f34bef322e087be46274d6cc42490fd22ce3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 16 17:57:24 2009 -0700

    Add the real image url to the anchor elements for our full size links
    so that right clicking works.
    
    Turn the full size rendering code into a function and call it with
    arguments, instead of creating a hacky named data structure to hold
    the info.
    
    Further partial fixes for ticket #427.

commit 51b9873041f1a2161272ad4a3250d52a334024ef
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 16 17:17:39 2009 -0700

    Move all the fullsize code into the theme to make it less confusing.
    Partial fix for ticket #427.

commit 4fd479347111758f19ab77cd3d7ec4e1b6f09a2b
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Wed Jun 17 05:12:40 2009 +0800

    Fix html bug in l10n message
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit c2880f2f77eabccd8eb01acfd3e1f31364f37c0a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 17 04:43:31 2009 +0800

    Warn the end user not to run test or package targets.
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit abfcdce7b166bbcb6dc4a71fbe7b63570c840711
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 17 04:34:42 2009 +0800

    Refactor common xxx_menu() code into private _menu() helper.
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 40b107dd6425de70f58ee97ed395348b7d518aa4
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Jun 16 14:12:40 2009 -0700

    Fix html bug in l10n message

commit 430da0d69e67ba979e86334c09c83403113c8e10
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 17 04:43:31 2009 +0800

    Warn the end user not to run test or package targets.
    
    Signed-off-by:  <unostar@danalan.info>

commit 821918cb6545de1d581a48d7c8d639c294ac045f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 17 04:34:42 2009 +0800

    Refactor common xxx_menu() code into private _menu() helper.
    
    Signed-off-by:  <unostar@danalan.info>

commit 2155a95620c51bfe2c407281b5b72b7190919719
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 16 13:43:31 2009 -0700

    Warn the end user not to run test or package targets.

commit ab38c9277154504d321360a8555593696ee202eb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 16 13:34:42 2009 -0700

    Refactor common xxx_menu() code into private _menu() helper.

commit a405e69dbbc1060e900d822ccac63ee039b553a9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 16 12:35:14 2009 +0800

    Refactor the comment_rss::feed() method to eliminate code duplication.
    
    Signed-off-by:  <unostar@danalan.info>

commit f6be08a4f43c8b26e9b215ac9258a898a863d2a7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 16 11:47:36 2009 +0800

    Fix the bug introduced by r79582ee, where we try to set the title of the tag album to tag->title. which doesn't exist.
    
    Signed-off-by:  <unostar@danalan.info>

commit 0b05383c4565807b8aae8e5c5310a193d01b5a96
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 16 10:59:46 2009 +0800

    Don't try to require GalleryCommentHelper.class if the module is not
    active, since the code may not even be present.  This assumes that if
    the G2 comment module *is* active that the code is present, but that's
    part of the assumption that the G2 we're importing from is healthy.
    
    Fixes ticket #409
    
    Signed-off-by:  <unostar@danalan.info>

commit 4797f5b0cf52434d5c1e3b440cbabb10a05a4ef9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 16 09:15:41 2009 +0800

    Fix up the titles in the default theme.  They've been broken for a
    while.  This fixes ticket #342.
    
    The bug is that we were using $item instead of $theme->item().  But we
    were also not special casing tags properly, and they are effectively
    first class citizens (at least for now) so treat them properly.  Also,
    set page_title by default in the theme so that we don't have to do an
    empty() check on it (makes the theme easier to read) and move the
    title out of Tags_Controller so that the theme has more control over
    it.
    
    Signed-off-by:  <unostar@danalan.info>

commit f7a4ac2b8fb4457514e48aaf4704d69a7a59e208
Merge: ce2fde5 b6c3451
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 15 21:36:30 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit ce2fde5d37f7dd3972eafb644a9ff38532c4bae1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 15 21:35:14 2009 -0700

    Refactor the comment_rss::feed() method to eliminate code duplication.

commit b6c34512313ae96fc4539bfc07add13a3a4b3022
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jun 15 20:47:36 2009 -0700

    Fix the bug introduced by r79582ee, where we try to set the title of the tag album to tag->title. which doesn't exist.

commit b8c68ce2f9e61ff7df5c17cd99142eb75df17a0c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 15 19:59:46 2009 -0700

    Don't try to require GalleryCommentHelper.class if the module is not
    active, since the code may not even be present.  This assumes that if
    the G2 comment module *is* active that the code is present, but that's
    part of the assumption that the G2 we're importing from is healthy.
    
    Fixes ticket #409

commit 79582ee5bfe9f457a31a13ac92ee00efd93fe417
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 15 18:15:41 2009 -0700

    Fix up the titles in the default theme.  They've been broken for a
    while.  This fixes ticket #342.
    
    The bug is that we were using $item instead of $theme->item().  But we
    were also not special casing tags properly, and they are effectively
    first class citizens (at least for now) so treat them properly.  Also,
    set page_title by default in the theme so that we don't have to do an
    empty() check on it (makes the theme easier to read) and move the
    title out of Tags_Controller so that the theme has more control over
    it.

commit 1081eee201cefa0278e189a2296545097c6f1db4
Author: unostar <unostar@danalan.info>
Date:   Mon Jun 15 05:54:45 2009 -0700

    Added "cutom_translations" instruction to Recaptcha to localize & cutomize recaptcha message.

commit 2a5ffaae7e656636bf8c9411358bf4f33c31dde8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 15 13:27:26 2009 +0800

    Create a sidebar for tag pages
    
    Move the <link> for the container feed (either gallery/album/<id> or
    tag/tag/<id>) back into gallery_theme
    
    Signed-off-by:  <unostar@danalan.info>

commit 0051c2c89b71128ff0aefaaa4a77df91dd078016
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 15 12:51:54 2009 +0800

    Refactor the way that the rss module works so that we're not allowing
    the url to dictate arbitrary static method calls.
    
    * Each xxx_rss helper has a single feed() call which takes an id as the argument
    
    * xxx_rss::available_feedS() only returns feeds when they're applicable (ie
      if you're viewing a tag, it won't show you an item feed).
    
    * Feed urls are now in the module/feed_id form so that we can bind a
      feed id to a given module
    
    * Tightened up the Rss_Controller by using url::merge and some other tricks.
    
    * Made the slideshow module express its own feed.
    
    Signed-off-by:  <unostar@danalan.info>

commit 0204a5c9e88f8cd257092e4a619ada02ffcd2821
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Mon Jun 15 12:39:12 2009 +0800

    Move jquery local scroll module from default theme to lib, only load it if viewing photo view. White space cleanup, removed debug print from template.
    
    Signed-off-by:  <unostar@danalan.info>

commit b8eb4956de76018892bb11fd875c2ba8db86b04b
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Mon Jun 15 12:35:12 2009 +0800

    Move jquery local scroll module from default theme to lib, only load it if viewing photo view. White space cleanup, removed debug print from template.
    
    Signed-off-by:  <unostar@danalan.info>

commit 3b684655e2afcb6d24885c98a7821db4d6db4e07
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 15 07:40:57 2009 +0800

    Refactor feed code to use stdClass everywhere.  Fix bugs in the
    max-pages calculation code.  Move feed related data into the $feed
    variable and only pass that to the view.
    
    Signed-off-by:  <unostar@danalan.info>

commit 2ecb00c492c1312e7214c5bb1c2d256225cf2c73
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 15 03:43:06 2009 +0800

    Trap gallery2 errors when we try to load an invalid user id and abort loading that user.
    
    Signed-off-by:  <unostar@danalan.info>

commit 08a5b753453057dedb4c8d25bd68264f92ac0fb8
Author: unostar <unostar@danalan.info>
Date:   Mon Jun 15 02:02:25 2009 -0700

    Add string to localizer

commit ff74d2d809f276039581c1104fc3539e36a871bb
Merge: 1b656be 3d4cbfa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 14 22:28:40 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 1b656be7135efe51ba0eb34d6ac76c2632ec193a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 14 22:27:26 2009 -0700

    Create a sidebar for tag pages
    
    Move the <link> for the container feed (either gallery/album/<id> or
    tag/tag/<id>) back into gallery_theme

commit 32ea4406c87049b25d3d82351097e69f13168311
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 14 21:51:54 2009 -0700

    Refactor the way that the rss module works so that we're not allowing
    the url to dictate arbitrary static method calls.
    
    * Each xxx_rss helper has a single feed() call which takes an id as the argument
    
    * xxx_rss::available_feedS() only returns feeds when they're applicable (ie
      if you're viewing a tag, it won't show you an item feed).
    
    * Feed urls are now in the module/feed_id form so that we can bind a
      feed id to a given module
    
    * Tightened up the Rss_Controller by using url::merge and some other tricks.
    
    * Made the slideshow module express its own feed.

commit 3d4cbfa274dba7386d4cf5f2130ba85350ff0cbf
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Jun 14 22:39:12 2009 -0600

    Move jquery local scroll module from default theme to lib, only load it if viewing photo view. White space cleanup, removed debug print from template.

commit abd933d9bec63efebb2af5e3df2b714bef496397
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Jun 14 22:35:12 2009 -0600

    Move jquery local scroll module from default theme to lib, only load it if viewing photo view. White space cleanup, removed debug print from template.

commit 00fad54c0babfb0643c2ab9da98b4b74af84d466
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 14 16:40:57 2009 -0700

    Refactor feed code to use stdClass everywhere.  Fix bugs in the
    max-pages calculation code.  Move feed related data into the $feed
    variable and only pass that to the view.

commit 47bc53eb5c328254d431caebf8acfd2636969bb4
Merge: dc3ed06 f18fb93
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 14 15:58:02 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 83d1b15c1e9ca89cc55879a5582cd9abafc5a792
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jun 15 03:38:57 2009 +0800

    Don't use stdClass to return the feed data. Just use an array.
    
    Signed-off-by:  <unostar@danalan.info>

commit 6007843c4acf3a83580989351de73ae64a2e61ed
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jun 15 03:09:47 2009 +0800

    Remove the sidebar flag from the feed definition returned by available_feeds and
    replace with a type field with one of two values (head and block).  We need to
    do this to determine what fields go in the rss block so we can ignore the
    definitions that are related to the page head when creating the rss block that
    goes into the sidebar.
    
    Signed-off-by:  <unostar@danalan.info>

commit fdbffc870d84ec035068420f5a8b4292d7aade13
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jun 15 02:39:53 2009 +0800

    Remove rss:item_feed, rss::tag_fead and rss_theme::head and move that
    functionality in the <module_name>_theme::head function. Created rss::feed_link
    to wrap the module supplied uri in the html link element.
    
    Signed-off-by:  <unostar@danalan.info>

commit 879e81f0a1fc4477a8e563d45348330706b6da8a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jun 15 02:20:08 2009 +0800

    Rename:
     rss::get_feeds() -> rss::available_feeds()
     rss::process_feed() -> rss::feed_data()
    
    Signed-off-by:  <unostar@danalan.info>

commit 10d9c6a92ac0002b4838d6a4056fe9cce5b934ba
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jun 15 01:13:12 2009 +0800

    Rename Rss_Controller::__call to Rss_Controller::feed, which changes the feed
    url to rss/feed/<feed name>/[<id>]
    Where feed name is the name of the feed (i.e. albums, updates, comments, tags
    etc.) and id is the optional element id that the feed applies to.
    
    Signed-off-by:  <unostar@danalan.info>

commit fda706f55cab4bd65b90e25a82b59a83e40443ed
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 15 01:41:34 2009 +0800

    Get rid of the word "items" in the delete confirmation dialog.
    
    Signed-off-by:  <unostar@danalan.info>

commit b0e7dded2362de6cc7b2bfad47286de322d79064
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 14 08:15:32 2009 +0800

    Add a warning about eAccelerator interfering with g2_import.
    
    Signed-off-by:  <unostar@danalan.info>

commit dc3ed06cd76ebc7b949865be789fb26590d63ed0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 14 12:43:06 2009 -0700

    Trap gallery2 errors when we try to load an invalid user id and abort loading that user.

commit f18fb934427ce09896b51d49520b04fba0f1dd44
Merge: 8b7f7a2 80b464f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jun 14 12:40:42 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 8b7f7a2fbe30c8e17f60177db7f371e1d1f2152c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jun 14 12:38:57 2009 -0700

    Don't use stdClass to return the feed data. Just use an array.

commit 76b89556fc138dce694178fab9140a8242ea40ec
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jun 14 12:09:47 2009 -0700

    Remove the sidebar flag from the feed definition returned by available_feeds and
    replace with a type field with one of two values (head and block).  We need to
    do this to determine what fields go in the rss block so we can ignore the
    definitions that are related to the page head when creating the rss block that
    goes into the sidebar.

commit 484796e7cc54c3690462ee061850b563c4d5da16
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jun 14 11:39:53 2009 -0700

    Remove rss:item_feed, rss::tag_fead and rss_theme::head and move that
    functionality in the <module_name>_theme::head function. Created rss::feed_link
    to wrap the module supplied uri in the html link element.

commit b32670f0300b24ad8366d154c3b9a6853f9c710f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jun 14 11:20:08 2009 -0700

    Rename:
     rss::get_feeds() -> rss::available_feeds()
     rss::process_feed() -> rss::feed_data()

commit 80b464fdbda4a10a318fa2203dbea8d51ba83709
Merge: e7af4cd cf687fe
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 14 11:02:08 2009 -0700

    Merge branch 'master' of git://github.com/dkm/gallery3

commit e7af4cd1b0cb68f34370c57d3832bed6df7e694c
Merge: aaa215a b86e657
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 14 10:58:05 2009 -0700

    Merge branch 'master' of git://github.com/unostar/gallery3

commit aaa215a285845b6dbfcb1eed86593dee1f557b43
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 14 10:41:34 2009 -0700

    Get rid of the word "items" in the delete confirmation dialog.

commit 7773d0afe835e040eb0238247b98eae305c0c9e9
Merge: d95fcb1 390bc7c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 14 10:38:02 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit e581440c3d17d3e316b890e2fec393d47006c862
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jun 14 10:13:12 2009 -0700

    Rename Rss_Controller::__call to Rss_Controller::feed, which changes the feed
    url to rss/feed/<feed name>/[<id>]
    Where feed name is the name of the feed (i.e. albums, updates, comments, tags
    etc.) and id is the optional element id that the feed applies to.

commit b86e657194c2abaf53eba3752d4c63af1e689f67
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Mon Jun 15 00:42:14 2009 +0800

    Switch quick delete from JS confirm to jQuery UI dialog, closes ticket #355.
    
    Signed-off-by:  <unostar@danalan.info>

commit a89c871861d002a5a3174c01533919f7d12ff772
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 14 08:06:34 2009 +0800

    Remap mysql_xx() functions to their mysqli counterparts if the mysql
    extension is unavailable.  Fixes ticket #393.
    
    Signed-off-by:  <unostar@danalan.info>

commit 390bc7c1f6b79924e42b326718ee244ee989243a
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun Jun 14 10:42:14 2009 -0600

    Switch quick delete from JS confirm to jQuery UI dialog, closes ticket #355.

commit d95fcb189f7fb9709b5ee30cbeded611fc04a7a2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 13 17:15:32 2009 -0700

    Add a warning about eAccelerator interfering with g2_import.

commit 52ac0e71726bae4e0b6c5aed0c92308d49b3f933
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 13 17:06:34 2009 -0700

    Remap mysql_xx() functions to their mysqli counterparts if the mysql
    extension is unavailable.  Fixes ticket #393.

commit db321863a6d4448360521d0a3db642ee926e9a1c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 13 14:05:13 2009 +0800

    Move date/time format strings into a setting and bump the gallery
    module to version 2.  First test of our upgrade code!
    
    Signed-off-by:  <unostar@danalan.info>

commit 2afa437aa969d0fb0c238a694a8ea855b3e48978
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 13 14:04:34 2009 +0800

    Add a closing </b> to the warning.
    
    Signed-off-by:  <unostar@danalan.info>

commit 3d89951c778265fb010d4bd20f93ced3ff7502d8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 13 13:44:51 2009 +0800

    Create gallery::date_time(), gallery::date() and gallery::time()
    functions that format a unix timestamp into a date+time/date/time
    string.
    
    Partial fix for ticket #347.
    
    Signed-off-by:  <unostar@danalan.info>

commit 96b533f1b2fe4e01d7dd7e98631833c2e3c13a71
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 13 12:42:01 2009 +0800

    Don't count the root as an album in the stats block.  It'll just confuse our users.
    Fixes ticket #369
    
    Signed-off-by:  <unostar@danalan.info>

commit 8645473df0f2e171458fe72021ad0ccc7036aad6
Author: unostar <unostar@danalan.info>
Date:   Sat Jun 13 05:06:37 2009 -0700

    Corrected my mistake.

commit 5f878e169f7b55c1bd0143305d6ba23f84b3a22e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 12 23:05:13 2009 -0700

    Move date/time format strings into a setting and bump the gallery
    module to version 2.  First test of our upgrade code!

commit 3e71a44a9612edabaaf9a04eac6f15b223ee3966
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 12 23:04:34 2009 -0700

    Add a closing </b> to the warning.

commit 26314d0ef85d4a1e73ca6c9bd728a4cfb8d46d6b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 12 22:44:51 2009 -0700

    Create gallery::date_time(), gallery::date() and gallery::time()
    functions that format a unix timestamp into a date+time/date/time
    string.
    
    Partial fix for ticket #347.

commit 4166fbcd67d828d42b0b1d3d27730355ca8dbce0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 12 21:42:01 2009 -0700

    Don't count the root as an album in the stats block.  It'll just confuse our users.
    Fixes ticket #369

commit 8a089310ce6dc4e12ca80fb1f745156d9d77c6ed
Merge: e076433 878d82c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 12 18:08:37 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit e0764333830fcd16f0b8b3c4e31ff9288349edda
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 12 18:08:14 2009 -0700

    Support imports from multisite G2 installs.

commit 878d82cb4655a1e0c98f75d7d236e1b6a553c0b3
Author: unostar <unostar@danalan.info>
Date:   Sat Jun 13 01:39:35 2009 +0800

    Multi-byte safe function to support all other languages.
    
    Signed-off-by: Bharat Mediratta <bharat@menalto.com>

commit 5f3d33b58ebbf5794eb9f432257e3eff9aaacf82
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jun 13 02:48:13 2009 +0800

    Continue refactoring the rss module and distribute the creation of album and
     tag feeds to the gallery and tag modules respectively.  This chould close
    ticket #388
    
    Signed-off-by:  <unostar@danalan.info>

commit fd3a81f1ee9b1621f5be62ac4e7f595f7aa83fc0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jun 12 23:52:03 2009 +0800

    Move the processing of rss feeds from the rss controller to callbacks in the
     modules that are supplying the feed. The rss controller becomes a router.
    In this change the comment and updates fields are distributed.
    
    Signed-off-by:  <unostar@danalan.info>

commit 94dc6baa4961a178ab68dc4cb0ce7a9bcba0ab26
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jun 12 22:46:42 2009 +0800

    Change from an event driven model to a call driven model similiar to the task
    api.
    
    Signed-off-by:  <unostar@danalan.info>

commit 0da812fdb0188d34a21b2b486c52699959909892
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jun 12 21:58:53 2009 +0800

    Change the "request_feed_links" eventing handling so that individual modules
    provide the part of the url (the suffix) that they are interested in and the
    rss module will format the rest of the url.
    
    Signed-off-by:  <unostar@danalan.info>

commit 1406cb7c0fc401b530c10286aa26434a92a2b113
Merge: 6749a83 30bdaa8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 12 12:00:20 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 6749a835e71826d4f8cffb0d859edc0e2b4e6b96
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 12 12:00:09 2009 -0700

    Work around different initialization code in earlier versions of Gallery 2.

commit 30bdaa81233fc2904367cd39017597b33f05efa9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jun 12 11:48:13 2009 -0700

    Continue refactoring the rss module and distribute the creation of album and
     tag feeds to the gallery and tag modules respectively.  This chould close
    ticket #388

commit f15b4a5f35eed6fde3b675126341c68992a26c11
Author: unostar <unostar@danalan.info>
Date:   Fri Jun 12 10:39:35 2009 -0700

    Multi-byte safe function to support all other languages.

commit dc6c75cd05b66b030daa9b4088ee69758f71e1e8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jun 12 08:52:03 2009 -0700

    Move the processing of rss feeds from the rss controller to callbacks in the
     modules that are supplying the feed. The rss controller becomes a router.
    In this change the comment and updates fields are distributed.

commit d4d145a44302a1438df7416e3046457bc9582806
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jun 12 07:46:42 2009 -0700

    Change from an event driven model to a call driven model similiar to the task
    api.

commit e5793b5b2680cba14dda6bd0242b262baa0d00a6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jun 12 06:58:53 2009 -0700

    Change the "request_feed_links" eventing handling so that individual modules
    provide the part of the url (the suffix) that they are interested in and the
    rss module will format the rest of the url.

commit 1981c9bb09125d2d3471b60477ed5aaa2093f64f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jun 11 15:48:32 2009 +0800

    Rearrange the code in sidebar_block to logically group the code for readability.
    
    Signed-off-by:  <unostar@danalan.info>

commit 4bd82c11670cf9c75ed9f9a1da31e0873a46ed9d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jun 11 15:44:34 2009 +0800

    Changed rss_theme::sidebar_blocks to fire the event "request_feed_links" to
    allow modules to contribute rss feed links to the rss sidebar block.
    Ticket #388.
    
    Signed-off-by:  <unostar@danalan.info>

commit f578906d33234fea363bb7b893ffe23ae8c81db3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 12 17:13:12 2009 +0800

    Convert the filename to a sensible title to match the way that the simple uploader works.
    
    Signed-off-by:  <unostar@danalan.info>

commit 35e5a7d69b04bef171ed30b2f31aad32b83b19f0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 12 15:58:34 2009 +0800

    Add /usr/local/bin to PATH before trying to detect binaries.
    
    Signed-off-by:  <unostar@danalan.info>

commit fcddeefa59e3db8ebc0b394b38e9aef2ddf00371
Merge: f369b8f 67c8108
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jun 12 06:08:14 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 67c81087131e7ef3e4d50ac549bc58dcc98d8cef
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 12 02:13:12 2009 -0700

    Convert the filename to a sensible title to match the way that the simple uploader works.

commit e6ce12e1d3d143f29695ac8dc2db8da4ef54a49b
Merge: b706231 5dcbc38
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 12 01:00:44 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit b70623118ab05ecffb00e26c7eb823c3ee94ce0d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 12 00:58:34 2009 -0700

    Add /usr/local/bin to PATH before trying to detect binaries.

commit 5dcbc3898d3b96af9ff4ea945f15edf39033dac4
Author: unostar <unostar@danalan.info>
Date:   Thu Jun 11 05:12:40 2009 +0800

    adding string to localizer
    
    Signed-off-by: Bharat Mediratta <bharat@menalto.com>

commit e9e61d51bc4a01439c54159aea816d35bf9ef38d
Author: unostar <unostar@danalan.info>
Date:   Fri Jun 12 08:18:51 2009 +0800

    Add string to localizer
    
    Signed-off-by: Bharat Mediratta <bharat@menalto.com>

commit cf687fe15248b4d14f5fefc6eddd91f5dcafe3c2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 12 03:50:50 2009 +0800

    Rename theme_details to theme_options.  These changes got left out of
    68fd196d66e2d21f571ff3b5a673f18cd129abf9 leaving us in a temporarily
    broken state.
    
    Signed-off-by: Marc Poulhiès <dkm@kataplop.net>

commit 15adde714d667be984c2357cd0bf3fae5691ff5c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 12 03:50:24 2009 +0800

    add a missing 'break' after running tests which caused tests not to
    run.
    
    Signed-off-by: Marc Poulhiès <dkm@kataplop.net>

commit df538b6492914947d52284f3f7b00b7c5d6fffdf
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 12 03:48:36 2009 +0800

    Trap exceptions from movie::create() and mark those movies as corrupt.
    
    Signed-off-by: Marc Poulhiès <dkm@kataplop.net>

commit f369b8fabfdffe475464827d6225b2d4895aadb5
Merge: 0b23433 4877f96
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jun 11 21:19:13 2009 -0700

    Merge branch 'master' of git@github.com:talmdal/gallery3

commit 9e348c51c1c61aacd53628b099ca6c344926835b
Author: unostar <unostar@danalan.info>
Date:   Thu Jun 11 17:38:54 2009 -0700

    Adding string to localizer

commit 62a19227b217d9dfafd6f19b4e910e9876c4811b
Author: unostar <unostar@danalan.info>
Date:   Thu Jun 11 17:18:51 2009 -0700

    Add string to localizer

commit 24bd873c4fd32577dc30e3eb591abc1e20f5cde3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 12 03:50:50 2009 +0800

    Rename theme_details to theme_options.  These changes got left out of
    68fd196d66e2d21f571ff3b5a673f18cd129abf9 leaving us in a temporarily
    broken state.
    
    Signed-off-by:  <unostar@danalan.info>

commit 4c7fc9515ba6069aaf560bbdffcd630f3c42361d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 12 03:50:24 2009 +0800

    add a missing 'break' after running tests which caused tests not to
    run.
    
    Signed-off-by:  <unostar@danalan.info>

commit 1d60d8ee46ab0631f628d58e3196276117ad52a4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 12 03:48:36 2009 +0800

    Trap exceptions from movie::create() and mark those movies as corrupt.
    
    Signed-off-by:  <unostar@danalan.info>

commit 0b23433d947bb986db9b1d5775631306e23ed1f4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jun 11 12:50:50 2009 -0700

    Rename theme_details to theme_options.  These changes got left out of
    68fd196d66e2d21f571ff3b5a673f18cd129abf9 leaving us in a temporarily
    broken state.

commit d77f3a9ef03bddf93b05808a9dfe07491e148f51
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jun 11 12:50:24 2009 -0700

    add a missing 'break' after running tests which caused tests not to
    run.

commit ae2fb806c7bebacc295cc3a3fe4cb78dd72c86b6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jun 11 12:48:36 2009 -0700

    Trap exceptions from movie::create() and mark those movies as corrupt.

commit dfa7ec6b0be19a3c03f6bc2f8f09117c1535d37d
Author: Marc Poulhiès <github@kataplop.net>
Date:   Wed Jun 10 22:57:29 2009 +0800

    fix init_embed. test was not correct
    
    Signed-off-by:  <unostar@danalan.info>

commit a5cc8076cee402c2d71e2d0ba2d51061ee0a7966
Author: Marc <dkm@kataplop.net>
Date:   Tue Jun 9 22:16:18 2009 +0800

    fix previous commit
    
    Signed-off-by:  <unostar@danalan.info>

commit 24a72aa819bdafc89e28b937c2bc0e8a22f74a4e
Author: Marc <dkm@kataplop.net>
Date:   Tue Jun 9 19:36:36 2009 +0800

    fix gallery2 import with multisite config
    
    Signed-off-by:  <unostar@danalan.info>

commit b0ae9c02d97877d5fe8522f78deb99be0c4d250d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jun 11 12:23:57 2009 +0800

    Rename theme_details to theme_options everywhere.
    Fixes ticket #317
    
    Signed-off-by:  <unostar@danalan.info>

commit 547a4c39d7b261fc88e92caa7495908beffe6427
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jun 11 12:13:34 2009 +0800

    Actually save the url when editing user information.
    Fixes ticket #363.
    
    Signed-off-by:  <unostar@danalan.info>

commit 5f2dca7a51f246d03496f4cea0dcc795bbe2023a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jun 11 12:05:24 2009 +0800

    Provide a way for non-admins to authenticate and use the upgrader,
    without using our regular code paths.
    
    Signed-off-by:  <unostar@danalan.info>

commit 8d4567f4ccc90c954117cda1a34f9785dbd94b96
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jun 11 11:37:38 2009 +0800

    Fix log links.  html::anchor() implicitly calls url::site(), calling
    it a second time mangles the urls.
    
    Fixes ticket #360.
    
    Signed-off-by:  <unostar@danalan.info>

commit 323b1e6077e82b757e20f30242bc1c53c6786090
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jun 11 11:22:10 2009 +0800

    Improve our warning message to also mention that you need to have mod_rewrite installed.
    
    Signed-off-by:  <unostar@danalan.info>

commit 49b3aa77f757119b404afcca7193cec25dca5b07
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Jun 10 11:33:16 2009 +0800

    Update floats after .rtl addition. Both should work now.
    
    Signed-off-by:  <unostar@danalan.info>

commit 4877f968b4d92c69e2fbecef6c6b1666b8af67f8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jun 11 00:48:32 2009 -0700

    Rearrange the code in sidebar_block to logically group the code for readability.

commit 1272d0837eeefb96af69bbb24a93b05cc818837f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jun 11 00:44:34 2009 -0700

    Changed rss_theme::sidebar_blocks to fire the event "request_feed_links" to
    allow modules to contribute rss feed links to the rss sidebar block.
    Ticket #388.

commit 7815315dbf98f87c4e115a09cb116ac0bc4ca62e
Merge: 315969e 68fd196
Author: Marc Poulhiès <github@kataplop.net>
Date:   Thu Jun 11 09:06:31 2009 +0200

    Merge branch 'master' of git://github.com/gallery/gallery3

commit 68fd196d66e2d21f571ff3b5a673f18cd129abf9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 10 21:23:57 2009 -0700

    Rename theme_details to theme_options everywhere.
    Fixes ticket #317

commit cf9e3db32e7c7f52e92fabc1afca63fdbf741b21
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 10 21:13:34 2009 -0700

    Actually save the url when editing user information.
    Fixes ticket #363.

commit 4118ca4f1db76447da8846fc4835fea702687d21
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 10 21:05:24 2009 -0700

    Provide a way for non-admins to authenticate and use the upgrader,
    without using our regular code paths.

commit 0d5826ab9ff919a9a191e654cb3a3032d31494f4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 10 20:37:38 2009 -0700

    Fix log links.  html::anchor() implicitly calls url::site(), calling
    it a second time mangles the urls.
    
    Fixes ticket #360.

commit d7df3e1681c6b9fc3cf74eb97240932edc15a15f
Merge: 5a6fc93 6fbb2c4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 10 20:22:19 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 5a6fc93496555ad2af73e37fd36979fce2ca3203
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 10 20:22:10 2009 -0700

    Improve our warning message to also mention that you need to have mod_rewrite installed.

commit 6fbb2c4469730d962b807481f3898e5ffb544abf
Merge: 9717c7c 0c5cb02
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Jun 10 20:14:05 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit c7770140ae2bfa325b7b079fc4975a5cd7927c4c
Author: unostar <unostar@danalan.info>
Date:   Wed Jun 10 14:12:40 2009 -0700

    adding string to localizer

commit 0c5cb026a72c3e894cbb7c6a637267f867cc323a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jun 10 08:26:40 2009 -0700

    Only add the comment rss feeds if the comment module is active. fix for #365

commit 315969e24e3ce4cbf06e5160e4738c083b2338be
Author: Marc Poulhiès <github@kataplop.net>
Date:   Wed Jun 10 16:57:29 2009 +0200

    fix init_embed. test was not correct

commit a3c9104568704b5e626c9ac9b95921c8a67ef79a
Merge: 1f1cb01 6601481
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jun 10 07:42:00 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 66014819b4e7fd8a5438eb800675641f7d213e27
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 10 01:23:58 2009 -0700

    refactor CLI support and add a help message.

commit 8c0d48b001429e85af77b736399615965ec20a02
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 10 01:23:44 2009 -0700

    Add CLI sapi support

commit 73de6eedd9100bf88eed4c8d638f118485869cd3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 10 01:23:18 2009 -0700

    Rename package -> packager (it's a noun which has verbs on it).
    Force a HTTP_HOST so that url::base() works.

commit f20bf46868485ba17308fe8e03edcb79077f7e10
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 10 01:21:57 2009 -0700

    Consider the CLI sapi the equivalent of an admin

commit f9d492ba2d7a1d521ba4ba228543682e6a1d2b7f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 10 01:05:13 2009 -0700

    Create 3 separate CLI targets: test / package / upgrade
    Convert single to double quotes
    Get rid of strtr() + DIRECTORY_SEPARATOR crap.

commit 9dabb6d6093e392a678e6ac1544e3dc4c968c63f
Merge: 9b4c7ba 2fa9f29
Author: Marc <dkm@kataplop.net>
Date:   Wed Jun 10 09:55:20 2009 +0200

    Merge branch 'master' of git@github.com:dkm/gallery3

commit 0157ed4cfe19e7a1721cbf3bf0b09db47795371f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 10 00:53:16 2009 -0700

    Update test code to match the change made in 47810c9aec1e6b190a1a90505899669a2c89b770
    where we adjust the site_domain in config.php

commit 9b4c7ba73cc86dca8fb6cf81a37fbf806e643483
Merge: 657e173 fc64a55
Author: Marc <dkm@kataplop.net>
Date:   Wed Jun 10 09:53:00 2009 +0200

    Merge branch 'master' of git://github.com/gallery/gallery3

commit fc64a55f2e6d2e3f16e0806e6672f7d8c8de42a7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 10 00:13:31 2009 -0700

    Golden file update

commit d297f1fdd24c3bc509ee5fd1bb5969976dc8a160
Author: jhilden <jakobhilden@gmail.com>
Date:   Wed Jun 10 02:07:47 2009 -0400

    first stab at makeing the language admin view prettier

commit 9717c7cd83e62458b0dd20414d4814260a3dd57a
Merge: 1e56e68 9ecd2ac
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Jun 9 23:56:17 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 9ecd2ac0e95b3045e763742073d6e6ca1c69832a
Merge: 03e9cef f41a232
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Jun 9 22:07:57 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit f41a232730b02b3fc123aacfacf3dabff46153ae
Merge: d6b808b dab0799
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 9 21:28:08 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit d6b808b726a20570e294e6d3eeeb8ea384979ecf
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 9 21:27:55 2009 -0700

    Add security checks

commit 2fd322deeaf6b6b3f880fe21bf78664870d630a3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 9 21:26:37 2009 -0700

    ACtually implement the upgrader, and add a confirmation box when the
    upgrade is complete.

commit accce788d97d19663a4c39666de03a417b5837b6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 9 21:26:28 2009 -0700

    Fix a bug in set_version() where we were always forcing the value to 1.  Oops!

commit 1f1cb01a967b508374ec9202815cb190bf4ea463
Merge: 16ef912 dab0799
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 9 21:12:59 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 03e9cefa17f1170c8414da672f5fbc3bba9ad56c
Merge: 5f7dfc2 f55686c
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Jun 9 21:10:53 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit dab0799b6557b7ea2ac5e5a262bae4ecf054b80e
Merge: f1c91ab f55686c
Author: jhilden <jakobhilden@gmail.com>
Date:   Wed Jun 10 00:10:18 2009 -0400

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 5f7dfc272e3188fbced26a72881176c98481cfb0
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Jun 9 21:05:33 2009 -0700

    Remove double quotes from module.info (theme.info) attribute values.
    (actually, we did that before: Now removing HTML element attributes since they were delimited by single quotes because PHP's ini parser can't
    deal with double-quotes in values.)
    
    Background:
    Requiring all l10n messages a) to be well-formed HTML and b) to use double-quotes as HTML element attributes, since the l10n server side
    validation normalizes all attribute delimiters to double-quotes). See ticket #254.

commit f1c91ab9779542f1605476bc52c57d5f14294e97
Author: jhilden <jakobhilden@gmail.com>
Date:   Tue Jun 9 23:54:02 2009 -0400

    fixed that you couldn't copy and paste text from the admin dashboard
    
    * made only the block headers draggable, so that the rest of the block could be normal
    * this should fix bug #292

commit 1e56e683fc65a6f369a46dd5fa3db105be9793f5
Merge: 89b6570 f55686c
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Jun 9 21:36:37 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 16ef912154f7adb1d623ac843f480c5f91f05774
Merge: ec0890e f55686c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 9 20:35:37 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit f55686c7ef2ca5f3c2c78588e39ac717064c5e09
Merge: a20246b 7e4fcb9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 9 20:33:31 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 89b6570eccf4d7aa12c730c8115517a5e24fc890
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Jun 9 21:33:16 2009 -0600

    Update floats after .rtl addition. Both should work now.

commit a20246b7382ea828157e358dd5ed62ed05db5193
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 9 20:33:06 2009 -0700

    Say hello to the new upgrader UI.

commit 00b528afac33cd4e99fd3e5e648288a9d646eb38
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 9 20:32:37 2009 -0700

    Cache the available module list in module::$available.

commit 7e4fcb97cb4a575811c1e84ced07fbaf4d7ed7ba
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Jun 9 20:10:34 2009 -0700

    Fix HTML bug in l10n message

commit 5e6c8894e23239f2f34f3fb99ab76f43cbabe838
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 9 20:08:48 2009 -0700

    Use a reference in available() to avoid crappy looking dereferencing.

commit 86a32d412f11504ec66f0c9b08973de9ce9c2e30
Merge: 7ccb65e 798444f
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Jun 9 19:49:58 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 7ccb65ea9ebf10e35c09bbebf8ffe1118d3fb0fb
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Jun 9 19:49:06 2009 -0700

    Fix for fetching l10n plural messages. Need to cast from stdclass to array(), as I18n expects all messages to be either string or array.

commit ec0890e42bda0262a621b8c8d3e8a5e8000bbc55
Merge: d0a9d39 798444f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 9 19:47:12 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit 798444f40bbc0344568e9744abf7034b9a59febd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 9 19:45:15 2009 -0700

    Replace login_page.html.php with the form, wrapped in our default page
    type.

commit d0a9d39c6aeec8f78bf8df3b55780b4bec9b8d18
Merge: 7e61bcb e5d273e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 9 19:34:52 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit e5d273e929b630ab86ce31bf75c3e0fa3064ced0
Merge: d0b2544 b276eaa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 9 19:00:22 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit d0b25445119274760af40722eaa95279c2942a89
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 9 18:59:53 2009 -0700

    Check in /usr/local/bin for ffmpeg, and create the setting even if its
    empty (to make it easier for folks to change it in Admin > Settings >
    Advanced)

commit 79d526f1faccb2f929f00c296cb22941d74b8eb2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 9 18:58:40 2009 -0700

    Put in a placeholder link to click on if there's no value for a setting.

commit b276eaa68beca1266bf8fd83625ddfad73f44420
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jun 10 08:38:21 2009 +0800

    Add some window dressing to login_page.html in order to make it more in line
    with the overall look of the Gallery3 theme
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 98422857ebd5bd5c68b7b0060b6f6aef0b74bcbc
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jun 10 08:22:35 2009 +0800

    Forgot this on the last commit
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit a4a38ba76003f5ca8fec0f50b4a84b930c80dd20
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jun 10 08:17:27 2009 +0800

    Created not_authorized.html.php which is a prettier login screen if the root
    album is not publicly browsable.
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 7e61bcbbecefb6b12343a8c6d3f700d282a3528b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 9 17:38:21 2009 -0700

    Add some window dressing to login_page.html in order to make it more in line
    with the overall look of the Gallery3 theme

commit cf86a7b8df9571eef7b507f174ee3f714776d14d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 9 17:22:35 2009 -0700

    Forgot this on the last commit

commit e7a3b6fa55d4eda9140b122bc50681b979229da3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 9 17:17:27 2009 -0700

    Created not_authorized.html.php which is a prettier login screen if the root
    album is not publicly browsable.

commit 70546cdbdac81b811f678c029eab389dc9924bdf
Merge: 08d8d32 b11ec14
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 9 16:27:45 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit b11ec14f2442cd92c4001e14afaadff80bff4ffb
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jun 10 07:18:47 2009 +0800

    Changed how directories are processed when the parent directory is selected and
    the branch was never opened on the client.  This should fix some of the issues
    with the server_add as I was able to select the staging directory and then add
    over 400 images in a multi-tier structure.
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 08d8d320466f676e74a7c04a2fe874fd3a568429
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 9 16:18:47 2009 -0700

    Changed how directories are processed when the parent directory is selected and
    the branch was never opened on the client.  This should fix some of the issues
    with the server_add as I was able to select the staging directory and then add
    over 400 images in a multi-tier structure.

commit 90244e17053ed005643537acca6c475d133cb591
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 9 13:25:11 2009 -0700

    fix typo: "the the" -> "the"

commit 65e73f181b721a582b98b500fc12aa80272def8a
Merge: b84ef45 3c3a65b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 9 13:18:32 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit 3c3a65b5a76c2cb53fe143f2b89d767b36dcafa2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 9 22:18:41 2009 +0800

    Rather than just displaying the "unformatted" login screen when the root album
    is not viewable by a guest, display the root album as if it was empty. When
    the page finishes loading force the login dialog to be displayed.
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit b84ef45eb13f218c63cd904386db6bb737ef8bee
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 9 07:18:41 2009 -0700

    Rather than just displaying the "unformatted" login screen when the root album
    is not viewable by a guest, display the root album as if it was empty. When
    the page finishes loading force the login dialog to be displayed.

commit 2fa9f295ea0e7e323661e0bef9652ed5551d147c
Merge: 93acc00 657e173
Author: dkm <dkm@gre.kataplop.net>
Date:   Tue Jun 9 16:17:22 2009 +0200

    Merge branch 'master' of www.kataplop.net:/var/www/gallery3-marc

commit 657e17361db19ac1878b2a6d93595a763aef8b15
Author: Marc <dkm@kataplop.net>
Date:   Tue Jun 9 16:16:18 2009 +0200

    fix previous commit

commit 8189c1fc6b655907990c7f005936a4758ab7e315
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 9 21:44:08 2009 +0800

    Removed extra whitespace
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit f0ea6d532cbbfd5a95e5b992bc62bb7ecb2c1c3b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 9 21:35:35 2009 +0800

    Create a new method in MY_url.php "get_item_from_uri" which loads the item
    based on the uri.  Then use this helper method in logout.php to insure that
    the guest user has access to the "continue" uri.  If they don't redirect to
    the root album and let it deal with access issues.
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 01042b6d8528a396df1cfa145a43ca589f51ec7c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 9 06:44:08 2009 -0700

    Removed extra whitespace

commit 3b125c0cc0bfaa0b438d8af9e99f297d3e158e23
Merge: 1fc7904 2f2fdb1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 9 06:40:11 2009 -0700

    Merge branch 'master' of git@github.com:talmdal/gallery3

commit 2f2fdb1a8f8c55022ed3b5a7157b803a38c291d3
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Jun 9 14:25:49 2009 +0800

    Show status message when album cover is set (#257)
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 1fc79046568a5fe0c75c520ae643d0c7279ad64b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 9 06:35:35 2009 -0700

    Create a new method in MY_url.php "get_item_from_uri" which loads the item
    based on the uri.  Then use this helper method in logout.php to insure that
    the guest user has access to the "continue" uri.  If they don't redirect to
    the root album and let it deal with access issues.

commit 93acc00959acaa365b0750f4ed8cf1cb2e2caefc
Merge: e77ba1d a42c101
Author: dkm <dkm@gre.kataplop.net>
Date:   Tue Jun 9 13:40:40 2009 +0200

    Merge branch 'master' of git@github.com:dkm/gallery3

commit e77ba1d7512b3d7f4c3cd12bb499e0e296c485ae
Author: Marc <dkm@kataplop.net>
Date:   Tue Jun 9 13:36:36 2009 +0200

    fix gallery2 import with multisite config

commit a42c101c0b76edb403f2f9c646c27539b983394b
Merge: d2b8ca2 e6768a4
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Jun 9 00:26:01 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit d2b8ca241d6b2a1c1a512c731721b738e719d613
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Jun 9 00:25:49 2009 -0600

    Show status message when album cover is set (#257)

commit cb7e375f6cc639b72c7e7ee43b2e2b9bab815697
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 9 14:02:16 2009 +0800

    Try again to properly detect the base url, taking into account the
    sites that mangle SCRIPT_NAME
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit 56f00333cdaa7f7716f35398a7a7a8082248d9be
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 9 12:31:50 2009 +0800

    Fix the admin/themes url.
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit f7a720d2e827925f6fbae4981e2a17fd79eb31f6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 8 23:17:28 2009 -0700

    Rename main_element_attributes() callback to body_attributes() to be
    more intuitive for themers.

commit bb844c1139c84090b446e50234f64063365affc3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 8 08:48:42 2009 +0800

    Improve error handling support for corrupt images and report them
    appropriately in g2_import.
    
    Signed-off-by: Tim Almdal <tnalmdal@shaw.ca>

commit e6768a4e9771f5f751d74001ce3a0d33f6775216
Author: unostar <unostar@danalan.info>
Date:   Mon Jun 8 17:51:56 2009 +0800

    Add string to localizer
    
    Signed-off-by: Bharat Mediratta <bharat@menalto.com>

commit 6bae25d1f30ef91735f75f5cf57e5c778fc213bd
Merge: 47810c9 a334481
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 8 23:04:11 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 47810c9aec1e6b190a1a90505899669a2c89b770
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 8 23:02:16 2009 -0700

    Try again to properly detect the base url, taking into account the
    sites that mangle SCRIPT_NAME

commit a3344814d7bc22bd6a7e55b9a9174fd202ef79f2
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Mon Jun 8 23:19:09 2009 -0600

    Keep status messages. Users click away and may miss them, especially with tasks which take longer to complete.

commit 1ecdb5ef0c82272d8019e4b7d834432f73baf474
Merge: f0ca27a b9ee6f7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 8 21:32:03 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit f0ca27ab924c06cc72a44d66498b86aeda672b33
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 8 21:31:50 2009 -0700

    Fix the admin/themes url.

commit c7aafef85279114a8ae8855647394bb26400b3de
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jun 7 17:48:42 2009 -0700

    Improve error handling support for corrupt images and report them
    appropriately in g2_import.

commit b9ee6f7d185c734dcff595d06d9c6e6fda5822ac
Merge: 0e415da b179b10
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Jun 6 15:24:49 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 0e415dae9b29d792f631d3b94349086b8094c920
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Jun 6 15:24:14 2009 -0700

    Preliminary BiDi support (needs *a lot* of tweaking)

commit b179b106c2b4d3971498f513ffc71eff1b6b1a5d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 6 14:51:04 2009 -0700

    Update Kohana to r4409

commit bccaad92bb3b2ecc7c95e5eaf728b9be6e8a3b3a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 6 14:50:51 2009 -0700

    Update xss golden file

commit d5d5284f053a435934e8beb55060285803c3748f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 6 12:52:44 2009 -0700

    Don't ask for CSRF token when trying to view the password reset form.

commit 277d72d9fad8777ea5483845155ff87b5ad2ce4c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 6 12:50:38 2009 -0700

    Fix formatting.

commit 6feb640b73f4da9f68cf95b129b32f77dfe65929
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 6 12:24:08 2009 -0700

    fix typo: "the the" -> "the" (thanks VENCO!)

commit 3f96830ef111e4358789df25b8afa443df2b4c74
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 6 12:22:20 2009 -0700

    Properly localize domain url in recaptcha explanation.

commit 4302406c96426cb0a037cff5d19bdf46df106331
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 6 12:19:26 2009 -0700

    Fix formatting in l10n client source box so that it wraps.  Otherwise
    long strings show up only on one line.

commit 5835715e49f98943c561d6cee67840488c428175
Merge: ab1fc6a cd92b2e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 6 11:39:11 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit cd92b2ed85f063d990412601c19eeed1783be7c4
Author: unostar <unostar@danalan.info>
Date:   Sun Jun 7 01:49:55 2009 +0800

    Adding strings to localizer
    
    Signed-off-by: Bharat Mediratta <bharat@menalto.com>

commit 6c40fd7b14684d4b6d5502cd1b1bfa856a9f0ce7
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Jun 6 00:44:47 2009 -0600

    New default avatar

commit 7cdcb5179f6d5414c9224fb65b7b36ab69ba52da
Merge: c5425f4 329bd8c
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Jun 6 00:35:39 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit c5425f42a4a13f7f585ffe45c070a865cdef6077
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat Jun 6 00:35:30 2009 -0600

    Remove album view icon link, added album link to info module. This and breadcrumb should suffice.

commit ab1fc6ad533968ac7cb1d0506e989f549935b7aa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 5 19:47:11 2009 -0700

    Make theme page headers match the menu dropdowns.
    Internationalize the admin dashboard common title.

commit 329bd8caa126040ba7abaf28e8f76e0b6739ceff
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Fri Jun 5 18:31:15 2009 -0700

    Remove source code copy artefact

commit 2a9335f71befbb63b979ca207a3dabb72d3ffce8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 5 17:45:42 2009 -0700

    Update version to beta 1

commit 43756026402a7122adc6c57e182d996c92992b7a
Merge: 816e042 3275401
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 5 17:44:57 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit 3275401f690ce8fe461d2986efce58a21d1f6308
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 5 17:44:36 2009 -0700

    change the version to beta 1

commit 816e0427e2f16452591e3eabb816bbec0513d64a
Merge: c835110 275c25e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 5 17:39:59 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit 275c25eb5670e25fad25830cf0c30cd804dce41f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 6 08:37:49 2009 +0800

    Add the exception message to the trace string when there's a graphics
    failure.
    
    Signed-off-by: Bharat Mediratta <bharat@menalto.com>

commit c8351109fee2c54be33bd319235ba4b4e8c404d8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 5 17:37:49 2009 -0700

    Add the exception message to the trace string when there's a graphics
    failure.

commit 4fcad78f54873a5ae86a88199015545ece1b8cb4
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Fri Jun 5 16:10:08 2009 -0700

    Update golden file of Xss test

commit 1d0c1ee87a7ccd254d092054f9be28fadcd74e1d
Merge: b6a0bdb 40c4ce1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 5 15:59:06 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit 40c4ce1b8a1928f6f771a4c21a3916eadc278442
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jun 6 02:45:18 2009 +0800

    Use ORIG_SCRIPT_PATH if it's available to detect the base url, for
    compatibility with the CGI sapi.
    
    Signed-off-by: Bharat Mediratta <bharat@menalto.com>

commit b6a0bdb80284f446a63011ac7b6c9b572dfb09dd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 5 11:45:18 2009 -0700

    Use ORIG_SCRIPT_PATH if it's available to detect the base url, for
    compatibility with the CGI sapi.

commit 73a0df1b16605c94be5942f560da5a7bf930b27a
Author: unostar <unostar@danalan.info>
Date:   Fri Jun 5 21:37:11 2009 +0800

    corrected misprint
    
    Signed-off-by: Bharat Mediratta <bharat@menalto.com>

commit 710d13aeceefc4bc5018acd4602c0975f4c6c048
Author: unostar <unostar@danalan.info>
Date:   Fri Jun 5 21:32:06 2009 +0800

    Correct locale and local translation
    
    Signed-off-by: Bharat Mediratta <bharat@menalto.com>

commit 62a63676d45d4d87aa126ec8fb8694868be0c27a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 5 15:58:25 2009 +0800

    Add Belarusian to the language list.
    
    Signed-off-by: Bharat Mediratta <bharat@menalto.com>

commit a46c4a64312e0cfbf2e6888742f8136f98b6bc7d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 5 15:48:18 2009 +0800

    Localize the 'Add a comment' message
    
    Signed-off-by: Bharat Mediratta <bharat@menalto.com>

commit 7612c8d4045bb8347c8f0548269d8cc7a028bc4a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 5 15:48:04 2009 +0800

    Localize the 'Advanced' menu item
    
    Signed-off-by: Bharat Mediratta <bharat@menalto.com>

commit 1e4bf621f1320ed964bf485954378557ba88d45c
Author: unostar <unostar@danalan.info>
Date:   Fri Jun 5 21:37:11 2009 +0800

    corrected misprint
    
    Signed-off-by: Bharat Mediratta <bharat@menalto.com>

commit 72f4f21d6084a152113deec26e68aa2f55a070ce
Author: unostar <unostar@danalan.info>
Date:   Fri Jun 5 21:32:06 2009 +0800

    Correct locale and local translation
    
    Signed-off-by: Bharat Mediratta <bharat@menalto.com>

commit 05d1bec594775115d3cd597e01e2326eee2fa1ab
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 5 00:58:25 2009 -0700

    Add Belarusian to the language list.

commit b30645e36c0ed6db1c80459a8316a8ec967d5db9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 5 00:48:18 2009 -0700

    Localize the 'Add a comment' message

commit 76abcb7520fc9b7300a22fad14b873d5ce2663a3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jun 5 00:48:04 2009 -0700

    Localize the 'Advanced' menu item

commit 71257cedb63c6124e974635e24ec16af77e49586
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Jun 5 01:17:16 2009 -0600

    Forgot to remove notify css classes in default theme in previous commit.

commit 4d3cb760deead35d070b2277e5e564623de7fa23
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Fri Jun 5 01:14:09 2009 -0600

    Move watch notification menu from the view menu to under the Options menu.

commit c7f49fd1ec3ed7d2261b46e35d21d59a3af11f49
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jun 4 23:20:54 2009 -0700

    Skip over busted images when rebuilding.  Change graphics::generate()
    to return true/false on whether or not it could rebuild the image
    properly, then track the broke images in the task and ignore them.
    
    Fixes ticket #344.

commit 4f0a3fefa035ec351bc881093f49f9bc81941f3d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jun 4 22:11:08 2009 -0700

    Fix a bug in Item_Model::get_position() where we incorrectly using the
    grandparent id.  Oops.  This caused navigation from photo back up to
    album to be broken.
    
    Also update Photos_Controller to use the active sort order.. it was
    still hardcoded to use the id.  It's more efficient now, yay.
    
    Fixes ticket #340.

commit 54927248b0b7b7e71b905c3be129305ba98e0456
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jun 4 22:10:45 2009 -0700

    Updated for csrf in admin.html.php

commit 85d3a962ccfe61692970e1fdcba0c64c40689e21
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jun 4 21:44:15 2009 -0700

    Change XXX to @todo

commit 66c6c3df0e6d722d3c2cc8b12d87b2f3aa903444
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jun 4 21:43:21 2009 -0700

    Convert single quotes to double quotes.

commit 67f920d55531f12dc23da9db9f4a32c02994dfdb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jun 4 21:33:14 2009 -0700

    Add a csrf to the logout link.

commit ac70a1b77a01165d2a293f60c270f4f0f1181380
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jun 4 18:49:45 2009 -0700

    Fix internationalization to use one long string and placeholders.
    Removed the <br/> though since we're trying to avoid structural HTML
    in internationalized strings.

commit 2d7d55014adcd646f259a6e56584a7da7ccaaabc
Merge: 12ef427 a156f1e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jun 4 18:41:41 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 12ef4272aec65db672eb6c8c054e65bdfda29e61
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jun 4 18:40:38 2009 -0700

    Work around a problem with the CGI sapi on urls that don't contain
    index.php (ie, /gallery3 instead of /gallery3/index.php) that causes
    is to mis-route.

commit a156f1e9be64658c735d47ab04852bef6d10e7af
Merge: 81d20c7 e5a0104
Author: jhilden <jakobhilden@gmail.com>
Date:   Thu Jun 4 21:34:20 2009 -0400

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 81d20c79b6c17a3c395d74da9aa995b24fd06810
Merge: 8933a19 5158a6f
Author: jhilden <jakobhilden@gmail.com>
Date:   Thu Jun 4 21:32:45 2009 -0400

    fixed another bug with the filesize unit and added a better error message
    
    Merge branch 'master' of git@github.com:gallery/gallery3
    
    Conflicts:
    	modules/gallery/views/simple_uploader.html.php

commit e5a010476992dd6b5ad949673486571c39536d32
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jun 4 18:19:49 2009 -0700

    Make sure the item is loaded in parse_url() before we use it.

commit 8933a19f1fb56378c1be68bd82c91a577fece87d
Author: jhilden <jakobhilden@gmail.com>
Date:   Thu Jun 4 21:05:33 2009 -0400

    fixed stuff

commit 5158a6f4339ee85b928e6bd33a937a24f91f8bc2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jun 4 17:53:40 2009 -0700

    Add MY_num containing num::convert_to_bytes() which supports PHP's
    size shorthand, and convert the simple_uploader code to use it.

commit 59f3a8486421e94b42c110b6843dff53e9aac91e
Merge: 8d9010c 9306c17
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jun 4 17:37:52 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 8d9010cfe381ddff870c29dd67b687905595ce1f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jun 4 17:36:37 2009 -0700

    Let the Akismet module create the statistics menu, since it's the only
    one that uses it.  Perhaps this is not the best solution, but it's the
    pragmatic one.

commit 9306c178a86c9a29402b34c9939ddf4969e0d022
Author: jhilden <jakobhilden@gmail.com>
Date:   Thu Jun 4 18:29:31 2009 -0400

    set filesize limit of swfupload to the same value as upload_max_filesize
    
    * now users get an error when they try to upload too big files
    * this should fix bug #337
    * maybe it also needs to check for max_post_size

commit 743b321154b326094cc5fb805268c83906c246bd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jun 4 12:23:12 2009 -0700

    Change "CLEAN" to an empty string to see if it's better visually.
    Looks like it is.

commit 1acc64add71fb6e42c377c0ed1ff354516969cd6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jun 4 12:22:41 2009 -0700

    Update xss clean list

commit 7e5a363ffc38950efedc7d55c1b6ecbf2471d96e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jun 4 12:21:51 2009 -0700

    Only request the server_add js if the user is an admin

commit e1ce3196f48c53580d7aa29ca0dba376e223b88f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jun 4 23:23:11 2009 +0800

    Rewrite the server_add to have the server format the selection when a branch is opened. Sub trees re only retrieved when the branch is opened.  Changed the
    start task processing to fill in any subtrees that are selected, but were never expanded on the client.  Added the loading icon.
    
    Signed-off-by: Bharat Mediratta <bharat@menalto.com>

commit 13b12f410e92d09d3071b0d55dc55de65996d975
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jun 4 22:54:22 2009 +0800

    Create a gDialogLargeLoading class for use with dialogs when running something that will take a little longer.  If the standard gLoadingLarge is used with
    a dialog then the ui-dialog-content class will override the background and the loading icon will not be seen.
    
    Signed-off-by: Bharat Mediratta <bharat@menalto.com>

commit fe7779b595979fdf2fa403cc97dbc7468bb01fd4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jun 4 12:12:35 2009 -0700

    Remove console.log() calls, they break some browsers

commit 65df897fcd3065e86d477d594b23bb64b34c308f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jun 4 11:57:36 2009 -0700

    Properly internationalize the "Add some" photos link.

commit c888ce2e7d2959c064577b46633e397a0f9fedc5
Merge: bc38505 0746e7e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jun 4 11:55:23 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit bc3850525139680946633e6e44152ac6c9096002
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun May 31 23:52:08 2009 -0600

    Update notify/watch eyeglasses icon with bullhorn icon. Rename css/image names from watch to notify.

commit 0746e7e10dd94d005f0a45da7634dbf82eff722f
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Jun 3 19:04:44 2009 -0600

    Show an "add photos" message on empty albums for those who can.

commit 3845dba196e4684b188c1fda9ee328ce70a3e7a8
Merge: 6fa9a43 dd85437
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Jun 3 19:01:57 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit dd854379c20722a763ae7fe3d097a57a544cae80
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 3 17:08:23 2009 -0700

    Sanitize all data we return via json_encode() to guard against XSS and
    other data leaks.

commit 05d18da3908ff872f0f726affe1babee975084d8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 3 17:01:33 2009 -0700

    Guard against pages with no items.

commit 6fa9a43d8781565c478c25282ac18a0c1d3a503b
Merge: 1df6db4 bec2fdf
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Wed Jun 3 17:52:06 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit bec2fdf7c485f4658fb1395bf11e1bf7bf601efb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jun 3 16:39:08 2009 -0700

    Minor tweaks to the way that we turn the add photos item into a menu
    to make it a little more robust.

commit 1df6db45dc569cc6f18a9d1622fce5ebe62f8d30
Merge: 2bd8051 dde5fb9
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Tue Jun 2 22:55:23 2009 -0600

    Merge branch 'master' of git@github.com:gallery/gallery3

commit dde5fb96ee9db5a67b286ea4ac4f35190453a6ef
Author: jhilden <jakobhilden@gmail.com>
Date:   Tue Jun 2 19:31:11 2009 -0400

    made "Add photos" its own site menu item
    
    * open for suggestions on the submenu item labels
    * @bharat: not sure about the add photos menu item id in the dropdown case

commit 01c577479420997508b2600138d60eff88781ac7
Merge: e834c4c dbeceb3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 2 15:47:04 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit e834c4ca2434ff687461e39ee02926f449f49287
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 2 15:46:05 2009 -0700

    Have server_add turn the "Add Photo" menu option into a dropdown and
    make "Add from Server" a 2nd option there.
    
    This requires adding the Menu::remove() API function.

commit dbeceb333b876cdfeab35e5b35c4292cda8819e8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 2 14:19:03 2009 -0700

    Improve test isolation so that Albums_Controller_Test doesn't fail when run with Photos_Controller_Test

commit ffb3abdcace93c8397e4660dc0e45d932903dd5a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 2 13:37:19 2009 -0700

    Restore "view" permissions on the root album in teardown.

commit 76fcb8e654823fc9f829f7b6eced5905318634ec
Merge: 61e7b9b 4f50357
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 2 13:12:36 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 4f50357a3873bb612abf1e5fddebe9ee9cbadf40
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 2 12:56:36 2009 -0700

    fix the xss_security_test in regards to the renaming of thumb_tag, resize_tag and move_tag.

commit d8eca7682d36e66cffa86fd101998d72b4e413d1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 2 12:41:59 2009 -0700

    make cleanm static

commit 9f51395151398beecc8eda192a470ab704ec9bc6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 2 12:31:27 2009 -0700

    fix preamble so file structure test passes

commit 0f987880e67c667dc1e2c47455fc9ee0859fcba7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jun 2 12:08:47 2009 -0700

    Fix for ticket #320

commit 61e7b9b8f0803dbc968bfd760b6a0bd77e8c7853
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jun 2 00:48:16 2009 -0700

    Update for beta 1

commit 1cfed1fac1f2aa109e96c2aa5c9f66002610b0f8
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Jun 2 00:43:04 2009 -0700

    Extend L10n client to provide UI for plural translation.
    Ticket 148.

commit f0395984109bb279b6dac157bff885b45e489a52
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 1 23:58:49 2009 -0700

    Move recaptcha widget into a view for clarity.  Also, wrap it in a
    setTimeout() call so that on subsequent reloads (which happen when you
    fail to validate the form) it has time to rebuild the DOM before
    calling the JS which tries to inject the Recaptcha HTML.
    
    Fixes ticket #327

commit 02a840c84cada5a1c0cc0768f350424460310e5d
Merge: d0845aa 3b6567f
Author: andyst <andy.st@gmail.com>
Date:   Mon Jun 1 23:45:37 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 3b6567f38c206f1302c7b22d94d5eae4b458311a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 1 23:20:36 2009 -0700

    Unescape %20 into " " also.

commit d0845aadc629cf10b8eee490a651c039750a1430
Author: Andy <andy@ubuntu.corp.google.com>
Date:   Mon Jun 1 23:08:13 2009 -0700

    Workaround for parse_ini_file issue: There's no way to escape a double-quote in a value that's read with
    parse_ini_file. Using single quotes instead, even if that's not the best style in English.

commit 91c7eb120023ab3d8e1511af6c9f6b6c1109232e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 1 23:00:10 2009 -0700

    Don't throw an error if there are no visible tags.

commit 43abcd93867996e32890fa101ae09255ccc24847
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 1 22:40:22 2009 -0700

    Security pass over all controller code.  Mostly adding CSRF checking
    and verifying user permissions, but there are several above-the-bar
    changes:
    
    1) Server add is now only available to admins.  This is a hard
       requirement because we have to limit server access (eg:
       server_add::children) to a user subset and the current permission
       model doesn't include that.  Easiest fix is to restrict to admins.
       Got rid of the server_add permission.
    
    2) We now know check permissions at every level, which means in
       controllers AND in helpers.  This "belt and suspenders" approach will
       give us defense in depth in case we overlook it in one area.
    
    3) We now do CSRF checking in every controller method that changes the
       code, in addition to the Forge auto-check.  Again, defense in depth
       and it makes scanning the code for security much simpler.
    
    4) Moved Simple_Uploader_Controller::convert_filename_to_title to
       item:convert_filename_to_title
    
    5) Fixed a bug in sending notification emails.
    
    6) Fixed the Organize code to verify that you only have access to your
       own tasks.  In general, added permission checks to organize which had
       pretty much no validation code.
    
    I did my best to verify every feature that I touched.

commit b9af090cbd9ed7d6470e3852bc35ee0cebeaf9bf
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 1 21:44:04 2009 -0700

    Switch the default login page to non-ajax mode.  It looks awful, but better than before.

commit 1145b846ba3ad354579a95bf1c70498472553b54
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 1 21:07:24 2009 -0700

    Fix a place where I shouldn't have renamed "core" to "gallery", breaking maintenance mode.

commit 8c580f75ed7077e55e2ef109c2ab4783c3d98371
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 1 18:20:15 2009 -0700

    use PHP_SAPI instead of php_sapi_name()

commit c31434ea3c3f819950f32337dfe80f83099c5b28
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 1 18:03:07 2009 -0700

    Don't bomb if there are no exif_records for the given item.

commit c94c11eb3e4f48d2dbcc73ea6ca9358170733392
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 1 00:22:30 2009 -0700

    Normalize the random values used in the blocks_dashboard_xxx vars so
    that install.sql is more stable.

commit e4f4c8b2e878ae2941ce784cc7f6b5b219f55c18
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 1 00:11:09 2009 -0700

    Do a little cleanup and get rid of code left-over from when this
    controller rendered HTML.  Also, catch all exceptions at the root
    level and restore the change in
    84ce0cdefda162917c7b01722a7259ac52c4e30d which appears to have gotten
    lost in the shuffle.

commit 3c24d9476618496c8f2e1ca2f6025fa157120e43
Merge: 463b345 79a05ad
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun May 31 23:28:42 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 463b3454ae7633815e24cdf86e81c57409dd15a9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun May 31 23:28:27 2009 -0700

    Move the sql packaging code from installer into the gallery module. It must be run from the command line and will throw a 404 if it is run as a web request.

commit 2bd8051c28621f6c25a3f85b73da2f94d62440f2
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun May 31 23:55:42 2009 -0600

    Forgot these in last commit

commit b1a6bed36d5d4acdfbb5372f467a49c7ab29bc5c
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sun May 31 23:52:08 2009 -0600

    Update notify/watch eyeglasses icon with bullhorn icon. Rename css/image names from watch to notify.

commit 79a05adb9d941671cefbdf6b1cc97f0cd84fabf3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 31 22:33:28 2009 -0700

    Clear the site status message on deactivate, not on uninstall.

commit 9a7e642cd6cc3d250d9d413c3ce0414e92e9d769
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 31 22:30:48 2009 -0700

    Don't let relative_path() try to update the database if the Item_Model
    is not loaded, else you get weird errors.

commit 33df7de391eebdab2cb09ca97207cb81f4274cd1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 31 22:25:53 2009 -0700

    Accidentally broke the AllowOverride info url in the migration from
    core -> modules/gallery.  Fixed, and incidentally make the link appear
    in a new tab/window.

commit 54ae9fac88512f1bac05a5952fca9ade2eab0898
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 31 22:12:14 2009 -0700

    Remove extra blank line

commit b6c99a062bbc8e4316929a73be03969d9d6cd2b2
Merge: 297fb73 55b23a4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jun 1 01:07:59 2009 -0400

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 297fb737ac1e8b5a50a3220cb0841457b042ac92
Author: bharat <bharat@coral.ithought.org>
Date:   Mon Jun 1 01:07:05 2009 -0400

    Convert %7E to ~ when proxying files to work around Firefox's overzealous security model.

commit 55b23a4e86e8ac35437d197b6d09cb3e67360eaa
Merge: 8ebd941 c96b81d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 31 21:51:00 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit 8ebd941c81070b1454ff5e4ab97b4f3e14cbf345
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 31 21:48:43 2009 -0700

    Properly call user::login when we automatically login the admin user
    immediately after install.  Fixes ticket #323.

commit c96b81db6521c8d2b0f3601557011661b0a2d9b8
Author: bharat <bharat@coral.ithought.org>
Date:   Mon Jun 1 00:22:21 2009 -0400

    Fix a warning

commit 1f7cec2e754ad2eb933cf76cd59a88bf49853f49
Author: bharat <bharat@coral.ithought.org>
Date:   Mon Jun 1 00:21:18 2009 -0400

    Change E_NONE -> 0 .. turns out E_NONE is a figment of my imagination according to http://us.php.net/manual/sl/function.error-reporting.php

commit 0ec3f1b830a5b183b9901ab19c934596516e4c69
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 31 19:32:13 2009 -0700

    Update for changes to admin_users_group.html.php

commit 9322f51e23e450a2508b83eec06c890b70ca52a9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 31 19:31:55 2009 -0700

    Localize a string

commit 277c96c2f64e4bac4aaf729221564cdca1e12af2
Author: jhilden <jakobhilden@gmail.com>
Date:   Sun May 31 18:25:43 2009 -0400

    user admin facelift
    
    * added drag & drop help message for empty groups
    * fixed overflow issue with more than ~10 members in one group
    * CSS improvements

commit 181c97ef4b29bb3c68a6c9b5d2f8165e8b44ba29
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 31 12:53:03 2009 -0700

    Relax the regex we use to extract the movie size so that it works with
    the new version of ffmpeg that I have on my dev box (ffmpeg
    0.5-svn17737+3:0.svn20090303-1)

commit f9a741782da848c707ac0a122c35e86061a0fbb2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 31 12:33:10 2009 -0700

    Switch to using html::specialchars() for cleaning.

commit 897ca2806d46134aa00167c5d9d9ab34eee65e37
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 31 01:22:48 2009 -0700

    Updated for renamed variable

commit e30b45be070033d5e68bf3c5eacd5c445ab1c9d5
Merge: 9a6f180 0a5ca7a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 31 01:15:11 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit 9a6f18075a8e0ad070e54d5bf361a3f993915b02
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 31 01:14:28 2009 -0700

    Rename "text" to "title" for clarity.

commit af0031e02946a53062ce2c9dd209a50fb1a12e0c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 31 01:10:52 2009 -0700

    Xss scanner golden file.  Up to date.

commit 2e16c9557c8a1641b3dd5826492f826a1a96bfb0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 31 01:06:51 2009 -0700

    Run all variables containing user-entered text through p::clean()

commit 712fdb55458f5d89fb5e5e4f4f99b8e1c130ba60
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 31 01:03:24 2009 -0700

    Clean up view variables

commit 9369ccab7fb3413d63e218cec81b4cf43442fd98
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 31 01:02:51 2009 -0700

    Run all variables that come from user-entered data through p::clean()

commit 0a5ca7a76644e6535bed49736f3e848cac6c7211
Merge: 45d58c8 2e9b827
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun May 31 00:28:51 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit a049de28ace48a3970371caf24d7c389d8d93cd7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 31 00:13:28 2009 -0700

    Update the clean/dirty format, check all ffiles instead of just one (which was for debugging)

commit 708f27f483d70660446ea2132b02cb7b39225f98
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 31 00:11:48 2009 -0700

    Run p::clean() on any variables that contain data entered by users.

commit ad81861c331f60ec8c19ea11e47e2826660fa142
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 31 00:11:02 2009 -0700

    First pass at an XSS security test, along with the "p" helper which
    can clean HTML output.

commit 18483908976d9dbfa6f0877f380a9ff9ae83ff8c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 31 00:10:12 2009 -0700

    Convert single quotes to double quotes

commit 45d58c8680ab9f1714798b86c0fd268199142ace
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun May 31 00:10:04 2009 -0700

    Remove the test images from the gallery module and move it to the developer module in -contrib

commit 2e9b8277d50fc951d1acb1dd22297ff3d6016fc1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 31 06:34:03 2009 +0800

    Add a / to the end of TMPPATH to match other paths.
    
    Signed-off-by: Bharat Mediratta <bharat@menalto.com>

commit f737963286fe4673dab17fd40d3c37cd257acf4b
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat May 30 23:20:18 2009 -0600

    Remove insertion of content via CSS, it's not supported by IE. Just added sufficient white space as a seperator.

commit 0ab31b516774dd64e427d7acfdcb03dcc849f7bb
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat May 30 23:15:02 2009 -0600

    Fix width of add tag text input in IE

commit d9a3a609f2ba433ae9e0e317fed2339f0032d791
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat May 30 23:10:18 2009 -0600

    Fix height on #gQuickPane in IE

commit f95b51e2197aa42286b15a6759a91404503371ac
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat May 30 23:04:55 2009 -0600

    Fix IE issues with gPager, switch gPager from id to class, it's possible that we might want it to appear more than once in views.

commit 8482f51e1546f9131835bed5cd52bba1f2895e20
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat May 30 23:01:48 2009 -0600

    Add transparency for overlay in IE 7 and 8

commit b4b6a0b8d407301d2c36042e3f0cdf167a11d9b9
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat May 30 21:49:55 2009 -0600

    Focus IE fixes on versions less than 8

commit a5670d8d708c35589a695640694199c7b026877b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 30 17:14:17 2009 -0700

    gate $can_edit and $can_add on whether or not we have an $item at all
    (fixes a bug where search doesn't render because it has no item).

commit 3b3531cbb834c192339292df8ab3e9220a48d924
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 30 15:34:03 2009 -0700

    Add a / to the end of TMPPATH to match other paths.

commit cf00314c6af23715cbb3a451883f55c6d75540bf
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat May 30 16:13:16 2009 -0600

    Use short hex for colors, #cccccc > #ccc

commit dcc67ad2976ed17c7a4eccd56d6aee77b72c084f
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat May 30 16:02:27 2009 -0600

    Refine link colors a bit. Drop orange for hover. Remove underlines for sf-menu hovers.

commit ef14f0faf56738139d034136aa7ab47588581c2c
Author: Chad Kieffer <ckieffer@gmail.com>
Date:   Sat May 30 15:25:24 2009 -0600

    White space fixes

commit 2c1c4d3475f9748c0f43848714ad834977ea9665
Author: jhilden <jakobhilden@gmail.com>
Date:   Sat May 30 12:09:56 2009 -0400

    small UI/CSS facelift for user admin + git test

commit 1559539993100b354431b83a01310cb70a9298b4
Merge: f660eb5 1200881
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 30 01:45:29 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit 120088140cbd81ca86f9986bc3286fbd89957970
Author: tim almdal <tnalmdal@shaw.ca>
Date:   Fri May 29 23:34:24 2009 -0700

    Move the code that was in the scaffolding to package the initial mySql database and var directory to a seperate standalone file in the installer.  This will save the current database environment and restore it when the packaging is complete

commit f660eb55aa9535c10f91ad2812fa073589fcae2b
Merge: 0097803 ce285b8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri May 29 22:28:48 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit f0104ee43bacf1cd532195f802be581d4c428f24
Author: tim almdal <tnalmdal@shaw.ca>
Date:   Fri May 29 21:53:49 2009 -0700

    remove scaffolding code

commit ce285b8feba2f9c495fb153517c2a582421f50e0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri May 29 21:23:08 2009 -0700

    Use the relative_path_cache to look up items which should be a faster
    query than using the level + the components.

commit cbec883d8a572fd8b94c9db78b652caf1a22de23
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri May 29 20:59:34 2009 -0700

    Don't show "edit permissions" for non-albums.

commit 60d1bbc2d68f86b7ed4632cab03f61ee458d0751
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri May 29 20:24:42 2009 -0700

    Move credits message into a variable, which can be changed in Admin >
    Settings > Advanced.  It's stored in the variable as an
    internationalized string and localized at output time.

commit 994830f611c7736716883a6b219fb2848ac3ea24
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri May 29 18:04:54 2009 -0700

    Fix the code to specify which columns its inserting into.  Without
    that it's fragile, and I broke it when I sorted the columns
    alphabetically a day or two ago.

commit 2925a1c7978c436c11c0a6c4dac9fa3ddc0a2396
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri May 29 17:54:20 2009 -0700

    Require "add" permission to show the add form.

commit 381dd0574a9d83ceed1dbf6bcb1f7e158d46c85c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri May 29 17:53:33 2009 -0700

    Don't show the add photo/album options to users who don't have the
    permission.  This isn't a security hole, since they can't actually add
    stuff.. but they can try and fail which is a bad user experience.
    
    Also fix it up so that we show the option menu only if there's stuff
    to show, and cache some of the permissions for performance (which I'm
    guessing at-- didn't benchmark it).

commit 055e0a7dc5d4fe65f92c5621a26432cda206f07f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri May 29 17:42:31 2009 -0700

    Remove a completed @todo

commit 34da188e81c39b472081417b96e75b1102e01707
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri May 29 17:40:23 2009 -0700

    Revert test code inserted in 88a3d43ba9b9377ba6bbe21a4547220ae3a37276
    which showed stack traces to non-admins.

commit b0cb3c74025dd601dcf0ffbc33493c03b7bd1824
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri May 29 12:00:49 2009 -0700

    Update Kohana to r4374

commit 0097803efc1c71711bf9ccf5015fe43e75f8f28d
Merge: f56e095 356bac0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 28 21:42:18 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit 356bac0db0dca5d2b8102b31b6c6b9509f595c29
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 28 21:18:46 2009 -0700

    Restore calls to module::load_modules() after install/activate/deactivate/uninstall events.

commit c4c70c537d1d72ad5e476190c069270450fa7048
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 28 21:13:49 2009 -0700

    Tweak path slightly

commit 73f348b29efea0100b24b31f637c77ceca44911c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 28 21:07:47 2009 -0700

    Protect get() against missing records.

commit d088a41747af4f0da93d8a3ba926d557f157b507
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 28 21:00:06 2009 -0700

    Load the gallery module in load_modules(), but put it at the end of
    the module list (to match its location in the cascading filesystem)

commit 20a2d9f9a8bc0f69b3ebef846a88869870e4e0c4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 28 20:59:23 2009 -0700

    Reset the cascading file path properly before reinstalling.

commit 3da5ee2f4c46947d8fcd5fe54d012ec3d6fa7312
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 28 18:21:39 2009 -0700

    Print out exception traces for most errors

commit 7fd6fcaf9b4d814455758963acf1236034494362
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 28 17:46:17 2009 -0700

    Force modules/gallery to be at the end of the module load path, so
    that all other modules can override the core code.

commit d8f2c9f9f71ce0850e8f33ba96950d3ff72fabde
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 28 17:42:06 2009 -0700

    Revert "Change Kohana::include_path() to put APPPATH (core) at the end of the"
    
    This reverts commit 7e3705540875ac30e9610c5a608fe74399afd2b0.
    
    No longer necessary now that we're putting all the code into
    modules/gallery, which we can force to be at the end of the module
    path.

commit f56e095aeb6e5544360136a48373300f3cecb715
Merge: 8c3135e 1a095ff
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 28 02:36:36 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit 1a095fffe50437dbe7814c52886a58b6309ce8eb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 28 02:19:53 2009 -0700

    Prepend all code files we copy from Gallery2 and put into var with our
    code preamble for security.
    
    Update File_Structure_Test::code_files_start_with_preamble_test to
    check all the php files in var, too.

commit c8aa9ed440f698bc725b21b2808af88001aaacee
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 28 01:58:41 2009 -0700

    Update tests to reflect cache-buster param on thumbnail urls.

commit 534b8525ce95f9d11875cde7a31c93d9c0557475
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 28 01:55:42 2009 -0700

    Rename Core_Installer_Test -> Gallery_Installer_Test to match the
    change from application -> modules/gallery.

commit 8c3135ef723bf494756b44247342af6c8cf6648b
Merge: c1e55e9 6fdc84f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 28 01:46:19 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit 6fdc84f5def3b2f51e62bf06e83d01da4593265e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 28 01:45:39 2009 -0700

    Get rid of entire gallery2 session id param from the urls that we use to alert
    users about images that failed to import.

commit c1e55e9593a6b0ce9f749eb85c4bca1d649e358a
Merge: 93053cf 8d2782a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 28 00:49:41 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit 8d2782ad1df10679b302ab6c4fafdd2f5535be4a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 28 00:45:00 2009 -0700

    Flush the model cache as appropriate every time we call ORM::save().
    Fixes ticket #301

commit ebb0761b8dd10e804c017e8a0d25413796916d72
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 28 00:32:24 2009 -0700

    Label the tag input field according to the item type.
    Fixes ticket #176.

commit df51ea7fa4977922a73af8b7219fff62031f52d4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 28 00:06:38 2009 -0700

    Fix broken html::script() and url::file() references to the newly
    moved gallery module.

commit 1988d77039b67c34521b5f8a1cec200d35249745
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 28 00:06:09 2009 -0700

    Remove unnecessary (and broken) <form/>

commit 93053cf83152082ce2fb365ad2ab6034c9edd4ee
Merge: 993eecf 3870892
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 27 23:15:09 2009 -0700

    Merge branch 'master' of git://github.com/gallery/gallery3

commit 38708920181f3bb7787ccd11128e5f6f0b74cbf7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 27 22:57:38 2009 -0700

    Commit an egregious hack to work around the fact that both Gallery 2
    and Gallery 3 have a class named Gallery.  Clone a subset of the
    Gallery 2 files and munge them so that we can rename the Galery 2
    version to G2_Gallery.
    
    Also, update the disclaimer in Admin > Settings > Gallery 2 Import.

commit 24dce5a85d97856508951123aed09feb206beb82
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 27 21:18:09 2009 -0700

    Fix up another place where we were incorrectly referencing the gallery module.

commit 993eecfee61e502660f490bec5b394640b917bd1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 28 12:05:35 2009 +0800

    Rename index.local.php to local.php so that tab completion on i<tab> works.
    Makes running tests easier.
    
    Signed-off-by: Bharat Mediratta <bharat@menalto.com>

commit f64824b35c1c6e42ffd3106a7ce2a3c430f1e589
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 28 11:40:44 2009 +0800

    Remove extra line from a bad merge
    
    Signed-off-by: Bharat Mediratta <bharat@menalto.com>

commit 567c911fa36fad5f430f7f678753e5a68e6731d4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 27 21:05:35 2009 -0700

    Rename index.local.php to local.php so that tab completion on i<tab> works.
    Makes running tests easier.

commit 66b406ebcf337a6a4c1ea1a22e87a8888ed56096
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 27 20:40:44 2009 -0700

    Remove extra line from a bad merge

commit bb8feb0318723f8e86f769fed899833e5539558f
Merge: 84ce0cd bc9aeb4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 27 20:39:07 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit bc9aeb46259127446c9176141822442800f134f3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 28 10:59:54 2009 +0800

    Normalize root update time in the installer
    Rebuild install.sql
    
    Signed-off-by: Gallery Role Account <gallery@menalto.com>

commit 4dfe93d66451c9d3810c48a0de93ce988796b1c7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 28 10:59:34 2009 +0800

    Fix a typo in the class name
    
    Signed-off-by: Gallery Role Account <gallery@menalto.com>

commit 50ca9b93060dc39296d26fd9838c4123cab95953
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 28 07:31:10 2009 +0800

    Manually updated to change 'core' to 'gallery'
    
    Signed-off-by: Gallery Role Account <gallery@menalto.com>

commit c8f849b38faa7a86e017725fe95b4f4205899286
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 28 07:29:33 2009 +0800

    Convert a few more references of APPPATH to MODPATH/gallery
    
    Signed-off-by: Gallery Role Account <gallery@menalto.com>

commit f89424bc85942d25fa6da2371f5a0e439aaaf33e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 28 07:23:05 2009 +0800

    Show the scaffolding link if the controller is around.
    
    Signed-off-by: Gallery Role Account <gallery@menalto.com>

commit 4eedf804e1f26d95de6803e48c608d893c53b7d0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 28 07:15:00 2009 +0800

    Update all references to the core application to now point to the
    gallery module.  This type of mass update is prone to some small bugs.
    
    Signed-off-by: Gallery Role Account <gallery@menalto.com>

commit 3413fe6bfd423d45d083ff4ed62c0f72c2cc272f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 28 06:11:53 2009 +0800

    Rename 'kohana' to 'system' to conform to the Kohana filesystem layout.  I'm comfortable with us not clearly drawing the distinction about the fact that it's Kohana.
    
    Signed-off-by: Gallery Role Account <gallery@menalto.com>

commit b245e3475f66c94afb94f8b2287bf0185a343732
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 28 06:07:27 2009 +0800

    Restructure things so that the application is now just another module.
    Kohana makes this type of transition fairly straightforward in that
    all controllers/helpers/etc are still located in the cascading
    filesystem without any extra effort, except that I've temporarily
    added a hack to force modules/gallery into the module path.
    
    Rename what's left of "core" to be "application" so that it conforms
    more closely to the Kohana standard (basically, just
    application/config/config.php which is the minimal thing that you need
    in the application directory)
    
    There's still considerable work left to be done here.
    
    Signed-off-by: Gallery Role Account <gallery@menalto.com>

commit 84ce0cdefda162917c7b01722a7259ac52c4e30d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 27 19:59:54 2009 -0700

    Normalize root update time in the installer
    Rebuild install.sql

commit 23884f79686462d5332ee15ebf30c6b30218decb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 27 19:59:34 2009 -0700

    Fix a typo in the class name

commit 578c9f4e5297e515e035c5a709e038403374bef3
Merge: e8cd6bd b7a193c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 27 19:32:38 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit b7a193cc19c7ac3ec67fa297b574fcd6caefe617
Author: tim almdal <tnalmdal@shaw.ca>
Date:   Wed May 27 17:11:27 2009 -0700

    standardize the version check between installer/index.php and index.php

commit e8cd6bd5e71a63ad0950c6344671022bc4fbd436
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 27 16:31:10 2009 -0700

    Manually updated to change 'core' to 'gallery'

commit 5e7cc75a29623781bfdc907c4bf76626151a6caa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 27 16:29:33 2009 -0700

    Convert a few more references of APPPATH to MODPATH/gallery

commit 28b09a304630babf18e41aa56b24152c8babcef0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 27 16:23:05 2009 -0700

    Show the scaffolding link if the controller is around.

commit 88a3d43ba9b9377ba6bbe21a4547220ae3a37276
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 27 16:15:00 2009 -0700

    Update all references to the core application to now point to the
    gallery module.  This type of mass update is prone to some small bugs.

commit 12fe58d997d2066dc362fd393a18b4e5da190513
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 27 15:11:53 2009 -0700

    Rename 'kohana' to 'system' to conform to the Kohana filesystem layout.  I'm comfortable with us not clearly drawing the distinction about the fact that it's Kohana.

commit 00f47d4ddddcd1902db817018dd79ac01bcc8e82
Merge: 28b4105 241d6e4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 27 15:10:06 2009 -0700

    Merge branch 'master' of git@github.com:gallery/gallery3

commit 28b41056e3ea962dce1ad017a3c0a60252195e7a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 27 15:07:27 2009 -0700

    Restructure things so that the application is now just another module.
    Kohana makes this type of transition fairly straightforward in that
    all controllers/helpers/etc are still located in the cascading
    filesystem without any extra effort, except that I've temporarily
    added a hack to force modules/gallery into the module path.
    
    Rename what's left of "core" to be "application" so that it conforms
    more closely to the Kohana standard (basically, just
    application/config/config.php which is the minimal thing that you need
    in the application directory)
    
    There's still considerable work left to be done here.

commit 241d6e4edd67813099149affd5e62364f871b59e
Author: tim almdal <tnalmdal@shaw.ca>
Date:   Wed May 27 09:45:57 2009 -0700

    Add index.local.php to the .gitignore

commit 2e285cf3ecac742193457347ecb5c2d1121a1052
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 27 03:10:20 2009 -0700

    ignore index.local.php

commit cc6cd7e1f364d9ad740f0a47172c79b3562da9ac
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 27 01:58:46 2009 -0700

    Regenerate the session id every time through login::_auth() to avoid session trapping.

commit 0a66ddd2b4ea676e033102812232dd06644845e7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 27 00:50:24 2009 -0700

    Use a random value for the password reset hash to reduce the chances
    that it can be guessed by an attacker.

commit d987af5605afc85c6f7c650d2ad7370c59b0c207
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 26 23:48:00 2009 -0700

    Added -x table prefix docs.

commit 2d0eaedf021fcf4510878954b699674328de8938
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 26 23:10:51 2009 -0700

    Refresh of SWFUpload 2.2.0.1 (functionally the same as before)

commit 500685ec736b4ed8ce852a25f6b1a6439968bfd5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 26 22:28:06 2009 -0700

    Updated Forge to r179

commit 6d1f85463bb091da88c9c7a5dc135d17e1f6a0a0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 26 22:13:38 2009 -0700

    Update Kohana to r4357

commit 1666a86664959633c102f12eafef855fb8ffad06
Author: tweety administrator <tweety@tweety.wolfie>
Date:   Tue May 26 21:19:00 2009 -0700

    ignore the var directory

commit 908618960b831fa153d3a2a6de8ab30fc7f4430b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue May 26 14:43:31 2009 +0000

    Since organize is now in the preview stage and will probably be
    rewritten by beta2, pull all of its "tenticles" back into itself and
    out of core or tags module.

commit 7e5e70548b52462a2f91f3a06cadde7198ea8f6e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 26 06:01:04 2009 +0000

    clean up whitespace errors introduced in last commit

commit 7aed9239088b582a065da3fb63796ff66cd357c8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 26 05:28:59 2009 +0000

    Restructure the module lifecycle.
    
    Install: <module>_installer::install() is called, any necessary tables
    are created.
    
    Activate: <module>_installer::activate() is called.  Module
    controllers are routable, helpers are accessible, etc.  The module is
    in use.
    
    Deactivate: <module>_installer::deactivate() is called.  Module code
    is not accessible or routable.  Module is *not* in use, but its tables
    are still around.
    
    Uninstall: <module>_installer::uninstall() is called.  Module is
    completely removed from the database.
    
    Admin > Modules will install and activate modules, but will only
    deactivate (will NOT uninstall modules).

commit 2966289b147ceae2fed79b9534840607bf38e0d8
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Tue May 26 05:05:04 2009 +0000

    Quick fix for ticket #144. Reapply event handler for delete link gDialog when group is refreshed.

commit 94e36344b2414aec65b2f90a988e5ac211ab9991
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Tue May 26 05:00:19 2009 +0000

    Link to gallery.panel.js from the head, not body.

commit c7922218215bc5601db93c5c0da5793e01769cfe
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Tue May 26 04:56:43 2009 +0000

    Fixed docblock reference

commit 6a49ca262e6c78b1dd718e091a6d985204cd2372
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 26 04:18:07 2009 +0000

    Ignore index.local.php

commit 88e1f02c1a250dae7b8dabeeaf9f6209f4c84942
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Tue May 26 03:59:35 2009 +0000

    Split out re-used JavaScript for common functions (messages, valign), panel toggle, and forms to external files.

commit 916405bc4b572ded4b60a2a2eaececb8402dba0a
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Tue May 26 01:53:18 2009 +0000

    White space fixes

commit 30592cabd2bf062355b88283d5282c296b44c15c
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon May 25 20:46:19 2009 +0000

    Changed name to username in user admin form labels

commit c0584e1e086c8415713911ff021853a8c52ef6bc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 25 06:12:46 2009 +0000

    Delete placeholder comments.

commit 2fd39bb5b62dcc094defae3c9269d808c48849b3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 24 18:27:14 2009 +0000

    Partially revert r20906 -- it was breaking the test framework.

commit 32a2100217115e0cc0776d936df7b19965455f2a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 24 09:19:28 2009 +0000

    Make img_dimensions() return early if the width or height is zero (probably a broken image).

commit 7e3705540875ac30e9610c5a608fe74399afd2b0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 24 06:43:20 2009 +0000

    Change Kohana::include_path() to put APPPATH (core) at the end of the
    module list so that all modules can override core views and helpers,
    etc for max application flexibility.

commit a66046e4ca946ba4757f02c152204922ab66a9fe
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 24 06:12:53 2009 +0000

    Ignore core when we're loading modules (it's not a module!)

commit 3756c849c47aff76220b588f7157e12ef246ccfc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 24 06:11:20 2009 +0000

    Use phpass as our hashing mechanism, and check for it first (instead
    of checking G1/G2 techniquew first).

commit 0a6249ec21b864b9d2ddf0798dbb6efd2bf6ecb9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 24 06:10:09 2009 +0000

    Add support for index.local.php where you can override any existing settings (useful for developers).  This might be a bad idea; trying it out for now.

commit ee0bd765b6792d42eefda46f63a72e66ddd0a93a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri May 22 16:14:42 2009 +0000

    Implement a basic tag management interface with the organize drawer

commit 0451351f5127d17e3fbb0084659538c683a19333
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri May 22 16:13:37 2009 +0000

    Set a minimum distance (10px) that the cursor has to move inorder for
    the draggable functionality to be activated

commit 11c8a84f49f4812e08885120253f2175cf4b7724
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri May 22 00:12:37 2009 +0000

    Added album icon before album titles. Thx again Ben.

commit de9f0450941121acb0faae3fbe8e3c46ce1c93be
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu May 21 14:01:26 2009 +0000

    Standardize the method names

commit fdf7ce24f563d219cc15161ad223435fc537df48
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 21 06:27:21 2009 +0000

    Set the error level to E_NONE for production.

commit 79236fdaa7ef442abe02f42cf3dbba5d06be102e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 21 06:20:11 2009 +0000

    Make our own cookie config and turn on the httponly setting.

commit c9101bc0868e64fdeb45d13d2e0a7b4cbf17e35c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 21 06:06:08 2009 +0000

    Check to make sure that our permission system is working and report
    back to our users in the edit permissions dialog.

commit cce2f3e77ac0b79b5cc94a5404693e358adf2e54
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 21 05:54:59 2009 +0000

    Ignore query parameters in the file proxy.  This strips off the
    recently added cache buster query param.

commit 6f279e4c2db7aa60e13a0a5dfa9cd5cd28aa24ff
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 21 05:07:12 2009 +0000

    Minor cleanups.

commit cc329526c0b0d5d53773b7028b9b76edd0c3df3a
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Thu May 21 04:48:53 2009 +0000

    Changed Name label to Username, closes ticket #93

commit 223669168b6c93e9cf36744a66a1f24279e05eda
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 21 04:05:37 2009 +0000

    Change $view->action to a absolute url.

commit ec6c9b635b80d41ead739eaf437e7f4d9240f1fd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 21 03:50:48 2009 +0000

    Redirect after success to the absolute url

commit b5ff14df33edc819b25ea8a0e401c0f9cb66e1d2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 21 03:42:24 2009 +0000

    Set display_errors to false for security.

commit 893243b048861691fc0d5710b539c4fa60e216ff
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Thu May 21 03:38:24 2009 +0000

    Added Ben Dunkle's current watch icon. Renamed icon file name to keep 'em grouped

commit 09c8953af7696bda51e052243950f9830f905463
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu May 21 02:24:37 2009 +0000

    Provide delete confirmations in quick pane and organize features. If
    I've missed any spots let me know.

commit d4189d947da202062dfc9cd030ebb85e44683d4a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 21 02:03:21 2009 +0000

    Fix the admin credits, too

commit 9d761b4a667ec29f4d4642068ef7808cf1057ab3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 21 02:00:17 2009 +0000

    Move the credits string into core_theme::credits()

commit a9e3692027dc767b340242ed18fe7184cbfd883d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu May 21 01:31:29 2009 +0000

    1) This provides the editting functionality for albums and photos in the
    organize feature.
    2) Remove the tag functionality at this point
    3) Added a callback to handle validating conflicting names (only used
    by organize at this point.
    4) Closes #231

commit f24c8f66ea9673d812c882dd7db6fbe49bd01dfb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 20 16:49:06 2009 +0000

    Move the first-admin-login steps out of the user module and into an event listener in core

commit 3dc55716291dfa2bc70a4b23bcc8e24c8b6abe25
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 20 16:42:49 2009 +0000

    Always set the graphics_toolkit_path, even if we're on GD.  That'll
    force it to show up in Admin > Settings > Advanced so that people can
    easily forcefully change over to ImageMagick or GraphicsMagick.

commit 2e204cac78c067a45013d79dc8450ff49d52c31a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 20 06:58:47 2009 +0000

    Add a cache buster to thumbnail urls, using the item update time.
    Fixes ticket #121.

commit 774e0b3737d51b70bb141f4e13c6c111208847c0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 20 06:10:14 2009 +0000

    Avoid complex inserts in available_tasks() to make admin/maintenance
    run faster.  This fixes ticket #235.
    
    Incidentally, refactor exif and search to use the same patterns
    overall so that if you understand one, you understand the other and
    they generally use the same strings for localization.

commit 54fe2c600e6930c2885f3f6048221710637a142f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 20 05:46:34 2009 +0000

    Avoid doing an expensive insert in available_tasks().  Partial fix for ticket #235.

commit dc3df4d6ac0f976f4887a244d5fbbb153a991d90
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 20 04:25:10 2009 +0000

    Don't import non-viewable image types (eg: psd).  Swap in a broken
    image instead so that we at least have a target for comments.
    
    Fixes ticket #294

commit 0536025ff689d05711a40fcd255ee625904bbddb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 20 04:04:50 2009 +0000

    Add a default image quality level.  There's no UI for it, except Admin
    > Settings > Advanced.  The default is 75.

commit 006e0b4f28750b244bba5ea45d64eb8336cdb63b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 20 03:24:39 2009 +0000

    Replace the old "add photo" form with the simple uploader version in
    the "add a photo" quick menu option.

commit f850bf75cf591caddf953a94970bb461ed2a8546
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 20 01:18:14 2009 +0000

    Fix a typo; swapped uninstalled and installed.

commit 170e9d64621c68296576660d8e2112e02f8e09e3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 19 07:31:21 2009 +0000

    Import album highlights.  Fixes ticket #221.

commit a0e0c48e47f9425d98a223ceb25995cfaa054013
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 19 05:59:30 2009 +0000

    Collate install/uninstall messages.  Fixes ticket #288

commit 730cc7aabb7af99d4b58c3877f3f863b30078b28
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Tue May 19 04:20:52 2009 +0000

    Rolled back r20813 to restore jump to comments, at least for now

commit 8855be0c33e1fb49654ea6ef1a77c1460ecac955
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Tue May 19 04:17:03 2009 +0000

    Added the nice new icons for the view buttons. No need to have them in a jQuery UI button, they stand well on their own. Thx to Ben Dunkle!

commit ad347c04568bc281db9ccb89234c0967961e08dd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 19 03:54:33 2009 +0000

    If there's a missing source image during import, swap in our "broken
    image" placeholder and keep on trucking.  Oh, and notify the admin.
    
    Fixes ticket #287

commit 762ca225443626b69c94f6d6c833f66de69b2ce1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon May 18 19:34:03 2009 +0000

    This takes us the next step closer to providing bulk edit. We still
    can't edit, but we are getting closer :-).
    This change sets up a framework for modules to contribute edit panels
    to the organize drawer. Currently implemented General (albums and
    photos), Sort Order (albums only) and Manage Tags

commit ad16488643017f293dda6b226024751d15cb4426
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 18 06:30:32 2009 +0000

    Turn on IN_PRODUCTION mode now across the board.  Create our own error
    page where we'll show whatever information is useful.  Get rid of the
    IN_PRODUCTION hack in MY_View.php that we no longer need.

commit 09d0cd6f01f70b2393f56ea5573af03cb8eb5d87
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 18 06:22:16 2009 +0000

    Update filters

commit bdd5c3a57589157ad633acb454fa62bded9e9496
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 18 04:52:19 2009 +0000

    update PasswordHash path

commit 13cc8bc706e9210c25c00fbd3ae8cf53f9eb3d9e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 18 04:21:02 2009 +0000

    verify csrf when installing/uninstalling modules

commit 34d8b49aeddf8ca38d2365756e8b89145a94ae95
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 18 04:20:36 2009 +0000

    Clean up tmp when packaging

commit f660fa1e3ba2bd03c775e1f16f31abfa39bd2be8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 18 04:15:35 2009 +0000

    Restructure the code preamble checking tests to check all PHP files,
    not just the ones that we created ourselves.

commit 5f853b9a1b96f904be5b2cd5f487231a637b270c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 18 04:13:09 2009 +0000

    Get rid of trailing whitespace in security preamble

commit 2867ca2bcd0c26c5045ef83242c0e77909d11958
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 18 04:02:54 2009 +0000

    Get rid of trailing whitespace in preamble

commit a1ad048ef24337f12540297d095352be3f6d4884
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 18 04:00:20 2009 +0000

    Update preamble to avoid extra opening php block

commit 29e8bd5230b5178386515a1092bb9f74fff53375
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 18 03:55:34 2009 +0000

    Fix security preambles

commit 39bfe5ee7457fc7597d0723e7fbb08732fec8eac
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 18 03:51:15 2009 +0000

    Add security preamble

commit 993742feb308a6cba77e06cf72dfecae83c428ab
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 18 03:39:42 2009 +0000

    Move 3rd party PasswordHash library into the "lib" dir for
    consistency.  No 3rd party libs in "libraries", at least for now.

commit 5133d2cbb9fb6ae30bccf25c0364008cc797cb87
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 18 03:34:12 2009 +0000

    Remove modules/unit_test/views; we don't use them

commit abeec7c7b8e36abd133c9a0245de52eeeaabace6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 18 03:28:46 2009 +0000

    Merged /gallery3/vendor/forge/modified:r20843
    
    Added preamble to all Forge files.

commit 2cf9b95f5fd702156d2b74b23f924459b2f5784e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 18 00:31:03 2009 +0000

    Remove Forge files that we don't use

commit 59b0e40f65b2ab7ed4f6fd8ce96f039ba7d579bc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 18 00:28:20 2009 +0000

    Define KOHANA as the front controller .php file.

commit 70184a041dd8d18f8b6dd233896db9e8b49e8622
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 18 00:21:05 2009 +0000

    Add preamble.  http://dev.kohanaphp.com/issues/1661

commit c87c6f6859d4406e3c7022f2b2c5507190a34dc1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 18 00:16:37 2009 +0000

    There's a new view for CLI unit test output in the Unit_Test library

commit fd0c0a608a5de2b26c29d3c44a7929e5a3b2c042
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 18 00:14:07 2009 +0000

    Updated kohana and modules/unit_test to upstream r4356

commit 5a6aef9c23930b1de609c9914297e0f97bc49a11
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 18 00:05:50 2009 +0000

    Fix preamble

commit 7f4bcb540fb4ee4ded9f4a4103112f36046cce5d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 17 23:04:03 2009 +0000

    Update preamble test to list all broken files at once

commit da9c170ba7ad286808f2eb0d975c4a0c10b68107
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 17 22:47:34 2009 +0000

    Update tests to reflect the new code that allows changing file and directory names

commit 1c84472746c719c9cc496c9c7895060c135fd75c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 17 21:51:15 2009 +0000

    Make our dependency on json_encode() an explicit requirement

commit bd3dd786e7b9f6a7ec447cef5ac89035083d216b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 17 04:55:12 2009 +0000

    Define TMPPATH

commit 1968057a902ba294c71f98863b90128a368218d9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 17 04:44:16 2009 +0000

    Add var/tmp

commit 3baecc628f488e4845bb4ce6b5e58ef0f389c3e3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun May 17 04:37:00 2009 +0000

    Rollback some of the changes from r20822. But still pull the
    determination of the function name and arguments to outside
    the module loop

commit 17c58c8dceb9dcc96acaaefacf2c6e0c00c06a31
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 17 00:46:53 2009 +0000

    Skip over empty import modes.  Fixes ticket #227

commit 245c840405520ceb943466c70f997fccf268a7ed
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 16 22:31:02 2009 +0000

    Silently drop trailing periods in the album name so that we don't have
    to throw up an error message (since we don't accept them in album
    names).

commit 8f11bce904d188b29e180a11113b51fdfade60b0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 16 22:27:32 2009 +0000

    Don't allow photos, albums or movies to have a trailing period to avoid
    security problems.  Ref http://dev.kohanaphp.com/issues/684).
    
    This plus r20823 resolves ticket #248.

commit 6ceb10424b4dc1bba6cfc1bd3a17c4428ae9c98c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 16 22:20:16 2009 +0000

    Don't allow albums/photos/movies to end in "." because it risks
    securit issues (and so Kohana won't route them, see
    http://dev.kohanaphp.com/issues/684).
    
    Partial fix for ticket #248.

commit c3917aa250b6b7ee4c5534224cf5f31380679c25
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat May 16 16:46:08 2009 +0000

    Modify the module::event method to accept 2 additional parameters
    instead of a variable list and then pass both of these parameters by
    reference to the event handlers.  2 parameters cover 100% of our
    existing event calls.

commit 930452aa6b93755003d4ce28143fccb4f23801b0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 16 04:32:00 2009 +0000

    Support renaming albums, photos and movies.
    
    Fixes ticket #278.

commit 33f1187220404bca6597de5368048316ece5139a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 16 03:48:56 2009 +0000

    Don't allow the various ::create() methods to take "/" in the name.

commit 7679811a3143b5e05f78abb0e8ac816c87a36c3a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 16 03:37:14 2009 +0000

    Item_Model::rename() cannot accept new filenames that contain "/"

commit 59db5456d42d3a300cce661a9b5f7da069c26893
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 16 03:29:14 2009 +0000

    Implement Item_Model::rename(), with unit tests.

commit 9d272f29624db8a6513c609c7edfd57853ac5304
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 16 02:49:23 2009 +0000

    Rename the theme menu options under the Appearance menu.

commit 19149986c1cdc53b549d46000ba1ecd5eba317f6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri May 15 17:08:29 2009 +0000

    Only cache rows if they are objects, which assumes also that they are instances of ORM.

commit 75cf17d0d66af81ef9f2c0d742114ffa27c31861
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri May 15 01:25:11 2009 +0000

    Make denied links not clickable at the root level when the permission
    is already denied.  Ie, at the root level you can't click the item to
    reset because there's no permission to inherit from, so denied is now
    just a non-actionable status.

commit 5b8722f7cb6e55f041061cdc16792ba15427111a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 14 23:49:29 2009 +0000

    Use ternary operators to tighten up some logic

commit 7f77c676fe060fa4c9136800e8f170747a67b0ad
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 14 23:41:49 2009 +0000

    Get rid of the 'View comments on this item' menu option for photos.
    It doesn't fit in with the others and as Jakob points out, the scroll
    wheel on the mouse is perfectly sufficient.  I'll leave the icon around, though.

commit b698b8202f8a637f466ee07808796f29ac96bdfc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 14 23:40:48 2009 +0000

    Provide tooltips for Menu_Element_Link

commit a0e5e0b1aa121078640f55cd619bdf34e098eb02
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 14 22:39:45 2009 +0000

    Tell the user the location of VARPATH so that they know where their photos are getting installed.

commit 9b0541a0adc969d43f3247e89afe10020a2d0610
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 14 22:39:14 2009 +0000

    Fix save() to stop using ORM objects.

commit 3fdaf7b60e7f7b8ec7635827b74ef25681d739d4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 14 22:27:08 2009 +0000

    Convert spaces into underscores when generating the album name from the title

commit d7c4d32c57d2b07b43c6fcade438d3187bb9ca08
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu May 14 15:14:07 2009 +0000

    Fix for ticket #268
    1) Added a clear method to model_cache
    2) Cleared the model_cache, when the make_album_cover or
    remove_album_cover is called.

commit c8c82eff66d017e9a9bec8b8890285e89afcf2ec
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 14 04:28:29 2009 +0000

    Specify the internal_cache_path (even though we're not using this yet).

commit 555ee41474de5c518fad6d62869f3b14bd8cfef6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 14 04:23:15 2009 +0000

    Bind to the change() event also so that we can pick up autocompletions in the title box.

commit 59798360066ad341534fcd77b5fefb5adc52b6e6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 14 04:05:14 2009 +0000

    Change the way we update view_count to use math instead of ORM for better accuracy

commit d7fe3104e3566297b6a8ce2c5bfba0c6f7c41d72
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 14 04:00:00 2009 +0000

    Use the active user as the new item's owner, if no owner id is specified

commit 627e83adc13005b2431d49d98c0a2dc05a8e65a6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 14 03:56:29 2009 +0000

    Cache variables in core._cache so that we can retrieve them all in a
    single query.  In most cases, we were fetching 4-5 variables per page
    load, so this is 2-3x faster.

commit aaff4a78863c0103d5c6da86e324e81cc0c2a564
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 14 02:14:46 2009 +0000

    Introduce a relative_path_cache column in the items table.  This lets
    us avoid doing lots of MPTT lookups to find the parent path when we're
    trying to generate thumbnails, etc.  Invalidate the cache at all the
    right times.  This greatly reduces our query count on album page views.
    
    This fixes ticket #40.

commit e543b055fbcfeca7f25f6c31696d420b035574df
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 14 02:00:31 2009 +0000

    Updated to match r20797

commit f439fe96c81930d0b7d43c02a3108fd15c17715e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 14 01:19:05 2009 +0000

    Overload ORM_Iterator to cache models as we pull them out of the
    result set.  This allows us to see the cache and avoid further
    lookups.

commit 96d59caa3b32b58b10147f059047d13d57f24968
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 14 00:59:48 2009 +0000

    Use model_cache() instead of ORM::factory()

commit cb1a5113f87c7e87f86102fe823067acb7a9ef2d
Author: Jakob Hilden <jhild@umich.edu>
Date:   Thu May 14 00:12:46 2009 +0000

    permissions UI facelift

commit 3c78d482e5568745971e2a198000e58651b0ddf5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 14 00:06:45 2009 +0000

    Beautify only the title, not the filename

commit a149659f33f032c0cebc278689349d0904f8f998
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 13 23:52:40 2009 +0000

    Fix a bad redirect.

commit d6214a974e0ce0aab0e5bdc83f101ca2cfdc7e98
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 13 23:28:48 2009 +0000

    Use the $filename not the $name to find the path extension.

commit d3103f6c5dba11a8a82faac6efccf46ca65150a6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 13 23:23:08 2009 +0000

    Add a little JS sugar to set the album directory name to the same as
    the album title.

commit daebdab0c6a96b8fabc12b5bbbb438a134e4226d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed May 13 22:56:51 2009 +0000

    Address the final point in #226.  Disable the make album cover icon if
    the pane has the ui-state-disabled class

commit baa220186e176191e34383b5871746cefe6e5c8e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 13 22:34:54 2009 +0000

    Suppress some warnings

commit ce4a8224d84eb0bea7a52bc670b5f4d8feb59138
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 13 21:32:22 2009 +0000

    Allow admins to modify variables.  This way when something goes wrong,
    we can tell them what to do in the forums and we don't have to build
    super smart admin UIs to help users with weird edge cases.
    
    This plus r20789 is probably a good enough fix for #232.

commit 58a11e3f7c1503a418880cf0898951830e40d6b9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 13 20:55:23 2009 +0000

    I should test this stuff before I submit it, eh.

commit 7ada2e7fe63a0d971c4cd24544a390cc2fee0980
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 13 20:46:59 2009 +0000

    Store the ffmpeg path in a variable.

commit 07bf3e071e2c621526aa7d1dcf0b08826563c3d2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 13 20:42:30 2009 +0000

    Fix menu typo.

commit 5495037a3d999adb7af48d1f65683f42a3104a89
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 13 20:04:58 2009 +0000

    Gee it's May already.  Update copyright to 2009.

commit 12380b8b39d650e1b23b2d9f57af3f3829559d36
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 13 19:48:57 2009 +0000

    Add the "advanced settings" controller which lets you see all the
    vars.  We'll eventually turn this into a registry where you can edit
    settings directly (at your own risk).

commit c52a231bc08558077788601cbd8a97cd514f1a63
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 13 18:03:50 2009 +0000

    Create a new "add" permission and require it at the controller level
    when adding photos/movies/albums

commit 5c40669fd7b5a2b89d8e8dfb283c2703d0979d49
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 13 18:02:57 2009 +0000

    Unlink var/modules dir also when packaging

commit dd8c68854274767402b37a9563405a472e83dd26
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 13 05:13:21 2009 +0000

    Set the default transparency to 1 (no transparency at all)

commit 65aafe1e721c3d0e7a435af8617a74ab9480ec93
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 13 05:11:31 2009 +0000

    Exclude the root album from the "dirty images" query
    Clean some HTML out of a translated string.

commit d049e406e0366adf3cd68a12f65206e54653c616
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 13 04:45:25 2009 +0000

    updated to reflect tinyint(2) -> smallint(6) change

commit 88afbeba07eabfb9ccdcd123887c19bf318cdfcc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 13 04:36:18 2009 +0000

    Clean out old dirs before packaging.

commit e41b1795bdda9a6db72bec01891f400b87295175
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 13 04:33:40 2009 +0000

    Oops, use filename instead of name

commit 37fabc5e0716d12297cdb5d4fce78d1fe03bee7d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 13 04:02:42 2009 +0000

    Empty dir

commit dcdc6f1e77ae8377755db186e2807a9cf982231b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 13 04:01:38 2009 +0000

    Don't allow admins to delete the guest user.  Fixes ticket #213

commit 7abe611a62139fd8f83c0ed5b4e918c9d44a5928
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 13 03:59:42 2009 +0000

    Make the 'this user cannot be deleted' link actually not clickable.

commit 9c24b5d94dec36e5c3c1f6450dea77f6c2c623a9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 13 03:56:50 2009 +0000

    Variety of changes to the way we do user editing:
    1) Allow admins to edit the admin bit of other admins
    2) Don't allow admins to delete themselves (partial fix for ticket #213)
    3) Inline user::update().  Don't do form processing in helper methods!
    4) Inline user::_get_edit_form() so that we can treat edit forms differently.
       Trying to hard to make common functions makes for weird edge cases.

commit b9aeec634d8aca1848233a88ab18a732e3df5914
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 13 03:44:55 2009 +0000

    Colorize admin user rows to make them stand out

commit 1344bd7009d5a9141b664f3125c8ebb8e1a3a1f9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 13 03:36:06 2009 +0000

    Use the name field if the full_name field is empty.

commit ee4f9eaa0082eb8d93812a2effdf03143d1ce4e4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 13 02:52:09 2009 +0000

    Beautify the title of uploaded files.  Convert underscores to spaces, collapse multiple spaces, drop the extension.  Fixes ticket #237

commit 99c26f30c6b1755670710f465efc40bc5331964d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 13 01:43:47 2009 +0000

    Allow users to enter multiple tags at once, split by space, semicolon
    or comma.
    
    Fixes ticket #193.

commit 983dc66684999e03685a496f17ca75f81cd21ffe
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 13 01:32:11 2009 +0000

    Display the server load average in the platform block.  Fixes ticket #198.

commit 238cb7ff6e7469ce6fc479766f4199e39fc8193f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 13 01:21:09 2009 +0000

    Log the complete exception information for exceptions that happen in tasks so that we have some clue as to what went wrong

commit 4093315390c04836d386bfd16881fd40dc199000
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 13 00:47:20 2009 +0000

    Log password reset attempts.  Fixes ticket #251.

commit 7008bfb5c3b0654d7d25b2e0d0d53d09e4431c0c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 13 00:32:19 2009 +0000

    Warn the user if they're attemping to reinstall into a database that
    already has Gallery 3 tables.  Otherwise, permit it to continue.
    
    We key this off of the existence of the g3_items table.  Theoretically
    it's possible that the g3_items table is gone but other tables are
    still there, which could mess things up.  I'm not going to worry about
    that for now.
    
    Fixes ticket #175

commit 847de449968dfc815066eac719ddacf60639206c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 13 00:09:43 2009 +0000

    Fix the logical inversion of the transparency field.  Now, 100% is max
    transparency and 1% is min transparency (no transparency at all).
    
    Fixes ticket #204.

commit 3b52b31c5451bfb4edd92d3f4b0093e51ec2b027
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 12 23:46:03 2009 +0000

    Use the module_change event to figure out if the rss module is
    inactive.  If it is, we need to alert the admin user.

commit ea693af59b0d98ffcfb7d658898937ae55272db6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 12 23:43:45 2009 +0000

    Fire off the module_change event whenever we install or uninstall a module

commit 2b798193231d27f517aeb8c37a854c6787d65fab
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 12 23:22:05 2009 +0000

    Simplify delete()

commit d05e7a05e9d1a785856503ddee8b98649e38a539
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 12 23:18:02 2009 +0000

    Fix a bug where deleting an album sometimes deletes everything in var.  Fixes ticket #282

commit 1a36d4fec45242dd3443dd2ced489a593c0cac88
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 12 22:48:59 2009 +0000

    parent() should return null if there's no parent id

commit 4b006a0419bfb19b75728caf7f50b1a8b1ef4419
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 12 22:39:28 2009 +0000

    fix comment typo.

commit 93ca8e991d246362744bab7ee71aa3bf7fba6660
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 12 22:34:59 2009 +0000

    Gracefully handle duplicate groups.  Fixes ticket #280

commit 71defb7d40ebce2a138fabf10533978555886ebc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 12 22:34:36 2009 +0000

    Add group::lookup_by_name()

commit 823077f3422c948c6f894c8610831f24bb5dc4f2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 12 22:31:54 2009 +0000

    Fix a comment.

commit 0864d7ca650e6b7210d8fac695cd1a2985846577
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 12 22:27:34 2009 +0000

    Allow configurable padding options

commit 7c6276adb95ef664307d22a13c6ec7d024c8a00a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 12 21:48:29 2009 +0000

    Deal with the user-entered g2 embed.php path a little more sanely so that if the user enters the path to G2 itself, we find the embed.php path from there.

commit b1ea27a1b9c221aef1b40a864576d6376270b884
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 12 21:41:45 2009 +0000

    Beautify the status text

commit df3a1e730e285cf8a9c189cb602f7d5dee651101
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 12 05:56:27 2009 +0000

    Skip the copy if the watermark module is enabled *and* there's a watermark.

commit fdb17d75cebed56be0011eea2abba237320ceddf
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 12 05:48:15 2009 +0000

    Import keywords as tags.
    
    Refactor the general flow of g2_import_task::import() to simplify it
    and make it more sensible.  It had gotten a little overgrown.  It's
    still a little overgrown, but I don't see an easy way to simplify it
    from here.

commit c397cc73bef3bf2a092e1f0ddf73fd415db49da3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 12 04:22:05 2009 +0000

    Don't divide by zero if there are no photos in the Gallery.

commit 8ae6a7a1448c411a9c1cd07dc3a45a6ec8924a32
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 12 04:04:26 2009 +0000

    Import tags.

commit 61ad68f1e6e77196ac28bca0c57441f0c38ef90b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 12 02:12:39 2009 +0000

    Deal gracefully with the case that the Gallery 2 instance didn't have
    any resizes (or thumbnails).
    
    Fix a case where we were over-weighting the max dimension for square
    resizes and thumbs.

commit 5dbe1e59d88f1fdbf301c70176b3ea3702ba0adf
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 11 20:17:03 2009 +0000

    Add has_thumb() public API method

commit a70cbed1d01ddfc56038720a3e7c1d81a4b9dc14
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 11 20:16:54 2009 +0000

    Import comments.  This was a lot easier than I thought it would be

commit de812e1e8225f49deec27063d96a81ce4431ebcc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 11 20:15:24 2009 +0000

    Refactor to support pagination and simplify the code.
    
    - Simplify the public controller methods
    - Fix a bug where missing thumbnails would cause a divide by zero error
    - actually pay attention to the page # for pagination and limit the query accordingly.

commit a2c188ac37a748734f4a9f3413eae44152750d4a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 11 19:19:13 2009 +0000

    Update exif lib to upstream r3901 which resolves the following tickets:
      http://www.zenphoto.org/trac/ticket/1117
      http://www.zenphoto.org/trac/ticket/1118

commit 010c355ecfb40263c81cd3f47e5bfc35f2d3bd62
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon May 11 18:13:19 2009 +0000

    Fix for #226

commit 74b89379633a92b538a647c89131ee3b645bfcf6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 11 17:57:34 2009 +0000

    Framework for importing comments -- we don't actually do the import yet

commit 62053b2c5cc1b8e58a886b3380645fde6ecb3b6d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 11 16:38:58 2009 +0000

    Add some comments

commit 6ec24f2f00ab5fa1148ad4ab0391771259b884ec
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 11 16:27:52 2009 +0000

    Don't attempt to interact with comments if the Gallery2 comment module is not installed.
    Resolves ticket #276

commit 11477cbc3e86cc0d799d982b94cf05931e5606d8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon May 11 14:32:18 2009 +0000

    Correct the reference to $item->id

commit 784b3aa34aa3d42b6a56cae3385dce63dfe0e034
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon May 11 14:31:07 2009 +0000

    Save and Restore the $_POST variable in tests that manipulate it so
    other tests don't fail unexpectedly

commit 8b33371e99247735876feebcc48ea5250c1af85e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 11 05:18:23 2009 +0000

    Index photos as they're added

commit 891930ec2ba8db4a54e66c772c89d73b6b05343b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 11 04:22:50 2009 +0000

    Don't accept negative capture dates from EXIF, they're probably just crap data.

commit 977d0da9f3bac811793bffa7cf6b605599c9f871
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 11 03:53:44 2009 +0000

    Refactor the exif module to denormalize the stored data.  This way we
    have a single exif_record for each item instead of 1 per key.  It's
    about 5x faster to scan photos this way.

commit b706cb69ac7737a550c8f7fff025a6abeb3cfcb6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 11 02:37:12 2009 +0000

    Reinstate abortCount code, originally added to exifer in G2:
      http://gallery.svn.sourceforge.net/viewvc/gallery?view=rev&revision=13422
    
    it was commented out in the ZenPhoto version.  Filed upstream ticket
    about this:
      http://www.zenphoto.org/trac/ticket/1118

commit 6dbd8aa002c8de2b63a94d24612ce8856d8fee97
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 11 02:35:43 2009 +0000

    Don't use ORM to delete old exif_keys.. it's too inefficient

commit 8c776ffa6fd4e03c15deed434f2d6feb3a416942
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 11 01:36:36 2009 +0000

    Add a cache in intel2Moto().  Because of the duplicate nature of the
    calls to this function, this is a 1-2x order of magnitude performance
    improvement.

commit bc9bf5aa612ecd16a21d531fd6c3f2c780840bc1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon May 11 00:19:50 2009 +0000

    Avoid using ORM_MPTT::parents() in relative_path() so that we're not
    calling ORM just to get paths.  This is a 10x performance increase.

commit e947e771d37aa5ad7d7e1a0dc4ae13cc7c63ce60
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 10 21:57:09 2009 +0000

    remove_rule() should mark thumbs/resizes dirty also.  Resolves ticket #269, thanks jstricker!

commit fbcb01caca780bb9507d554cf84c6e7e093c3a24
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 10 21:46:58 2009 +0000

    Only run copy_matching_thumbnails_and_resizes() when we're doing an import, else it interferes with thumbnail/resize generation during regular imports

commit b8d3478b954a695974fccfc94a7db3aef71b3083
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 10 21:32:27 2009 +0000

    Beautify the error message.

commit c14194ab2d75927d46852e83c695f590f644ecc7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 10 20:54:15 2009 +0000

    Warn users if they have suhosin.session.encrypt enabled that it'll break the uploader

commit 99da170defd6482221502294cfafcca9c1c5a776
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 10 20:16:18 2009 +0000

    Document why we skip the parent state for the root album.

commit 31f0839f9b7c64707a88636e49840c196742768b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 10 20:02:40 2009 +0000

    Don't provide full-size link if the user can't see the full size
    image.  There's no security hole here, it's just a bad user
    experience.

commit afa4a8acca1f20bd853564f7c1ffd6dfb7add2fe
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 10 19:57:58 2009 +0000

    After ajax login, just reload the current page.

commit 8ba9480819e55b29c3f9ccca786ec690e911ae6c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 10 19:00:28 2009 +0000

    Disable default sorting for performance.  (thanks Romain LE DISEZ)

commit 57ef43afdbb2dcd7a890d2d0f2606a17bfc5a715
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 10 18:56:49 2009 +0000

    Change TINYINT(2) to SMALLINT for compliance (thanks Romain LE DISEZ)

commit ce137d7bdc8621caca60a14b6ff071333b64f8b3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 10 18:52:08 2009 +0000

    Change wording to avoid breaking File_Structure_Test

commit cc0fcc8961b8dd62dfc3ce3c2be9a19e93affdfa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 10 18:44:03 2009 +0000

    Use a clearer query syntax for deleting extra search and exif records (thanks Romain LE DISEZ)

commit e6d3d42c225ab37c1d1bae80649b6561be894046
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 10 04:04:33 2009 +0000

    Make the code that copies g2 derivatives more robust if the g2 data file doesn't exist.

commit 0872cce1ea218865230f3f0f09d2fbcb6895205f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 10 01:11:16 2009 +0000

    Fix a bug where when we copied over the g2 thumb or resize, we weren't
    saving its dimensions to the item.
    
    Also, import originationTimestamp as captured field.

commit 99b7cdeee1713939d739435de1997149a4ceb886
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 10 00:13:39 2009 +0000

    Fix a copy/paste typo.

commit 3969145a366d7569a20df7be64bb0f35683ebe8f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat May 9 22:22:30 2009 +0000

    Move the thumb_proportion method into Theme_View and set it by default
    if the page type is album.
    Leave a todo if we ever set up a theme default API

commit e2d03c63fba820687aba658dd6f344c24ac2c6b7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat May 9 21:59:32 2009 +0000

    Remove quotes and correct typo

commit a43c57bf61a3f82396e4ff299bda155551bcef8c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 9 21:13:59 2009 +0000

    Sigh.. fix it the *right* way.

commit 8c611fdc1be65d46e1ddfa0c3bae312d801fa777
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 9 21:11:55 2009 +0000

    Oops, add in a missing ] (thanks kb7sei!)

commit 6b00aa70e069a154fb8218cbdee7d222d89fcd91
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 9 20:18:24 2009 +0000

    Don't try to put g2_stats and g2_size into the view if g2 is not initialized.

commit 1bfbae15f6a0f186d385c4ad073555de12c46e04
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 9 19:03:00 2009 +0000

    Usability and performance improvements
    
    Significantly speed up the process by copying Gallery2 thumbnails and
    resizes wherever possible instead of regenerating them.  This requires
    us to figure out the dimensions of the original G2 derivative and make
    sure that it matches in some reasonable way.
    
    To allow users to take advantage of this, calculate the optimal thumb
    and resize size to set in G3 to match what was used in G2.  While
    we're at it, give the user some idea of how much data is available in
    G2 to import.

commit db465072f5a56b1a7334379a0cbb3c179ae26866
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 9 17:45:33 2009 +0000

    Fix indentation.

commit a05451ef3464d6023ca10347773e127c501fc02d
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sat May 9 17:17:17 2009 +0000

    Apply status message display effect to admin theme. Use double rather than single quotes in JS.

commit 99ca6133b0fbb438c12e8dce6d951737feb5384a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 9 16:37:03 2009 +0000

    Force the 'GD Version' key to exist

commit 853c00cde04509fb2f90ab7adc2425528dc7839c
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sat May 9 07:10:36 2009 +0000

    Highlight status messages on load, fade them out after a few seconds. Make success green brighter.

commit 48ee3d5fe83175639ef910dedd30bc144ed0a67e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat May 9 06:11:17 2009 +0000

    Fix for ticket #217

commit 9dccbe0d3666459f40b79d9e1833439a057813b9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat May 9 05:42:06 2009 +0000

    Fix for ticket #255
    2nd iteration

commit 4485a66b3e2be41a2bfb210a869e16b536b8038d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat May 9 05:28:35 2009 +0000

    Fix for ticket #255

commit cdc796aed46093c50c85910a8acc1cb28f8b4a35
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri May 8 19:32:51 2009 +0000

    Don't rely on the file to have an extension (or better: don't throw an
    error if we can't find one-- just assume its a photo).

commit d1a913892591286f4a3cb6759575c3eb037043a2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri May 8 19:16:48 2009 +0000

    Don't try to use mb_detect_encoding if the module isn't loaded.  Not sure if this is a great solution, but it'll probably cut down on a big class of errors opportunistically

commit bf3282cb3c4dfe1f4fae01e15515fa5a86d54bf2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri May 8 19:01:45 2009 +0000

    Don't do ORM::factory() lookups on non-ints (thanks Romain LE DISEZ)

commit 764f88defb7afa2ec1cd1126fbeaa282a0b21d45
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri May 8 17:58:56 2009 +0000

    Fix whitespace issues

commit 0373cb06765244d51a218633d258a74c5cbb04a6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri May 8 17:48:30 2009 +0000

    Use lower-case aliases for greater portability (thanks Romain LE DISEZ)

commit 2c2839c13b07ffaa5423d2affd314855e818ba11
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu May 7 17:39:34 2009 +0000

    Create a thumbnail stack of selected thumbnails for the organize
    drawer

commit 6a295dc93dc4236c9118a500b3aafa5e3e97ef19
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu May 7 05:16:56 2009 +0000

    1) Leave an object selected if its clicked.
    2) And a 1em left margin to provide more spacing, so the lasso is less inclusive

commit 85832e2e0f66f9078b398e8c116b016c5ac6f2ec
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 7 05:04:11 2009 +0000

    Don't try to use the exif/iptc values if we couldn't extract them cleanly.

commit 5305d1f5697cc78dd32a854a7c24bb6f16d7e997
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu May 7 04:56:08 2009 +0000

    Improve the selection/drag handling so that drag of a single item
    doesn't have to be selected first

commit 98e60731b2bed10b7f9d746b1feaa73c4a2e9109
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 7 01:28:10 2009 +0000

    Allow sorting by Capture Date.

commit fc6bdbbbc829b38c020c190e06e3fe5892bac1a0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 7 01:18:31 2009 +0000

    Grab photo capture date and captions from EXIF/IPTC data.
    
    - Add a "captured" column to the items table.
    - Pull the DateTime EXIF field and put it into the captured column
    - Pull the Caption EXIF & IPTC fields and put them into the description
      field if there was not already a value there

commit 934bc1e1f15405e7c4adb9d5bf59bad7680c5d79
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 7 00:46:35 2009 +0000

    Add debug log strings with the G2 stack trace when there's a failure in a g2 call.

commit 9cc5d058145b5c986248fef192b4a61c24a02bd6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu May 7 00:29:55 2009 +0000

    Don't throw up a warning if we can't detect whether or not the logs dir is writable.

commit a8879cfe89fca4e0fe20e19bb6e4551a08910487
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed May 6 20:27:49 2009 +0000

    1) Improved selection processing.
    2) Drawer closes if no images or albums are selected

commit 2991831c035a944712f2d906fbb4d99c7e93e02f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed May 6 14:45:44 2009 +0000

    Fix for ticket #72

commit 890b716c8f6693e92858a02120007d38dbdab774
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 6 04:27:23 2009 +0000

    Show the 'activate gd' button even when there's a warning about missing rotation

commit e83b980d3dea9ffbddd6ec30c6aa80b9fa6f20c4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed May 6 04:08:45 2009 +0000

    Don't fail when trying to import site admin group.  Resolves ticket #249

commit 812cb94b1e7d9a58df3ba94cbe78bef537152c6d
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Wed May 6 03:47:58 2009 +0000

    Usability update: include an "Activate Toolkit Name" button with available toolkits

commit 2846e0df8b73987ee244e3307c7a871eb468a889
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 5 03:56:42 2009 +0000

    Return an array from available_tasks() when unconfigured.
    
    Fixes ticket #247.

commit 13f8a0dd7baf07ebddc72c1764b5ab13f3c9f42c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue May 5 03:30:49 2009 +0000

    Detect input encodings from EXIF/IPTC data and convert to utf-8 as
    appropriate.  This allows us to switch the exif value column back to
    varchar and improves the way that we deal with non-utf8 data in our
    embedded EXIF/IPTC data.

commit 2434feabeb9244eabe61d906eafce7adb518319e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 3 21:16:03 2009 +0000

    Updated for alpha 4

commit a676ac8e60dc93de5b18e649588594a37180b717
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun May 3 21:14:18 2009 +0000

    Don't try to make a new photo the album cover unless we can edit the parent album

commit e70be4c0c2d150c20a73b1e53ce5408575574ec2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 2 21:52:46 2009 +0000

    Cache the entry in our in-memory map when we map a g2 item to a g3
    item in the database.  This fixes the problem that the import fails
    the first time around because the various groups are mapped in the db
    but aren't available in the request.

commit 2c61ad361ec00dd3f329eb54e238d80c79a3e8f5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 2 21:19:40 2009 +0000

    Remove some unnecessary blank lines.

commit f2479cc65a5c2d9771c1924837087695681bcddb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 2 21:13:13 2009 +0000

    Mark functions as static

commit 4b790f5b76dd1258cdd571a59a45681bfc1f9dab
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 2 20:49:09 2009 +0000

    Revert r20668; if we call our helper 'gallery' then it interferes with g2_import since it uses the Gallery2 embed interface which loads up G2's Gallery class as well.  Grumble.

commit 5950f492106a5927c3d3a6bffe8ed92a0fee8f9d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 2 20:37:45 2009 +0000

    Rename core helper to gallery helper to indicate that it's more of an app-wide helper.  'core' doesn't make as much sense

commit b4c9a970502c491840d640857ee1617e86207ffd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 2 20:34:02 2009 +0000

    Create item helper and move move_item(), remove_album_cover() and
    make_album_cover() functions into it.

commit 0fd82598b50fb5d93816689525f3a1bd7b4e52ab
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 2 20:14:13 2009 +0000

    Move make_album_cover and remove_album_cover out of Item_Model and
    into the core helper.  Clean up interactions so that when we remove an
    album cover we pick a new one, or clean out the old album cover if
    there are no other choices.

commit 977963444ac6ff4a97201c8c691379fc638e9935
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 2 19:28:05 2009 +0000

    Remove direct call to item_before_delete since r20647 moved it into Item_Model

commit b4bc0a29a571cfabe1b0761c010ceb579fb23a56
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 2 19:14:31 2009 +0000

    Change comment style for brevity.

commit 54fa2391d007e81812b575afd7e930983c4611b5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 2 19:14:06 2009 +0000

    Whitespace cleanup.

commit 486517fac560a7b9552d2e79624e369d2833ac4a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 2 19:11:22 2009 +0000

    Clean up API to be organized around the functionality it provides, not the feature its provided for.

commit d0b8fbef1dc681ff4f8dcafd8ced56e7c5c40f13
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 2 19:04:17 2009 +0000

    Remove extra whitespace.

commit fd3d4370d147bee589614f47a068c14dcc431807
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat May 2 18:58:10 2009 +0000

    Fix indentation.

commit eb9162f6c425f41d8d4a862b093a8071dc1751e2
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sat May 2 06:34:05 2009 +0000

    Remove angled ends of edit drawer handle.

commit 88c0ede495ae14b010338d89e76a63ffc195d93c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat May 2 03:23:55 2009 +0000

    Add missing return statement

commit a12ed1de02555fd8bf00f695f8e19d23949836c3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat May 2 03:08:30 2009 +0000

    Move the drawer to the bottom of the page and compress the thumb grid
    when the drawer opens.  This way the drawer is never scrolled.

commit 71cac8bf151eb6ed9ae9a4a33b9acc4e882f4164
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri May 1 23:32:35 2009 +0000

    Forgot these when i created the make_album_cover method

commit 590eceaf93a8cd347484fdcb2dd4d5f1d9fe7adf
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri May 1 05:35:56 2009 +0000

    Set organize messages to use existing gMessage, added album cover message.

commit 8deabcc195a8b37311a1356a1fe58560a97454b2
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri May 1 05:11:09 2009 +0000

    Updated to jQuery 1.3.2, needs to be pushed upstream.

commit 820cbdf1c3a4810a1f00c16beee729e28a0d3056
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Apr 29 15:57:29 2009 +0000

    Refactor the creation and removal of the album covers into
    make_album_cover and remove_album_cover methods in Item_Model.
    Usage: $photo->make_album_cover()  $album->remove_album_cover()

commit 33122e8968e2d7890f7fabe45ce168aa0d217bbb
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Apr 29 03:57:24 2009 +0000

    Change album cover functionality added

commit 89bdd6ca983585d5bf41968ee355927169cc9e14
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Apr 29 01:29:39 2009 +0000

    The delete button now deletes the selected items

commit 0d49773559160120768d33b574f97d9b6b993a3d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Apr 29 00:40:59 2009 +0000

    Reset the parent thumbnail in Item_Model::delete instead of where the
    delete was happening.  This will insure that it is consistently done
    for all deletes and we don't have to remember to replicate the code.

commit 9176dadfd69c15d9f16581d119569a7745c53067
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Apr 29 00:29:53 2009 +0000

    Move the module::event("before_item_delete") into the
    Item_Model::delete method.  This will insure that it will get called
    for all events.  Currently it is not being called for children of an
    album when the parent album is deleted.

commit 12d976b94d6e7b13e1124b2c943c33d8cd0876e8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Apr 28 21:29:14 2009 +0000

    1) Refactor the ajax calls so that the code is reused across multipl
    request types.
    2) Enable/Disable the drawer handle buttons depending on the number of
    items selcted
    3) Image rotation works.

commit 1596c9f3da148143a12474596408d788f7c3ba4a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Apr 28 21:26:12 2009 +0000

    Change _adjust_thumb_size to adjust_thumb_size and make public so we
    can access if from organize

commit 234aed87e604d6039af746ef8fcd0284582183e7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Apr 28 21:07:03 2009 +0000

    auto install organize module

commit e382ec748eefd244c02533010097121bad393975
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Apr 28 20:54:05 2009 +0000

    Root album weight is now 1; Organize module is auto-activated; search_record has a key on item_id

commit f3caf1eb526009f80f9d67a2e3fe4f311411f690
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Apr 28 03:28:43 2009 +0000

    Update upstream to to r3835 which resolves upstream ticket #1108
    
    svn merge -r20638:20640 vendor/exifer/modified trunk/modules/exif/lib

commit 091fde3e0076a110590c6dfa3004bf7b49253153
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Apr 27 20:30:46 2009 +0000

    Another iteration of the organize module:
    Rearrange the layout as per discussion with thumb, start the drawer
    functionality. Still to do...
    1) Add the processing behind the buttons on the drawer handle
    2) Enable the drawer buttons when something is selected
    3) Create a copy of the thumbs for the drawer
    4) Add the bulk editting functionality to the drawer

commit 2a5abfdbd4b55a628313e2a8b7c102bb34fcd0d3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Apr 27 05:36:32 2009 +0000

    Update value size to 1536 chars because I had an image which went over 1024 chars

commit f118fc0c14d8422362819da5d36366af8deaa047
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Apr 27 03:58:16 2009 +0000

    Fix an edge case with GPS data handling that results in this error:
    
    fread: Length parameter must be greater than 0 in file modules/exif/lib/makers/gps.php on line 197
    
    Filed upstream as:
      http://www.zenphoto.org/trac/ticket/1108

commit f51765a4b25ae66e0554e72f9342724313a6c3b6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 25 22:17:06 2009 +0000

    Drop the item_id key; we don't need this level of strictness in most
    cases and it slows down inserts.

commit bab514a48df6b7c4f1044580ff8eb1dc4b0e8100
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 25 22:02:50 2009 +0000

    Change the value column to varbinary so that we can handle the occasional binary data embedded in places like the EXIF caption field

commit 3950e7582b8d725140003103f35dd285d59dc65f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 25 07:18:39 2009 +0000

    Fix status math.

commit 2819a1b7b4d200c692889a3490672adfa5df9102
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 25 06:53:34 2009 +0000

    Extract as many records as we can in a second

commit 63ce71a32b32873e2d48fe1ff4f0928d44bd15ef
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 25 06:52:44 2009 +0000

    Add a key on item_id so that our query to find missing exif records is efficient

commit 0f6d15b304581c7363d541327216f8c37ce9d37c
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Apr 24 04:55:48 2009 +0000

    Fixed typo in comment, added docblock.

commit cda6e54aa4e081bc55281223a47a35d34df40a34
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Apr 24 00:33:27 2009 +0000

    add_group() was not getting $form before using it.

commit e30c023bd3359ae81be1c1108b4c71627dc459d4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Apr 23 23:58:16 2009 +0000

    Use single quotes so that user data containing $ doesn't suffer
    variable interpolation.  Fixes ticket #229.

commit 7bd44b22e296b7145750c26183c1c9d1bdf6497b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Apr 23 21:42:34 2009 +0000

    1) Change the processing so the server_add start task can return done = 1
    if there are no eligible files selected
    2) Change the javascript to handle this condition and show a pop up

commit 465182e58f7cd2cd087bdc59e4a4dd2f89694e9f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Apr 23 20:48:09 2009 +0000

    1) Move the progress bar to a dialog
    2) Provide status and error messages back to the user

commit 2890eb75897d2157f3ccb02e1216b828bdf470a0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Apr 23 06:48:41 2009 +0000

    Auto-hide the control toolbar so that it doesn't obscure the movie any longer than it has to.  This resolves ticket #199.

commit b1a15f21302c12da480591d4d5d3d4396b78ce90
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Apr 23 04:53:48 2009 +0000

    Implement a cancel button so that if an organize task is paused, it
    can be cancelled.

commit 1173b21f959eb013fc1844c5a1d5f3a071a1d455
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Apr 23 04:53:19 2009 +0000

    Fix bug in the item_before_delete() event handler

commit 38b5c02cfca42c7e7abc385fbf59639a7f0c59ca
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Apr 23 02:46:53 2009 +0000

    Remember to import album highlights

commit 778cf0254e88f8fd73f9bbea28c65a253fbe70bf
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Apr 23 02:33:31 2009 +0000

    Use https if it's appropriate

commit dd0e69ba3aa9ab1521c104920d842a7226b67699
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Apr 23 01:32:35 2009 +0000

    Delete any comments associated with deleted items

commit 6b4fa9105f92aaee8098a2cf3aa6478f79d0f3ea
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Apr 23 00:49:35 2009 +0000

    Disable automatic session id regeneration because ajax requests cause it to bomb.

commit 933770cf0ece55ff98a098456807764caf07b767
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Apr 22 23:23:15 2009 +0000

    1) Fix index overflow issue.
    2) Fix where the microthumb was removed even if the move was cancelled

commit 79712cb0b4c73e8bc73f4f694018fb2e6308c935
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Apr 22 22:20:19 2009 +0000

    Remove the negative weighting for albums.  The are now positioned
    based on the insertion order.

commit 47f531fc9c50cc163ba21646271203a7ace4aba8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Apr 22 19:51:25 2009 +0000

    Mark a task as stalled if it's > 15 seconds old (because tasks should ping back much faster than that)

commit 33775f9fb013ae2c42265f562090a95c2995b919
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Apr 22 19:50:38 2009 +0000

    Throw an exception in graphics::resize() if the input file is empty

commit 98d085e55f02dd19fde4fd3acda9037a9fe57bf4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Apr 22 19:49:27 2009 +0000

    Minor cleanups:
    * Delete g2_map records when the corresponding item is removed.
    * Improve text on g2 import settings page
    * Minor comment fixes.

commit 8141fd50889431059ec2def58418283ddb8f355b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Apr 22 19:32:24 2009 +0000

    Set the default logging to 'notice' to make it more user friendly.

commit 475b8fe9ff3f4eee077fd649a1e5aea2568c06b4
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Apr 22 16:09:57 2009 +0000

    Dragging from the thumbgrid to an album in the tree now works.
    Refactored the javascript to minimize duplication.

commit f9ec5d6de466b6a7c9eb4766ca228aff754284f5
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Apr 22 14:05:16 2009 +0000

    Make the scaling based on the target thumbnail size that was specified
    at thumbnail creation.  This will remove the upscaling effect

commit b4bca043ac01c1889b526302a9be619d98832df0
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Wed Apr 22 05:31:29 2009 +0000

    Added method to determine proportion of current thumb_size to the default, 150. Use this in the the default theme, or any other, to reduce the size of CSS widths and heights in albums, including .gItem.

commit 1956a6ae954463f135fc37671143af538fb7f8df
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Apr 22 04:20:05 2009 +0000

    Refactor the move functionality into a helper function so it can be
    called from organize

commit 9d31564b7cfe067f5260e3bc904980f3cd3231a7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Apr 21 18:11:27 2009 +0000

    1) Disable drag when the rearrange task is running
    2) Add the album name to the task name

commit 0fdc4639c357fe66b4d05f0deb0123de3fa0a0f6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Apr 21 14:41:06 2009 +0000

    Remove duplicate word from status message

commit 4e944577f4e049bdd59565834167f051c237d09b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Apr 21 14:15:58 2009 +0000

    The pause button now works.

commit c94fc344e853ac00b83414f2f9175dad8aebba97
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Apr 21 06:04:03 2009 +0000

    Added progress bar and pause and continue functionality to rearrange

commit 201e8cdf7046937eef0e53542d777bf67c496054
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Apr 21 04:21:34 2009 +0000

    Highlight: we can now import photos and movies.
    
    Notes:
    * Don't store the g2->g3 map in the task; it gets too large and
      overflows the context column.
    * Import album sort orders
    * Try to treat duplication in the summary and description fields
      sensibly.
    * Move the g2 import config page under the Settings menu
    * Clean up the settings page slightly and send users to the
      maintenance page to do the actual import (not an optimal UI, but it
      works).

commit e9867fb97cfcf1c5ae98f3ce6c8a0c6791b018ca
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Apr 21 04:17:56 2009 +0000

    Theme the cancel-all link like the remove-all link.

commit 6c911d2d7c044ffb18a2ea761bc5625789aa6523
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Apr 21 04:16:30 2009 +0000

    Make the task iteration duration 1 second instead of 500ms.

commit ace6335e64b29ada7838938a2346d3cae3982c98
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Apr 21 03:12:14 2009 +0000

    Add a key on item_id for the search_records table so that when we left
    join it against the item table to find missing ids it's fast.

commit e8ea822801fdb18942529ff15390e8a6de92a9a3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Apr 20 18:47:38 2009 +0000

    Remove debugging statements

commit ad10584dc1ba40aa045ece4db3e09dfc3ec8039c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Apr 20 18:44:19 2009 +0000

    1) Add rearrange processing as a task
    2) Improved drop location determination
    3) Add a revert if dropped on an invalid target
    4) Add a popup dialog to display ajax errors
    Still to do progress bar, pause/continue and status messages

commit e8d99f22a1605c47bf2e83cf02a548c5e5c2c87e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Apr 19 18:42:53 2009 +0000

    Simplify the handling of moves to the beginning or end of the album

commit 663c38a7e85eb58f2526d2fe7ac9aa6c040bf44d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Apr 19 18:33:35 2009 +0000

    Continue javascript code cleanup

commit f1a9ac807ce32d68dac9b43ae0123390dc30e70f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Apr 19 18:02:07 2009 +0000

    Restructure the java script code (i.e. separate complex callbacks or
    objects into variables)

commit 55256b459b2e5201203cf2999d3681335127bd1f
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Apr 19 07:05:18 2009 +0000

    Fix UI string

commit aaec040716d6e8702cbc001447f621e9a13a219c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Apr 19 03:51:29 2009 +0000

    - Improve the movement of the placeholder
    - Make sure the thumbgrid will utoscroll when dragging
    - And an ordinal attribute to the thumbnail when generated, based on the
    current sort order of the album.

commit a8d60021ea67bbb3a58f8214ae03a4f34f17119f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 19 00:58:56 2009 +0000

    import album owners and be a little smarter about summary/description duplication

commit 6e05e917df358275c5994ca17e27e7694f652510
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 18 23:52:02 2009 +0000

    Redirect item/NN requests to absolute urls

commit e7ba49b69c41793ba2f3605d6a6b0f8d6588e1c4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 18 23:10:57 2009 +0000

    Properly import groups and put users into groups.  Mark admin users
    appropriately.

commit 0fe439876523d453ca1c5ad7ddadc808c02c9cf8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 18 23:07:08 2009 +0000

    whitespace cleanup

commit 6b89e7fa2a32ad4e8013c32db625df50db1bbc39
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 18 23:06:38 2009 +0000

    Add user::lookup_by_name()

commit a3e8818449677d08444cd30613603440e6529c5a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Apr 18 04:27:04 2009 +0000

    Track what we've already imported in the G2_Map_Model and keep it
    around in the task so that on subsequent import runs we don't try to
    reimport stuff we've already pulled in.  This also gives us a mapping
    so that we will be able to translate old G2 urls into the hot new G3
    urls.

commit 1a332009c7ac59984e627678ecc91dbaf267ae57
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Apr 17 20:17:53 2009 +0000

    Change how mutiple requests for micro thumbnails is handler.
    handle the edge cases where the draggable is dropped on the micro
    thumbnail panel

commit 16db33814585e87195429cdbc9000f57439822ca
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Apr 17 14:33:09 2009 +0000

    Fix typo that was causing an error

commit 1d6554764c04fa633eab2e09846dd9b270a4e813
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Apr 17 10:02:13 2009 +0000

    Make the update_index task continue until it has used half a second
    before stopping.  This is *way* more efficient than just doing 2 per
    request.

commit f243e8d41c6df6a674275bc6d63218b0daa584d5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Apr 17 09:50:53 2009 +0000

    Be graceful if exec() is disabled

commit 471c1d5b3dda502bee52f5c6cf167a89832ce832
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Apr 17 09:48:36 2009 +0000

    Don't show the 'no toolkit found' message unless we actually didn't find one

commit ff5afeb714dcc52090f4a9fb1acdc404165bad61
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Apr 17 09:05:12 2009 +0000

    Import albums.  Just the basics; misses permissions and a lot of
    metadata, and doesn't import photos yet.

commit f8bc0a40fe9596b441691ceed6f2c94d24938a0d
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Fri Apr 17 02:19:56 2009 +0000

    Fix for ticket 203: Don't interpolate the translation string for the l10n client translation input field

commit d8e91338734185d1bf67f0c84f429d33effce142
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Apr 17 02:06:00 2009 +0000

    Another iteration in the quest for the perfect organize module.  At
    this point you can select microthumbs, by clicking on them, ctrl-click
    will add to the selection.  You can select by drawing a lasso around
    images. Holding the ctrl will add the lassoed thumbs to the selection.
    Once slected, thumbs can be dragged and dropped within the current
    At this point no background processing takes place

commit 6fae077b52cc44dee15b2befd1862ea65da50730
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Fri Apr 17 02:04:25 2009 +0000

    Fix i18n for "Logged in as" string

commit 7349d49945869c64fe51fe51a38c19f8410fc724
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Apr 16 00:20:45 2009 +0000

    Add the ui.jquery selectable plugin by copying the new vendor version to trunk

commit a7f345476f80cde43589069825a256534de7745c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Apr 15 07:23:22 2009 +0000

    Very early round of Gallery 2 import code.  It can import users (with
    the wrong password) and import groups, with a basic UI.  Needs a ton
    more work.

commit 8c1d1a9d0df5e1501d8beccbadeaf93c95313a62
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Apr 15 07:18:19 2009 +0000

    Provate a way to set the hashed password directly

commit 03960546beba4c4022a8a8facb71889b48a2307b
Author: Jakob Hilden <jhild@umich.edu>
Date:   Sun Apr 12 18:27:45 2009 +0000

    added icons to permissions UI

commit 8db55de4f034e0e54a429220b3bbe35156fb7c99
Author: Jakob Hilden <jhild@umich.edu>
Date:   Sun Apr 12 17:52:26 2009 +0000

    changed order of form fields in photo and album forms so that the confusing "name" field is not on top anymore
    changed "name" label to "Filename" for photos and "Directory Name" for albums

commit 670e0d8f8575cb3110bf330db48cc5ff8c2cac7a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 12 06:41:43 2009 +0000

    Fix indentation.

commit 9f488446d9dde9e485da2287a81fa14df1c5af0d
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Apr 10 05:40:56 2009 +0000

    Fix up microthumb grid, changed unselect to deselect all, white space fixes.

commit 91bc1292da0c4e01c475272a64030bb8097367b0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Apr 9 19:39:26 2009 +0000

    Don't try to import the staging directory as an album

commit 49042345f60c58a55c52fc02ac4ee25bac16b4ce
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Apr 9 19:32:12 2009 +0000

    Provide a translation of the titleon the fatal error dialog pop-up

commit 53a08aa592c61f9826da86c7b0b7f4935986cfc3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Apr 9 19:31:02 2009 +0000

    Missed a closing para )

commit 25237205619cdbd02a47535a9a7cc2882f372a8f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Apr 9 18:17:53 2009 +0000

    Change the weight for albums from zero, which could give us
    indeterminate ordering, so that ablums are initially shown first.

commit e692868e8a968d652092a3b85898ff1be74d7a1f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Apr 9 17:59:43 2009 +0000

    Create a pause method on the server_add controller and get rid of the
    optional parameter/

commit 093422bfbcb2cee97fae3f09c54f2863c3d85252
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Apr 9 17:33:17 2009 +0000

    Fix server add to correctly ignore a authorized path if there are no
    files to be uploaded from it.

commit 6e819603af168c7f5ec403b0bffc70948454a329
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Apr 9 17:18:23 2009 +0000

    Clean up delete code as per Bharat's note

commit 898eba8e6f666c2772b3e1be9126dd0d44791a11
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Apr 9 16:33:14 2009 +0000

    Here is the current state of "organize".  I'm having trouble getting
    drag and drop to work.  And to get it to layout properly.  Any
    thoughts would be appreciated.

commit fe9b08e50636d8e66c0cd72306e2833314146bcc
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Apr 9 16:30:49 2009 +0000

    Merge the micro_thumb_tag method into thumb_tag and add a third
    parameter to indicate that a micro thumb is being generated

commit d558a8801532f7882cf62bd814243e56d8a166cc
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Apr 9 02:41:29 2009 +0000

    Fix for ticket 181: don't ignore the locale option when adding users

commit ff732d9c7e41ca4fd5e44e5f717463fa5a117a49
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Apr 9 02:25:27 2009 +0000

    Fix the spelling of "appearance_menu" and update user_menu so that the
    user/groups admin menu option appears again.

commit 523c467eed670c59580ede2ab1dbe8b4ad59c800
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Apr 8 15:11:55 2009 +0000

    Fixes issues with Server Add:
    1) Fixes Ticket #208
    2) Fixes Ticket #190
    3) Fixes an unticketed issue where two items could collide when
    creating the thumbnail and/or resize. For example, loading a.flv and
    a.jpg would have generated the same thumbnail image.  This change adds
    a random value to the name to avoid conflicts.
    4) Added item::__set() to clear the relative path if the name changes

commit b6f59e17f1a7f5627eea807dcd049bbc6242d3e6
Author: Jakob Hilden <jhild@umich.edu>
Date:   Tue Apr 7 07:14:36 2009 +0000

    changed the items in quickpaneoptions dropdown menu (which appears in the quickpane for albums) to be easier clickable and changed markup to use <ul> (more semantically correct)

commit a4d63d5a41d69c9c1bed14769d628c5d491809b2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Apr 6 08:59:39 2009 +0000

    Exclude lib/swfupload from our scan paths

commit 4041c6a0b25e75625fd3f8d44d05e92380461773
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Apr 6 08:55:33 2009 +0000

    Fix whitespace

commit fb818f3c4d502fd9fcef8494506262a2c4c9b868
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Apr 6 08:53:37 2009 +0000

    Fix preamble

commit 63edb37076b9c1248041368f0aa16013cb7edb15
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Apr 6 08:10:42 2009 +0000

    Fix up the quick-edit code on the photos page.  Everything but "move"
    is implemented.  Can't do move easily because it's tricky to handle
    the post-move redirect.

commit 7e23ec89d93cd7874145c7132236a057c6513ca6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Apr 6 08:03:31 2009 +0000

    Mark resized images with the 'gResize' class to match the 'gThumbnail' class we use in albums

commit 0531c9262e837f1185a06d11856d79f658a0f126
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Apr 6 05:02:56 2009 +0000

    Visually connect the selected album to the album thumbnail grid. Edit item opacity, selected items become opaque.

commit db771925986b8ec5a6ab31fd1cf4dc6cceb449c9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Apr 6 04:08:44 2009 +0000

    Update SWFUpload to v2.2.0.1

commit 6d940ce8cda6ea68a34023358b89819d75d8e7e7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Apr 6 04:05:43 2009 +0000

    Add case-sensitive versions of file extensions to the file_types list
    so that .JPG works on case sensitive systems like Unix.  Also add
    .jpeg to the list.
    
    Fixes ticket #183.

commit 292b51ddd34e7d304ad30bcbdea08154bdcc1d4d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Apr 6 03:14:13 2009 +0000

    Rework the links section of the "Welcome to Gallery3" block so that
    the links work and it's more helpful.
    
    In the process, rename the Presentation menu to be Appearance because
    that makes more sense to me (and at least one other user who wrote
    about it on -devel).

commit 8ae2305289d0f4aa5168921efcab07030b934ee5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Apr 6 00:27:24 2009 +0000

    Hide the "no comments yet" text after the first comment is posted.
    
    Fixes ticket #196.

commit a4323c79ee48cac3cea8ff87ac74ab1b036e41c5
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Apr 6 00:15:45 2009 +0000

    Fix for ticket #207, which should then generate a whole bunch of
    errors that are described in ticket #208.

commit c936eebcf7c57cfca8c3ff2e7b97441351118640
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 5 20:43:05 2009 +0000

    Don't do graphics detection in core_installer::install() because that
    gets run at scaffolding::package() time, not on the target machine.
    Instead, create a core module variable to trigger running
    graphics::choose_default_toolkit() on the first admin login after install.
    
    Fixes ticket #206.

commit a2dd24d7cadfd8bcc1a89ea23d64bbe7713d038c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 5 17:51:25 2009 +0000

    Remove extra blank line.

commit cdf873f1b3ce85a2637de45d9984d9ac758d3384
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 5 17:50:57 2009 +0000

    Remove extra blank line.

commit ff0ccc7e02fb375852ee8b84953d4d77294f79d7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 5 17:49:52 2009 +0000

    Remove obsolete code.

commit f1eec57221f9bca047ff8d422ade1e26df0fa233
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Apr 5 16:57:51 2009 +0000

    Add a weight column to the items model.  Change the album ordering to
    use this as the default instead of id.  This prepares the way for
    manual reordering in the organize functionality.

commit 15fc9b9399ede22879c5f5a6ff95d058986d0278
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Apr 5 16:48:20 2009 +0000

    Get the preamble right so the unit test passes

commit fde707388617f9225843333badad404d6883c283
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 5 04:08:24 2009 +0000

    Strip trailing nulls off of some tags.

commit fabb9fb4bd0a3dacee7f0b45903987e1e1a4c6bd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 5 04:07:18 2009 +0000

    Don't try to insert exif keys if there aren't any.

commit 846fc51f612997efbee1e5a0d05b773b5a4c7f73
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 5 03:54:08 2009 +0000

    Optimization: add all exif/iptc keys in a single insert, instead of
    many separate queries.
    
    In the process, rip out the summary column, we weren't using it.
    Clean up the test, and drop the exif_records database on uninstall.

commit 7d712ecd9629de7f15f79a175fd95866e75645ac
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 5 02:47:35 2009 +0000

    Use the optimized version of PicLens to reduce download times ftw!

commit d9c1dd67d44aaca6d0cc87f4e5e683252ee17072
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Apr 5 02:41:38 2009 +0000

    Change the way we launch PicLensLite so that it doesn't upscale small images.
    This resolves ticket #205.

commit 802f2431c7da467cbc58a7e970690ff6604e1c84
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Apr 3 23:12:52 2009 +0000

    Concatenate chopped up internationalized string.

commit f7435112c54d7d45dee6ba9f747609d9491bbff5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Apr 3 22:53:43 2009 +0000

    Clean up JS/HTML so that renaming works properly (it had hardcoded
    urls before).  Clean up indentation and localization code while I'm
    in there.

commit dff53d9e31dec8110f4fd047c69c5444ebde273e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Apr 3 19:01:37 2009 +0000

    Fix for ticket #27
    Change the text of the edit button to "close" if the panel is opened.
    Reset the original text when the panel is closed.

commit 9ed0dd51bf6c4d43195f56ca8e88db04b5fc5df4
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Apr 3 17:33:07 2009 +0000

    Fix for ticket #201.
    1) create common update function so processing consistent between the
    user edit and admin edit.
    2) created common private helper function to build the user edit form
    the same way.
    So a user can now change their user name if the new one doesn't exist.

commit d35a0cdb610fc646c329b9622fcb05a4948c3ba2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Apr 3 15:40:41 2009 +0000

    Fix for ticket #200.  When an error occurs the current uri is no
    longer admin/server_add but admin/server_add/add_path and the equality
    check fails.

commit 892e46368b5440974fd2700dcfd6b5697c636f3b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Apr 3 08:17:58 2009 +0000

    Set the queue limit to 1000.

commit f1cb43430bc84aaa2bcf7bfc99d1ef9dd0138e78
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Apr 3 00:50:43 2009 +0000

    First iteration of the organize functionality (orginally called bulk
    edit).  There is limited functionality in no edits work.  This is
    primary a chance for the team to review the ui.  It is in a separate
    module to isolate the changes.  Eventually, it will be moved back into core.

commit 688376223853bcc07ef0eed9926a2a6fce46ef9e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Apr 2 23:56:00 2009 +0000

    Completely task-ify the localization scanning code and restore the
    incoming_translation key cache.  The only part of this that is not
    broken down is the l10n_client::fetch_updates() part.

commit b05b89798a1ab9498062812bdf90cdf44ad18ee2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Apr 2 21:41:10 2009 +0000

    Continuation of r20518.  Remove all the cases were the csrf values in
    views were being manually set.  Also removed it from the Admin_View.

commit 160b54760f9373c8c092114e3ca2410af0730ed2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Apr 2 13:01:16 2009 +0000

    Fix the issue identified in
    http://gallery.menalto.com/gallery_3.0_alpha_3_released?page=1#comment-304581
    ticket #195

commit 96aa486060bda042cd8d4dc5e9a667f170a418d0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 31 20:34:12 2009 +0000

    Add missing 2nd argument for Theme_View()

commit a57d0d93a8c741e64ac18bbb36aad4164569f266
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Tue Mar 31 05:14:40 2009 +0000

    Add quick edit pane to resize images, ticket #189

commit 9f04fef3e046d7b4778ddf449589c9b1a3a67857
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 30 18:09:17 2009 +0000

    Updated to r807

commit 066854424a683f14f70f54e3ef1879e77c409369
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Mar 27 17:36:14 2009 +0000

    Add a method to create a micro_thumb that is centered vertically in
    its container (initially used for organize album view)

commit c96544ff34dd01277c75d591e31115fadf0be82f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Mar 27 15:39:22 2009 +0000

    Add missing csrf value.

commit 921f3a2eeeca9be23cb006a31b6d6f71e186374a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Mar 27 03:43:21 2009 +0000

    Put csrf token into Admin_View and Theme_View by default, then use it
    directly wherever possible instead of access::csrf_token().

commit d7719a7e72de2ddc46c9173b0871f53e32ef40fc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Mar 26 20:26:06 2009 +0000

    Gracefully deal with the case where we resume a stalled task but there
    was no work left to be done.  This fixes a divide by zero error.

commit 9f8393c9d559bb93c29dc9931a2cbd260d1e3fb8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Mar 26 19:51:15 2009 +0000

    Rename $block_id to $id to fix ticket #192

commit 9d354371676ccf6181eb67447ca4c76e56c59f1b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Mar 26 17:42:17 2009 +0000

    Update comments to reflect that the results of item::children or
    item::descendants uses the specified sort order

commit a142aee609ec078a45303184d8f24dba643249a6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Mar 26 07:10:47 2009 +0000

    Convert language updates over to task form.  It's still very rough,
    the task only has one step from zero to 100.

commit 9f784818da36b7779cb9dec6622cdb32d943dbce
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Mar 26 06:56:29 2009 +0000

    Set csrf into the global theme for convenience.

commit 15eb1a9c8d7ff2cd02e7a65e061bd1c9333ffdf9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Mar 26 06:32:48 2009 +0000

    Replace iterators with stack based scanner, which we can serialize into the task context.

commit 09243aa72ec1ae06d6053d15f185a096591d85b9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Mar 26 04:44:12 2009 +0000

    Normalize code style.

commit 78943402b27bc5afb0736089b25a020cd33024b6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Mar 26 04:36:00 2009 +0000

    Convert the L10n scanner from a library to a helper.
    
    In order to make the class static, I had to remove the index cache.
    I'll restore that and cache the index keys in the task context in a
    subsequent change.  For now, I've put in a @todo to add the caching
    back in.

commit 75d98701ae64100a0e444a0caaa14efbc1b2028d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Mar 26 04:09:03 2009 +0000

    Guard the calling of the form closing event so its not called if there
    is no form.

commit 96df4419f4827bc711623e8083dbafbdc3ab477c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Mar 26 03:17:11 2009 +0000

    Revert r20492

commit a28deb86741d35a0ab6365ed1455b8e50aa31c81
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Mar 26 03:09:23 2009 +0000

    Use pathinfo() instead of substr/strchr/etc to get the file extension.

commit 11bfacba086cb014a40eb11f70dffaa9e422409b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Mar 26 03:02:18 2009 +0000

    Normalize exception format.

commit b438af302757aa4f68c452567542fe50a81a5809
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Mar 26 03:01:25 2009 +0000

    Optimize the way we lookup incoming translations.
    
    Undo last commit (accidentally committed benchmarking code)

commit d311aa71073905381a5f641754805bfbd816bd6e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Mar 26 02:54:35 2009 +0000

    Normalize exception format.

commit 2152baa65c8e7dd3aa9f3f09d6d8261bc76a271b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Mar 26 02:53:42 2009 +0000

    Normalize exception string format.

commit e3aab08f8d4e0a4016c073d1a9c2a760ce0b9a2e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Mar 26 02:50:50 2009 +0000

    Fix typo, whitespace.

commit ab787233d65f8b20ac081ae78aa8257b363efaa3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 25 18:14:03 2009 +0000

    Fix for ticket #184. Sort the output children as DirectoryIterator
    does not provide a sort order.  Separate the directory and files, sort
    them individually and then merge them together so directories are at
    the top of the list

commit 944276fdfe813d99c3a7bc2c37c267c68be98ae6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 25 17:21:11 2009 +0000

    Fix for ticket #184. Set the default album sort order to "Title"

commit 3cb2c42e49b008facff1563b0e9b1d5b5c67e77c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 25 16:21:36 2009 +0000

    Fix for ticket #181.  Valiant take note of the change to
    admin_users.php.  I had to remove the check for the locale as it
    hasn't been added to the form.

commit 961d5e11cf844e412bfcd8baa0e2d776e0ec2bb6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 25 15:22:23 2009 +0000

    Fix unit tests where the albums, resizes and thumbs directory were
    being deleted.
    Fix for ticket #182

commit b909132f54d6dd3a1a9455a3255767ef26bce658
Author: Jakob Hilden <jhild@umich.edu>
Date:   Wed Mar 25 04:47:25 2009 +0000

    tag changes in the tag admin should now work as expected

commit 0a4bce3f674dcb719ef16d52a6034d85b250083c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Mar 25 02:13:01 2009 +0000

    Remove debug line.

commit 20673141861976f551064dd1b5a86c399f8e7a04
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Mar 25 01:34:04 2009 +0000

    untabify

commit d432cba2cb8bc6064ae89d12a919f640bcc8379f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 24 21:09:37 2009 +0000

    change version from "3.0 Alpha 3" to "3.0 pre-beta svn"

commit 3523bf5d90cee4a90b7b4c467fefb80128a97fb7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Mar 24 19:04:43 2009 +0000

    Change the item model so it will actually delete all the file system
    objects when an item is deleted.

commit 414e58a4272078ae7a411688a948bf78c37fbf0d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Mar 24 18:03:32 2009 +0000

    Fix the problem I created by trying to run the task again after it was completed.

commit 00ffb24eb05705813505ac6e83adb155a9303496
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Mar 24 17:41:20 2009 +0000

    Add a pause button to the server add dialog and if it is clicked then
    the upload is paused.  If the dialog is closed and the task is not
    complete then a warning message is displayed on the album.

commit 520a4b41b3776c0ffb71af5580668d6530d9ed05
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Mar 24 17:30:06 2009 +0000

    Add a "form_closing" custom event to the dialog processing.  This
    allows the form in the dialog todo custom processing when the form
    closes.
    
    For example, the server_add dialog (next commit) uses this callback to
    determine if the upload task was cancelled and display a warning
    message when the page reloads.
    
    Usage:
    $("#gServerAdd form").bind("form_closing", function(target){...});

commit fd58fe0ae02d14fca16b9bd2e7f664c016a494c7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Mar 23 14:51:09 2009 +0000

    Fix for ticket #168: Set a default value for extra_attrs on the Item_Model::thumb_tag()

commit ed7175092c81dafa54be7fec2fa91d0ad88aa780
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sat Mar 21 07:44:46 2009 +0000

    Refactor all translation strings that have  ambiguous placeholders.
    E.g. "%link_startClick here%link_end" is now '<a href="%url">Click here</a>'.
    
    Note: This isn't always the best solution. E.g. consider "Foo <a href='%url' class='gDialogLink'>bar</a>." Now the translator has to deal with
    preserving CSS classes too...

commit e1c53921d3ac4574486b420d6da9c2843f144d76
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Mar 20 20:33:20 2009 +0000

    Don't divide by zero in thumb_tag if there's no thumbnail

commit b942930c70a077279815b5ab7e59c98e82209fb5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Mar 20 20:31:50 2009 +0000

    Add title string to this page.  Doesn't show yet because its in a gPanel

commit 9a04156e3673856fbdcea8eee6603ab5b8395d6b
Author: Jakob Hilden <jhild@umich.edu>
Date:   Fri Mar 20 18:25:38 2009 +0000

    background image for the "select photos ..." button in the uploader

commit 537bd9445351929ab46102a8d2f19934363925bd
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Mar 20 18:19:27 2009 +0000

    This change checks that the active theme is available and if its not,
    reverts to the default theme.

commit 6fc195213410374a967dc6bf483fb9a7f63ff3ae
Author: Jakob Hilden <jhild@umich.edu>
Date:   Fri Mar 20 17:22:12 2009 +0000

    minor UI and CSS improvements
    (the styling of the flash button is a not themable solution and I put the CSS in the file for now)

commit 863e353911c5bab59e4bd6e9d0d70f79bcf37e46
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Mar 20 17:20:17 2009 +0000

    rollback of r20469... see trac #161

commit 48c022e8cbcc027cec20aa0b6657a2c784df5ad8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Mar 20 14:59:55 2009 +0000

    Rather than moving the themeroller and all of its associated files
    into each theme.  I chose to create methods Theme_View::file($path)
    and Admin_View::file($path).  These methods check for a theme override
    file in the theme and return a link to it if it exists.  So to
    override the themeroller files. just create a lib/themeroller in the
    theme and the files will be picked up.

commit acfb81d940a50ec018613946e30f63c623b8c5db
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Mar 20 08:25:33 2009 +0000

    Oops, we need UNIX_TIMESTAMP() instead of NOW()

commit 6df1dffed1e2eef2690444e044c2adb1a9bbca51
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Mar 20 08:22:57 2009 +0000

    Do some data normalization so that the install files will have stable
    ordering and known values.  This way subsequent packaging runs won't
    have any differences unless there's a real data change.

commit 06baa24dd6e8e78df0f29ffcff5a808e134331d8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Mar 20 08:21:43 2009 +0000

    Set our version to 3.0 Alpha 3 and add 'logs' as a dir we create at install time

commit 0695be1ccf2a2ba83acaecca6b58c92fdc039f26
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Mar 20 04:39:27 2009 +0000

    Restore $extra_attrs in img tags. Roll back to using .gThumbnail in quick pane.

commit 3dbf9e1c82766fbaa508c8f06ff2792a0f2a9306
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Thu Mar 19 16:01:41 2009 +0000

    Remove YUI grids hd and ft ids, we don't need and they're cluttering our HTML.

commit 1004c58490a782b88fe3c445dccfbb6c7755840c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Mar 19 09:10:58 2009 +0000

    Update kohana to r4095

commit b039f43851eac35fa9b8763f02460e4a45c4c804
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Mar 19 08:38:35 2009 +0000

    Normalize whitespace inconsistencies with upstream code that probably snuck in during various edits.  These files are now the same as the upstream code.

commit 61d8a143eaf7478b15edf554f2ccaada75c8bd9d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Mar 19 02:35:51 2009 +0000

    Rejigger the way we do reinstalls while Kohana is running.
    
    core_installer::install() now takes an $initial_install param that
    allows us to enforce that we're doing a clean install.  Use this in
    both the scaffolding and the unit test code.
    
    Greatly simplify the scaffolding uninstall/reinstall code.

commit 0b721258f42c0775d1fb90966a82fe3a81763e00
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Mar 19 01:47:42 2009 +0000

    Fix syntax errors.

commit 03877250f2447a9edc5ba210125f6d11c2fbd1b4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Mar 19 01:41:57 2009 +0000

    Updated kohana to r4091

commit ccb02b001f96f743e73a1b4a31b5e7053814c642
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 18 22:42:31 2009 +0000

    Fix for ticket #155.  Delete the item record before unlinking the
    files.

commit 6b5d395d593fb9887cd15e37a0c10ee8334935b6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 18 19:39:34 2009 +0000

    Fix for ticket #153.  The sort column was not not initialized for
    movies or photos.  Turns out that when you go to delete, ORM tries to
    check for children and apply the sort order.

commit 4da37ecb235bc1b403b7ade6b273bc68c306d261
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 18 18:55:48 2009 +0000

    Fix for ticket #152.  Somewhere along the line we we stopped using
    gThumbnail as a class.  Changed the selector to select the image from
    ".gThumbnail" to ".Quick img"

commit b1ecf3ca4d3f1c5be935d948cd8beafb54946954
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 18 17:02:21 2009 +0000

    This is the real fix to ticket #154

commit 30cb537c314dc94dac92f2e453b2c0a8bd19f8ef
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 18 16:45:18 2009 +0000

    Fix failed unit test: private methods are required to begin with an underscore(_)

commit d2006069bba06263215ee2538f7fe6dc512cf3ad
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 18 16:36:57 2009 +0000

    Remove trailing ?>

commit e07c2dfcd5579f7f8400df3a0a2355475444f946
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 18 16:33:16 2009 +0000

    Fix for ticket #154: Remove the raw count and use the ORM wrapper.

commit 591403d79453204b537f51b4d213dfef0c9cc270
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Wed Mar 18 06:15:37 2009 +0000

    Added rotate cc and ccw icons to themeroller theme and css to default theme, applied to quick pane rotate buttons. Hope that jQuery UI includes rotate icons eventrually so we don't have to maintain this.

commit a20241f9eab92930827339187d4de66c73e0bffb
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Wed Mar 18 05:16:58 2009 +0000

    Stop header height from collapsing when there's no breadcrumb present, as is the case with tag albums. Thanks to gadulia for reporting: http://gallery.menalto.com/gallery_3.0_alpha_1_released?page=1#comment-302916

commit 9d65379160b5604bf8f61820afff02b25c4079d1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 18 03:36:18 2009 +0000

    Remove semi-colons from single sql statements and correct anoter
    instance of {items` which won't get prefixed properly

commit 938bca7601c71669d6a8d24580818660489096ac
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 18 03:35:08 2009 +0000

    Remove back ticks from sql

commit 3a5de959b9ae801c1f7f93faab331306507db67a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 18 02:49:04 2009 +0000

    Fix for ticket #143

commit 4971db37d48ed184f8f66a3b2ed3cf89235a660b
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Wed Mar 18 02:40:16 2009 +0000

    Fix for ticket 142: Choose plural form "other" for count == 0 (unless the locale has a specific plural form for zero)

commit f8d49e8a097e865158a73b3c8ef94bb05f7cb626
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Mar 18 02:25:48 2009 +0000

    Make sure that the SPL library is installed

commit c1d7dc5f199be03d9f847d13c12b2ee49dc65be8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Mar 18 02:12:07 2009 +0000

    Resolve deviation from the kohana code left aronud by r20297 and
    r20301 (which was an unclean rollback of r20297) by just rolling them
    both back:
    
    $ svn merge -c-20301 kohana/helpers/form.php
    $ svn merge -c-20297 kohana/helpers/form.php

commit 6e84c132a2690984bf7fe73bfe758e2a8db4099f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 18 01:58:59 2009 +0000

    Fix for ticket #142. Valiant: u might want to check the implications
    of this.

commit 808206043471d88b574f05395faf272af7648702
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 18 01:24:54 2009 +0000

    Forgot to remove a back tick

commit 8e1817d4e4f6be8b550f38f7103d5cf01ac503f9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 18 01:20:30 2009 +0000

    Couple of sql statements that had incorrect prefix handling or no
    prefix handling.

commit 222f6e2e23a878b5c598fa189a8c385fe6f0ebf3
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Wed Mar 18 00:53:44 2009 +0000

    Functional l10n_client / server interaction:
     - Get / verify API Key from l10n server
     - Submit translations
     - Fetch translations / updates
    
    Reference: Tasks: 75, 76, 55
    
    TODO: Move out of core (and a series of other tasks).

commit 8c1f6006114b9bae79b869ae4e51bc35836a3270
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 18 00:01:39 2009 +0000

    Corrections based on feedback

commit c92ef7aced82ba48549bada37b4dcd9091017fd6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Mar 17 22:38:52 2009 +0000

    Fix for ticket #101

commit 7cf0313e7b8672d9757f565fd72c8e7dcf1a8904
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 17 20:59:24 2009 +0000

    Remove the in-place tag editing code from the default theme.  It
    should be implemented in the tags module for now, and then possibly
    generalized out to lib later on.

commit c81ee12411af5d26bbe4fe413ea7f6728d047ace
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 17 20:57:51 2009 +0000

    Don't allow empty tag names

commit 208fc9db683c51e3bcf1f24d1e5e0200e0f32d96
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 17 18:56:01 2009 +0000

    Update Kohana to r4081.
    
    This resolves ticket http://dev.kohanaphp.com/ticket/1156
    1156: "Table prefix gets append to column name"
    
    All tests pass.

commit 3f87c16223d7aca44f432efe99b35ab7afb0dbe4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 17 18:33:51 2009 +0000

    Fix missing preambles

commit 489059342e1d7291597f74d4221d7a05eabb75a8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 17 18:32:02 2009 +0000

    Remove windows line endings

commit 1ab5a769241653dd6036202df58b2d8455ef1e82
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 17 18:17:55 2009 +0000

    Treat calls to install() with TEST_MODE set to be initial installs.  At least for now.

commit 8dd24edf73fc6e9cd76138d9bd5cd5bd7d79feab
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 17 18:16:54 2009 +0000

    Fix correctness issue if there are no tables (list_tables will return null)
    Clean out the module caches directly now that the module loading robustness code is gone.

commit a83db20fe2dedf785bd7146c603ba5197f0e8d63
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 17 18:09:21 2009 +0000

    Fix minor correctness issues

commit a04fe5246c57b93673df7e2595ba839dbcc02a44
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Mar 17 17:19:45 2009 +0000

    Fix the locale field in the change user settings form

commit ee2f09c968ada67068914103c38175fa86baba8b
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Mar 17 15:49:02 2009 +0000

    Fix edit user form handler

commit 0f6e826860754ef2c95748ee296ee61853d4e91a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 17 06:05:46 2009 +0000

    Even out the padding for #gAddPhotosQueue .box

commit 63c8bb8d76e903f2a56d80a04728d39bb661b9fc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 17 06:00:21 2009 +0000

    Updated lib/swfupload to SWFUpload v2.2.0 Beta 5

commit 920804bd47dc21020b13fd927998582b11ed9f32
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Tue Mar 17 05:57:40 2009 +0000

    Style breadcrumb in photo upload dialog

commit 0a520f389fe8d2888be1522d645b4a862e7e23ad
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 17 05:41:16 2009 +0000

    rss/updates doesn't have an item.  Clean up some typos here.

commit 522fe45787bb945edb2f2e8f737728e61a33d979
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 17 05:40:21 2009 +0000

    filesize() dies if the file doesn't exist, which can happen in the
    case that a gallery is slightly corrupt.  In that case, just ignore
    the error.

commit c6f03284c467f5de18d8233cfdf57b2bfcb92ce3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 17 05:28:43 2009 +0000

    Make the gAddPhotosCanvas take up the entire dialog, for now.

commit 8786ee3ffb7d42465737531e2e471c635a370b3b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 17 05:25:38 2009 +0000

    Initialize $tags properly

commit a908c0e87856306a72b697a6f2fda418ec7feeb7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 17 05:24:19 2009 +0000

    Fix typo: $max_page -> $max_pages

commit 0f5ccc9aa3d028fee093c733744064c24fb302b9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 17 05:20:37 2009 +0000

    Switch from using SimpleUploader to using swfUpload as our flash based
    uploader.  This is modeled on
    http://codex.gallery2.org/Gallery3:Upload_UX but is not yet complete.
    
    Notes:
    * Changed #gProgressBar to .gProgressBar to support multiple progress
      bars on the same page
    * Added a bunch of CSS to the "needs a home" section in
      themes/default/css/screen.css

commit af83f5d3fcfc8c8396aea62232c0c38860bf41c2
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Tue Mar 17 05:11:17 2009 +0000

    Simplify gError, gWarning, gInfo, gSuccess selectors to allow them to be used within more elements. Updated gError styles in forms.

commit 8afefb9be54bebd0c2ac41a8ed8f1e021949cb74
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Mar 17 05:07:36 2009 +0000

    Remove mptt warning message hack

commit 2dba075e8a9750ccde392979a780e35d3aa86727
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 17 00:37:39 2009 +0000

    Fix typo: tag_block -> tag_theme
    Overlooked when I renamed this class.

commit e92e6d4da42ca6fd273cf9b4b4042af2cd00af83
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 16 11:33:14 2009 +0000

    Oops, I used the wrong resize variables in my last change.

commit 6a2e8ec1ccf5a44e4983c10db55bd293e4a735d9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 16 11:17:27 2009 +0000

    Set $item and $tag in the Theme_View so that calls like $theme->item()
    which fall through to calling &View::__get() have an lvalue to return,
    else you can't return them by reference.
    
    Also, don't show sidebar blocks for pages that don't have an item so
    that the rss and tag modules don't break the search page.

commit ccc867f62902750a6632de66bc2c8cece1c95abb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 16 09:11:30 2009 +0000

    Get rid of $hidden; it was never defined

commit 8458eba279356bf8a00741a0c7e9a9edcaed1fd0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 16 09:08:12 2009 +0000

    Switch the locale::$locales data structure to be an array instead of a
    stdClass because we're not allowed to asort() stdClass objects in PHP
    5.2.6.

commit 6aadb0bc77702bdfd37356d398fe2d9444835b3b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 16 09:01:50 2009 +0000

    Fix indentation

commit 1a2402dbd8a1d6e76958b4530c967e53b5bb7dc1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 16 08:59:38 2009 +0000

    Fix bug, $active -> $site.

commit 768418ea49d1367c5465a5fe074d22bc3fc11845
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 16 08:55:36 2009 +0000

    Remove unused orig_public_key from the form, it wasn't actually doing anything (and was causing an error).

commit c0d8216037612617d2dee45bfd0ff1bea89050fd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 16 08:53:20 2009 +0000

    Initialize some variables

commit 1055fe6be3c3161f79767214cf662ae8cdea7cc8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 16 08:49:55 2009 +0000

    Revive the install() and uninstall() functions in Scaffold_Controller
    because we need those to make a package.
    
    Fix the packaging code to ignore whatever prefix is being used by the
    developer who is doing the packaging.
    
    Update the install.sql file (there were a variety of small
    inconsistencies, probably from hand-editing.  Don't hand-edit this
    file!)

commit 6f0ddb40576fe04b7d91e6fd993fe8d54ec27c1c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 16 08:48:34 2009 +0000

    Set the sort_column and sort_order for the root album

commit eac4e72a3b8aa3062f6aba5c76da85eff0ec6987
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 16 08:34:20 2009 +0000

    Oops, fix a typo.

commit 2c3ab56a424aa66dab4e00ff2dbc193a7280b059
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 16 08:29:35 2009 +0000

    Move security into the constructor.  Protecting the index() call is easily bypassed.

commit c05a1103e73a54e3046c5aafc5daaa0c72d460f2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 16 08:25:49 2009 +0000

    Use a query to get the database version.  Newer versions of PHP bomb
    if you're using mysqli, and it asks for a connection which we can't easily get
    from Kohana.

commit c15e4c61a380094314290e0b7aec4646fabd0abc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 16 08:05:44 2009 +0000

    Proxy the url through _auth() to user::get_login_form()

commit 54e07d07691be42f606b5a5346bf956257c598bd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 16 08:05:07 2009 +0000

    Get rid of the extra robust code we had in here to make the
    scaffolding work when the Gallery wasn't installed yet.  Now we force
    users through the installer.

commit df5f035ed17ef7873e40b026052af4e8cc2be6e4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 16 08:02:16 2009 +0000

    Get rid of obsolete/undefined $block_adder

commit c3e70ecfa61f6e54fdc9ccd5dd4b01d44cb0b814
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 16 08:01:46 2009 +0000

    Initialize $result in get_html()

commit f12f53574923741fea3c518894ad130aa96e6399
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 16 07:59:28 2009 +0000

    Provide an empty sidebar by default

commit 144b8f4f474ac753105e60b1354de856128dc61e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 16 07:45:32 2009 +0000

    Don't count on the uri having 3 components; that breaks on newer versions of PHP.

commit 16b1df4f67d6c7191795983c65d5232ec360b91b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 16 07:40:57 2009 +0000

    Illegal use of $this in static function site().  Replace with $theme.

commit f25ff87ba9061f9df4e8f1a11bbd5f536e476bf4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 16 07:17:15 2009 +0000

    Remove unnecessary __get() function

commit 784adf835ee9fcc8c069c188229c313705a318ca
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 16 07:16:54 2009 +0000

    clean up style attr

commit 401c7013690695fdd3993198a1bafbea88d77bb0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 16 07:07:40 2009 +0000

    Remove unnecessary slash from url::site() arg.

commit c377ffc2a5cc334981ab81e96ae0bc18a868edf7
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Mar 16 05:50:05 2009 +0000

    Ticket #97. Applied button css where missing. Minor form css improvements.

commit 542ab6db1f13541cbda4e3eaafc27f57623d32b3
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Mar 16 04:54:00 2009 +0000

    Combined "Logged in as..." and "Modify Profile" to by just "Logged in as FullName"

commit 83912bce204a29d1d28637aa425b8482675eeb3f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 16 04:42:39 2009 +0000

    Missed this in the last commit

commit 736d74d05f70be5b72e44eafe2cc8efae52b0af7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 16 04:33:45 2009 +0000

    Clean up the login, maintenance login and required-top-level-login code.
    We now have two clear and separate login approaches:
      login/ajax
      login/html
    
    Choose the one that's appropriate.  Totally simplified the maintenance
    page to be separate from the theme and dead simple, and use login/html
    approach there.  Totally simplified the top level login
    (login_page.html.php) to just be a login page, not the rest of the
    chrome on the page and use the login/ajax approach there.
    
    Don't use access::required in albums and then catch the exception,
    instead use access::can and check the return code.
    
    Improve the text for maintenance mode.

commit cbc7c870fa8b54c2c320fedaf02b5b6010c55277
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 16 04:30:17 2009 +0000

    Stop loading jeditable-- we don't use it anymore

commit 0bc64efa4ab183d9c98334b6c4180307fef0a51b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Mar 16 03:50:57 2009 +0000

    Thin down the scaffolding code so that all that is there is the test
    data creation and the packaging code.  The rest ofthe functionality is
    either no longer required, or moved to the developer module (MPTT
    Tree).
    Also provide checking for the active user to be an admin.

commit 13a337b6cd575f884a2a9fef005c4984a88f28eb
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Mar 16 02:58:15 2009 +0000

    Add a new css selector for the high lighting a warning on the MPTT
    graphical display screen in the developer module.

commit bbb6effa77d1635349b862ace6eff4d4cc395041
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Mar 15 23:24:03 2009 +0000

    ignore the developer directory

commit a89541545fd94e0ccbed449736d5fe0ba2c98bd1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Mar 15 22:54:19 2009 +0000

    Remove automatic load of atom module.

commit abdab49aefbe259390a1ddb2b93d23fbcc2ac4c1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Mar 15 22:45:16 2009 +0000

    Move the start/stop translating menu item to the admin menu

commit 8abf48dd79561fd6605604de8714d4eaf4870942
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Mar 15 22:23:04 2009 +0000

    Move atom, developer, polar_rose and gmaps modules into gallery-contrib

commit b4f8d824f7a6b3466e95dd510af41fabc08df848
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Mar 15 22:05:38 2009 +0000

    Remove profiling and debugging from the scaffold info screen.

commit bf4cd1b813c8b7abe66c32ac8384f2a4799ed2f4
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Mar 15 20:35:24 2009 +0000

    Move profiling and debugging out of the scaffolding and into the
    developer module.

commit 6ac6c6a7e0824d8fda81e36240818f9b7e9c4696
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Mar 15 19:27:30 2009 +0000

    Updates to the developer tool create module.
    It now creates a fully functional sidebar block, a dialog pop up on
    the option menu for albums or photos, a dashboard block and an admin
    screen.

commit 7c5ba9d4229a6e3c258f6a80769e70c5dcd68578
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Mar 15 05:15:45 2009 +0000

    Refactored the developer module.  When a new module is generated a
    skeleton adminstration page is generated as well.
    @todo is still generate a skeleton block and a skeleton dialog.

commit 181737fb12b04be0ee3d87048efae1dfba33361e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Mar 15 02:00:21 2009 +0000

    Remove the word 'album' from phpdoc.

commit c825ec4ffb533fb3aca97e469290310da45075ae
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Mar 15 01:17:25 2009 +0000

    Move references to "album" out of ORM_MPTT since it's supposed to be
    implementation agnostic.

commit f9122c79081af873f11fbc164c8ae9d20c81a082
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Mar 14 21:24:32 2009 +0000

    Don't use html::image because it forces absolute urls, which we don't want.

commit 51a16d38b823262a01efbef1f79702395a886194
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Mar 14 18:43:10 2009 +0000

    style fixes

commit 1071b914093b9a4e1d912a8e9f88b700b8d081f9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Mar 14 18:42:01 2009 +0000

    Use relative urls for the feed links.

commit e658b9895edb8ce5b0c8c74f32f579c373d37e3b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Mar 14 18:31:56 2009 +0000

    Default thumb/resizes to relative urls.

commit a3c513b78641850293bedc9b6f4d8f9f426350c1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Mar 14 02:21:38 2009 +0000

    * remove debug code

commit 229eca29189e33e87fd0c0e454bb0e248e3188e3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Mar 14 02:16:06 2009 +0000

    * Allow module names with spaces
    * remove debug code

commit cb3d39fe62d69022cc90ae52b634e997905c242c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Mar 14 01:57:37 2009 +0000

    Invert the check for https vs http.

commit 74768e4cea35051b346eb8009e016f71cd02d0bf
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Mar 13 22:15:16 2009 +0000

    The first incarnation of the developer tools.  This allows the user to
    enter a module name, a description and pick the call backs and or
    events they want to support and generate the basic module skeleton
    with one click.
    @todo: clone a module, clone a theme, generate skeleton controller,
    view,

commit 70390e83f867716d4bc919c4937b649ce7a3fdfb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Mar 13 04:09:28 2009 +0000

    Make the exif_key value size 1k

commit 2ad27663cbfcfabc52cb3ae3f899f0981c9b6468
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Mar 12 18:16:13 2009 +0000

    Remove event handlers that are are no longer called (start_batch and end_batch)

commit 85f2c6b6665360b60164330f88f89ad4d2a14f7f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Mar 12 16:06:13 2009 +0000

    Move the setting of the page title into the controller that is
    creating the page.  Provide for a default page title if none is
    set. This allows less changes to page.html.php as different modules
    want to change the page title.

commit b82b60c91a4ece468dad8981b7ccd46a8cf19662
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Mar 12 15:40:08 2009 +0000

    Rename tag.html.php to dynamic.html.php as part of ticket #115
    creating Dynamic Albums.  This name change reflects the usage better
    and allows multiple dynamic albums (including tags) to use the same
    page template.

commit ec195a572101c21715963a501472c0efb2671d54
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Thu Mar 12 04:46:14 2009 +0000

    Lighten color of user name in login menu

commit 5b5893b628182e46b4e363d8f0c1ad9e0258ca37
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Thu Mar 12 04:23:53 2009 +0000

    Minor after install message edits, added updated Gallery logo alt description

commit 7ade7102583cf3bd18fc6995ef98cbf6753f8190
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Mar 12 04:00:49 2009 +0000

    Handle no prefix being set when building key/value table map

commit 7dae7dc510651d25c4109e9943be8c2dc84260ff
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Mar 12 03:54:17 2009 +0000

    Strip down the loin page (not sure if this is what bharat had in mind)

commit d1f181da08cbb747a7353bf84fbaa5d1ab82bd02
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Mar 12 03:20:13 2009 +0000

    Attempt to reduce the chance of replacing text in sql statements that
    is not a table name (but contained in braces) with the database prefix
    by building and maintaining a cache of database tables and prefixes.

commit e58b955d4acc44bc2b49fffbffda42ad8b66069d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 11 21:07:21 2009 +0000

    Bag the header("Location:", ...);exit() and replace with
    url:site(url::abs_file(...))
    Create a login_page.html to be used when there is no guest access to
    the root album. It doesn't have a sidebar nor breadcrumb.

commit 8fe1880e3016fe7a06a0c70b80604b93b9b3f01b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 11 20:55:29 2009 +0000

    Bag the header("Location:", ...);exit() and replace with
    url:site(url::abs_file(...))

commit 1f848385fafef5105966fb3e430f44f111ac5e38
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 11 20:31:29 2009 +0000

    Tried various combinations of url::redirect(...) or
    url::redirect(url::file(...))
    
    The only thing that works is this way.

commit 4d5679b74952e41b5c3f04dc67b51d727fd96d34
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 11 15:00:57 2009 +0000

    Fix ticket #119.  Display the full name of the user in the same block
    as the Modify profile and logout links.

commit 4dfc5435ef8673d0639c16375980426809599c99
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 11 14:38:52 2009 +0000

    Fix ticket #69.  Rather than giving a better error message when the
    gallery3 database is not setup. Just redirect to the installer.

commit a521d9177f5e299d2ff25cc288e59e4bf1398a1b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 11 13:58:38 2009 +0000

    Force a login if everybody does not have access to the root
    item. ticket #118.

commit 30239ed302c571efb0cd9c86625be30fce5b4bd9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Mar 11 03:29:12 2009 +0000

    $task_definitions -> $task_def

commit 8da729cfa1ed17040720ddeefbfd6f4ec541bc9c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 11 03:14:52 2009 +0000

    Refine the task api but removing the optional parameters on the
    task::create method call

commit 47756db8569400d5d23dbb1c30dd40f00c7beaf1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Mar 11 02:39:52 2009 +0000

    Get rid of stray 'type' argument to task::get_definitions()

commit ee2407cde2b45aa667d30ca24f483c729340f462
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 11 00:41:51 2009 +0000

    Fix the test failures.  If albums are created manually instead of
    calling album::create, then the default sourt column needs to be set
    to id.

commit 2ce44b6b08f4623da872574867f7b7498ef5a1c4
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 11 00:27:17 2009 +0000

    Fix the Var_Test by making sure that the cache is cleared or updated
    when a variable is set or cleared.

commit c2db5d0fc956785eca032a340939c8aac3f2d34a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 11 00:17:48 2009 +0000

    Fix the test, with the addition of the additional fields required by
    album sort order change.

commit 5c82ce33a21d309a58413106cc8910a2704137ee
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Mar 10 21:30:33 2009 +0000

    Refactor the server add module to make use of the task api (Ticket
    #125).  Haven't quite figured out what to do with the errors in the
    context. Maybe they should show on the mainenance screen?

commit 068c44e2011aee23ad6f43c0e238c2dba65da8e3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 10 20:34:32 2009 +0000

    access::allow/deny/reset functions will now throw an exception if you
    don't pass in a Group_Model as the argument.  This prevents us from
    setting permissions on the wrong group by accidentally passing in a
    User_Model.

commit 5342578e6d24c59db74747024e1bdc5bcf41ae2d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Mar 10 13:53:59 2009 +0000

    Minor change to the task api with the addition of two optional
    parameters. The first allows the specification of a task name.
    Non-maintenance tasks are not defined as part of availabl_tasks so we
    can't get the name from the task definitions. The 2nd allows the
    specification of a context when the task is completed.

commit 9d4769da87b38374cfca095df4d17e11c183c312
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 10 06:45:55 2009 +0000

    Add profiling/debugging switches in the Scaffold menu.

commit 9d8d1153877a9ae889d0617c2e8dff27ad37ce2f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 10 03:28:13 2009 +0000

    Show the album edit form for albums, not the photo edit form

commit f0549a1c2d5c3031e99ed3e2378749eecca235cb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 10 03:27:44 2009 +0000

    Add info about -x flag

commit 5da29b883740e6c6db3e0ad9c045c080a8f8946a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Mar 9 16:03:48 2009 +0000

    Fix for ticket #135

commit 83563ac91ac336375e2d0ce64534d8ece2d8f6f3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Mar 9 15:10:22 2009 +0000

    Fix for ticket #133: If $max_pages is zero don't try to redirect to
    max_page, just return an empty feed.

commit b9ee37f30effee856dc963b38751f3e904fd8ddf
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Mar 9 14:38:25 2009 +0000

    Override the ORM_MTTP::children and ORM_MTPP::descendants methods in
    the item model and always pass the orderby fields.  This insures that
    all children or descendant calls will respect the album sort order.

commit ac82e0a9dff9511eaf97bb7fc6f25add762583a4
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Mar 9 13:43:13 2009 +0000

    Change Item_Model::get_position to respect the sort order.  This also
    forced the next/prev buttons in album navication to respect the sort
    order as well.

commit c0375db79f47b4e4e0b1c261929389c6d3995edc
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Mar 9 13:30:22 2009 +0000

    Restructure the sort order to maintain the sort column and sort order
    as two separate columns in the item table.

commit caa0a6d47fb5ed3faa0c321c10c86c5b6f3d7db8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 9 07:54:37 2009 +0000

    Don't show the description field if there's no description

commit f0be5c7c03921cd6be7362894463823e63290f7f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 9 07:48:36 2009 +0000

    Undo "#gProgressBar { visibility: hidden }", introduced in r20264
    which caused the progress bar to be invisible for admin/maintenance
    tasks.

commit 7aea8f0385862ff1aa7f28c98fce32b2d2631811
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 9 07:45:38 2009 +0000

    Add a 'cancel all' link too

commit e37faa0008df38088a55932786955e68ee1f955f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 9 07:28:19 2009 +0000

    More tasks cleanup.
    
    Don't join through to the users table; that won't work in embedded
    mode.  Instead, add Tasks_Model::owner() that calls user::lookup() and
    refer to the object directly in the view.
    
    Add Admin_Maintenance:remove_finished_tasks() so that we can easily do
    old task cleanup.
    
    Hide Running / Finished sections if there aren't any running or
    finished tasks.

commit 622358ebc8eba1cfd17f8e7cbb5c8557fd7c4bee
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 9 07:12:04 2009 +0000

    Fix the progress param to be an actual boolean to resolve a JS error.

commit f32f1697c95a0165d7781edbc8aa340c719c2b37
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 9 07:02:09 2009 +0000

    Get rid of Task_Definition types: they're not necessary.  This
    incidentally fixes the the problem that admin/maintenance tasks have
    been broken.

commit 4fed34873a7a4fddb846d4912dabe88cb3cae2f0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 9 06:59:05 2009 +0000

    Don't let graphics::resize() upscale images.
    Fixes ticket #117.

commit b8cf195be8ca684734609cf19e8bf3eec9659cff
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 9 04:11:15 2009 +0000

    Don't forget to clean up temp files after uploading.
    Fixes ticket #120.

commit 2aaf263b9e898d3f94f76980fb3b6769e44dbc9e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 9 03:33:49 2009 +0000

    On second thought, make the description column varchar(2048) instead.
    If I understand correctly, this is better for performance.  I could be
    wrong here, though.

commit 1ad7ca639ddb87af3755a4ac17ae5199fa5c4fc2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 9 03:29:22 2009 +0000

    Make the description a text column so that we can handle much larger
    descriptions.

commit 445f18fb51a55102a95b6a1ffd388ee06ecd5041
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 9 02:07:58 2009 +0000

    Tweak abs_file() and abs_site() to generate https urls as appropriate.
    Fixes ticket #125

commit 198297e0d465de8d479db93cf17d08b5b5e1016e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Mar 9 00:03:04 2009 +0000

    Instead of putting after_install in the url, put it in the session.
    This helps us to make sure that we only see the welcome message once.

commit 72c7fed975ce797da1f33ea82651c5a91ce3957e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Mar 8 21:21:09 2009 +0000

    Log the user in as admin after running the web installer, and give
    them a nice "Welcome to Gallery 3" dialog.  The text in there needs a
    little work but it's a start.
    
    In the process, re-build the install.sql using the scaffolding code.

commit 7cbc904be722b493a060e2ad69849344124fbe91
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Mar 8 21:11:01 2009 +0000

    Post process the sql generation code to support prefixes

commit 8f1e90d837f7704e5b8ca97f3ca6817bbc932e8c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Mar 8 19:10:08 2009 +0000

    Update sort order processing per Bharat's feedback
    * Remove mime type and type as sortable fields
    * Change the internal representation to serialized array
    * Shorten the database field to varchar(64)

commit 39954ad0b77800b3d4935430794adf18c2625148
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Mar 8 16:29:01 2009 +0000

    Implement Sortable albums.  Current sort fields include (Creation
    Date, Update Date, Random Key, Title, Mime Type, Item Type & Number of views)

commit bf6c814e81a00d6aec3cacdecd3b93b90cf73a3e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Mar 8 07:55:37 2009 +0000

    Undo... pass any additional parameters to the _edit_form method

commit 186eeb8e2030e7890a43b7b477a9aa54f32a024e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Mar 8 07:42:06 2009 +0000

    Pass any additional parameters to the _edit_form method

commit 3c672bd8650a0c447a447d0e6352bf849ea4c595
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Mar 8 03:57:02 2009 +0000

    Don't show the pager if there're no photos on the page.

commit 2ef8e2819854481c2b7d6469c30a96b41fb979dd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Mar 8 00:23:15 2009 +0000

    Pass on_success through to ajaxify_dialog, resolving an bug created
    in r20302.

commit 3356091b65eea9fc5902e2b9b41b3adbda991f94
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Mar 7 04:44:16 2009 +0000

    Add in-request caching of vars that we've already looked up.  We're
    still doing too many database queries, but this cuts down some dupes.

commit e96e26a12f578d46183b60c3b2cfd69ffe52ed16
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Mar 6 22:35:05 2009 +0000

    Fix for ticket #130
    1) Shuffled code around to create a on_form_loaded function
    2) Check for a data.reset string in the json return.  If it exists and
    is a function then call. The idea being that if there is an error we
    might have to reset some jquery widget initialization.

commit 8a6eb931ded561c4b4f96838bf4576b89a2e0dc8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Mar 6 18:25:44 2009 +0000

    Undo local change for ticket #1170

commit 6a33dd2c5c8d59cc800f5ac6b22e94abaad77694
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Mar 6 17:49:46 2009 +0000

    Include the ui.tabs.css in the theme css file

commit a3b0adb1d52e2443e262d53d7ad63f62423a8c76
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Mar 6 17:48:27 2009 +0000

    Local fix to address Kohana ticket 1170 where form::open doesn't allow
    specification of a put method. Only post and get are currently allowed.

commit 1333c233aa2fb59ea530cbe881d7ad50da2b968d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Mar 6 16:41:22 2009 +0000

    Update jquery-ui to 1.7 and include the tab library

commit 3ad78277861d883154dd4cf443042b2769a380ef
Author: Chris Kelly <ckdake@ckdake.com>
Date:   Fri Mar 6 02:36:04 2009 +0000

    oops. fix accidental style change that slipped into last commit

commit 06780376876166b839047a370cf9144d06494416
Author: Chris Kelly <ckdake@ckdake.com>
Date:   Fri Mar 6 02:22:51 2009 +0000

    Added json and filter as requirements

commit ee1572f324262319af4e73695f1193716c625a51
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Mar 6 02:17:12 2009 +0000

    Added simplexml as a requirement

commit f371c663c51ee24e31746429ce5a597ab1627813
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Mar 5 17:16:38 2009 +0000

    Fix for ticket #114 Permissions seem to be ignored

commit 23937ff1355f3f47f5b42dc3718db1615809371b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Mar 5 06:38:11 2009 +0000

    Avoid using default task types.  Require task::get_definitions() to
    specify a single type and ask for it appropriately in
    admin_maintenance.  Specify a type for every existing task.

commit 898ac3ac359258ccb0958f5be420d17a9a264fec
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Mar 5 06:28:23 2009 +0000

    A little task restructuring

commit 08d2fcb1f7ae0ced528c0a7230c433480d64167c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Mar 5 06:26:15 2009 +0000

    Fix some table names

commit d93e216977ae25865071ff568e0464111e11d18f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Mar 5 06:25:29 2009 +0000

    Don't clean out the authorized_paths var at install time, so that uninstall/reinstall doesn't mean starting over

commit 33eb05ef9a2fe10062fd28ca645c5b23b8aaa1fa
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Thu Mar 5 06:03:04 2009 +0000

    Applied jQuery UI buttons to quick edit pane. Not tested, but icons should display iin IE6 now. Rotate icons will need to be updated later.

commit 05f22b47d81481cf8b10a005e586902370cd99bc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Mar 5 02:29:02 2009 +0000

    Remove stray reference to server_add_dir_list.html.php

commit 64b02026ed645761e910bc31334b66171c58cb5a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Mar 5 02:26:39 2009 +0000

    Cleanups.
    
    - Show the "Server Add needs configuration" message whenever
      there are no paths.
    
    - Un-ajaxify the admin code to remove complexity and allow us to
      update the status message as appropriate.
    
    - Rename server_add_admin.html.php to admin_server_add.html.php
      for consistency.
    
    - Fix up form to properly display error messages
    
    - Get rid of server_add_dir_list.html.php now that we're
      non-ajaxified.
    
    - Change delete <span> to an <a> for non-ajax world.

commit ca2ddb01701179e61659b59519919f82241e5564
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Mar 5 01:40:18 2009 +0000

    Minor cleanups.

commit 46b752cbc77389772fc4d862a2bc9768c3ab5b40
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Mar 5 01:22:27 2009 +0000

    Change how the urls are built in the java script

commit 1fa05f1093957e47f00165f89ae431493ed36813
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Mar 5 00:50:11 2009 +0000

    Clean up no authorized directoriesmessage

commit 7786bb09d32570d9be33727a3fe4fb460fcceeaf
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Mar 5 00:32:33 2009 +0000

    Implement a Maintenance mode as per ticket: #15

commit 514e6658f6efc6409cfcf2fa85f0566d80217bad
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Mar 5 00:05:21 2009 +0000

    Correct typo

commit 2b9795ebf5187ac607d9864fa3c30b041c8a931b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 4 20:59:16 2009 +0000

    Remove addition options to the autocomplete call.  No point in sending
    csrf if we are not verifying it.  Remove the must match flag so
    non-existent paths don't cause the input box to empty

commit 705e6d62b7d75120822a559e9cc11f1159db5348
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 4 20:09:53 2009 +0000

    Last of changes required from Bharat's 2nd review pass

commit 8575e2b0d13040d51d920e09d85b2d757581da27
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 4 19:50:08 2009 +0000

    Continuation of the rename of jquery.autocomplete.pack.js

commit 6d7fa5875a2416bba2193a4b8129c27230bea1bc
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 4 19:46:55 2009 +0000

    rename jquery.autocomplete.pack.js

commit d477ffd57522ca0698fc92e4ab5a767b2fba95ac
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 4 18:58:32 2009 +0000

    Annotate local fix for Kohana ticket #1156

commit 014999758e2f4efa433a9c4e71d0551e0b5b318a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Mar 4 18:15:56 2009 +0000

    Updated Kohana to r4033

commit c0e65b202977c78c4562502373f630b8f835f1ff
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 4 16:36:41 2009 +0000

    move server_add styles into the theme screen.css files

commit ef8c71417af23b099f35a5a076d296fec96ae408
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 4 16:10:03 2009 +0000

    Move the autocomplete js and css files to lib

commit fbc650bddbdb62766a1f509d2333c78793c857c1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 4 16:01:18 2009 +0000

    Changed $uid to $tree_id, so not to confuse anyone between and acroynm
    for unique identifier as opposed to user id. :-)

commit f7d82ec52f533c620c94fe0327175747cc3d8877
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 4 15:46:10 2009 +0000

    Rename local_import module to server_add

commit f16224ae828e43204cf334681941c27f179e09c3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 4 14:52:47 2009 +0000

    Work around for Kohana ticket #1156
    http://dev.kohanaphp.com/ticket/1156

commit 234aa2b31db3a8e593fbfecf28ac2d8a8701df7d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Mar 4 08:56:16 2009 +0000

    Implement batch support in a simple fashion to avoid having to change the swf file for now

commit bc13659d37c2f99efd86f96b1511af965db5411c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Mar 4 08:55:41 2009 +0000

    Remove cruft from API

commit 23b0abb9742d3418484fe8d01609f6849d7960ce
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Mar 4 08:51:49 2009 +0000

    Redefine the batch API to be very very simple.  You call
    batch::start() before starting a series of events, and batch::stop()
    when you're done.
    
    In batch mode, the notification module will store up pending
    notifications.  When the batch job is complete, it'll send a single
    digested email to each user for all of her notifications.
    
    Updated the scaffold and local_import to use this.  Haven't modified
    SimpleUploader yet.

commit b493a534f2966e23eb0244654e8929320721da8e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Mar 4 06:25:55 2009 +0000

    A variety of cleanups:
    * Allow for the "movie" type in all of our text
    * Try to follow the pattern of mainly only passing ORM objects
      to the view and let it generate its own text (this becomes
      even more important when 3rd parties want to customize notification
      messages)
    * Rename _send_message to be _notify_subscribers to be more acccurate
      and have it explicitly take a subject in the API
    * Use Item_Model::url() in the views instead of hand crafting URLs
    * Reformat HTML in views
    * Use $comment->author_xxx() functions instead of replicating that code
    * Fix several places where we were encoding data by doing ucfirst($item->type)
      with conditionals where we form the text properly.  We should *never*
      be showing data types to the end user!  This is not localizable!
    
    Note that this probably breaks the existing batch processing code.  I
    am going to redo that in a subsequent pass.

commit 83e12961b13d1ab1e11a60e30b335d26b1875a25
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Mar 4 06:25:25 2009 +0000

    Allow url() to return absolute urls

commit 69cb19aad246462d3118773a213d375a3b0c6559
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Mar 4 06:25:04 2009 +0000

    Delete test(), it should never have been checked in.

commit 3600e732829746e28262c2c8e095702e645d1571
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Mar 4 05:22:42 2009 +0000

    Simplify logic a bit and tweak the visible text.

commit 302ee07acb4772ea4a7b1067b66fc8190138387f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Mar 4 04:55:23 2009 +0000

    Indentation and whitespace tweaks.

commit 3c015b4d5f21253a07b46112f927fa4095a5c762
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Mar 4 04:49:00 2009 +0000

    Fix indentation.

commit f71cbc8a7181974d1a4d058db9cede078c14bf19
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Mar 4 04:46:49 2009 +0000

    remove unnecessary render()

commit c487443860582b5f85c2c77e7eb7c2ff1221f87b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Mar 4 04:28:04 2009 +0000

    Move <label> outside of <?= ?> block

commit 81a6dc26cb9bcbb3a494c2df5ea279788559bd7f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 4 03:31:01 2009 +0000

    Send 1 items added notification per batch of items

commit e33ad56b99740fa360bb9ac530686ece79795195
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 4 03:08:23 2009 +0000

    Forgot to remove a debugging statement

commit 4a5b005931750e729c67694d50f9c904e51cd53e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Mar 4 02:03:05 2009 +0000

    Use Directory Iterator

commit 328a982546a202140697700b6688da3e32dbb2de
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Mar 3 23:07:07 2009 +0000

    * Validate that the source path is authorized.
    * Add site warning message if local_import is installed an there is no
      authorized directories

commit e291e881104df2efc2f37b4e24f3c1f2ec9bec3f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Mar 3 22:27:27 2009 +0000

    Remove csrf verification from autocomplete handler

commit c864f23f2e3863b264165e878f60fe33e5728a40
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Mar 3 22:25:22 2009 +0000

    Only show local_import head stuff (css and js) when the local_import
    admin page is shown

commit 08c47f28f25e5299142242bb15c872ac84fc702b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Mar 3 22:19:46 2009 +0000

    Inline the admin view creation that was in helpers/local_import.php
    and remove it.  Cleanup unused variables. Rename the method remove()
    to remove_path()

commit 6596682c90f4df7f6edebea28246b80d762ce742
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Mar 3 21:48:13 2009 +0000

    Use the gallery root directory on the batch::operation call when
    generating random albums and images

commit f58bbe0610cea5406324d0f1b2e3a3b925a89645
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Mar 3 21:43:59 2009 +0000

    Improve the comment about why we skip the first path.
    Change to use access::required

commit 9775cb69e2e3b8c3e2891ac22d01278c380912e8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Mar 3 21:19:31 2009 +0000

    Fix indentation, remove unnnecessary csrf check.

commit acf28e47cb7336b3f6878fb0df9d1a5c1dacd489
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Mar 3 18:57:16 2009 +0000

    Create a proxy event (gallery_event) which is called when the request
    is completing.

commit 9b68fd46b224cb26e592fc977b0019b01bee3d23
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Mar 3 16:09:23 2009 +0000

    Add the ability for modules to define hooks.  The challenge is that
    when the hooks are run, we haven't added all the installed modules to
    the path, So if a module defines a hook it will never be run.
    
    This change runs any module defined hooks as part of the gallery initialization.

commit 0408a0096acbbeac7439878654ecbbf191e5ddb6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Mar 3 06:29:16 2009 +0000

    Undo r20234

commit b7a72825af7559f2fd39de0d4335049d3aa91e28
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Mar 3 06:26:12 2009 +0000

    Remove the === false and === true checks
    I really mean it this time

commit 1c6384f8235642834422b0846cdda3b0a60a57cc
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Mar 3 06:18:18 2009 +0000

    Removed the === false and === true checks

commit 7cadb4b21b90864b4151481da9aba244d7083788
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Mar 3 05:59:38 2009 +0000

    Refactored the batch Api: 1) created a small batch helper class:
    Starting a batch call batch::operation(name, item). In the case of
    adding photos name = add and item is the parent of the new items.
    When the operation is finished the batch::end_operation(name) is
    called.
    operation and end_operation events are called.  Handlers
    (i.e. item_created) can call batch::in_progress(name) to determine if
    a batch is being processed.

commit 1d5cca34efcd25473f00ed5d6594ea15c569622f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Mar 3 04:17:55 2009 +0000

    If backticks (`) are used to delimit the name of the table in
    database, Kohana gets confused an appends the prefix outside of the
    back ticks

commit 7bcab31f5d982f8197045ee8499fe6e23635e8e4
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Mar 3 03:52:21 2009 +0000

    Fix issue identified by security review... some table names where not
    being translated.

commit 14c1f455788a305102c9e2b1cb742c1fd38f4d41
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Mar 2 01:53:26 2009 +0000

    Forgot to update the install.sql when i changed the [] to {} to
    identify table names that need substitution.

commit 512a532650670fa38fd4ef79f124ce237e4474a7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Mar 1 19:11:01 2009 +0000

    Simplify the batch api by having the core event handlers for
    start_batch and end_batch add and remove the batch id from the
    session.  Modules wishing to do batch processing, just need to fire
    the start_batch and end_batch events.  Other modules that need to be
    aware of batches (i.e. notifications) just check the session for "batch_id".

commit bed1bb48f33c1c20decb6b592b1d713f5c9fb48e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Feb 28 20:12:54 2009 +0000

    The scaffolding, simple_uploader and local_import now call two new
    events: start_add_batch and end_add_batch.  The parameter is a batch
    id which is generated on the first add request.  The protocol is call
    the add_photo as many times as required and then call finish when
    done.
    Also renamed the add method in local_import to add_photo so it is
    consistent with simple_uploader

commit c04ff8e02f01691dc2e325efc523e43f3aebaf95
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Feb 28 06:37:28 2009 +0000

    Change the pattern to identify tables that need prefix substitution to
    mirror the drupal pattern of using braces {}.

commit ad56995bafffeca89c44b07cb4f25da7b36a1a99
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Feb 28 03:34:03 2009 +0000

    Correct a type and missed a table name

commit 1328755b1128260b24cf10e813efab9217447b33
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Feb 27 21:15:13 2009 +0000

    This implement table prefix for the watermark notification modules (Ticket #68)

commit fd610589ed6060333075a4e61efc29a3f7e98798
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Feb 27 21:09:00 2009 +0000

    This implements table prefix for all the queries in core, user, exif,
    tag, search, comment and notification modules (Ticket #68)
    (missed this one)

commit bd15853708ae73ee69220738a061e10d015d7fb9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Feb 27 21:07:18 2009 +0000

    This implements table prefix for all the queries in core, user, exif,
    tag, search, comment and notification modules (Ticket #68)

commit 0b9fe18a6bf4036a05db7f9479d7b55d3fe5c782
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Feb 27 19:26:21 2009 +0000

    Both the command line and web installer installer now supports
    creating tables with a table prefix.
    There are still some queries that haven't been converted, so don't
    start using prefixes yet.  However, if you do, you can login and
    modify the user profile.

commit dc4f784558db725eb555ce9668231b89aabb8954
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Feb 27 16:28:20 2009 +0000

    * Refactor task management methods from admin_maintenance.php to
      task.php
    * Added a owner_id field to the task database
    * Modified the admin maintenace to show the owner of the task
    <<**** Requires a reinstallation of core ****>>

commit c4cdecc05f128bac3842852f114b96eaa821f2ca
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Feb 27 13:44:19 2009 +0000

    1) Change the image block so it has the correct url in the anchor tag.
    2) Change the wrapping class to gImageBlock instead of gImage so the
    quick kinks aren't enabled

commit 3193c19ca92a2c8dea0479edeb59bc33674977a1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Feb 27 05:40:29 2009 +0000

    Remove unneeded code.

commit cd0f9a5d6c1c46684d4fa4e48cdb1e0c75da94e7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Feb 27 05:39:51 2009 +0000

    Optimize the code by ditching the count query; we don't need it.

commit ab973bd87168ab11ff5242824738edb89f0bc3e2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Feb 27 03:25:29 2009 +0000

    Replace the string [table_name] with {$prefix}table_name.  Slowly
    working through setting up the database access to support table
    prefixes. (Ticket#68)
    
    Before going ahead, just wanted to check this approach... whatcha think?

commit 0b055835fdecd9e560784ee23afa480328d8e742
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Feb 27 02:50:07 2009 +0000

    Remove commented code
    Correct unbalanced brackets

commit acdc724fc83052bced312c0d09d76166305e1729
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Feb 27 00:34:50 2009 +0000

    Continue the journey of replacing raw sql with ORM or Database method
    calls (Ticket #68)

commit 2b1f68a6546b7a2743efaca2f224c1de90e17d1d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Feb 27 00:19:12 2009 +0000

    Continue the journey of replacing raw sql with ORM or Database method
    calls (Ticket #68)

commit d097b4fc027ff558bf5f580298c7bed3696dcd3d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Feb 26 23:38:17 2009 +0000

    Update to image_block based on bharat's feedback
    1) move the rand_key column into core
    2) don't do a max rand, just try to a get a random number less than
    the current random number if that doesn't successd look the other way

commit 960c4248deb43eb824dda14670ea1f759a709013
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Feb 26 21:23:35 2009 +0000

    Replace ORM->select(count(*)) with a call to Database::count_records

commit 8d59f5b5fba5c494ea0e3276b69d687cb12b8f05
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Feb 26 20:43:56 2009 +0000

    Removed raw update sql and replaced it with Database::update(...)
    calls. (ticket #68)

commit 95a18420342396de119090da9131ff4e417ba42d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Feb 26 20:23:40 2009 +0000

    Remove the commented line $parent->$movie->parent() as the $parent
    object was passed in as a parameter.

commit 60c85384b477b1b0c4b70d6faddd4511526a101b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Feb 26 19:49:28 2009 +0000

    Use the Database::update function instead of a raw SQL query

commit eb589fcce8716605d4e4b4b1f5092a7ae7960843
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Feb 26 19:11:50 2009 +0000

    Delete unused code

commit 2042a4914be4c7af387808efdcabaa3a7594963d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Feb 26 16:57:00 2009 +0000

    Implement fix for ticket #103.  If there is no exif data, don't
    display the "Show more Information Button".

commit f6169047b12346f82aa3214337256b41c595cb8a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Feb 26 16:27:23 2009 +0000

    Fix up add from server:
    1) Upload requests are serialized so we don't over load the server or get
    race conditions occurring.
    2) new albums are created based on the file structure of the
    authorized path that is the source directory.

commit c3fcd3a79bd2f171b15384ea0ff44677b0c7a730
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Feb 26 16:12:09 2009 +0000

    Fix thumbnail and resize generation for photos. the variable $type had
    never been set, so it was never equal to "photo" so no thumbnails were generated.

commit 63b3b505c1111e2987e00113364a25bd27601192
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Feb 26 16:02:43 2009 +0000

    Remove debugging statement

commit f87e1de3ec0b199a48818f84bdef4cdf34b50244
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Feb 26 15:02:04 2009 +0000

    Implement a random image block for the side bar.  Ticket #13

commit 0929d41305e84b621a05f1221ace9c447d378e75
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Feb 26 14:53:01 2009 +0000

    Added a check to insure that the resize or thumbs image files do not
    exists. As per ticket #109

commit df7b05b40edf6fef1d6b9a4990dbf35a47bcd372
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 26 03:38:56 2009 +0000

    Move tag CSS into admin theme's screen.css
    Use JS to add titles to avoid repeating the same text 10s of times.

commit 07310c849936ccae557acec63069238e717e8ed2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 26 03:05:29 2009 +0000

    Add slightly more visual feedback when you're hovering over a
    draggable user.  Also, drag the icon and name not just the icon.

commit 4f77e7bdced8352c458da2b987917e6d3f32d1b8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 26 02:47:38 2009 +0000

    Support adding custom header/footer text to themes via admin/theme_details

commit 30fdedfb508392c9f76ff9ae5ccade90a80fc910
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 26 02:38:32 2009 +0000

    Make theme details its own page so that we can wrap it in a div and
    give it a title.

commit 11a7b6b751e375b0fd9efa32aa45c54f71c4dfe8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 26 02:09:41 2009 +0000

    Minor code simplification.

commit 021b50178e61319d2d6321fa80ae46d87452cdf1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 26 02:00:49 2009 +0000

    Change quote style.

commit 1cb250ecc032bba7938228728f86b7fc93a1a00d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 26 01:59:02 2009 +0000

    Minor cleanups.

commit 570255649977256d973a56ccb38c8387a2a8c992
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 26 01:56:00 2009 +0000

    Minor style changes.

commit 90a066a727b7fab74ad19747e89fb0122756e0f7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 26 01:50:52 2009 +0000

    Make scaffold into a menu, move translation option into it and shorten
    it so that it fits on one line.

commit d83d753c7b073618ae95ab474e445e5a525a2fb6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 26 01:48:19 2009 +0000

    "Import" -> "Add" so that the menu option fits on one line.

commit ec2a032604c7f05c7e8bd451fef0dcd73f3968d6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Feb 25 16:17:34 2009 +0000

    Add closing )

commit 2e06250f9a4cddd2d8a995cf56ff533001615f21
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Wed Feb 25 06:54:41 2009 +0000

    Restore sidebar_top()

commit 515c081f794c0e020241956f291381361e28489a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Feb 25 05:27:29 2009 +0000

    Add support MP4 movies also.  Flowplayer supports them and can stream
    them using the h264streaming plugin.  Everything else is a fairly
    minor change.

commit 585ea819579405bbfe772d2e7fa647f54d5a17e2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Feb 24 19:52:01 2009 +0000

    Fix for ticket #98.
    The problem was that item::delete was deleting the parent album

commit 550d46da666a1159eda58fba17b1f3d920682d0c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Feb 24 19:19:58 2009 +0000

    Added a block to the siebar that lists the available feeds

commit 5b35490be1e58d32f2dcc5c3f948ce821051c596
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Feb 24 16:47:45 2009 +0000

    Major change to local import, in that checking the high level
    directory will process all the files underneath w/o having to expand
    the tree first.

commit 2c5e06221b5df7a2334473b4016df43a407f12b1
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Feb 24 06:54:30 2009 +0000

    Minor README update for alpha 2

commit c5964c74cdea739b4a4abcff46b0308f3fd13a48
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Feb 24 06:10:40 2009 +0000

    Fix i18n create table sql (forgot to change core_install.php)

commit e0319573542293c661c263de30547eeb9c2b7ede
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Feb 24 05:54:19 2009 +0000

    File structure style fixes

commit 41600a982f566cf47c240fd5c4b46096983d2b7e
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Feb 24 05:27:07 2009 +0000

    Fix bootstrap / installation issue for unit test framework:
    Install user module before installing other modules. E.g. local_import's installation routine depends on the user module to be installed.

commit 9bba87ddc53a2e220642a7c33e1f6112d989fe60
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Feb 24 01:24:11 2009 +0000

    remove the extension and just use the IMAGETYPE_xxx constants

commit b40f25cbed921970c7eb854910de76cad2624c1d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Feb 23 22:37:49 2009 +0000

    Remove debugging information

commit 4b08146c4582b03405b492dd42b0aef66fe9d749
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Feb 23 19:19:16 2009 +0000

    A couple of references to media_rss that were overlooked

commit e2f2ff4a7f0dc6b388a7ac91f28d4a7a16a91a4e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Feb 23 18:41:22 2009 +0000

    Change the way movies are presented in the feed.  Couldn't figure out
    how to embed the object in the feed, so the recieve will still have to
    click on the thumbnail to see the move.  Instead of actually playing
    in the feed reader.

commit c0049dce03920bfd0e841c6a7a0a7d0a4c7c2c5c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Feb 23 17:13:58 2009 +0000

    1) Optimize the loop in graphics::generate so it uses the $ops as the
    key and path.  This way it won't try to generate a resize for movies.
    2) Changed the options on the ffmpeg command in movie::extract_image
    so we actually see a frame not the black one that starts the movie.

commit 2ed850652b30590cc685a2db74c5367f0d533486
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Feb 23 15:06:24 2009 +0000

    Fix problem that movie::create was never being called.  But strangely
    enough photo::create would actually add the movie properly :-)

commit 679b8c397114690e5e91d9e89b2e46ec22ba1b0f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Feb 23 14:45:09 2009 +0000

    Include jpg as valid graphic files

commit 8bba897a46e773c0155419abc7b0d9a1fb5fd7aa
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Feb 23 06:33:10 2009 +0000

    Changing from binary(16) to char(32) as translation message key.
    Although less efficient as a storage / transmission / comparison format, it's friendlier on the eyes and universally supported.

commit ad7b066f483533b593bd991f7ac33ed20f4ccb7a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Feb 23 06:00:41 2009 +0000

    Change the media content for video.  I don't think its quite right
    yet, but that's maybe because I'm not generating thumbnails

commit 05308a94b11fb6f51b7b0338ea67793da0d46501
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Feb 23 05:59:13 2009 +0000

    Use IMAGETYPE_xxx to filter file types

commit 51591c9669aa536a1434f0bb21f96508ee37ae09
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Feb 23 05:55:29 2009 +0000

    Better yet, rename gallery2.png to just gallery.png. Reference logo from scaffold too.

commit ab041eedc54552744a12419e407b654a2f581b2e
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Feb 23 05:45:21 2009 +0000

    Use local Gallery Project logo in the installer

commit cd8d1c6582caeb6908d959d1e1371e9b450d78c7
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Feb 23 05:14:05 2009 +0000

    Temp fix for photostreamin admin dashboard, other miscellaneous css fixes. Apply jQuery UI button css to submit inputs in the admin theme.

commit 490a182f85dded2804371459f4e3da89ae9a1066
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Feb 23 04:54:24 2009 +0000

    Move admin menu under settings
    Don't try to show the local_import link if there's no options menu.

commit 2ab18bbd45d9ec09223e785a66d6488013c99876
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Feb 23 04:37:16 2009 +0000

    Restored txtright class that I'd deleted and forgotten to restore during debugging

commit e83c2b3f8d82a65fbd7a317de5af9ff7c540b6c5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Feb 23 04:29:10 2009 +0000

    Revert to using IMAGETYPE_XXX constants (at least for now)

commit 3ced35929cd844328afd445756237e43b907be02
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Feb 23 04:08:26 2009 +0000

    Fix broken slideshow

commit 1af62de44cbd35955c141bed15e6c741a1b5fb4a
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Feb 23 03:39:44 2009 +0000

    Partial next/last pager fix for IE 6 and 7. Button's width is still foced to 100%. Think this is a jQuery UI CSS issue and I haven't figured out an override for it yet.

commit b6e17eb139367d8602ec8a96295f03cda42398a1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Feb 23 02:47:29 2009 +0000

    1) Updated the media feed with new fields
    2) Created a comments feed (/rss/comments)
    3) Created a updates feed (/rss/updates)
    
    User interface to follow

commit 3bba61b733366aa22ff98e95c0d3ed9f83995946
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Feb 23 01:55:40 2009 +0000

    Removed hybrid album view link. Not used, probably won't be part of core.

commit 1ef090cd1599582d5b883c929cf23dc01f652fd8
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Feb 23 01:51:18 2009 +0000

    Remove second Add User button, don't need it, at least not now.

commit 37d3254d8c379e5f83497fd3eab55f10a60ee93f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Feb 23 01:36:54 2009 +0000

    Remove debug code, thanks Andrew Slayman!

commit 7d96448ecbf0c7d24bf851db13d1b81bb726024e
Author: Jakob Hilden <jhild@umich.edu>
Date:   Mon Feb 23 00:46:25 2009 +0000

    added additional comment link, if no comments have been made yet.

commit ecaf6bda32e9fdb77ff97c93577b1bea6d46a754
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Feb 23 00:44:50 2009 +0000

    Added fix i18n todo item for cancel link

commit ca5bba09644631c7bd040c6cb0a1af678ae06d1d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Feb 23 00:25:51 2009 +0000

    Replace the word "item" in display text with photo/album/movie as
    appropriate.  We shouldn't be saying "item" to the user.

commit f924cd66ac63f85460ab69c7857376a2036eb691
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 22 23:55:47 2009 +0000

    Remove the $item from the various graphics functions, that was a bad
    idea.  Instead convert movies to jpeg before doing any
    transformations, which keeps the graphics functions clean and abstract
    and dealing solely with image types.  Lighter/simpler solution.

commit ffbab952c679ea60bd7de102411e5e8a92896c96
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 22 23:54:48 2009 +0000

    If the album_cover_item_id points to a missing item (unlikely but possible) just treat it like it was missing and continue

commit 3a8439d7b504dfa4f1b32e214e74fb842d040983
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 22 23:53:44 2009 +0000

    Hardcode all movie mime types to video/x-flv cause that's all we support now anyway

commit f5169dd4518b2f3691910bfeb53a5c8c480059ef
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 22 20:16:56 2009 +0000

    Leave the comments title around, but add the "Be the first to comment"
    message below it.

commit a83b6e9180c8ff495f23a25b9532c5fed5434824
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 22 20:09:17 2009 +0000

    Adjust the title based on whether or not there are comments.

commit 95fc61c9a8495e9fd4e1ea5e4fd3426886c70f0b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Feb 22 17:36:58 2009 +0000

    Standardize to uppercase DESC in the order by method calls

commit d61691fd95eca1246d36b5e36d7696369301a8b5
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Feb 22 16:56:37 2009 +0000

    Removed the full-size enclosure tag and fixed alignment of the content tag.

commit adf338f2c13dfd17a92d0137a13ad360320a67aa
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Feb 22 16:14:58 2009 +0000

    Added t(...) around some display strings that were overlooked.

commit eece67611ef428a038b1d3e6ff35843d1b1f3470
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Feb 22 16:14:10 2009 +0000

    Added "flv" to the list of the supported files

commit 1aa21cb2ab03766f7347ed2de371335961b7d5d6
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Feb 22 08:20:08 2009 +0000

    Need to have next/previous in place in a disabled state to maintain pager layout.

commit 9b73213693d2e0b5040d01dbed0ce6b5d75e6587
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Feb 22 08:05:15 2009 +0000

    Add Cancel link next to submit buttons in dialogs. Apply button style to buttons in dialogs.

commit 9344141231e3c9567d7fb8c6938423178c1b9dee
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Feb 22 07:32:38 2009 +0000

    Minor fixes to gAlbumGrid and gPager

commit baff63b70b2b686b14f468a26180081ad505ce9a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 22 05:21:44 2009 +0000

    Very basic movie support.  You can upload a FLV file, we use ffmpeg to
    extract a thumbnail out of it and if you click through we show it
    using flowplayer.

commit e6836d8a5ed06cb25c3f0d61b1c24a48e49e93f3
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Feb 22 02:09:48 2009 +0000

    Apply button styles to pager buttons and position in consistent locations.

commit e84aa77237bda6ff39c1bbd1af93d704f54d8b38
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 22 00:57:54 2009 +0000

    Fix load_themes() to actually look up the right themes to use.  Thanks to Blake Turner.

commit 2505bd157932a369cc006dd8fc0dd80b57b22b69
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Feb 21 20:58:02 2009 +0000

    Hardcode extensions instead of using Image::$allowed_types because we
    don't support TIFF files.  TIFF files are not viewable directly in
    most browsers

commit 855eadb92fc4b63a8a46004e1c59f0b221e72330
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Feb 21 16:54:23 2009 +0000

    Standardize the html id of the progress bar to gProgressBar

commit b6f0d17565ef6a48c6c6a8550c86701329cc64d3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Feb 21 16:41:35 2009 +0000

    Change the name of the model from exif_info to exif_record So item
    deletes won't fail.

commit 5c30510ac413077663ee694c2254b9dd6a10ccae
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Feb 21 07:04:25 2009 +0000

    Correct the layout of the feed so that the image shows up in the body
    of the message in the feed reader.

commit c2fa42cf6cf6a2742b2a40ef7fc46f95f7a734f3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Feb 21 02:28:19 2009 +0000

    Implementation of local import module.  Still need work on better
    status messages.

commit af2f7f2c565519c177e9ef7d9848419936ddf8fb
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Feb 20 19:04:58 2009 +0000

    Use Image::$allowed_types instead of array(IMAGETYPE_GIF,
    IMAGETYPE_JPEG, IMAGETYPE_PNG) as IMAGETYPE_GIF, IMAGETYPE_JPEG and
    IMAGETYPE_PNG are not defined as constants

commit 2b047aaca90bc76a01af0d63855e2f4229aad9e2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Feb 20 14:11:33 2009 +0000

    Change #Breadcrumbs to a css class.  This allows the formatting to be
    used multiple times on the same page. (For example in a dialog box
    such as in jhilden's upload mockup)

commit 5dcf2794c57abcb44cab82156fdbc14583ea9a02
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Feb 20 07:10:20 2009 +0000

    Fixes to comment admin buttons.

commit 8b2c05afc0a9f8ad7490fd46bb1c8249d03c2fb8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Feb 19 15:24:17 2009 +0000

    1) Rename the module media_rss to rss
    2) Protect the fullsize image with a permission check
    3) Added a content:encoded element to each item which allows the image to show up in the body of the feed.

commit 237656f6c85697c41a935d0b05979cebbb2cc87b
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Feb 19 08:48:14 2009 +0000

    Differentiate between available and installed languages. Provide admin UI to install languages.
    See: https://apps.sourceforge.net/trac/gallery/ticket/75 (first step for this task)

commit d47e4c9b43aca6092c1555c392ae072d449bb888
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Feb 19 07:20:26 2009 +0000

    Adding a l10n scanner - scans for t() and t2() calls, inserts the extracted messages into incoming_translations.
    See: https://apps.sourceforge.net/trac/gallery/ticket/74

commit dcc42328b12839b43ca52058eeab1106e094e8e1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 19 01:50:38 2009 +0000

    Fix indentation.

commit d3752437b925e73bffd1f09de3c14f3bd96dcf6a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Feb 18 07:33:38 2009 +0000

    Add a 'finish' button which dismisses the dialog and refreshes the current page

commit e24de87096674943d6f9f66392901469e95e8c86
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Feb 18 07:20:50 2009 +0000

    Urlencode the user agent, else it doesn't get passed through properly.
    This fixes the uploader on FF/Linux (and probably other platforms).

commit 87ad71c985e016b820b998844bf21c0d7c188bc1
Author: Jakob Hilden <jhild@umich.edu>
Date:   Tue Feb 17 21:49:57 2009 +0000

    added mkdir command to error message if "var" is not found, for people that don't know how to create a folder on unix

commit 82ccbba12401cefd9398f70fb2ad763025fa3919
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 17 07:03:40 2009 +0000

    Move private key generation into the installer so that we're not
    generating it lazily.

commit ae06ad3a414c9d112e5aae92118ad9d134c00056
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 17 06:03:47 2009 +0000

    Update to new Polar Rose API.

commit 6a8b80d892984d51aaaa29cc5db3fda8ee94ad5e
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Feb 17 05:30:24 2009 +0000

    Adding a private key. Based on Drupal 6's drupal_get_private_key() method.

commit a5b17647a6524f19172a71696c95c9672e8dd35e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 17 05:27:26 2009 +0000

    Fix url to SimpleUploader.swf for IE

commit 9ac6ed5a82349fa0fd89359cafba98476dd82198
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 17 05:11:39 2009 +0000

    Swap positions of rotation buttons so that that they're more intuitive

commit 96c6121f4acafbdf879bdbfd4b0550592176815e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 17 05:11:05 2009 +0000

    Add more localized strings

commit d8dd435b6d8bed7c4017e8dc008e77346292ae20
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 17 04:44:42 2009 +0000

    Updated to upstream r9.
    
    Log: changed uploader to not wait for complete event before moving to
    next download; fixes to reset progress bar itemRenderer properly when
    renderers get reused

commit 3684cff9722a14361a85854943f9aab0a8ac0062
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 15 23:04:26 2009 +0000

    Ignore the unique timestamp value that upload::save() prepends to temp filenames.

commit bcea2a6228f8d8f4047f416b1e2174b0bd5e3479
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 15 22:52:01 2009 +0000

    Hide the menu until we can superfish it so that we don't see the
    unstyled list appear which causes the page layout to flicker.

commit d04dbadfa1c9a2ed6823ac2ffd64d8f68f27581c
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Feb 15 22:36:51 2009 +0000

    Apply buttons to comment moderation and action buttons, beginnings of a photo stream carousel block in admin dashboard.

commit 6c59a196772b6d6c6b2b969b85c1a2551ef017d8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 15 09:14:03 2009 +0000

    Get rid of InstallException and handle exceptions from create_admin()
    properly.

commit 0e3df4e5d2d3d07199f5465fd6d21b45c96f844b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 15 08:12:48 2009 +0000

    Fix pluralized text.

commit 590a4677f34f866911fa6c0902130f8dbea7421a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 15 08:08:22 2009 +0000

    Tweak EXIF extraction code to be more robust.
    
    * Create Exif_Record_Model to track whether we've scanned the EXIF
      data for this photo or not.  This allows us to track photos that
      don't have EXIF data (and won't have any Exif_Keys)
    
    * Blow away old Exif_Keys when extracting, else we hit unique
      index constraints.
    
    * exif::_get_stats() -- before it was running the task forever

commit eb3e2359a7301588b16e0f29e96242fa48a39e6f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 15 08:04:26 2009 +0000

    Fix up some text

commit 4cdd3ae0de41e049db6b5a6bcba2cf9c875f1d42
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 15 04:38:21 2009 +0000

    Allow rotation for photos, not albums (duh)

commit 7c0655bb36cc8c681e2d6b0843a1a6e0f7ed4a58
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Feb 15 03:18:48 2009 +0000

    Bring the default theme's header visually closer to the admin_default's header.

commit 5757fdbda8c1b0c8f2aadf397e9b09592a74b239
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 15 00:58:14 2009 +0000

    If we're deleting an album cover, null it out in the parent.

commit d8049cf711ffe9b6b7f531ea77dac23b86066516
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 15 00:57:19 2009 +0000

    Album cover fixes.  Don't bomb in generate if we can't load the album
    cover (it might be deleted and we forgot to update the
    album_cover_item_id column).  Also, exclude albums with missing
    album_cover_item_id's from the dirty query.

commit 9e08285c003de4fcb2dad9bd6917c326961ed524
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Feb 14 23:03:09 2009 +0000

    Say hello to the new Flash based uploader, courtesy of Eric Zelermyer.
    
    This requires a little trickery to proxy the session id and user agent
    through the ActionScript code so that we can assume the same session
    in the uploader.  It's also using its own path to add photos since
    we'll want to have a slightly different protocol for dealing with
    responses (as opposed to JSON or HTML).
    
    A work in progress for sure, but it's already better than what we had before.?\024

commit b7e75a191cfc4de4ceb56f7fc6d44938e347e352
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Feb 14 22:44:58 2009 +0000

    Truncate url to 255 chars

commit 3bfe4a07bdad0c5a3b743919411b9576515d83a6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Feb 14 22:28:20 2009 +0000

    Fix rewritten urls to handle query params properly.  This was breaking
    code like:
      url::site("albums/3?page=2")

commit 410aabf12470f42cd53fff671d826104d64c5338
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Feb 14 22:25:36 2009 +0000

    exif_data -> exif_keys
    
    This was breaking delete.

commit 2ee995fcc7e3a8550417a3c78d562d7187497475
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Feb 14 22:25:12 2009 +0000

    If the page number is out of range, redirect to the nearest page.
    This fixes a bug where deleting the last photo on a page would take
    you to a 404.

commit 2ec347a3ae7290c67051fed30395a9050ca66d06
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Feb 14 19:32:00 2009 +0000

    Fix indentation.

commit e5f5f4824341820738eac30c6ef8402c5f65f6b9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Feb 13 08:00:12 2009 +0000

    Minor text tweak

commit 2295d748797c214878d2620be4251d2d7fa05192
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Feb 13 06:57:16 2009 +0000

    Continue to replace raw sql with Database method calls. As per ticket #68

commit 7ea06ccbcb5e38d4ffddad9a561cde546b1acd41
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Feb 13 06:36:02 2009 +0000

    Fix error if theme item is not supplied.

commit 5dad40b1ae4b1aedce928dc2e3abac3b6b13c636
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Feb 13 03:21:19 2009 +0000

    Ticket #2. Tighten up search results UI.

commit 985a324ec7f3c8aaf277850aee68be2e00607686
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Feb 13 02:10:38 2009 +0000

    Fixed short form button style.

commit ac06fcd26ca98a6025323d0cf79f5c25769c5a92
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Feb 12 21:44:55 2009 +0000

    Remove the Database::query call for deletes and updated and use
    Database::delete or Database::update instead

commit 0cf2423bbe04e9fcd75272c42b2384c72b18b5a8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Feb 12 21:11:47 2009 +0000

    Update the color on the remove watch icon

commit 0836f507f2334475035c762241658928021d36f5
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Feb 12 16:17:20 2009 +0000

    Corrected indentation

commit fc08012e5d2111c7df88f0bb4660d1e20f57b355
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Feb 12 16:14:52 2009 +0000

    Add a maintenace task to extract the EXIF data from images
    Changed exif to EXIF in comments

commit 2df75c11fb5ef139148bc536b2d3459e7002749f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Feb 12 14:02:11 2009 +0000

    Correct typo in variable name

commit 50b783e3a5af17485443f55e51aa57c9c67be7e2
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Feb 12 07:11:24 2009 +0000

    Change i18n message key to include the plural form (to ensure that it's truly unique).

commit 9bbe8053c73c875dca7c838e708a8829a80dacf6
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Thu Feb 12 07:07:11 2009 +0000

    Added a show comment form button. Add comment form is revealed when the button is clicked. Used jQuery UI Effect to .highlight() to bring attention to newly added comments. Also added a named anchor to our block library to allow direct linking/scrolling to those blocks on the page.

commit d4875583690dbf8b532427755d76aca33d4c63ae
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Thu Feb 12 04:25:43 2009 +0000

    Fixed gViewMenu button issues. Fixed major admin_default theme issues, content now clears the menu. Added IE-specific stylesheet to admin theme.

commit 886fd07bc209e525a8e3e9b11f904bb6b346deab
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Feb 12 03:01:52 2009 +0000

    Adding locale::display_name().

commit 989c24dc996f9cd29cf660662476fc26c77ba835
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Feb 12 02:51:44 2009 +0000

    Move l10n enable/disable option to Options menu.
    Only available to admins at this point.

commit c69b483e34ad80bde06007a0588aa5906f09424e
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Thu Feb 12 01:19:03 2009 +0000

    Added jQuery UI Accordion widget. Updated vendor branch README.

commit 6adf661ca7927a1cf8dc0c1e87c2739bd8762a7f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Feb 12 01:12:33 2009 +0000

    Change the size of the text and and some odd/even coloring.  Hopefully
    some one will be so disgusted with these colors, they will change them :-).

commit fbfa2336f931ba9f024648dd181be368672ba7f6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Feb 12 00:52:44 2009 +0000

    Bag the whole idea of a tab widget containing summary and detail
    information and just go straight to the detail.

commit 37a1cca520536ba52b14069b1efb4871d47e44de
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Feb 11 17:42:05 2009 +0000

    Well, exif dialog displays and will show the summary information.
    However, The text needs to be scaled or the size of the box needs to
    be managed such that there is nowrapping.  The columns need to be
    styled for odd and even.  And I can't get tabbing to work.  If you
    click on details tab nothing happens and i don't know what I've done
    wrong. Addition input is appreciated.

commit d739d1ea46c1b8452469cef26f3cbd4ddbdc3c38
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Wed Feb 11 05:35:11 2009 +0000

    Button mania continues. Make edit and delete user/group links buttons, buttons, buttons!

commit b00bad39e6b97f5a09375763b4be8d3130f38084
Author: Jakob Hilden <jhild@umich.edu>
Date:   Wed Feb 11 04:38:02 2009 +0000

    improvements on the tag admin

commit 2ad81a21db5808d0911ce6d14dedf272570c8de8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Feb 10 16:41:59 2009 +0000

    I know we are going to replace it it, but in the interim, changed the
    color of the watch icon to match the others.

commit 19f29fb1d6dae4dc9e290c2cc7112401c328a59a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Feb 10 16:28:50 2009 +0000

    Exif data is now collected when an image is added.

commit 9ad072b33fb091c7cad901849662d0b865a2410b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 10 09:10:55 2009 +0000

    Simplification pass that preserves almost all functionality (except
    default_country) but removes a lot of the code.

commit 0f2ec1ef196fc2d8efa24f6ef5f3d4a4b47c67e2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 10 09:09:27 2009 +0000

    Rename 'Language Settings' -> 'Language' since it's under the Settings menu anyway

commit afa1805f15e7f54d54390db6e26011001e04601d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 10 08:32:33 2009 +0000

    Remove redundant "Gallery"

commit 0782cbe78fe0898556cee894bb49df0c8693395d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 10 08:30:37 2009 +0000

    single -> double quotes.

commit df9268d80a00fa113c4d4c3796bf9ad1515ec3bb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 10 08:29:24 2009 +0000

    remove leading slash from Forge url.

commit c2eace3e59dcf91020251cbfae6eb759cb964abd
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Tue Feb 10 06:12:32 2009 +0000

    Reduce width of add user and group forms.

commit b2f20ff76649cab714c761e8a43f66e1976cf3d4
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Feb 10 06:12:16 2009 +0000

    style fixes (style for method names, style for vars in locale.php)

commit fc162362de2f155933baf3231a857faa9f6d46cc
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Tue Feb 10 05:48:55 2009 +0000

    Set one of 3 dialog widths keying off of form's CSS width value: 300px, 500px, or $(window).width() -100. Tested in IE 6, 7, 8 and looks good. Also, remove titlebar from progress bar dialogs.

commit 62f3724acbdf60b7a17c452e74f099b5236d41cb
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Feb 10 05:37:42 2009 +0000

    Adding UI for site language selection and user language preference.

commit fe5240730a0f281db1ed6ad3be0a3c63c72868bc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 10 05:12:31 2009 +0000

    Show the translation dashboard on admin pages also.

commit 0b315b6fede54f6ead195ae537da141ba9c85728
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 10 05:05:11 2009 +0000

    Normalize a few things to our standard.

commit 079a518334f0dfb2a67b402ac8680456964e1b04
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 10 05:00:29 2009 +0000

    convert ' to " to match our HTML standards.

commit 78efd9bd3d77d06753ee7ffdb44faa396a19c063
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 10 04:57:39 2009 +0000

    Remove extra blank lines

commit 06d5e2972d08626dd2c3df79b7b05137b18ccf7d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 10 04:56:21 2009 +0000

    Line length fix

commit 007687dbd327433cfcd79fc63442579979c3e4b0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 10 04:43:24 2009 +0000

    Add another TODO

commit 11226bdd3abdc664bece47b2b3011213499b5826
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 10 04:34:34 2009 +0000

    Simplify delete into guaranteed 3 queries.

commit c7d004d3199b75c92f9ab065513af1c4f2d5aba5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 10 04:29:39 2009 +0000

    Simplify some logic.

commit 9f76d15086972c3661cbb8c4a786b7763203a745
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 10 03:42:25 2009 +0000

    Clean up translations to use t() properly and differentiate between
    albums and photos.  We should not say the word "item" to users if we
    can avoid it.

commit 9f77ca61f8f71c1b2c25c5c366cc5f604544ff84
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 10 03:22:42 2009 +0000

    Indentation fix.

commit c2eee4746533af10779934f705138fe9bb567550
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Feb 10 02:37:16 2009 +0000

    Move site default_locale into DB (vars) and add a per user locale preference.
    There's no UI to select the locale yet.

commit dce6548431c4d61ab6c532375a0f030d8de72fd1
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Feb 9 08:42:13 2009 +0000

    Add local localization functionality. Local = no means to upload / download translations to a translation server yet.
    
     - Added an outgoing_translations table to store translations from the local translation UI.
     - I18n class is checking incoming_ and outgoing_translations for translations, giving the latter priority.
     - Not handling plural strings in the translations UI yet.

commit fa1f49d99a30a029d1a4e09b820c639d639f6283
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Feb 9 07:29:24 2009 +0000

    Adding translation UI. Not backed by any model yet (submissions are ignored).
    The code is based on the l10n_client module from Drupal 6, by Gabor Hojtsy (http://drupal.org/user/4166).

commit af944f94334139d6b49b9344795652510a62bae0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Feb 9 05:28:30 2009 +0000

    Use jquery ui's progressbar

commit ad80e86208a03ea88d74e88081464b90e7bf3454
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Feb 9 02:11:59 2009 +0000

    Indent fixes.

commit 08ae48aeaa5e6c4c1da161590d6dcd9daa9ecabe
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Feb 9 02:10:19 2009 +0000

    Add hover state for buttons.

commit 622bada1122010c2b358e646521c8d273d542e20
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Feb 9 01:58:06 2009 +0000

    And the JS file that belongs with the previous commit.

commit 5d8a19ac5bd21d4c23060d38428449d48971ec74
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Feb 9 01:55:29 2009 +0000

    Added a few element checks to make sure elements exist before trying to manipulate/initiate them.

commit aca2729eb6ee3d0482183a78c7e816ceaba4f6c0
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Feb 9 01:20:42 2009 +0000

    Remove the "more" link until something's implemented that needs it.

commit 767bf41287cd6d0133f4ecf0c1527795233f4848
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Feb 9 01:19:54 2009 +0000

    Dialogs don't need to be resizeable, at least not yet.

commit 9f4fdcd8d50a9b4bd4bf2bcdd66a705b8b458df9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Feb 9 00:30:13 2009 +0000

    Just reset the tag form after submission; no need to replace it with one from the backend because it's going to be the same form anyway.

commit b15e0c75291ee68a8e54c0dcda7985cad6b44ece
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Feb 9 00:28:15 2009 +0000

    Move close X back over to the right of the titlebar.

commit fd9a0b2a5d4cdd36ae426d2bac2cb8ce4c270e58
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 8 23:53:15 2009 +0000

    Superfish is now in gallery3/trunk/lib/superfish

commit 053fa63fa1e8b7c2c3c8b13da41a052011731b70
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 8 23:51:59 2009 +0000

    Superfish is now in gallery3/trunk/lib/superfish

commit b6b60bdc572ecd2fc296616a6a30f38b2761ddcb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 8 23:49:43 2009 +0000

    Copy Superfish 1.4.8 from the vendor branch

commit a68ac7d2ce45a1af1b46f0b50d71f41c5cf1c008
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 8 23:39:25 2009 +0000

    Fix dialogs in IE7 so that they appear.  The sizes are still wrong, though.

commit cdae043999948a0b1b3989de536f0425268ee98c
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Feb 8 20:45:09 2009 +0000

    Clean up add user and group buttons to move the + icon to the left. The + icon doesn't appear within the button outline with buttons that aren't floated. Will have to debug later.

commit b31c79a71f37bcbe221033e1e664d5feb17e0a42
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 8 20:01:15 2009 +0000

    Fix a bug that I think I introduced in my last sendmail refactor where
    I inverted the expectations on the result from mail() causing image
    uploads to fail (even though the mail gets sent!)

commit 0f13f126386d7b1a01fc86ce6888de067b1fd21d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 8 19:55:48 2009 +0000

    Fix spelling typo

commit aa1abbf82a2d91f064e58572412e1ffb968b010f
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Feb 8 19:35:10 2009 +0000

    Let the theme control overlay opacity for dialogs.

commit 8e3bb143c9354db5f38d9a3b8377c087b0ec4520
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Feb 8 19:33:00 2009 +0000

    Removed duplicated images from vendor move.

commit 7156df3a230635222d5214010c0771decc6f5a5a
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Feb 8 19:23:38 2009 +0000

    Missed deleting these in move to lib.

commit f7d226bd31fb7ae6f96b742b4436f2ffd011054a
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Feb 8 19:17:19 2009 +0000

    Move jQuery UI ThemeRoller css and images to lib. Should simplify future updates, keep default theme directories clean.

commit 3b944bca5d912c1a93834340f3e5ce69ee1faafb
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Feb 8 18:03:31 2009 +0000

    Use the ORM method delete_all to remove selected records from the
    database instead of calling the Database::query with raw sql.

commit 0f9c5feb895f64575ab7334140846f9ab532d00e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Feb 8 17:32:37 2009 +0000

    Use the ORM method delete_all to remove selected records from the
    database instead of calling the Database::query with raw sql.

commit 3a83c4e76fcfd3e9e62d95fe91222367527411e4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 8 10:18:09 2009 +0000

    Properly implement changing the thumbnail and resized image sizes by
    updating the graphics rules as appropriate.

commit 442d9295c62903d2595abefb485bb9f869f3ce8e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 8 06:40:57 2009 +0000

    Change mark_all_dirty to mark_dirty and specify what we want to mark dirty.  This will be useful for Admin_Theme_Details

commit 41ed142f5dfd0687734f14c79273fd0c84f1e330
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Feb 8 02:27:45 2009 +0000

    A better fix for the problem with special characters (this simple 2
    line change replaces r19995, r19998-r20001 (thanks Bharat)

commit 1fc2307faba7f280e9251de54504122a1dcb187e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Feb 8 02:21:28 2009 +0000

    rollback r20001-r19998, r19995.  This may require a reinstall

commit 7ebbe189d4a6955532fb17f4cb9466115279ca35
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 8 00:42:17 2009 +0000

    Implement the "additional options" part of the quick menu.  It's only
    for albums, because we don't currently have additional options for
    photos yet.

commit d9b4d96c670187aab0c7f37477da3f0c7a628767
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Feb 7 22:11:44 2009 +0000

    Use Album or Photo in the title instead of Item

commit 7494a93692f168b1383ca7ea2f5a1b1e85892811
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Feb 7 22:09:29 2009 +0000

    Merged /gallery3/vendor/exifer/modified:r20011
    
    Now we have the Gallery3 preamble on all exifer files.

commit 37d90e663ca75fdf441d449799fc94a5e467b4a7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Feb 7 21:44:19 2009 +0000

    Adding exifer library

commit 1d9a3f70b12a10fbd123fb444e7a67b99a882f41
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Feb 7 21:37:42 2009 +0000

    Fix indentation.

commit 12701b18018ac7ddb7765be86094b77282d2db5e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Feb 7 21:21:08 2009 +0000

    The start of the exif module. so I can merger the exifer library

commit 54646583bc9ce35b5f27f1b528c5e399bcd23270
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Feb 7 21:05:04 2009 +0000

    Remove the try/catch as it was being fixed twice

commit ce826c3048470098f6c58f81ea5fd3ecee4b4877
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sat Feb 7 21:01:52 2009 +0000

    Updated jQuery UI in lib to 1.6rc6. Removed opacity settings in openDialog, refactored showLoading() a bit.

commit 8f382c8f42af7f1d2a459a0e82afd518166f22ff
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sat Feb 7 19:28:26 2009 +0000

    Removed done todo items, removed tr.gClassName to allow class to be applied to more than just table rows.

commit 90277704a2d2a8fd8d7f3191024ec901ad317f22
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Feb 7 18:12:06 2009 +0000

    Changed the way album and photo creation guards against duplicate
    names.
    Added similiar code to insure that path names are not duplicated.

commit 69e0d72b930ec4326a257c41f365256d9913552d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Feb 7 17:27:09 2009 +0000

    Updated comments on photo::create to reflect the inclusion of the
    owner_id and shamelessly broke it into two changes to to the 20k commit.

commit 43dff9f95f932fd13530c10cbd7c7ae111c9d6bc
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Feb 7 17:26:17 2009 +0000

    Updated comments on album::create to reflect the inclusion of the owner_id

commit a3704c8dd8b12a64e2da4b269e576c4d56685da5
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Feb 7 17:16:48 2009 +0000

    Assign the Album|Photo path field explicitly instead of hiding that in
    the item::__set magic method.

commit 8a738ed241d2c3d970f28883f8a0cc5e68ea7ad0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Feb 6 22:10:08 2009 +0000

    Correct comment on factory

commit 4e107dac41f58d3ed6064809d8ee461ea8592e2c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Feb 6 16:39:18 2009 +0000

    Implement fix for ticket #35. *** Requires reinstall of core ***
    * Added new field in items table (path) which is sanitized version of
    name.
    * Added __set method on Items_module to set the path field whenever
    the name field is changed.
    * Made some changes to the scaffolding so missing the path column
    would not kill the scaffolding.
    * Changed MY_url::site so not having a 3rd parameter won't throw an error.

commit 48acd42f9b1dfee5ba011501a1c989eb7fde0373
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Feb 6 06:38:53 2009 +0000

    Missed these in previous commit. Make view icons darker

commit 67d551d5e3739af81611c06a7786844f4eabb4ea
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Feb 6 06:34:47 2009 +0000

    jQuery-based buttons! Form updates, short form updates. Need to fix add user/group buttons and search form on search results page.

commit 80d4df3a4a6fefcf69de5245934b4b0bfc0f8e20
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Feb 6 03:47:36 2009 +0000

    Convert all item->type == "album" to item->is_album()
    Convert all item->type == "photo" to item->is_photo()

commit 196ef392ab1dc32154ec8dbe49340d4aefb0d082
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Feb 6 02:10:00 2009 +0000

    Move admin_default table styles to default for consistency.

commit c1660423133e072ca123d62040bc1a09e642378d
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Feb 6 01:47:42 2009 +0000

    Apply default link styles to links in dialogs, including the Forgot Password link.

commit 04fe9da19036a657aeeee11f6c3641f98a345323
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Feb 5 23:29:44 2009 +0000

    Addressed the issues in ticket 34.
    Surround the the attempt to use gd_info with a try catch block.
    Created a new class gInstalledToolkit which has the highlighting and
    the over pointer definition.  Now if you mouse across an inactive
    toolkit it remains inert.

commit 7521465ec3af00b10d67880e780e6b60eba2b597
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Thu Feb 5 22:34:29 2009 +0000

    Use jQuery UI close icon for full size close. Quote and code cleanup

commit 4607c2521ef354302cc11e2add3d9c2dd1fb37d1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Feb 5 20:44:24 2009 +0000

    Improve the close icon so it doesn't look as much like an envelope.
    Also add resizing to the fullsize image if the windo size changes.

commit 6a8daaef5e2df4a98e1f47d4f4107c00c03d9498
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 5 19:21:29 2009 +0000

    Don't try to show the recaptcha if we don't have a public key

commit 63ca443649094a14a286cf6924ca211bc1b5753c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Feb 5 18:12:33 2009 +0000

    Add full size image display. Changes the core menu now checks that the
    user has authotization before displaying the view fullsize icon.  It
    probably needs a better icon, (but u make do with what u have or don't
    have :-) )

commit 79dda6a0c28010279952e2e4b45540b0aff63e69
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 5 08:39:12 2009 +0000

    Rename "welcome" controller to "scaffold" so that we can eventually
    have a welcome page.

commit 3e54159d5c3086bb13a3bf5cd62abb55fe661771
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 5 08:38:15 2009 +0000

    Guard against the case where gd_info() isn't defined

commit 1b231063a091325fd801718b5f43ff876ca80ca5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 5 08:00:42 2009 +0000

    Set default charset to utf8

commit faa12ad17dec6b0e8f498f7b974ff75518474231
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 5 07:59:13 2009 +0000

    clean up indentation

commit 1894a673bf0dfe35563f616091d7128596ef8d29
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 5 07:51:11 2009 +0000

    Move test-related extensions to Sendmail into a subclass that we only
    use in the test code (Sendmail_For_Test).

commit 9e2b84d406be322432cce65bfa16831718ba68c3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 5 05:52:03 2009 +0000

    Minor code style changes.

commit 02207f439519e9e15db82b784286238dbf511e02
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Thu Feb 5 01:10:34 2009 +0000

    Apply default link styles to links in dialogs, including the Forgot Password link.

commit cd9bdaa07abc69b86be58e2543522f9e28c83dc9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Feb 5 00:29:32 2009 +0000

    php_flag -> php_value, guard all with <IfModule mod_php5.c>

commit b1effc1d352ee845dc5a943f28f6d117cd51c402
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Feb 4 23:37:20 2009 +0000

    Drop request for jquery.listen.js, we don't use it

commit 704fd72623ebdc99da7fbb00ccf30f26672d8ec5
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Feb 4 17:25:30 2009 +0000

    Delete subscriptions when a user is deleted

commit 98bbf53657b63030abe19881a642cac955e8765b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Feb 4 16:36:59 2009 +0000

    Use the matches validation rule in order to perform cross field
    validation between the password and password2 fields

commit f0aced6b75e5aa0f313286df1a296a3b768d9b01
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Feb 4 15:45:48 2009 +0000

    Complete the Recover Password functionality (Ticket #5).
    
    This change requires a reinstall in order to pick up the new hash
    field in the user table.

commit 5b17619ea82f8d867a38e902fee2f68a0e7858fd
Author: Jakob Hilden <jhild@umich.edu>
Date:   Wed Feb 4 07:14:22 2009 +0000

    added inplace edit to tag admin (form still needs to be set to rename using AJAX)
    removed unnecessary {element: dialogLinks[i]} from dialog and panelLink handling.  now uses event.currentTarget

commit 2f5344c1daa6d318ea85a1a4fe2d12d4660dd72b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Feb 4 05:49:29 2009 +0000

    A preview of the password reset functionality.  What's working... you
    can start to logon, request the password to be reset, and an email is
    sent to the users email address.  If you click on the link you get an
    unformatted form.  But its a start :-)

commit c63c843f18918ff3b94707bd76de5abf3b6d8428
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 3 09:43:47 2009 +0000

    Drop scaffolding menu link if welcome.php is missing.

commit cf45795525d19b27f745e0b310b17ad98f657b3c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Feb 3 09:42:07 2009 +0000

    Doh!  Fix a bug in add_after() that caused it to drop the item we were adding it after.

commit d656b6a3e61ac7d32607638ddd125457813b0616
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Tue Feb 3 06:45:43 2009 +0000

    Beginning of edit user panel fix. Form is displayed again. Added display of user email address to list.

commit 150a90dabd333fc5ed6daa8f725913bbeef19b42
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Feb 3 06:31:39 2009 +0000

    Minor change in wording: s/technology release/technology preview/

commit eb56ee821f0261c0106252c561e314b753b4cbb5
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Feb 3 00:17:40 2009 +0000

    Add a confirmation password input field that must match the primary
    password field in order for the update to succeed.  If there is no
    data entered in the primary password field, the confirmation field is
    ignored.
    
    Addresses Trac Ticket #4

commit ae254df7f793a903ff0d44b54a9454b94760aa78
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Feb 3 00:14:53 2009 +0000

    Only toggle the loading icon off, it is actually already in place.  If
    the panel doesn't have the gLoadingLarge class then don't toggle it.
    
    This issue only arose if there was an error on the panel submission

commit 421129d7a8287e1666b41d35b811659cc3bbb4fe
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Feb 2 19:18:43 2009 +0000

    Resolve Trac Ticket #32

commit 2a49c743000b63a8770db7c8602d326e0cc436bc
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Feb 2 19:16:48 2009 +0000

    - Rewording: s/System requirements/Supported Configuration/
    - supporting mysql 5+ only

commit 919f55187fefe46ee0054c78d336b4b56d09bd62
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Feb 2 17:32:42 2009 +0000

    Typo

commit f97dedf3e494cd056b411367f5ed4d464b037c02
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Feb 2 16:37:09 2009 +0000

    Fix for Trac Ticket #30

commit ef58ac91e8c23832e657a4f8dee57fe0b7733ae8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Feb 2 15:41:47 2009 +0000

    Notifications now send emails when a comment is published.  It won't
    send the email if the comment status is not published.  This gives the
    administrator to moderate the comments prior to being published.

commit 89edd4d3ff307d79b82a3eb196b6bdad5be26804
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Feb 2 15:36:43 2009 +0000

    Fix trac issue: #31

commit 9e01c80ef477c9c916f3f1c1b572d43ce663b148
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Feb 2 13:28:42 2009 +0000

    Enable csrf validation on the add/remove notification controller

commit 5d637a3254bb7ad37a60a279a77fc04de1141617
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Feb 2 10:56:21 2009 +0000

    Update README for technology release

commit 60d3d6e704176a54fe9870021a3ecabf8bd52037
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Feb 2 07:32:45 2009 +0000

    code audit fixes + bug fix: don't call sendmail with an empty To list (in notifications module)

commit 5d0b710d54c84e281cd88efda5bacf9e2916a5a3
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Feb 2 07:05:02 2009 +0000

    Fix sendmail tests (had mismatch between configured header separator and expected results)

commit 4842df9dc9c489a3c05667410242e91bf45e843d
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Mon Feb 2 06:32:42 2009 +0000

    Do 1 DB query for l10n per HTTP request (per locale), not one per t() call.

commit e3b5eca50ef1e421b2f4b97309882df4dd9f5855
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Feb 2 05:00:09 2009 +0000

    Add sending notifications when an item is deleted.  We are almost
    done, just need to do comments.

commit a70f3bf38683af21f1e81ec1a5e74aa83ab46e38
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Feb 2 04:58:19 2009 +0000

    Have the quick delete file "item_before_delete" so that search and
    notification modules can do their thing.  In addition, correct search
    so it works properly and doesn't try to create an Item_id_Model class.

commit 01d00dfd8680c9e03fda9c4a0fb3dce04a88e2f8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Feb 2 03:55:33 2009 +0000

    Change the item menu to allow the watch icon to change depending on
    whether the item is currently being watched.  Currently the icon is
    the same as the add icon and needs to be changed.

commit 0eb593711bc2d5abac0ec35eb21d9fe722e7bd30
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Feb 2 03:21:29 2009 +0000

    We no longer need a dialog to set or remove a watch, so remove it.

commit 69a7e238a4da3ac92f0b62aa2aba6ce3b530a943
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Feb 2 03:09:17 2009 +0000

    As we stagger towards completing the notification module.
    
    Item changes and Item additions email notifications with this change.
    Still to come is item deleted, comment added and comment updated.

commit 41dbe5cf6cbd9939da1423a5000808814bb5979e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Feb 2 02:58:12 2009 +0000

    Changed the Sendmail library to allow the separator between mail
    headers to be specified as a parameter.  The documents say that it
    should be "\r\n".  Some sendmail programs seem to violate the
    specification and get confused.  In these cases the header separator
    is just "\n".
    
    This change allows the header separator to be set by the a
    configuration parameter.

commit 51f13f0ca2e36dc50db1ce5782d6a0b8135a158d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Feb 2 01:24:13 2009 +0000

    Reconcile search_records and items when we list the tasks so that we can tell if there're any out of date records that need updating

commit d728e274f6ff3f312998f689f3eb144acd210916
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Feb 2 01:13:52 2009 +0000

    First time running search maintenance task, remove any search_records
    that are missing matching items.

commit 97cc8dc6261a4b3a03a62549f7db0fe8f00e720e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Feb 2 00:44:06 2009 +0000

    Add an enclosure link to the original image.

commit 8bd9d38996412b2f9da26d6122e327ab7d7cc12f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Feb 1 19:16:28 2009 +0000

    Revert to pre-r19217 which means the label is no longer first (but its consistent again with the upstream code)

commit 8a4eb9eed248959748b4042fd9d92682d8ca2729
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Feb 1 18:37:45 2009 +0000

    For consistency with the rest of the admin UI, display User list as table, not list. Apply cursor: move to jQuery UI draggable and sortable. Clean up admin table styles a bit.

commit 78106bcaea6589698905a38893e1611292a28cb8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Feb 1 04:00:27 2009 +0000

    Remove models/notification.php as it is no longer used

commit 6f358291733b5844f5e9beaa747f554a0049e27a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Feb 1 03:58:31 2009 +0000

    Simplify the setting of a notifications.  Notifications are not only
    set on a album. The notifications are implicitly active for all child
    elements.
    
    It now sends emails if the email address of the subscribed user has
    been set.  No email, no attempt to send the notification.
    
    Still to do, come up with better messages as the current ones are just
    place holders.

commit d49484c9a65681f0ee41490c098a0b4d7a938c0e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Feb 1 03:55:40 2009 +0000

    Update the handling of the to field if the input field is an array

commit 7ef2dae07029ee7e9657ef3bf5122097e02a8886
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jan 31 17:38:20 2009 +0000

    There doesn't seem to be a photo_created event anymore so change it to
    item_created and check for a type of photo before trying to extract tags.

commit 3d8164353f0150c6c0edbdcccba12dd3f6699d10
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 31 08:57:13 2009 +0000

    Put the checkbox back inside the <label> so that clicking on the text selects the checkbox.

commit 38cf6ca403b485644405b8ec39af334a877e58b2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jan 30 20:52:25 2009 +0000

    The start of the notification module.  At this point, the icon has been added to the item menu in the sidebar (both photo and album).  There is a corresponding icon in themes/default/images that needs to be spruced up. You can add and remove notifications to albums and photos, but nothing happens under the covers for event handling.

commit b925d9da5320790d7a1e6aaa7d6d80b1eea1a67d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jan 30 14:14:49 2009 +0000

    Make the rendering of a checkbox consistent with other Forge controls.  Checkbox originally rendered the input box as a child element of the label element, which resulted in the label appearing under the checkbox.  All the other controls render the label element first and then the input control as a peer.  This change just makes it consistent.

commit a3aef693177547f47ab01a7f4c690b2935ed2114
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jan 30 13:03:56 2009 +0000

    Correct indentation

commit 7239a4d8bc82aead4cea481f428f54c4e9d52681
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Jan 29 18:25:14 2009 +0000

    Add the ability to generate the id parameter on Menu Dialog.

commit b4f92c7de69466b2d4ec0c41b9b22e4511314a24
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 29 09:26:39 2009 +0000

    Add delete support as a quick-edit option

commit 6091350c9454c92e5a975901eff8f5f46bee3045
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 29 03:23:46 2009 +0000

    Fix lint errors

commit 894a33d744ede7ec9977133e632279ed55976f4f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 29 03:22:02 2009 +0000

    Add support for pretty urls.  So now instead of urls like:
      http://example.com/gallery3/index.php/albums/2
      http://example.com/gallery3/index.php/photos/9
    
    You'll see urls like:
      http://example.com/gallery3/index.php/Family/Weddings
      http://example.com/gallery3/index.php/Family/Weddings/Bob.jpg

commit ad82721c3b164438d01ecc28350d8168894512a8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 29 03:17:09 2009 +0000

    Fix an off-by-one issue-- the destination level is the target's child, not the target itself.

commit 8d4b0afa4f42f6c00482bf72a2ce4c8b3a40028b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 29 03:14:43 2009 +0000

    Support making an album the album cover for its parent

commit 01d81ec6b42d30db83a1a12bbd2e5bc08944b0e2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 29 02:57:29 2009 +0000

    Update the level when moving items

commit d2b4c636c27d55eb8ce16fba96767497de8c4433
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 29 02:53:54 2009 +0000

    replace title with level, for ease in diagnosing levelling issues.

commit b7bfd011cb03d26d12d6adf35db4f455e985703d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 29 02:19:52 2009 +0000

    Remove extra debug call to install()

commit f85bc9bb7b92ac5ee5ed5f93d4312163b7fad713
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 29 01:47:28 2009 +0000

    Consolidate all our hooks into one file

commit e52431a81b93d59e55bab282e44d75856be129ef
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 29 01:41:32 2009 +0000

    Fix url for delete group link.

commit 33d7fa8cf6687c662fe97d27edecb6bc0bc5a1fc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 29 01:38:40 2009 +0000

    Make the application home page the scaffolding.

commit 6bfadc14edec84119dc6d72b62b7fa762cbc5771
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 28 22:42:50 2009 +0000

    Fully implement the user administration backend with drag/drop to add
    users to groups.

commit 25b8008304d44d9aac6162a03c157bd052fc08c2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 28 19:31:10 2009 +0000

    Fix button background image url

commit 43b30c0ee2cba89c6a6c07485546a29d2103f3c4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 28 19:25:01 2009 +0000

    Add Menu::add_after()

commit 1a62a26a369fbb56c46e3fc9bae64084adbd8326
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 28 09:50:15 2009 +0000

    Add drag and drop support to the admin_users interface.  This is still
    a work in progress but it actually works mostly.

commit 713c8e8ab3884b261376f2e720720b747a63bb3f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 28 09:47:12 2009 +0000

    Update to jquery-ui 1.6rc5 with Droppable

commit 97e4125956d8150b8239a6947327a1931dedf86b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 28 09:45:52 2009 +0000

    Add module name to log::success() calls

commit 6220db47b3e23c8d14cbecbdda34be83d47889ae
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 28 08:15:56 2009 +0000

    Simplify the recaptcha admin page.  It's not guaranteed to verify your
    recaptcha private key properly anymore, but it's more intuitive to
    configure in the admin UI.

commit 66fae635580890a2c25820b76f680baad11669af
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jan 28 04:22:59 2009 +0000

    Create a sendmail library to wrap the call to the system sendmail
    facility. Something quirky is happening in the first test, see comment
    in code, but I couldn't figure it out.  Left a @todo for now.

commit ca8e92376a4a0d9cbe072010e35e2e162b83dc5a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 27 21:57:41 2009 +0000

    Add gravatars to users

commit 9048a5afcaa7399082fe350e6d75bcdf012fcbc2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 27 21:54:22 2009 +0000

    Clean up indentation

commit a30c28b5fc2ff8152de61c2c3440d9a7131deab8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 27 08:21:54 2009 +0000

    Make the comment -> recaptcha binding happen via an event dispatch as
    opposed to a direct call.

commit 2a9d48f8bb0acb75a2d8ed30eb85ae79f7933afa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 27 07:47:55 2009 +0000

    Rename Admin_Themedetails -> Admin_Theme_Details

commit 47067c72ea1d282acf17b8731f826490fb1b6f53
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 27 07:30:28 2009 +0000

    Remove unused theme code left over from before virshu moved theme
    settings into Admin_Themedetails.

commit af56018f7c7335a3a98c1871a56991c08745dacb
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jan 26 16:16:00 2009 +0000

    Forgot to add the Form_Recaptcha class

commit bfb5c42124db39605c64f08837eb667be04979cc
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jan 26 16:12:57 2009 +0000

    Adding Recaptcha to the comment module.  Recaptcha integration consists of a Form_Recaptcha class derived from Form_Input that can be added to any class that requires Recaptcha verfication.

commit 57f5cdeb300448e1b5d811d1d319353d61698597
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Jan 25 21:17:04 2009 +0000

    Use url:site() on add user link, change user list from class to id to make it unique, changed gFirstRow to gHeaderRow to make more semantically meaningful. Fixed closing span that I broke after Bharat fixed it last night.

commit f315b9822d890e05a50ba5eae378d1b72353f496
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Jan 25 21:14:44 2009 +0000

    Annotate and number admin_default's style sheet sections. Changed gSelected from green to neutral light gray BG color. Various user admin style updates.

commit 24f7fcd9141b933035652bb218f144de0256336b
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Jan 25 21:11:57 2009 +0000

    Apply rounded corners to gBlocks in gAvailable, not gAvailable.

commit 573f787d63690834cb4b7e83d6c3c6dc0be005c8
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Jan 25 20:58:15 2009 +0000

    Set dialog width to 200px for dialog's whose content is less than 400px wide, like the login form.

commit be2b1b64005bf4be3e1984efc47c2df54053c8da
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Jan 25 20:28:07 2009 +0000

    Add opacity values for gUnavailable in IE with the filter attribute.

commit 09e7f63d73a70083a4ee62e4db65e458e608aeaa
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jan 25 17:34:27 2009 +0000

    Removed all the complex code to locate the forms.  Now the admin
    screen just has the public and private keys and if the public key is
    provided a recaptcha box shows up which is used to validate the public
    private key pair.

commit 4bb2c53c8ff99a879aaffb90338a92d56cf65e28
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jan 25 16:35:25 2009 +0000

    Added the ability to identify and present the defined forms to the
    adminstrator. The forms are presented as a checklist, I would have
    preferred a selection list, but Forge doesn't have one.  The generated
    html to contain the recaptcha challenge is defined as <ul> as that was
    the only way to force itto line up.

commit 1633001d7fddbb5fd5baa0a774041e001d8e7723
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 25 07:58:58 2009 +0000

    Update the album cover if necessary.

commit ffa1fa45f691160aa369e772b71618a547742625
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Jan 25 06:55:24 2009 +0000

    Admin theme style cleanup. Merged separate selected, available, unavailable into a single set of reusable classes. Applied alternating row bg colors. Removed inline CSS from admin views. Moved user admin css into admin_default theme style sheet.

commit a8233ed9795e42bb013a4d860fa063d8710d71eb
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jan 25 06:28:04 2009 +0000

    Undo the adding underscores to the id on forge generated forms

commit b0ad4e0222f573825e26bcaf73e08b80a3bc1f47
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 25 02:29:01 2009 +0000

    Fix all 'add' links and make them open in a dialog

commit 7c317fa6f2245bfa4b9cd39b2546cab4f653241b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 25 02:21:53 2009 +0000

    Fix indentation which helped me to find an extra </span>.  Simplified
    some of the logic.

commit 76d9e95fb6506c90372dc498d9e8733bca3005d5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 25 02:09:57 2009 +0000

    Fix selector after latest refactor, so that select_toolkit() is called again

commit 70c050d99531e8b2690554a20aec070e732c04cc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 25 01:44:26 2009 +0000

    Delete the rearrange module; it's been subsumed by the move controller

commit e3212b5456ca5d070ca9b74732cc6d0feb4ddced
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Sat Jan 24 20:29:24 2009 +0000

    Updated jquery and jeditable plugin to 1.3.1

commit 55cd2afde539842d54bd79fb7bdced37e5e53101
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sat Jan 24 20:06:13 2009 +0000

    Admin theme style cleanup. Merged separate selected, available, unavailable into a single set of reusable classes. Applied alternating row bg colors. Removed inline CSS from admin views. Moved user admin css into admin_default theme style sheet.

commit cbff78daa8a642e1800916f92e43202857c3b677
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jan 24 17:26:47 2009 +0000

    Supply a form id on all forms.  This id can be used by modules other
    than the originating module to provide additional functionality to the form.

commit eed57674f99621e5354a13543067e9556eb9c6d0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 24 05:14:44 2009 +0000

    Add move support.  Use the move icon in the quick pane.  You can't
    move an item into its own hierarchy, or into an album where you don't
    have edit permission.

commit 20cd5df3a374f035bddf71ddf2b75c533f05bfac
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sat Jan 24 01:08:46 2009 +0000

    Remove jquery.listen.js, we're not using it.

commit 3438bf7b3dd3a89f0104b6964008b699b769324e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jan 23 17:05:20 2009 +0000

    The adminstration portion of the recaptcha module.  I haven't figured out how to integrate it with the other module forms.

commit f75a803cd67283c24cc54a001163f9ee47210010
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 23 08:33:22 2009 +0000

    Simplify this code.  We know what the fields are, pull them by name so that we're clear about what actions we're taking.  Return the form itself on validation failure, coupled with de-ajaxifying the form makes it render properly as an error when you enter bogus data.

commit 0a025c984d44098bb053621fdb217185734b0c1a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 23 08:32:00 2009 +0000

    Minor tweaks

commit 4cd73a81ed0124ca036c6bf87bb113a0114630cc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 23 08:31:24 2009 +0000

    Don't ajaxify the theme details form; it should just be a regular form.

commit 94e356fc31d00acb67b5f62d3e0577bbcefe4cf4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 23 08:11:33 2009 +0000

    Take advantage of the new support for parentheses added in r19879 and
    fix a bug in viewable() that was AND'ing all view permissions together
    (which meant that you had to have *all* permissions to view an item,
    instead of just one).
    
    Also, add a "max" param to the thumb_tag() so that we can specify a
    max dimension for the thumbnail.  This will be used in the upcoming
    "move item" feature.

commit cd6629ad23ba9468002d063483e9c49b59e200aa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 23 08:07:37 2009 +0000

    Add support for parenthetical grouping to Database queries.  Turns out
    that this is something they kind of want for Kohana :-)
    
    Upstream ticket for this change: http://dev.kohanaphp.com/ticket/1070

commit 6941af664f72e41eb4aa6e628200c78a77e069ab
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Jan 23 06:19:19 2009 +0000

    Ajaxified user edit forms. They're populated, but don't submit yet.

commit 19811aec53f66c365fa84b04f6f5d158816059a6
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Jan 23 01:19:46 2009 +0000

    Minor formatting cleanup, removed unecessary line.

commit c33ac93b2b4c82c502898eb5f8afe3197c456af6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 22 19:51:52 2009 +0000

    Require mysqli_set_charset to use the mysqli extension

commit ebfc7d4f4753f65cdfdd98d91b8eaf9db7a9ed94
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 22 19:49:30 2009 +0000

    Don't allow the installer to run if PHP < 5.2.3

commit 1cc5d366576e16b4c70752afd8909cbd3ae0b70e
Author: Jakob Hilden <jhild@umich.edu>
Date:   Thu Jan 22 08:37:58 2009 +0000

    toggling of user edit panel works now.
    added groups to the admin_user view, so you will eventually be able to edit users, groups and memberships on one admin page.

commit ddb995eaf6570ea226875d4a8d75ca172ce0b667
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Thu Jan 22 06:35:55 2009 +0000

    Added new UI element, gPanel, which is a similar mechanism to gDialog. Panels are hidden inline elements that can be revealed within list items, tables cells, etc. Still need to add the toggle off and ajaxify content.

commit c4313b718b5e87adfd02744659d338fad5b6bb7a
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Thu Jan 22 05:05:20 2009 +0000

    CSS updates for form validation messages and icons. Don't show error, info, warning icons next to form fields, just messages.

commit 37340bd7f618b1d7e82f92f432823681e0253993
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Thu Jan 22 02:59:19 2009 +0000

    Theme details. Save values 2

commit cd86c4ee774f826f9548ddcd9b8f50db4462e68f
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Thu Jan 22 02:25:10 2009 +0000

    Theme details. Save values

commit 90666f7e04dc300480bb2972917b135294ff05f6
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Thu Jan 22 01:52:41 2009 +0000

    Theme details. Initial release

commit 7a1b986b5b6085ab345d00438d4e94ce4e7106bb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 21 21:37:57 2009 +0000

    Require 5.2.3

commit e58a9c509b0a864aee583dd14a018a773dbc63e4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 21 21:27:09 2009 +0000

    Update Kohana to r3918

commit a0456a9a47d35aa8a3776d6b5fea0e68706855d8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 21 08:14:18 2009 +0000

    Fix bug in add_to_group / remove_from_group where we were looking up users using Group_Model.

commit 6d99c29172a6b8a5e3ceb9df27b5fcb56337a0b2
Author: Jakob Hilden <jhild@umich.edu>
Date:   Tue Jan 20 22:16:25 2009 +0000

    totally incomplete version of user admin UI.

commit f2cfd9798ec8eed5251c557a70cac775482fdb84
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 20 09:40:14 2009 +0000

    Use xxx_test as the default database name.  This means that we no
    longer have to manually tweak database.php, yay!

commit 37f9845c436917579bd36d0d6bc42914ee18e277
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 20 09:10:49 2009 +0000

    Revert r19765 -- the installer works fine with it the way it is.

commit 0536debdf176f3b3a50a620e4dd1debb6dcabbc0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 20 08:59:08 2009 +0000

    Fix indentation.

commit b9e8ce4190a2fee59b2b111be1bc485e2cc5eb7f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 20 08:54:15 2009 +0000

    Quick edit now lets you set the album cover.

commit be1f9d6892bb766ccbc8b09b99c39eab373463d7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 20 08:25:21 2009 +0000

    fix indentation

commit 3ba056d7145ad20ed278256c10033bcb4b1a97c1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 20 07:11:14 2009 +0000

    Add a quick edit pane for albums, too.

commit 8384cac5e3f300c5ca13b0bf5a9c689c0b4202e9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 20 04:56:10 2009 +0000

    Deal gracefully with bad mysql connection and database information.

commit 0c6b36b086db5dfaa7c0e778296a36104fc2468d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 20 04:41:53 2009 +0000

    Fix preambles, delete unused file

commit 5e7717f778ed13e4ea4a6ba5bc9ffe5ffe6648ff
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 20 04:39:24 2009 +0000

    Move install.html.php into views, too

commit 66ee2f9618d1ac17507dddeef1b68eb804aa634a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 20 04:37:55 2009 +0000

    Move pages -> views for consistency, which simplifies the life of the File_Structure_Test

commit 401da12adbe7979074de9c35fd458ff36f393350
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 20 01:30:46 2009 +0000

    Undo r19818, an accidental submit

commit aaac2441241df5565b4fa1562065a387e56578e1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 20 01:29:33 2009 +0000

    Comment out the code that checks for form elements named "submit". It
    appears not to work correctly and is getting in the way.  Commenting
    it out here means that it'll get overwitten on the next update of this
    library (but that's ok).

commit a299f418e11d3033065caeb105caa17ed02bee87
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 20 01:15:20 2009 +0000

    Make VARPATH accessible to all.

commit e6530e9ea6759c3aba23f9431e481568664548c4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 20 01:03:22 2009 +0000

    Update README with new install instructions

commit 681197a265f1dd3873780fdcf0b5f1e8fa0150ab
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 20 00:54:02 2009 +0000

    Web based installer.  It's still got some rough edges, but you can now
    do a complete CLI or web based install.

commit d51955c8efa78d7f0a0ca8c138c2eebaf5ecb975
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 19 20:20:10 2009 +0000

    Pull the environment check out into a separate web page to simplify
    the CLI installer.  Put a link to it in the footer of every web
    install page.  Don't allow users to run it if Gallery 3 is already
    installed.

commit f5997a02e0b78b56b8c27ccb48092e4cdd9430d7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 19 19:05:22 2009 +0000

    Incremental additions to the web installer.  This is getting messy,
    going to pause here and do some refactoring.

commit bb73a2d896ba7686a4af8a0382c7bc8487e1ef16
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 19 18:16:25 2009 +0000

    Replace mysql_create_db with a mysql_query() call as recommended by the PHP manual.

commit ebd811415a29143db44cd6d32c5f2f0769dc8fc7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 19 09:19:07 2009 +0000

    Stub of the web based installer.

commit 31d6f18d56a694a258bad85301fd8b0648bf75ab
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 19 08:59:50 2009 +0000

    implement already_installed()

commit 7b4502ac6b7932e4e21939812e94816900dc10d4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 19 08:51:26 2009 +0000

    setup_varpath() -> setup_var()

commit 7f9a76b4b2f262e8b351f4f9351832c081525304
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 19 08:18:12 2009 +0000

    Only run the installer from the CLI for now

commit ff19e4cfe81a832ddd39cc868d3a5d23e7831eba
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 19 07:48:48 2009 +0000

    Remove the prefix arg, we don't support it yet.

commit 7c6ceae4b5890842982c5de80e6e20d145c23454
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 19 07:33:40 2009 +0000

    mysql_create_db() might not exist

commit fc8cf562f5d7d4f0514512703f017f2979a6dea6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 19 07:26:25 2009 +0000

    Fix up various little things to get File_Structure_Test to pass.

commit 5e94456ce99aef158d8c35b738bb7fb7d29c6e5b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 19 06:12:49 2009 +0000

    Make get_add_block_form() static.

commit 0448a5b32cd69dfdced339cb7bad0cbc5b940c53
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 19 06:02:53 2009 +0000

    Flush the access_intent cache after ALTER TABLE queries, fixes a
    problem where the install.sql had the wrong view permissions.

commit d97308ffe70005a0d3cb0f0b7e96d82375f79e06
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 19 05:24:47 2009 +0000

    Put the <a> element inside the internationalized text.

commit 0f8685fc9f1adbfcc865667d56af4ef6d4c83efd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 19 05:21:37 2009 +0000

    Use mysqli_init() instead of mysqli() as our detector.

commit 2126ac70024f343c28282a2d97f6755e58248a68
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 19 05:18:43 2009 +0000

    Remove -m flag.

commit c136a2e84aade9125b7df95607949834fc02b952
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 19 05:16:55 2009 +0000

    Packager now does a clean reinstall of just the packages we want, then
    rebuilds the install.sql and init_var.php files accordingly.

commit 5f1165698b6f1f94f43571283d9644394ec03315
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 19 05:12:28 2009 +0000

    Change ORM and the MySql driver to clear static caches using
    clear_cache().
    
    This supercedes the TEST_MODE checks.
    
    Upstream ticket: http://dev.kohanaphp.com/ticket/1062

commit 46d010e89d280d391935648f1f713fc784042050
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 19 03:31:13 2009 +0000

    Simplification pass over the installer:
    - Flattened the directory structure
    - Greatly simplified structure in installer; it now only reports environmental
      checks that fail.  Simplified code that prints exceptions.  Use only mysql
      calls for the installer, but select mysqli automatically if it's available.
      Drop the response file; that's easily replicated with flag support
    - Create a random password for the admin user
    - Delete unused controllers
    - Invert the form of the database config template to be mostly non-PHP
      with just a few PHP calls

commit ad71e4263ef61efa0720ea6f08d6a9c582684c9b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 19 00:16:52 2009 +0000

    Replace exec("mysql") call with directy mysql() calls.

commit 631a7883ee355e5c01160eb5559f3912b4c604f8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 19 00:14:28 2009 +0000

    Get rid of the driver libaries.  Use mysql calls directly in the
    installer for now.  If we detect mysqli, we can always use that as a
    driver instead, but we don't require it for the installer.

commit becc2122094383af0fd1fdc4e353527f11ef7bc7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 18 23:59:19 2009 +0000

    Move installer.php out of helpers and get rid of helpers.

commit 248ce3ebce0d5a38271b7b8a767a7ee12bec4329
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 18 23:55:35 2009 +0000

    Remove access rights check; fix a bug in determining the path to var/database.php

commit 1cc7b3f4be8d13a24218be1b05454f43cfc0d444
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 18 23:27:26 2009 +0000

    Don't force validation anymore; we're clearing the form properly in
    the controller on successful add.

commit b39be71a4e8c0ccd24e232fa49daca87ae29a797
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 18 23:26:53 2009 +0000

    We don't need to reset the form anymore, since it's reset on the server side.

commit f0eb8cb6416c7eb1586dbaa671569d7ca3355958
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 18 23:25:42 2009 +0000

    Reset the form before sending it back on success so that we clear the values.

commit 9275742ef96cb2a0a6f9ec9240aaf4567a236b03
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jan 18 23:23:12 2009 +0000

    Change the event handlers for maintaining the search index to update
    the index when items change.

commit 72e7d50176a61eb5bb866ebe64607de6e23d21f2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jan 18 18:13:54 2009 +0000

    Remove the install.php file and move its contents into
    installer::command_line method. Create an index.php that is can be
    used to install Gallery3 from the web or command line.  At this point
    all that works is the command line installer and if the web installer
    tries to run, it is redirected to the album main page.

commit dd5be1ece03427f9ad7dada7891df8791ab7b2e1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jan 18 16:55:55 2009 +0000

    Remove blank line at the top of the file

commit 883db822f10d6b03a194583f25dfa1a6b8bf7abe
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 18 09:08:51 2009 +0000

    Update the index right away if there are only < 10 items

commit 8ec0e8471f424ead77a335277d86706c4b6d3add
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 18 09:06:46 2009 +0000

    Drag and drop in the admin dashboard now saves the location.
    * Make block_adder a real block
    * Suppress the "close" link on block_adder
    * Move the drag/drop JS into the core code out of the admin theme

commit 9380e306f4e40da8f6d9a4e9cbe7231b7738ed60
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jan 18 08:10:58 2009 +0000

    Add a new line charater to the error message when the installer is
    being run a 2nd time after the a successful installation.

commit f0e3a220d931d3e2684d8142cf61287df646d8d5
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jan 18 08:06:06 2009 +0000

    Remove the packaging tab from the scaffolding and move the create
    install.sql to the action tab

commit 4bb0c93bf970f9634be1846a9c58f6634cad9e09
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jan 18 07:38:10 2009 +0000

    Changes to the installer code to use init_var.php and install.sql files

commit 119cf7e1482960cabedad7716e7e2967849bdcd0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jan 18 07:30:22 2009 +0000

    Correct the mkdir for the sub directories in var

commit 4c13987e9266aa170cb7b2882d5f8579f262b3bb
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jan 18 07:18:41 2009 +0000

    Change the database unload to unload all the tables instead of fooling
    around with individual tables.

commit 7b68ca9946772fdb8fa2db756e934cc7883ea52d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 18 06:55:04 2009 +0000

    Refactor dashboard -> block_manager since it'll manage blocks site
    wide, not just in the dashboard.

commit 3d1ea2904d982422ce24c43b25d0d4bca6f29aa3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 18 05:01:00 2009 +0000

    Rename theme callback helpers from xxx_block to xxx_theme to make room
    for us to rename the dashboard helper to be a block helper since
    sidebar blocks are not just in the dashboard.

commit 245cb11c5855d023d9bd4f7e693f0eafaeb7deb7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jan 18 03:12:00 2009 +0000

    Clean up the var directory creation script

commit b60e790e905f754dfa3ad603cb15a5838aeca4ab
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jan 18 01:06:17 2009 +0000

    Here's the rest of the change, new tool and forgot to add some files :-)

commit 465735a25ced20b4442c033a081ec308fb1b1ad3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jan 18 01:05:18 2009 +0000

commit f47fa55891102201b09ca2deaa6affe583147d64
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jan 18 01:03:53 2009 +0000

    Change the scaffolding to generate 2 files init_var.php which will
    initialize the var directory and the install.sql.  Still more code
    than bharat would like, but the end result should be where we want to go.

commit d0f307cbcdc3538ca5b46bb1bdeeb378c727556f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jan 17 17:36:21 2009 +0000

    The Packager now copies all the directories properly, ignoring all the
    .svn directories.  In addition the internal directory structure is
    consistent with a Gallery3 install with out any source system names.

commit 2b23f0a9e2aba195fdf0bfc3984570b00220dd13
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jan 17 08:05:51 2009 +0000

    We can now build ar tar.gz file with the gallery installation.  Still
    to be done is the get the internal paths right and get rid of the .svn
    that are still being included... its a wee bit large @ 35mb.  Also
    need to write the code to unpack and do the actual install

commit 91a61dcc6d6e673b8f9eb2051de3ecd49eb74cd0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jan 17 06:17:12 2009 +0000

    Generate a single sql install file.

commit f8d95f28cf7d0023aa64e559ce62bd4f5244f11f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jan 17 06:00:47 2009 +0000

    Change the scaffolding packaging to set auot-render to false so the
    entire screen is not returned

commit 58402f6fbfebd153bcbd6b67a8875141443d93d8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 17 05:27:15 2009 +0000

    Fix typo.. rebuild_index -> update_index

commit ccff396fae85c101e53c04aacf861aede465f766
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 17 05:22:07 2009 +0000

    Fix a silly bug in item_created()

commit b13f7d74607c5910314f7f3ce203adcb24a646e6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 17 04:01:39 2009 +0000

    Fix indentation

commit d568a1e9fd63c97eb86cd84a51bb6770747ec37c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 17 00:52:50 2009 +0000

    Implement relevance ranked boolean searching on a full text index of
    item and comment data.  Whew!
    
    It's not pretty yet.  And you have to manually update the index
    currently in admin/maintenance.  But it works.

commit 91be7a38f883cd008d370f81ff68949de68eafbf
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 17 00:39:38 2009 +0000

    Clear the "akismet is not configured" message on uninstall.

commit 71db2ca32a5393efcedcd3a5e4a541174de71c40
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jan 16 23:58:48 2009 +0000

    Add a scaffolding tab that allows packaging up the installation for installation.  At the moment, it just creates an *.sql table for each defined table.  I still need to zip this and put some install code around it so it is self installing.  The ajax call will build the tables, but it doesn't return the resilt correctly.  What it does is return my json response(expected) and the entire welcome.html page as well (unexpected) and i'm havinf trouble figuring out why. Something stupid i bet

commit a7b6409b7486132f0f5f923340f1af6d6bd7dfcd
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Jan 16 07:51:31 2009 +0000

    Reverted jQuery back to 1.2.6, UI back to RC4. Need to test more thoroughly next time. Sorry.

commit 780682c04a2029411ad04899ab69c35bf536f762
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Jan 16 07:39:42 2009 +0000

    Updated to jQuery UI 1.6rc5 (requires jQuery 1.3 now)

commit 2b0b21d76dcd1c0e3acc87b26aa9eecddf52d01d
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Jan 16 07:38:19 2009 +0000

    Updated to jQuery 1.3. Change needs to be pushed to vendor branch.

commit ce70ab37856eb13f44c9cfc147e91a5c080c0e68
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Jan 16 07:22:30 2009 +0000

    Comment and code format fixes

commit e749e6cf3e158e7c4cbaa50fc9e9b62d3db159d7
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Jan 16 06:45:25 2009 +0000

    Added drop target style, other minor admin dashboard style updates.

commit 622da5f3cdf7ccb979334e42e115f0538c8dd00b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 16 05:01:22 2009 +0000

    Rename Task to Task_Definition to avoid confusion with Task_Model.
    Order the finished tasks by update time in the task list.

commit 72fa5736ff611407c995aac19b06f6bf8c2f8a31
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 16 04:49:56 2009 +0000

    Rename Change xxx_task::available() to xxx_task::available_tasks()
    Fix a bug in admin_maintenance.html.php where we were only showing the first task

commit b2e37f20c73f7f29bafca9bcf95c1e59902a50ee
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 16 04:35:35 2009 +0000

    Move graphics::rebuild_dirty_images to core_task::rebuild_dirty_images

commit 2352dd162aacb6222aff7523aef4169223fe37a0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 16 04:31:41 2009 +0000

    Break task definitions out into the <module>_task helper and create a
    Task library class as a data structure to hold task definitions.

commit 2920640c2b0a4c2c1e5c47aac285ebec49cd6241
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 16 04:06:03 2009 +0000

    Fix validation when adding new comments.
    Fire off the appropriate item_related_update events as appropriate.

commit ecf94c74d8f9712c5bd09058cf1ff14bec32ac98
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 16 03:54:24 2009 +0000

    Update event handlers to reflect new item event names

commit 23b0ee3628ff4001da1d4635f403622acb6baf83
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 16 03:50:51 2009 +0000

    Don't try to check comments if Akismet lacks an API key

commit ec272821bbce1f32957e2aa808e4c25d9d177d16
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 16 01:07:32 2009 +0000

    Don't show breadcrumb if there are no parents, not just on pages that aren't tags

commit 3e5ef37ee8817232556ad15ba48c1bd940101e25
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Jan 16 00:55:36 2009 +0000

    Make admin dashboard blocks draggable. Updated order and position not yet saved.

commit e4a9b19bf9997f46203fbc18c696c63703a72625
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Jan 15 10:02:41 2009 +0000

    Changing t() placeholder syntax from {{replace_me}} to %replace_me.

commit e53916dd0622e3db61d6a05ad0fe69e8d7c7f11a
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Jan 15 09:30:15 2009 +0000

    Simplifying the way t() is called. Refactoring localization function t($message, $options=array()) into 2 separate functions:
    - the new t($message, $options=array()) is for simple strings, optionally with placeholder interpolation.
    - t2($singular, $plural, $count, $options=array()) is for plurals.

commit 0bbde9e059c51fe61c92d23f9f6a4518b2fb1a8c
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Thu Jan 15 06:19:26 2009 +0000

    Added gQuick to album_top, started implementation, but incomplete so far. Need edit album methods added to the quick controller.

commit e7d7396f7ad433bae59dd8460307b4dfa9ab33db
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Thu Jan 15 04:32:34 2009 +0000

    Minor display updates for quick edit menu.

commit 5bfde5ceb863a399bf29ac30c6d4357fe031d7dc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 15 02:53:13 2009 +0000

    Rename 'xxx_changed' events to 'xxx_updated'

commit 034f30190eef5fad22c847e99787b33fac5178ab
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 15 02:52:42 2009 +0000

    Rename 'xxx_changed' events to 'xxx_updated'

commit ad4f495e56d1b544b2f4278b41572cdd53fe300f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 15 02:51:16 2009 +0000

    Rename events
      album_created, photo_created  -> item_created
      album_updated, photo_updated  -> item_updated

commit 73c52c7140e0b867d02b658be396b91396c6713e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 15 02:15:10 2009 +0000

    whitespace fix.

commit 2d7ab6f4dac14a3bbf6718edfaf999e6ad58cf98
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 14 07:21:35 2009 +0000

    Create Item_Model::thumb_tag() and Item_Model::resize_tag() to provide
    an abstraction for when we add movie support.

commit c383b2fc35bbe1864acb79b784b4cd3a2f82a95e
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Wed Jan 14 06:36:47 2009 +0000

    Visually attach the quick edit menu to the thumbnail container. Added more edit options (move, select as album cover, delete, additional options).
    
    Need to decide which belong in the bar and which belong in a dropdown menu under "options."

commit 2a7d4b43653d8d340bae185c48dde4de4f8741be
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 14 05:07:52 2009 +0000

    Remove the redirect to the installer; if we don't have a var dir this results in an infinite redirect.  Let's put this back in when the installer works.

commit 4dbb14a0a89c8bcaee4485af70910f913bc20422
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 14 04:30:19 2009 +0000

    define $arguments so that we don't have an error.

commit 84ea7eefdc128f2b5951eb64b7aeaafe8892321f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 14 04:28:19 2009 +0000

    Delete DIRECTORY_SEPARATOR fixups.  We're not on Windows.

commit 9f0c33fdbd60b8c3c7cc6f1a5f177ff18f100f7a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 14 04:26:03 2009 +0000

    priviledge -> privilege

commit 891bcd231bad471e1f2d98fab00bbfebb1d436ae
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 14 04:14:35 2009 +0000

    dir -> die

commit f3ba69c1d67c425ffa180d082a373e5cce0c86ce
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 14 04:12:02 2009 +0000

    Make sure that helper functions are all static.  Add new
    File_Structure_Test to make sure we don't regress.
    
    According to the PHP docs, the "public" keyword is implied on static
    functions, so remove it.  Also, require private static functions to
    start with an _.
    
    http://php.net/manual/en/language.oop5.visibility.php

commit 02af2d8b7639fdc18fba3d69a4ca0a3f5c92b948
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jan 14 03:38:51 2009 +0000

    The installer.  At this point, the core installs, the user module defines groups and users, but dies when attempting to create default permissions

commit 383ec9c22cde58a15d48ddad18377d4f99348e91
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jan 14 03:22:17 2009 +0000

    Initialize the model_cache:: as an array and use sub arrays to maintain the cache

commit 7305026fd8a914bd91df9119d995c732894af1b6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jan 14 02:34:39 2009 +0000

    make model_cache::get() a static function

commit ca36a04f28c1f8fad475617dd36e1c2861fdbaf1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 14 01:20:42 2009 +0000

    Fix preamble

commit c9e6b1ef4474f02e98f48143277620e72105f8bb
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jan 14 00:22:17 2009 +0000

    Correct the initial value get active blocks

commit 7043d17040a78c50f61135eb7cf223f921321d8f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Jan 14 00:09:33 2009 +0000

    Since module_Core is static the methods, get_var, set_var, etc should be static

commit 1fb85dfac59569e6c346bcfae6d6b314d5d340b3
Author: Chris Kelly <ckdake@ckdake.com>
Date:   Tue Jan 13 14:58:02 2009 +0000

    moved graphics toolkit logo images to g3. approval to redistribute from each project is in my email archives if this comes up in the future

commit 074cbd860ddaaa1101278ad0cf01935eb791b124
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 13 11:00:46 2009 +0000

    Call 'site' themes 'Gallery' themes since site means less to users.  Fix swapped messages

commit 38ddf559f0f52095c50710268a9890199b73e648
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 13 10:57:38 2009 +0000

    Put up a nice message if there are no other themes available to
    choose.

commit 35a529cd86a453b8d46ef9933b12e95021926dba
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 13 10:53:06 2009 +0000

    Change admin/themes to show both styles of themes side by side.  This
    eliminates the menu, which is kind of clunky.
    
    While I'm at it, let's call the "regular" themes a "site theme" so we
    have "site" and "admin" themes.

commit 5f17ae4f02c22a42c4de53831c8c23d22c869820
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Tue Jan 13 06:20:35 2009 +0000

    Update quick edit markup, styles, js. One step towards jquery ui theme.

commit 2fb5a0efb16978fb57eb8cc57ce392c4ba191019
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 13 05:12:46 2009 +0000

    fix up the selected theme, too.

commit 16bebdca068eebedb1eea71e04d986936561e8fc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 13 04:56:29 2009 +0000

    Make the admin/graphics UI mimic admin/themes with a single selected
    toolkit above, and other available ones below.

commit ac59df23958d206956e92b4761c70214f8ffee8e
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Tue Jan 13 04:27:35 2009 +0000

    Fixed vertical alignment of thumbs.

commit 03e31ed5cc0bccb4b2e518089884cd75f1f5c242
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 13 04:10:50 2009 +0000

    Fix indentation.

commit a17b137f958e3006c0c6a1e0e44a972cd45025d7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 13 04:09:29 2009 +0000

    Update translations to put anchors directly into the translation.

commit 1341d13ca50d109284cea837de6d1e68e01ede55
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 13 04:02:41 2009 +0000

    Reverse the last change; forgot that {$key} is treated specially
    inside a string.  We could do "{{{$key}}}" but that's misleading.

commit 174ea7cc9adf4c482a7881d1701131a4d5a3f7df
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 13 03:53:31 2009 +0000

    Use variable interpolation to reduce code size

commit fb73cc7bc4455332119f045f7d13a3750974e184
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jan 13 01:18:54 2009 +0000

    Delete Mysql_Driver.php as it is no longer used

commit 1fb620ff87e905ba09ee48f5ec004621361a5448
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 13 01:14:31 2009 +0000

    Redirect to the installer if we don't have a var dir.  This way the
    installer gets a fresh request and doesn't carry anything forward from
    the production environment.

commit ff6791f57652aecfe5d3b43848b0a63f4307fa35
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 13 01:05:11 2009 +0000

    Models should be named in adjective_noun form to make pluralizatoin
    more intuitive.
    
    Renamed Translations_Incoming to Incoming_Translation to suit.

commit 4adff591692247debc4089e3a2f1e8fda735d502
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 13 01:00:40 2009 +0000

    Fix preambles

commit 9be9c5a3d1ba2ca95a2519bf989008cbd6bc87fc
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Jan 12 23:54:52 2009 +0000

    Updated vertical alignment of thumbnails.

commit c5f77510a77f42bf0a66d5d79353dbf040d41515
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 12 08:51:54 2009 +0000

    Refactor dashboard block handling out into a dashboard helper so that
    module installers don't have to know the grotty details of how it works.

commit bc421a615ab89cf5416af12173471235cdf5d297
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 12 08:26:38 2009 +0000

    Implement deleting dashboard blocks.
    
    * Refactor blocks so that they have a separate id vs css_id.  This way
      we can have a unique identifier for each visual block.
    
    * Store blocks with a random id as their unique identifier
    
    * Add Admin_Dashboard::remove_block() and modify
      themes/admin_default/views/block.html.php to call it when you click the
      remove box.

commit ce6d7b8d3799cf5996a7c4fd512bf4efb85d1c5b
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Jan 12 08:24:23 2009 +0000

    Keep CSS selector attribute definitions alphabetized.

commit 8a79d328edc993228430de2705c5470747feaebd
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Jan 12 08:20:39 2009 +0000

    Minor markup cleanup.

commit 42e635bff0948e3a8e7dc0003d17e709b7db2ce3
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Jan 12 07:57:13 2009 +0000

    Theme admin refinement. Make more room to show the preview by enlarging the iframe and removing the heading above it.

commit f4d5681faa0f17a402f387b2b4ea201e9b2f9615
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 12 07:54:13 2009 +0000

    Update to Forge r172

commit ae73ef3d5743b2afba65db7d89e78b135d8c9090
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 12 07:50:04 2009 +0000

    Updated for new Form_Submit API.
    
    OLD:
      $form->submit("Foo")  -->  <input type="submit" value="Foo">
    
    New:
      $form->submit("foo_button")->("Foo") --> <input type="submit" name="foo_button" value="Foo">
    
    Mostly we don't care what the button is so we leave the name blank.

commit b19729435cd918e03e1bd6fbb91f7281bf3e5873
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 12 07:39:53 2009 +0000

    Dashboard blocks are now data driven, and you can add new blocks to
    both the sidebar and the center content area from a dropdown at the
    top of the dashboard sidebar.

commit ef303bde3e853a01e45b7734698210a40a7be812
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 12 07:39:02 2009 +0000

    Gallery version now lives in a variable

commit 66abb6624ecc6e82325629581db16d1221be4ba2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 12 07:37:34 2009 +0000

    Update to Forge r171

commit a1c70d4a680e746af1798968d2fcdde2f5e44723
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Jan 12 07:31:40 2009 +0000

    Remove gDraggable, we won't be using it. jQuery UI theme will handle this.

commit af992a97392f810b375f4e5a370e04e7e51617a5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 12 07:17:24 2009 +0000

    Update forge to r170

commit 73d97f6c74b12b448e52966c0f5c90d8fd6cbaf1
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Jan 12 06:55:09 2009 +0000

    Restored .understate for use to visually mute type (gray out).

commit e02c5759bba275c273ab16d8923bff3ea6f24663
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jan 12 05:12:17 2009 +0000

    Add a check to (e|i)nsure that the database provided is empty

commit d880c0b7e204d3b232bfc85919f80bade8c638d9
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Jan 12 04:24:53 2009 +0000

    If there's sidebar content, use yui-t5. If none, yui-t7.

commit 11fb04cddecff9d91e047dea8ad9fbb02bd5cc78
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 12 04:04:55 2009 +0000

    Only the admin dashboard has a sidebar now.
    
    admin.html.php looks for $sidebar and renders the page appropriately
    if one exists.  But only admin_dashboard has one currently.

commit 5fdcdc0e682f3ae42652bddea274e824e2a51974
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Jan 12 03:49:19 2009 +0000

    Applied jquery ui dialog titlebar to dashboard blocks to add a close button. It's not semantically "nice" but it works for now.

commit e4f340b1c78f6857d7e48d11e29f2bfbd7ce66fd
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Jan 12 03:05:31 2009 +0000

    Removed tabs. We're not using it now.

commit ea3785c12697f168aa467133599ae804906705bb
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jan 12 02:33:53 2009 +0000

    Add a check that the installation directory is writable

commit df44265401f7c45ba833335e7b00d477d3e63797
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Jan 12 01:34:36 2009 +0000

    Check to insure that the supplied user had the required permissions

commit 59202b943e4e0a6d29fdda922e670cc4e5f8beb7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 12 00:42:14 2009 +0000

    Make the logos link back to the main album page for easy navigation.

commit e7f6befaa49974a02ec64928df377cd9b44899cc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 12 00:39:39 2009 +0000

    Fix spelling of 'separator', which incidentally matches what's in the CSS

commit fd315c09233aaf172f6ed0bcd41d02ff47d72e6a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 12 00:36:56 2009 +0000

    Fix spelling of 'resizable' and remove a duplicate.

commit 48f2c01e72e9d7f6346e8decf5c50ef870e89bc5
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Jan 12 00:27:54 2009 +0000

    Missed an image.

commit 88246de0ff0303c2edecb085cd643fb9799e7f23
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Jan 12 00:22:55 2009 +0000

    Add all the files jquery ui needs, including css for each widget. ui.all.css includes calls to the widget css we're currently using. Add new widget css here.

commit 65e28bc678b1d9fc0b6af4cb848cfde338b2f01c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jan 11 23:08:23 2009 +0000

    Moving slowly forward on the batch installer. It now connects to the database and checks that the supplied database is defined.

commit 70b96082751b381ce31d858f9806dda2e63a9588
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 11 22:56:52 2009 +0000

    Fix up the colors and background images for rows in gAdminMaintenance.

commit eccf2bf83ed18c51888c072cea0ec522ef1fda4a
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Jan 11 22:49:54 2009 +0000

    Moved admin css that needs a home to admin theme. Removed bg texture from default theme's site menu and buttons. Leave 'em with a flat color for now.

commit 66fe884cb56e31a4b7c08cfe58ac787b92b6829f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 11 22:47:54 2009 +0000

    Use the author's avatar, not the logged in user's one.

commit 6d4cb95ae33e1398ae1cf4043f554c2b0f2986c7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 11 22:33:42 2009 +0000

    Disable Kohana's new column caching when we're in TEST_MODE

commit 39835a50277965f77322d5af30123100d2e1b694
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 11 22:32:36 2009 +0000

    Update Kohana to r3890

commit b98f498ed652f10ffc6dbdd1f7305ff9ec262f74
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 11 22:14:44 2009 +0000

    Change admin/graphics to avoid using radio buttons.  Instead, when you
    hover over a toolkit it changes color and your cursor becomes a
    pointer.  Clicking changes the toolkit.

commit 46b976819db700343289dc5f40dea3ac4f482458
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 11 21:36:24 2009 +0000

    Deleted unused MY_Form_Radio

commit 713ef05b0fb0d68e9856d306fbfd2f9960043d02
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 11 21:35:17 2009 +0000

    Site menu restructure:
    * Add 'Scaffold' link to make it more obvious what's going on there
    * 'Home' link now goes to albums/1
    * 'Admin' is now pushed to the far right.

commit d387b31d186be7e919e2ca3c76166234efe9c9ab
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 11 18:58:00 2009 +0000

    Merge the site admin menu in under the regular Admin menu.

commit c14387011ede86f3765806e78f3444f1d6e4a9a5
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jan 11 07:33:57 2009 +0000

    add a -i parameter that allows the specification of the database type (defaults: mysqli)

commit 8c8bdf70251daefbb1084e49254593362494e3c6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jan 11 07:30:26 2009 +0000

    allow modules to be installed to be specified as command line option or in the response file

commit 6fdca531c646e8f6d9798b96464da30c92276be8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jan 11 07:14:19 2009 +0000

    allow modules to be installed to be specified as command line option or in the response file

commit 3df78891287bd4cd5e142c51665c4494c743db11
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Jan 11 05:36:31 2009 +0000

    Increase length for user-agent and accept fields in comments table.
    And truncate strings before passing them to MySQL.

commit 6510fae66114ec4f050e31990aab557762ef7ad7
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Jan 11 05:28:48 2009 +0000

    Remove path normalization, the current normalization code didn't go far enough anyway.

commit 5e0d0f546a6cdfe5828cc8ccdacec6608b7b9ae7
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Jan 11 05:19:09 2009 +0000

    MySQL strict fix for Item_Model test. Set all fields that have no default value.

commit 4757126acc3fe822daed205fe86e76a8c9748b60
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Jan 11 05:09:06 2009 +0000

    Fix ORM MPTT tests for MySQL strict mode (can't omit Iten type in inserts, it doesn't have a default value).

commit bdf2e9f6988d7a9fc3988d588ccdbef7eb994498
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Jan 11 04:45:11 2009 +0000

    Fix Aksimet tests for MySQL strict mode. Not sure how this would pass on linux, since the given value for server_remote_port is longer than 16 chars, the actual length of the DB field.
    
    Removed the leading "server_" part of the test values to ensure that all values are small enough to be stored in the DB.

commit bf67d7cabc7c4097c12133384e6bd6e3aedc608e
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Jan 11 03:53:29 2009 +0000

    Fix User_Group tests for MySQL strict mode (can't omit full_name and password in inserts due to missing default values).

commit 9406e80c908ce82755a3cacc24413d4d7df7f0d2
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Sun Jan 11 03:28:57 2009 +0000

    Fix Access_Helper tests for MySQL strict mode (can't omit Iten type in inserts, it doesn't have a default value).

commit 2bc890a4f0c5fece128bac735e01e3ca1dd852a5
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Jan 11 03:02:56 2009 +0000

    Don't use short tags in installer until we know its same to do so

commit 431a831f48ed401e2e87e5f62399771ae7cb5d89
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 11 02:58:32 2009 +0000

    Update tests to match the way that we store server variables in the
    comment.  Get rid of comment::update tests since, comment::update is
    gone.
    
    Found a bug in comment::create() in the process.. yay unit tests!

commit a53b2d85c743f0b159fc6f0837357a7ece6e94b5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 11 02:40:09 2009 +0000

    Set all the server_xxx values to known quanities, and demonstrate that
    they're actually getting sent to Akismet.  It looks like this code was
    broken in the past, since it wasn't sending any of this extra info.

commit 01666c5579b3de40981d9a06a627166e3bddedf6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 11 02:27:00 2009 +0000

    Fix all file structure issues (tabs, bad preambles, etc).
    
    Note: installer/install.php is now on the "direct access" list.

commit afb90768b4c61ad7c0fd10dd04bf9bfe9458d4af
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 11 02:06:36 2009 +0000

    Remove stray blank line, convert single to double quotes.

commit 6c2aef1b4aafef6c18f127e7c825b138ee89f01b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 11 02:03:42 2009 +0000

    Fix windows-style line endings.

commit 7f52500cf9dffa5658e9a675eeead0192d5b910a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 11 02:02:43 2009 +0000

    Allow .txt.php views

commit 253c56608eeba50a8e738e6024f833104dda7231
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 11 01:58:46 2009 +0000

    Update setup to match new comment::create() API

commit 4312563e8b2f24dcef767849e00013aaa2b52c65
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 11 01:57:41 2009 +0000

    Reset module_names / modules early in load_modules() so that unit test framework can dump the loaded modules after switching databases even if the modules table doesn't exist yet

commit 0033887ba858659b5e360baa69031055c98974f7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 11 00:24:39 2009 +0000

    Rework the way we do theme selection.  Show the currently active theme
    and then thumbnails for all the other available themes.  If you select
    one of the other available themes, it gives you a preview pane where
    you can look at either the main page or the site admin page with the
    new theme, then choose to activate it if you like it.

commit c35f110686996f40b2e8d361689121a928a2d9c0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 11 00:19:44 2009 +0000

    Improve name/descriptions

commit 2f9eae867c8dcd995608da63f08f8f4a8c01efbf
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 11 00:19:00 2009 +0000

    Let admins override the theme with a query param

commit 120ad3a2cdb3e4221b8c5ee0d323168d39879a07
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 11 00:18:29 2009 +0000

    Pull the dialog title from the first <h1> we find, fall back to the first <fieldset> <legend>

commit 66d5db01d5570ae9d3006ad9bea84a37d445a192
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sat Jan 10 23:18:32 2009 +0000

    Replace default theme screenshot with the admin theme.

commit aed5a4c7882fb612117a3fb57223b7447db1378f
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sat Jan 10 22:39:24 2009 +0000

commit 5ee03eb9c80188a6f4397eba14e1ce5e23c49cac
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Sat Jan 10 22:36:06 2009 +0000

    Save individual theme values

commit 705c55fb798c97dfb398cad23670fce2f5e16fb4
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Sat Jan 10 22:04:49 2009 +0000

    Submit theme values

commit 144f8c342b35b8940b93e5934f0c149266f5c313
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jan 10 22:00:14 2009 +0000

    Change the format of the internal error messages and pretty print the installation parameters

commit 15c25d85ece4fa53d5b3ec35e3e564133a328648
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sat Jan 10 21:50:35 2009 +0000

    Switch the pager to use themeroller's icon sprites. I applied jquery ui css classes to newly added span classes in the pager templates directly, will likely move these out and apply through ui.init.js later.

commit 4c330e5a99567e7ce44353a9bba111c915752f1e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Jan 10 20:47:38 2009 +0000

    Continuing baby steps to a batch installer.  At this point you can run the installer and it will parse the command line arguments.
    currently the following arguments are accepted -h(database host) -u(database user) -p(database password) -d(database name) -t(table prefex) or -f(a response file).
    
    The order of processing, defaults are set. if the response file is provided, the contained values are merged and finally any command line parameters are merged.

commit e45bbf57e88b06bf9783ffc47a952a3dee5052ec
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sat Jan 10 19:45:39 2009 +0000

    Deleted icons used before jquery ui 1.6rc4 update. Renamed breadcrumb seperator to just seperator.

commit 72e9d20f3c5d4945b4e3830ad4471a1c1d9998ac
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Sat Jan 10 19:41:43 2009 +0000

    Display theme details

commit e82afcebfa3c8894debde0bffa8f633b664c149a
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sat Jan 10 19:33:01 2009 +0000

    Site message placement and style adjustments.

commit 3385105842c075bb4695752f504f2b946e6c506c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 10 19:19:36 2009 +0000

    Markup cleanup.  It's more semantic now, but it doesn't look quite as nice (yet).

commit 82848bd3a92c4d58f4f7d1a99fb5257b3d242920
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sat Jan 10 19:13:00 2009 +0000

    HTML format cleanup

commit a2dbbf32abd793a0dffc20e71e558b5abdd81bec
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 10 19:10:52 2009 +0000

    style cleanup.

commit dd5c70fc39988c1b464c3131cc2799ee8c00b91e
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sat Jan 10 18:34:25 2009 +0000

    Make the admin theme header fully visible at 1024px wide. Revert to larger Gallery logo.

commit 44bfc1c6a42838732669e59f686069491b583fe2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 10 11:25:33 2009 +0000

    Auto-delete 7-day old spam/deleted comments.

commit 74766e5b823faca35fa57467bd8e19d048c1a8fb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 10 11:11:24 2009 +0000

    Create a 'recently deleted' queue

commit cc6d57e8c9e81665a548f911119f52811dcd7339
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sat Jan 10 08:15:55 2009 +0000

    Removed jquery ui localization folder. Didn't mean to check it in

commit 006f18dc7ac4c40e1ca48de5bc4d8bb492bbc454
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Sat Jan 10 08:00:43 2009 +0000

    Split themes into two tabs for regular and admin themes

commit 9d584a528b8aa6b825a489ddf4bb9ecd50c54016
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 10 07:55:16 2009 +0000

    Update the queue counts in the menu list whenever we
    approve/unapprove/spam a comment.

commit 03a5f08258b10141b01b8e5998ca85655f0b8f68
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Sat Jan 10 07:32:25 2009 +0000

    Updated jquery-ui to include tabs

commit ff5722bef014fc8a1a1f61fe7b180190fd65b45d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 10 07:24:04 2009 +0000

    Add missing semicolon

commit 7569b39802a855da92ebc1fd78a6343e7715746b
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sat Jan 10 06:25:44 2009 +0000

    Updated to jquery ui 1.6rc4. Lots of changes, improved widget theme css and icons. No need to fix position dialogs anymore. Included the following in the combined file + i18n files. Requires push back up to vendor branch.
    
    UI Core
    Effects Core
    Draggable - Req'd by Sortable
    Resizeable - Image/watermark/avatar scaling
    Sortable - Rearrange
    Dialog - All over :)
    Datepicker - Edit albums/items
    Progressbar
    Highlight - Message display, comment addition
    Transfer - Adding tags from available list to field
    
    
    Not fully integrated into the default theme yet.

commit 9b90b4b0cd464424f3f9a4214d265db69b3691dc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 10 06:18:35 2009 +0000

    Use the theme's avatar as the default if Gravatar doesn't have one.

commit 5690e58c4577e9b0a29f0c1d95edc7e6715a2cf6
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sat Jan 10 05:59:43 2009 +0000

    Move site status message to the very top of the page, before the header.

commit a5c4e3d46592eddf0c23947727c2c13b03a8841f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 10 05:56:11 2009 +0000

    Integrate Gravatar.  Boy, that was easy.

commit a7feeb576f491f285cb76cba0b99e01e7a3ae390
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 10 00:34:23 2009 +0000

    Big set of changes to comments, with related changes to akismet and
    user modules.
    
    * Don't delete vars when we delete a module.  This makes
      reinstalling a module a lot easier.
    
    * Add user::lookup() as the preferred way to load a user, so that
      other modules don't delve into the user module (that'd be a
      problem when we swap out user modules)
    
    * Notify site admins if Akismet is not fully configured
    
    * Bundle all server variables into the comment so that if/when we
      re-check the comment, we are not using the server info from the
      site admin's request.
    
    * Update Akismet to grab request context data from the comment
    
    * Pre-seed comment fields if we have a logged in user.  Update
      comment::create() API to clarify it for this.
    
    * Delete comment::update(), that's a controller function.
    
    * Add url to User_Model
    
    * Add author_name() author_email() and author_url() to
      Comment_Model.  It'll return the appropriate values depending
      on whether the comment was left by a logged in user or a guest.
    
    * Use resetForm() instead of clearForm() when we reload the
      comment form after ajax submit, this way we preserve the
      pre-seeded values.
    
    * In the user profile page, ignore blank passwords.

commit 48e73e90817a9c525ed50dc332d4a4341a8c6295
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Fri Jan 9 23:54:40 2009 +0000

    Theme Administration cleanup initialization

commit b647aa0f74e66548d6d69fc4585b89220ce60043
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Fri Jan 9 23:31:46 2009 +0000

    Theme Administration v. 2. Doesn't distinguish between regular and admin themes yet

commit 1e14594d689a1150e922a5f5fe01956be4ccaf21
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jan 9 19:09:13 2009 +0000

    Un hook the installer from load_modules, so testers can get to the scaffolding to install

commit bdd3cadf68b5d7f1581331690de28a04c7440aa8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jan 9 18:35:04 2009 +0000

    Forgot to delete a working copy

commit 22ee0127205da3470c97222e6ae0f1f13c86b074
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jan 9 18:33:48 2009 +0000

    Stage 1 of the installer. basically check that we can start as far as Kohana correctly

commit b5fbee54a0d8f7a734a49bd4b6ea183ad9fa380e
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Jan 9 08:14:48 2009 +0000

    Reverted back to previous jquery-ui.js (1.6rc2). 1.6rc4 is screwing up placement of dialogs, among other things.

commit 3c315490112c1dfa582be744956ef33c8768b481
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Jan 9 08:08:22 2009 +0000

    Added gCommentsAdminMenu to clearfix.

commit f97d7da720e5327807423c1468ad52496504b17c
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Jan 9 07:33:22 2009 +0000

    Reformated comment admin table layout. Added bulk action checkboxes and menu, reply link, and edit link, all of which need to be wired up.

commit a0f3c09a07f2673f0ce2fac67c13df607d72061e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 9 04:43:34 2009 +0000

    Eliminate unused avatar code (for now)

commit be478eb0c2ad4dc89c0629f17af86c328dd21465
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Fri Jan 9 01:01:39 2009 +0000

    HTML fixes

commit a631fe29f3950f8db1f7fb4ce1f47261a9b0feff
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Jan 8 17:13:06 2009 +0000

    i18n refactoring: Rename all _() (reserved by gettext) calls to t().
    - And refactor printf to our string interpolation / pluralization syntax
    - Also, a slight change to the translations_incomings table, using binary(16) instead of char(32) as message key.

commit fd081159f1783918d81e355e25e262ccc5249913
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Jan 8 06:57:04 2009 +0000

    Windows fixes: Use mkdir($path, 0777, true) instead of the unportable system("mkdir -p $path")

commit 2917740ba6d210ef43d4de228f8386e3b28adf62
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Thu Jan 8 06:52:18 2009 +0000

    First step of i18n refactoring:
    - Using DB table translations_incomings as translations storage (file cache to be added)
    - Removed overly complex i18n code which will be unnecessary with the future compiled cache files
    - Added t() as a translation function (global refactoring from _() to t() to follow)

commit e9d61d5f9df80e4304abf60f5dde99b54eefad71
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 8 03:05:53 2009 +0000

    "delete" is a reserved word in Chrome, apparently.

commit 8f9738e6d3f7be1b00c263de92cd32579e9be9aa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 8 02:58:03 2009 +0000

    Don't toggle akismet::test_mode if akismet isn't installed.

commit bc36ba609db3b030d28a8768023b35441f8b9b9e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 8 02:56:49 2009 +0000

    Add akismet::$test_mode, initialize it to TEST_MODE and don't contact
    akismet if it's on.  Force it on in the scaffolding so that we don't
    try to run all comments we add from there through Akismet.

commit 8bf388a6f671faba94f46ad9e982139c211378ee
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 8 02:50:23 2009 +0000

    Incremental improvement in comment moderation:
    
    1) Akismet now detects when we change a comment's published state and submits
       info back to akismet.com as appropriate
    
    2) We now show 4 different queues (all / approved / unapproved / spam) and let you
       move messages between the queues
    
    3) We track and display "spam caught" stats.
    
    4) You can delete comments entirely.

commit 3d4cf6f27eb11ec3168fcc173a50de297006c7a8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 8 02:46:42 2009 +0000

    Added avatar.jpg and pager.html.php (used in comments module)

commit 58c8b3b0315405094c448da6486354250914ea6f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 8 02:46:09 2009 +0000

    module::event now takes an unlimited number of args
    added module::incr_var() ftw.

commit 8620c3fa01cb37506976a944f151d3058b587062
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 8 02:39:21 2009 +0000

    Update event calls to take the orig and new models so that event listeners can do comparisons

commit 7bd5105f333f12d66add91b6f8a19e42323b03f2
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Thu Jan 8 01:09:18 2009 +0000

    Updated todos

commit 10ff87621b064b46c13882c376def8a51b31befe
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 7 19:51:53 2009 +0000

    The SpamFilter module is superceded by the Akismet module.

commit f8802d438a7d3db3809f9b29e7cc41986ae2617d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 7 19:50:27 2009 +0000

    Properly handle the case where the akismet backend doesn't return a true/false
    value.  Add phpdoc.

commit 01dcbbcda5a4630cec6a1bbee052ef108e291a5d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 7 09:08:53 2009 +0000

    Add very basic comment listing which shows the different queues
    (approved, unapproved, spam).

commit 925720ac3d6f0b7fafcd1833991bb16b8fea538b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 7 09:08:05 2009 +0000

    Make any ul.gMenu into a sf-menu

commit 97bf6761b2fba616c341c8d19c86ec6a208075e7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 7 09:07:45 2009 +0000

    Properly implement 'root' as a legal factory type

commit dedda72297772dc5682e5331471dfc41beaf1d4a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 7 09:05:30 2009 +0000

    Add 'root' as a legal factory type

commit 8bcc3de28df6451c17c2be232595f9023c98e4b3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 7 08:20:22 2009 +0000

    Listen for comment creation, and run it through Akismet.  Make the
    akismet stats page take up as much room as possible.

commit 17c8e14753953dc3277d28e8e336f0b15201031d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 7 08:18:15 2009 +0000

    Properly check comment permissions.  Don't show comments that aren't
    published.  Fix _form_add to take an item id.  Oh and email address is
    no longer required.

commit 9460e08da87b9978e3e078e1ebf4c33705e060f3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 7 07:42:38 2009 +0000

    Create a new "fragment" page type to use when we're not sending back a fully themed page.

commit ba052c0cc94a1b1acbe3322e9e3705f71f7134ac
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 7 07:36:48 2009 +0000

    Extract the Akismet driver from the Spam_Filter module into a module
    in its own right.  Clean up the tests, streamline the code and improve
    the admin interaction.  Add a working stats page.

commit f8f471c59be38e94242d63ad0facb899594de58d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 7 06:25:54 2009 +0000

    Turn statistics into a menu

commit 6f6d63e87ec91fcea6837991edd65bb94acfb97f
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Wed Jan 7 04:34:25 2009 +0000

    Default theme album thumbnail

commit 8eb25fbb4747fa2cbc8cea138aa90f944f2e729e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Jan 7 00:57:08 2009 +0000

    Rebuild 2 images at a time.

commit af3882cd346e48c72a41e370415467f31191a761
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jan 6 23:42:20 2009 +0000

    Forgot to add the unit tests, which probably don't work anymore with some of the latest
    changes.

commit 8e16931afd363212e409b4b58a59b0d609f99ab3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jan 6 23:40:17 2009 +0000

    The Akismet driver.  This will now verify the api key and attempt to check the comment
    as spam.  For some reason, it is always returning all comments as spam.

commit 4645c459e14c5dbd2330ea176396784049a1cdc8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Jan 6 14:36:20 2009 +0000

    Add a catch around the call to the spam filter and if the spam filter check fails set the comment
    state to unpublished.

commit cb3109784e073cc02216e189eb9f17818c078f30
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 6 10:10:54 2009 +0000

    Wrap permissions in a <fieldset> so that we get a label for the dialog

commit 4ee24a6645c71b5169861f2ffa3df396fa9e3e4c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 6 10:05:08 2009 +0000

    Put up an error if you rename a user to an already existing name.

commit b21215d2e601f07a43e172735dabbf7aec6f4638
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 6 09:38:40 2009 +0000

    use "position: fixed" to keep the dialog centered in the viewport.

commit 393273eaef4798cb4d03c73c4853edfb5903608b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 6 09:30:32 2009 +0000

    Add graphics::Can() to let us determine whether the active toolkit
    supports a given function.  Right now it's hardcoded to support what
    we know about GD.

commit fa1ccbd86d4eee9f6c798e7342aa6f303cd00729
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 6 09:22:29 2009 +0000

    Fix up all the various little forms to have submit buttons, fieldset legends, etc etc.

commit db4164520aa71b0990adb48b43dcf4668c06e810
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 6 08:59:09 2009 +0000

    Add pause and done buttons to the progressbar

commit 3b9e15a6137f16496121179a78773142b8f7812c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 6 08:46:07 2009 +0000

    Don't include jQuery.  This means that the form won't work by itself, but we can live with that for now since it's always in a dialog.  Including it here breaks our dialog for some reason

commit fd3db577784ec81920dd8fb43df835555894c89c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 6 08:34:07 2009 +0000

    Add a submit button to the login form

commit a63502b3c69b59b6246f66d6e7a6f8558033546c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 6 08:33:39 2009 +0000

    Refactor the way that dialogs work:
    
    1) Get rid of the resizing behavior; create the dialog in the right
       place and then show it.
    
    2) Grab the fieldset legend and put it into the title of the dialog,
       so that we don't have to use title="" params in anchors.
    
    3) Stop using fixed buttons and let the form define its own buttons.
    
    4) Stop suppressing all form buttons.

commit 532996d62f7a373d4847f0669dffe21615f98bc5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 6 08:27:44 2009 +0000

    Merge in Forge from upstream r169 which converts Forge::submit() into
    an actual <input type="submit"> instead of a <button>.

commit 712a97addd50f61d1a3cbd3cd5e7841a07d740d9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 6 04:32:15 2009 +0000

    Don't make the overlay opaque when we're doing a dialog-based edit.

commit 2b92fef5ab409322f91714f7ba4babbebde96ec6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 6 04:08:44 2009 +0000

    Fix bad redirects; we only have feeds for albums not photos

commit c41194a6e77d38f96b8e650515b10bd1284824a5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 6 04:03:15 2009 +0000

    add fileSize attribute to thumbnail/resize/full images

commit 5dbb8a4874642c4c70b4b5e9ad7c1b4027895e39
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 6 03:40:15 2009 +0000

    Wrap content in htmlspecialchars so that we don't break the RSS feed

commit 1564d302e5691e594feef7cb4eb4a3e9a4271b19
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Tue Jan 6 03:03:57 2009 +0000

    The directory that wouldn't die. Die lightbox, die.

commit 294db39c96e1cc1dbb9d8438050970e6cf1db09c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Jan 6 00:12:54 2009 +0000

    Tabs -> spaces

commit 06b4145b7650a883873105164ecc7273052ab6d4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 5 08:20:07 2009 +0000

    Quick edit dialogs should stay on the same page and trigger a reload.

commit 2dc436beea943092f9ede6b0131c27c9f7042011
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 5 08:09:25 2009 +0000

    Add silk edit image

commit 7482b6683eb0cabb9841f839a474d25b4257fc91
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 5 08:05:50 2009 +0000

    Add "quick edit" which lets you edit a photo's details from the albums
    page.

commit 0b473327c58df6d6261270cd007421e42eda3d29
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Jan 5 04:39:10 2009 +0000

    Oops: TEST_MODE is now always defined, so we were taking a performance hit by skipping the cache.  Fixed

commit 3381f1d01a09a3846dd8984f6fbf6f8eeb40a5b1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 4 22:58:18 2009 +0000

    Put up an error if you try to reuse an existing tag name

commit 99804a34b2440589e91d5fe06f8b39b44d6561f2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 4 19:54:38 2009 +0000

    Rename:
       gQuickEdit to gQuick
       quick_edit -> quick

commit 63302ad49c6a5a956b396978ba45d74ea9891cd5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 4 19:46:37 2009 +0000

    Fix message line so that uploads work

commit 89f895c708e1c3dc7b605a107d6bbdf4daae0480
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Jan 4 19:01:17 2009 +0000

    Attempting to delete lightbox. Didn't mean to check this in.

commit fe16cd65eebb5603968c7c61beb6a3a456c146d7
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Jan 4 18:37:13 2009 +0000

    Wrap div with another div instead of a paragraph

commit 7017e95c99d03bd43a1956fbc54ac2f85517d886
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 4 09:28:57 2009 +0000

    Allow passing a query string as an argument to Item_Model::url()

commit 83ae71e3cb0435c72b912ec490d8f8290dde4b7a
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Jan 4 09:16:16 2009 +0000

    Linked up a photo's return to parent album view.

commit 1eeb6efd7217fc40b911b74ca1f4a61788409f5d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 4 09:01:39 2009 +0000

    Move slideshow link from sidebar_top() into the photo and album menus.

commit 24917d337c7c3efbd54dbc29f4b5ee746674b0b1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 4 08:55:00 2009 +0000

    Guard against missing apache_get_version()

commit 16ef5a8c28b298b27cdb21ec2b2a12d5c445bb02
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Jan 4 08:49:58 2009 +0000

    Remove border attribute from table.

commit 6bff8959cf9ebe125378a7a8bdbae52fb06da390
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 4 08:47:08 2009 +0000

    Reattach event listeners to open modal dialogs.

commit 92ceef27dafbc0e217a8ec7f5e2ee9694d4118a3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 4 08:44:06 2009 +0000

    Allow renaming of tags using a modal dialog.  Put up a confirmation
    dialog for deleting tags.  Remove the 4 character restriction on tags
    (it was getting ignored by the add form anyway since it was mistakenly
    referred to as tag_name there).

commit 625d0785572af319b22a523550145b4dacbd6100
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 4 07:40:37 2009 +0000

    Extend Theme_View to look in modules for photo and album menus.  Move
    "view comments" link to the comment menu helper.

commit 9ff452d82a0cdfa88cac320f317cbc72140019e9
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Jan 4 03:59:30 2009 +0000

    Fixed closing h1 tag.

commit f7f2fa10cd7f12364e06d8e0276528c8dda26a0f
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Jan 4 03:43:12 2009 +0000

    Started to wire up album and photo view menus. Need photo's parent album link added. Also need add the slideshow link to the menu.

commit 2c274694127f5127fef311c13d265a9099dd629d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 4 01:55:59 2009 +0000

    Simple admin tags interface.

commit 08c9745086a51accf6e561d6e8ac2a9ab7582ef7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 4 01:55:07 2009 +0000

    Make sure that create/update/delete fail without CSRF.

commit 64384a21c23ca2657d983ee28b98cbe082539eed
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 4 01:47:41 2009 +0000

    Update preambles.

commit 7e7093d0beda158f44235fbe2a1a45423240877f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 4 01:41:10 2009 +0000

    Rename views to be consistent with our admin view naming scheme.

commit 9f70af787f6ff30f75c0518ce18127fd93d898e6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 4 01:35:35 2009 +0000

    Fix preamble

commit 4f57c30590c4860f2d95be6ed9626d75c250ebe0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 4 01:33:17 2009 +0000

    Fix windows-style line endings

commit 3c768e1c59971475c0265d209939f6ebfa0f50d2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 4 01:27:24 2009 +0000

    Require CSRF for any non-"get" action.

commit d36996fb140d8a2f8d51116236b2828d1efedb65
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 4 00:39:54 2009 +0000

    Remove unnecessary comments.

commit 85574d7b82f9bf6ea44eb594594ae3bb9f7f8ff4
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Jan 4 00:35:12 2009 +0000

    CSS/JS formatting and selector updates.

commit 2f44c2b2695071f8cad0167d424125193027b2bd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 4 00:31:28 2009 +0000

    Update description.

commit 63990814945f72f30a689800b324debbc04dc175
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 4 00:30:05 2009 +0000

    Update description.

commit 75d1cfa66b7986013fd0019b831d16c5e08a2af6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Jan 4 00:25:53 2009 +0000

    Add admin wireframes link.

commit 3d9e5e439e63404159c1ef763c8b07dd15a367ec
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 3 20:14:06 2009 +0000

    Stay on the right page when we navigate up in the breadcrumb.
    Introduce a "show" parameter which contains the id of the item that we
    want to show when we go to the parent's page.

commit 8ed5200101ac6feb48795b2fd8b2fb4a3462d45e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 3 20:13:08 2009 +0000

    Add a loading dialog when we quickedit.

commit bdff96bd547b15dc6940573b9da0e80c45790b3a
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sat Jan 3 19:09:32 2009 +0000

    Added a jump to comments button with a scroll to effect.

commit 0402e326cb1274a4decaa54d3606453818a665f9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 3 05:52:20 2009 +0000

    Resize the quickedit box after rotation.

commit 09a844fffc39adf5a082dc1bd4b953a83ddb2a73
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 3 05:50:17 2009 +0000

    No quickedit for album-- for real this time.

commit d299414399bf7bff32900f6d32322dcb830dad81
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 3 05:48:15 2009 +0000

    No quickedit for album thumbs (for now, anyway)

commit 0cfa51b5b70eeeb5e6c070311fbb6f451aef3b05
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 3 05:47:00 2009 +0000

    Propagate rotation up to the parent album, if we're rotating the album cover.

commit e8f1ff580c6290060d1de8f3e9eceae9028fd1fa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 3 05:36:16 2009 +0000

    Add a new quick-edit mode for editing photos when viewing albums.
    Implement image rotation this way.

commit 675cc693939199fe95c08f851bec8f4e4ea6807c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 3 05:26:47 2009 +0000

    Detect when imagerotate is missing

commit 57be3cd78b3f56eeb0375bd554d53885d19325f5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Jan 3 05:25:52 2009 +0000

    Add graphics::rotate

commit 62fe5f0bd60fb122e4c2fdd4ddfd5eee9c997533
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sat Jan 3 01:26:22 2009 +0000

    Inject the drag and drop handle style via jQuery. Restore background color bars behind admin block titles.

commit a57ede2f96babc216538f0115561c6e4f94eb79d
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sat Jan 3 01:11:20 2009 +0000

    Added default user avatar. Comment thread updates, including display of avatar. Sidebar block display white space updates. Combined gLoginMenu and gCredits css.

commit 7db1758e93775c3f59c4a874da36225585dcbab5
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Jan 2 22:06:12 2009 +0000

    More admin menu cleanup to reduce it's height. Removed redundant admin theme images, these are included in the default theme. Added a favicon.

commit 19d144496dc5f3594ca2220b9e364f721573e7b2
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Jan 2 21:25:44 2009 +0000

    Remove Superfish navbar CSS. It's not being used.

commit d6e26148024e5c4d6040d45362e6efd7acbbeb30
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Jan 2 21:21:54 2009 +0000

    Added basic table styles. Fixed width issue on gContent in the admin theme. Only display background colors on gInfo, gError, gWarning, etc. if they appear in gSiteStatus or gMessage. Miscellaneous form style updates.

commit 8595b75d9b47e0a2a0c6e288e3821c29b058c4c0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 2 20:18:44 2009 +0000

    Restructire site admin menu a bit:
      Rename menu "General Settings" -> "Settings"
      Rename "Comments Moderation" -> "Comments"
      Move "Content" -> "Configure Spam Filtering" -> "Settings" -> "Spam Filtering"

commit 1ce19a994dfcc8c0d79e6a2f9492dcbee8599d86
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Jan 2 20:09:28 2009 +0000

    Set the admin layout to 100% of the window. Add IE fix stylesheet for admin theme, reduce height of admin header.

commit b0ba77f9439e30a543f5330f9a5c4846ec5c0ccd
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Jan 2 20:07:05 2009 +0000

    Forgot to make updates for IE after removing gClearfix.

commit 9644dcc48021b4ad9546debd399460eddd2f0612
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jan 2 18:54:37 2009 +0000

    1) Removed the published boolean database field
    2) Replaced it with a string field (state) which contains the state of the comment. i.e. published, unpublished, spam.  Unsure if we want to create constants in comments.php to standardize the valid values... thoughts?
    3) synchronized the spamfilter and comment unit tests with the current functionality

commit 277e7f8db290d33bfe241641c0fa4de588e38d35
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jan 2 18:32:47 2009 +0000

    Remove old code that was commented out

commit 206edb59b91ec52ac6a46a08d65c75ab7311b995
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Jan 2 18:31:23 2009 +0000

    Update the api to allow each driver to specify validation rules and generate the appropriate form content.  Add a callback so if the driver changes in the driver selection dropdown, then the api form fields are updated with the new form fields for that driver

commit 5321c8d59d1f19e3db8fffcf50a495d0e81e127c
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Jan 2 07:09:25 2009 +0000

    Switched admin menu from navbar back to plain menu, plain dropdowns are more usable. Minor text formatting updates.

commit 06749e2bbf7ea19549f98bedb8a7895790e88a4e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 2 04:04:53 2009 +0000

    Add dimensions to logo.

commit b08373919bb236e3516943321991d83b5746fb0d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 2 04:01:25 2009 +0000

    trim() the path in add_photos

commit ecdfd1590d4eaa300c7e3ee694e2de23c06364de
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 2 01:23:41 2009 +0000

    fix line endings

commit e63966b49063ceebdb948e7992af6504c6dcf477
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Jan 2 01:20:06 2009 +0000

    Tweak indentation

commit 64d6f9aea6916ecb7c25f0fec1cb9cf582cbba55
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Thu Jan 1 22:57:17 2009 +0000

    Standard Forge Library doesn't support radio buttons.
    Added support from http://forum.kohanaphp.com/comments.php?DiscussionID=164

commit e8d10cab9d3391f2b5adf64b4a0745c49848f606
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Thu Jan 1 22:56:57 2009 +0000

    Applied #gPager to next/last nav, moved up above photo and moved photo title back to below the photo.

commit 7452a18938dc84393bf4009acdb713fe60c0b507
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Thu Jan 1 22:54:35 2009 +0000

    Update the CSS item ID and class application for items and albums in albums. Miscellaneous CSS updates.

commit b709c7eca094a7f40ed020c7a4c28ea06dee0149
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Thu Jan 1 22:22:18 2009 +0000

    For album-specific JS, key off of #gAlbumGrid rather than .gItem.

commit 50dceb50159c407629274352143f539d252bae6f
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Thu Jan 1 18:56:06 2009 +0000

    Theme Administration implementation

commit 540e4ed9eb6df5955a58ea9946049a84efa67e33
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 1 00:43:22 2009 +0000

    Turn the permission dialog into a real 3-state faux checkbox.  If we
    replace them with intuitive icons, we're most of the way there.

commit a542f705518918b763b27a222ceef8c65d1862a3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 1 00:42:30 2009 +0000

    Allow admins to do anything

commit 03c60e2b55791945e04573d9e9eb2bbdc869ded3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 1 00:28:00 2009 +0000

    Add deepest album link

commit cd1d02375400972f2a719852d44c094ab500e8b6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 1 00:23:29 2009 +0000

    Change the preamble for views in two ways:
    1) drop unnecessary semicolon
    2) start with <?php for extra security in the case that the server itself doesn't
       have short_tags enabled (the app won't work, but we need to make sure that we're
       still secure)

commit 7c82691e0057188e07601c30069385c3f17cbff1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 1 00:16:08 2009 +0000

    Move debug CSS into core/css/debug.css, and enable it for admin themes also

commit 11d2788af8111a036d2279563fe6a21f374b5b9c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Jan 1 00:06:52 2009 +0000

    Refactor common dialog JS code out into lib/gallery.dialog.js

commit 3352ae6d10af6a0219f87f999804bdcaa8689e7f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 31 23:58:53 2008 +0000

    Move 'browse' link above the fold, hide tabs that are inappropriate when there's no install yet

commit 4573ada534720a44109e200172e48207140d5865
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 31 19:59:42 2008 +0000

    Extend permissions interface to allow resetting to the parental default.

commit bd8884d3acb183006fc25369891330d4d4699bc8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Dec 31 15:04:57 2008 +0000

    Ignore the SpamFilter.php as a valid spam filter.

commit 7d30e55b8588bf9ea4e7de968a9845b6585ca6d8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 31 09:52:03 2008 +0000

    Rename permissions_edit to permissions_browse for consistency

commit 34372b86c5e98530f4142c3a5216574f0e1d12d6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 31 09:50:25 2008 +0000

    Ajaxify the permissions browsing dialog.  It only does allow/deny
    right now, it doesn't allow you to reset to inherited values.  That's
    next.

commit 48e91e71e50fcf750ecd3d04deee488944c8e25a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 31 09:04:18 2008 +0000

    Rename permission_xxx to permissions_xxx for consistency

commit 610494296b7cb52e52ebcc99246bb48da9252546
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 31 09:02:40 2008 +0000

    Turn permission dialog into a browser where you can look at permissions back up the tree

commit fc56ebd4346b1e4515388ec8570f26deea7fd500
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 31 07:22:35 2008 +0000

    Simplify the next/previous logic in the theme by passing in a null
    next/prev sib if one didn't exist.  (that's what we were supposed to
    be doing in the first place, anyway)

commit 77bb22a65c64bd5bae1a304051e1e19bd3993b52
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 31 07:17:50 2008 +0000

    Mollon -> Mollom

commit 23105f135990dd576c3d2099fabf0962d9b9fc58
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 31 07:16:38 2008 +0000

    PhotoID -> PhotoId for consistency

commit c1140b5c0aac2c2c1822a65ddd55151e093e2af4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 31 07:13:34 2008 +0000

    Add Item_Model::url() and use it where appropriate.  Cleans up some
    grotty looking stuff in themes.

commit 44c987e89e7fd3babebdc4835c1225b6d7869df1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 31 07:06:10 2008 +0000

    Add sibling information on photo pages and a very simple next/previous interface.

commit b7f451635a043a98d75ccba3e69597e8ea11226f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 31 06:44:38 2008 +0000

    change single to double quotes.

commit 517ddf53883214f225ad76997fd033faae276a42
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Dec 31 06:19:35 2008 +0000

    First look at the spam filter module.  At this point, it does not connect to any spam services.  But you can go into the admin screen and choose the driver and set the api key.

commit 9ad253a2bbd76048934c304c54239b94f45b3809
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 31 04:21:38 2008 +0000

    Switch from checkboxes to simple anchors so that we can reflect multiple states better

commit 959fa91f49dd0de72c52d58a9ffb65bcf471dcb2
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Wed Dec 31 04:10:03 2008 +0000

    Minor refactor. Move some stuff out of $("document").ready to functions. Comment updates.

commit 1579494ec4acb80e103a40106aea1630628c00d2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 31 04:05:41 2008 +0000

    Preliminary "Edit Permissions" dialog.  You can't change permissions
    yet, but it shows you which items have locked view perms.

commit 246139cf1f8a439a85c310252bdeb1497d56a7cf
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Wed Dec 31 03:29:25 2008 +0000

    Tabs to spaces.

commit bfb040a46394e1a91318f39926923e027167362f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 31 00:47:15 2008 +0000

    Fix a bug where we were accidentally allowing view permissions when
    allowing or resetting permission further down in the tree.  This bug
    was introduced when I refactored the view permission cache into the
    items table.  Updated test to catch it.

commit ad719b9b6f3391da1ba7e481890317cdc409c616
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 31 00:18:24 2008 +0000

    Fully implement the view_full permission.

commit cbbbc23c2f5f1f4b5325f1a25251e419b512733f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 30 23:36:58 2008 +0000

    Oops, remove some debug code.

commit 610aa75d3f3a103a8ca313cf6df086cf2d08cea5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 30 23:36:36 2008 +0000

    Fix a bug.  Unit tests ftw!

commit 6e6d3dd9696df68e7a0bd37e1926cdbc2b894991
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 30 23:26:55 2008 +0000

    Refactor _create_htaccess_files and _delete_htaccess_files into
    _update_htaccess_files in preparation for supporting the view_full
    permission.

commit cace8390dd8e5080a0faa76a992c5c11d5effeab
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 30 23:06:33 2008 +0000

    Fix typo.

commit 59e5ddc13fa21be1f5062db7a81a8cc9c256014f
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Dec 30 21:20:16 2008 +0000

    Update user::create() scaffolding for changes in the user module: can't set the isAdmin bit at creation time.

commit 1cacf769d1a474dd946a1c89b7268f8feeecc566
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Dec 30 21:00:47 2008 +0000

    Make the url parameter optional in comment::create() (according to the comment model)

commit 06188ad813e38a41aa6058a925bd80fbcb2fbc41
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 30 20:19:32 2008 +0000

    Oops, this got left out of r19497

commit 7eb58b6ca4bf8f1a14ef46b150bc19a0893f8892
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 30 09:02:26 2008 +0000

    Add the view_full permission-- doesn't do anything yet

commit a481a684b6c0fcfbf624e91f7e4bb483d1e6a45a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 30 04:14:57 2008 +0000

    Add a "Graphics Settings" page that lets admins choose which graphics
    toolkit we use.  We only allow users to use one toolkit.  The UI needs
    work!

commit 538bf91a58c2482cd081a019f2cc419472ad9c0f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 30 04:13:43 2008 +0000

    Add some basic explanatory text

commit d7d37d07dd543a8d7326aa9502dc2271da0c8c99
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 30 04:13:31 2008 +0000

    Add site_status() to the regular Theme_View

commit 5f14623a47006a4e9ef981e95f09f7932862c29f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 30 04:13:03 2008 +0000

    Only show site status to admins

commit 8aebdf4e19106e86b5c1e298d270a070f13e2174
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 30 04:12:43 2008 +0000

    Add site_status to the default theme.  Only admins will see messages for now, but it's nice for them to see messages when browsing instead of just in the site admin

commit 27009ad852d987319f37b38660cd91fc46375b17
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Tue Dec 30 02:50:52 2008 +0000

    Drop .gShortForm in favor of using specific form ids (gSearchForm, gAddTagForm). This maintains styles when forms are are reloaded into the DOM. Haven't figured out how to fire shortFormInit() when a form is reloaded into the DOM, as gAddTagForm is :(

commit 96a2f929ca6b07d25be70273151738ebda719883
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 30 01:43:16 2008 +0000

    More phodoc cleanup.

commit 564bde5c4947f4005729314b0c769cf3673783ae
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 30 01:41:36 2008 +0000

    comment cleanup.

commit f29aad03a630d623a13a31f417947add92aa81f9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 30 01:37:09 2008 +0000

    Make some columns smaller so that multi-column keys don't exceed 1024
    bytes on some systems.

commit 79e2c4bd47f34215b7a7f436304e88032f26a5bc
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Tue Dec 30 01:21:09 2008 +0000

    Fixed indents

commit 37f9cc2872d7a2d4d62bb55f1c30195693b1b765
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Tue Dec 30 00:52:03 2008 +0000

    Missed these in r19485.

commit 96fce2dd3bbdbdd3d32f82e9a1c613d40b9f903a
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Tue Dec 30 00:50:23 2008 +0000

    Refactored. Simplified organization a bit by combining sections.  Restored block titles to h2. Moved #gMessage to #gContent. Removed .gClearFix class in favor of specifying selectors that require a clear fix.

commit 1b53073b5584a2671d20ba9ec6bed91007ab0df9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 29 23:36:58 2008 +0000

    Mark the "website" field as hidden.

commit aed1b08019c9e3f6b60c66c8e3c99530b728bed4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 29 23:31:22 2008 +0000

    Updated to Kohana r3849

commit 4ab53d145bec440529a6304f470eb952a40eec6b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 29 23:25:28 2008 +0000

    Create Image::composite() and implement it in GD, ImageMagick and GraphicsMagick drivers.

commit 4439ca94a9850261d7f27d06c8327eafe0ff1ea3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 29 23:12:26 2008 +0000

    Don't let the x/y coordinates in composite go negative.

commit f5136051c902f88f9800697d48b35e2e908a5c22
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Dec 29 22:59:44 2008 +0000

    Filter on published in Comment_Controller::_index()

commit 6ab195854ddee124b24b880ed96bb0db5fdc7805
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 29 22:41:53 2008 +0000

    Remove rest::JSON content type; it's causing lots of problems and it doesn't directly help since text/html works just as well for our JSON communications

commit 29c925a3cc30a5b1fc66c658e4be85914a6b515c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 29 22:31:06 2008 +0000

    Properly implement graphics::composite()

commit 776123496b1b43230973ba7c52669e5780b21cd0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 29 22:30:19 2008 +0000

    Add transparency support

commit 763cc32cafd9330f848b869372b64c8ca7ec981d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 29 21:28:28 2008 +0000

    Return the task on success so that our UI can show it at 100%

commit 26417f6dd4da2fd774fc7517a4379bcd17f06dae
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 29 21:27:46 2008 +0000

    Replace __CSRF__ token with a real csrf.  This allows links in site status messages to persiste across sessions.

commit ef4ec6d5131e729927b6d6b444c6d615e0b01a60
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 29 21:25:51 2008 +0000

    Oops, my last change broke the default resize dimensions

commit 69603ede7a0d7567f37025eee713975282122d13
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Dec 29 21:09:44 2008 +0000

    Implemented bharat's suggestions to the comment module in preparation for the spam_filter module

commit 2bfddc4c87443640098387630967f6d141a9fce6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 29 20:20:10 2008 +0000

    Make graphics rules take named parameters.  This will give us some
    flexibility in the future.

commit 8102d8ea7727b259d665ef849c26c0a29019676f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 29 20:17:24 2008 +0000

    Clean up _update_graphics_rules() to make it more robust

commit 95f1440ef22dcfec43f19909292b2c357ceab5aa
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Dec 29 19:37:19 2008 +0000

    Changes to the comment module to support spam filtering.  Basically added two columns to the comment table.  The url of the author's web site(default null) and a flag to indicate that the comment is visible (default true).
    
    The comment block has changed to only display comments that are visible.
    
    And there is code added to call the spam_filter helper if the spam_filter module is installed.

commit 3c0be5156bd1f429e45f3eba4d97ea02217e55ee
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 29 18:38:40 2008 +0000

    url::site is implicit in Forge actions, don't specify it a 2nd time

commit 62cd05fb168b45e03cdca17add141e6651328373
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Dec 29 06:12:00 2008 +0000

    Apply button bg image to Superfish menu items.

commit 8fe1990c99642cf174637098d7a4578b85ccb0a2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 29 04:20:25 2008 +0000

    Don't set the document type to JSON when uploading photos.

commit 22a7983bbd17b60116437a70f79cf62464f82743
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 29 04:12:21 2008 +0000

    Re-add $theme->messages(), which got accidentally removed.

commit e6da2234e778821d71c33de012a37e3fa920489c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 29 03:51:53 2008 +0000

    Relax the rules a bit

commit 3cfc9afde4f256d9c52f386494c0a9bb3db410a3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 29 03:50:48 2008 +0000

    Remove references to permanent_key

commit b46bfdd4921e27ed472aabfd06ab7c95f30e7e62
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 29 00:35:31 2008 +0000

    Separate permanent messages out of the message helper and put them
    into site_status.  Show site status in the header in the admin theme.

commit ed8689f768f81d2c3ed8bee70c43d4f7c71c108e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 28 23:48:15 2008 +0000

    Expand on the maintenance code to make it more robust and give the
    admin more control.  You can now track running tasks, resume stalled
    tasks, cancel running tasks, and remove finished tasks.
    
    Added graphics::compose() as a placeholder for future watermark
    operations.
    
    Added CSRF protection to maintenance urls.

commit 1d76689e4b3ea68cada5154d1c0e17b00dec6bd7
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Sun Dec 28 22:49:58 2008 +0000

    Add title back to non-DHTML form to maintain consistency

commit 1161cefada4644908145a6111ec2bec19887a0f2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 28 10:14:12 2008 +0000

    Javascript wrapper to ping tasks

commit 74d4e7d50585db230cfe07464a1a4b662c04b409
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 28 10:12:41 2008 +0000

    First round of a task framework.  Tasks are job definitions stored in
    the database.  They're started with admin/maintenance/start/[task_name]
    which sends down some JS/HTML which regularly pings the task at
    admin/maintenance/start/[task_id] until its done.
    
    The UI is still very rough.  It works, though!

commit aff2af5e1f23d713255ab03820656fa936230550
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Dec 28 07:33:09 2008 +0000

    Tighten up album grid display. Vertically align thumbnail/metadata in gItem container. Brought back borders. Use a neutral bg color for albums. Link item titles, not just thumbnails.

commit dc62e4167e989e9c3f29c83baf7e1c11f21dc484
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sat Dec 27 17:16:21 2008 +0000

    Rename pagination icons to follow convention.

commit ef27cd4c33f0684bd37feb803e291e2d3d327b48
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sat Dec 27 17:01:42 2008 +0000

    Icon refinement

commit 9904c0e5ff34f4280b09df4c6aed6b99f2893dea
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 27 03:37:09 2008 +0000

    Ignore resizes for albums when calculating the dirty count

commit f808dd9d01c2c72779177438a8339af9d2544365
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 27 03:35:57 2008 +0000

    Add clear_permanent()

commit a26127ae9c44263353159910ba6bf058288c2b75
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Fri Dec 26 20:34:56 2008 +0000

    Added title to user/group administration dialogs

commit 6b1fa6217355a8458a84791ce02e2bb0067b1da2
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Fri Dec 26 20:08:15 2008 +0000

    Added content type to JSON output functions

commit 7fdde469d3af72307efb41048fadd7a25f4ae576
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 26 18:59:41 2008 +0000

    Move Watermarks under Content in the Site Admin menu.

commit 6dcc3e5c2535b57e54acdfb4d7cc63c1fa9c2af1
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Fri Dec 26 06:14:24 2008 +0000

    User/Group administration cleanup

commit 4dda9c5a6e23157e79b73fbcd67a2104a474c45d
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Dec 26 06:09:43 2008 +0000

    Comment and indent cleanup. Forgot to delete an image in a previous commit.

commit 2917af5c0de13c113a077287794cfc23ffb1d04a
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Fri Dec 26 05:45:09 2008 +0000

    Separate GET and POST in Group Administration

commit ecf7d46a67f21757d9e0e67cb04ab0b0490781ac
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 26 05:44:02 2008 +0000

    Add the graphics rules for both thumbs and resizes (instead of just thumbs).

commit dee20ed6a2bd92a2e67c27ccc7d60303d66cdcde
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 26 05:43:06 2008 +0000

    Added the concept of "permanent" messages that we show to admins.  Use
    this to show a "your thumbs/resizes are out of date" message whenever
    we change the graphics rules.  Tweak watermark module to add graphics
    rules whenever we make a change, which triggers the graphics module to
    add the permanent message.

commit 0bef37eb0b077863984eb70ec99c40b2f32840bf
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Fri Dec 26 05:36:08 2008 +0000

    To reset a form use resetForm

commit 72c3a417ca71677c695d2b0447a9dc85c03e478a
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Fri Dec 26 05:26:22 2008 +0000

    Separate GET and POST in User Administration

commit 2d40715f4431e557c4d60b010d3c126c4be535c2
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Dec 26 05:15:57 2008 +0000

    The close icon's a background sprite, should be prefixed with bg- not ico-.

commit 0630dc9a8e92787d6c0a55ea0292cfd87458c4a6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 26 05:14:00 2008 +0000

    Fix get_add_form() to use self::positions() so that we get the right key/value pairs.

commit b5e1aa6a60b6123bab949b5eeba9f76d852d42a9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 26 05:11:42 2008 +0000

    Login is 'info' not 'success'

commit e31ca19a062a114ce251a9eadd183c5df8f5d024
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 26 04:52:18 2008 +0000

    Added graphics::mark_all_dirty().  The watermark code now marks images
    as dirty if the admin changes the watermark at all.

commit 11d4c2d126041fb86805aefe53f6b0fc7bea4363
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 26 04:49:28 2008 +0000

    Fix a bug I introduced when I switched from module id to module name; now deleting cleans up vars and graphics rules

commit df3f0c33829ff87603a31259e7d4550a5da6df98
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 26 04:35:44 2008 +0000

    Add missing '=' causing <img> height not to get set.

commit c154f9f20a028ac3b3605ff5631739ef3fa41d52
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Fri Dec 26 04:35:27 2008 +0000

    Group Administration

commit 837a5430b8ef578bba19850272c6e399756b792f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 26 04:34:20 2008 +0000

    More watermark changes:
    
    Change admin/watermarks/upload -> admin/watermarks/add for consistency.
    
    Internationalize position text, store it as text in the database,
    display it to the admin.
    
    Make i18n strings consistent to reduce l10n load.

commit b20b56d762ef276d731fef7e83cb9482595cc26a
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Dec 26 04:27:39 2008 +0000

    Major image cleanup, removed unsued images. Combined separate background and icon state images into sprites. Fix dialog artifact in Chrome.

commit 2011ee13efb7d0165ff187f392b78d1a5f5992e5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 26 04:02:55 2008 +0000

    Remove an HTTP redirect that was breaking the Ajax interface.

commit 6b45be9632b6b2d6f5c3dfbdcfc962b74f23fc74
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 26 03:56:12 2008 +0000

    Fix a typo.

commit 314d55d858a1a19ac6c307d4be9d2ac502322723
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Fri Dec 26 03:47:04 2008 +0000

    User Administration. Add users. Take 3

commit 9a713098449e3bfbe9710876287f01bb921eb168
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Fri Dec 26 03:22:52 2008 +0000

    User Administration. Delete users. Take 3

commit 0fc14c1bfc799615b092f29648ab3816f1a07052
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 26 01:32:12 2008 +0000

    Simplify the watermark module.  We can now upload, edit and delete one
    watermark.  The UI is rough and we don't yet apply the watermark to
    images.. that's next.

commit eb35afc987a4e8b2772d10ac2bd63b1a3a091239
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 26 01:29:33 2008 +0000

    Add module::clear_var()

commit 7f95c80e8897babcadac270ee5884963a734e1bc
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Fri Dec 26 00:58:15 2008 +0000

    User Administration. Edit users. Take 3

commit 2c91a7e9ced0d2134682450dc1713b8e1b239dae
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 25 23:43:44 2008 +0000

    Rework log and message helpers to be parallel, but separate.
    
    1) they now have their own matching severity constants
    2) they both have convenience functions success(), info(), warning() and error()
    3) they both have severity_class()

commit 847d42682d02f2bd86ff0e5a247c38e1f55d86b9
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Thu Dec 25 23:31:41 2008 +0000

    Switch gFailure back to gError. Makes more sense semantically.

commit caaa5219276a38aa131e49e6f6249d3f734718cc
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Thu Dec 25 23:22:38 2008 +0000

    Update message CSS: gFailure, gInfo, gSuccess, gWarning. Removed gHelp, it's not a message type.

commit 94e3ae2e0f9f0607475830e9b2431d9ae768637c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 25 22:31:20 2008 +0000

    Add edit/delete links (they're just stubs now, but they open a dialog).
    Add active/position to Watermark_Model

commit 3d42234d574469f237ada94512a6e64f83ed8be1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 25 22:29:26 2008 +0000

    Clone dialog support over from themes/default (for now)

commit b6f44334d9f827ac78aa8e0dfb428b8b6bcb0328
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 25 22:29:05 2008 +0000

    Make sure admin method exist before we call them, else we'll just recurse into Admin_Controller::__call() again

commit 75b9a7872c1f80d1e3a95796ab4b46ed6ff76e2c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 25 21:54:09 2008 +0000

    Remove extra uniquifying text that Forge adds to uploaded files.

commit 71d0373838927f1658db45dbb235fef318cc308c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 25 21:41:18 2008 +0000

    Return the form on success so that we clear out any prior error forms

commit 324b6120037a62cd12214b245a95771984aef68f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 25 21:40:05 2008 +0000

    Oops, and also re-ajaxify the form if we replace it.

commit ead45ffbc28b204631582d31ff8c84cf16d91f4b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 25 21:39:22 2008 +0000

    Reload the form if it's available so that we show form errors and we reset the form on success.

commit 82ed38d78ec7c6399cacfffd3b51a1eccaffb154
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Thu Dec 25 20:59:33 2008 +0000

    Ajaxify 'add users'

commit 9ebced112b3f155df320a730a1f7063d882ea22b
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Thu Dec 25 20:12:00 2008 +0000

    Restore inline gLoginMenu items, remove extra ; from footer.

commit 2c978cb37a9f279a837f459528b4b1e9cc8ae1a7
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Thu Dec 25 19:59:15 2008 +0000

    Message box style update. A few font-style updates.

commit b91992187d732c07854fd185e201eff84125a636
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 25 10:24:29 2008 +0000

    Updated Kohana to r3845

commit 318591526459e1ac1bb8b0acbbcf4bf9f02f8e88
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 25 10:14:59 2008 +0000

    Split Items_Controller_Test into Photos and Albums tests

commit 36b903b234ad3305af4dc0d5203d4ff354c52e29
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 25 10:14:28 2008 +0000

    Remove a test for code that was removed

commit 74bfa24b8f430bef928467331eb7e6f2db1f261c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 25 08:27:57 2008 +0000

    Move jquery.listen.js out to lib

commit 0338205efebc61e5206076ad13ca487d09e4d70a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 25 08:15:45 2008 +0000

    We no longer need these, they've been rolled into jquery-ui.js

commit da7fe5154a75c83f78f17ecf7518913fbc04ec6a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 25 08:14:41 2008 +0000

    Merge in updated jquery-ui which contains the accordion widget, delete
    explicit references to accordion widget from admin ui.

commit 5ca952fe61427f309e7a6ffdbd8beb97bb9b82c6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 25 08:11:46 2008 +0000

    jquery-ui.packed.js --> jquery-ui.js

commit de1af052fcef0b3b1f09162477ded7f9baf5ad7a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 25 08:09:36 2008 +0000

    Removed 'packed' from the name, it's not relevant

commit 730d74c87ab4cebae41a54e57d390b156e436887
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Thu Dec 25 06:29:12 2008 +0000

    fixes in user edit and delete

commit d5a1433f2d7db4a5dc669166d633885be010f91f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 25 06:12:16 2008 +0000

    Reload the parent before using when adding albums/photos since it may have invalid left/right pointers.

commit 3a22e0a2dfd9fb45a1baccc11dff82d5e0070c8d
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Thu Dec 25 06:11:07 2008 +0000

    fixed minor log:add typo

commit d4a52649252e0f40fa08158e4ae472f8e260a2ae
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 25 05:57:45 2008 +0000

    get_add_form() -> add_add_form_admin()

commit fdc0f83024ee8a10f223132d9e02a9e10466e46a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 25 05:12:46 2008 +0000

    Big round of normalization of the way that our controllers
    communicate.  Almost all controllers now use JSON to speak to the
    theme when we're dealing with form processing.  This means tht we only
    send the form back and forth, but we use a JSON protocol to tell the
    browser success/error status as well as the location of any newly
    created resources, or where the browser should redirect the user.
    
    Lots of small changes:
    1) Admin -> Edit Profile is gone.  Instead I fixed the "Modify Profile" link
       in the top right corner to be a modal dialog
    
    2) We use json_encode everywhere.  No more Atom/XML for now.  We can bring those
       back later, though.  For now there's a lot of code duplication but that'll be
       easy to clean up.
    
    3) REST_Controller is no longer abstract.   All methods its subclasses should create
       throw exceptions, which means that subclasses don't have to implement stubs for
       those methods.
    
    4) New pattern: helper method get_add_form calls take an Item_Model,
       not an id since we have to load the Item_Model in the controller
       anyway to check permissions.
    
    5) User/Groups REST resources are separate from User/Group in the site
       admin.  They do different things, we should avoid confusing overlap.

commit 6e68c5ca28e52773fca16e77aecdde2b92351af2
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Thu Dec 25 02:59:45 2008 +0000

    added sprintf to strings for tranlation support

commit 2c6a80fb766e11a481e53741b504f484324af546
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 25 02:48:07 2008 +0000

    Don't let the admin delete themselves, either.  That would be bad.

commit 95ec6a8f571c8dbc93cbdcb871f763fdcf074d72
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 25 02:47:17 2008 +0000

    Only admins can delete users.

commit 216ecf30798e740139fdad2a3cf309a9f5cebea2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 25 02:42:48 2008 +0000

    Fix rules for editing users.

commit f6ebb436e46b181152cc32d6fbb2169350c6ea18
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 25 02:38:53 2008 +0000

    Rest_Controller -> REST_Controller everywhere, for consistency.

commit 481352c382d769d9074223ae9c7b6d969f0f6e58
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Thu Dec 25 02:16:41 2008 +0000

    User administration: 1. Add users; 2. Group administration; 3. General cleanup

commit fd49c7460705c4334efb0f943191c80540f3f629
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 25 01:34:17 2008 +0000

    Convert tag module over to returning JSON.

commit 7a9d4a22249e55d0db298827565b8cbe4f031741
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 25 01:06:37 2008 +0000

    Fix the way we dump out comment in _show().

commit cdcd8bf37754fb697a06157ab95029440cba9b0c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 25 00:56:10 2008 +0000

    Update the form first, then clear it on success (else it doesn't get cleared on success)

commit d62acf041f9a880f1762c5a29e8b11133b651ff5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 25 00:53:45 2008 +0000

    Be consistent:  resource is a url, data is the actual JSON encoded result.

commit 0bb82b76216d033742afab91ce9e9a20dd607ad8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 25 00:47:40 2008 +0000

    Gut the comment module and simplify it.  Stop trying to support Atom
    and XML for now, we have no driver for those technologies so anything
    we implement is not going to be sufficiently tested and therefore
    it'll be broken.
    
    Change all comment functions to return JSON and update the JS to deal
    purely with JSON.  This is our new protocol for talking to the browser
    and it should be flexible and portable.
    
    Create comments.html.php.  This duplicates comment.html.php, but will
    be more efficient for rendering comments since we won't be creating a
    new View for every comment we render.

commit 7a82beb752d51e2d0a1c16446a5e27738192aaf3
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Wed Dec 24 19:59:12 2008 +0000

    Adding user

commit 526ac396977154a7eea53b9647f62ada297b30d7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 24 04:25:11 2008 +0000

    Remove stray response:: (not yet time for this.. it's coming!)

commit c7193f9b2ede6ed913d16a9a8047b6867b8afada
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 24 04:22:22 2008 +0000

    Normalize our Admin controllers so that functions always print out
    their results, as opposed to having them return their view back
    upstream.  This is a little more code in every controller, but it's
    much less magical and more consistent.
    
    Look up the active_theme and active_admin_theme inside the view
    itself, no need to do that in the controllers.  This makes view
    initialization easier in the controllers.

commit b2c9a59d1b80cfe651c740c2eabbc0862a7a867e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 24 04:10:00 2008 +0000

    Tersify a log message

commit 1ed83e5569f08b0beed8e477d56b238ca3debcb9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 24 04:09:41 2008 +0000

    Fix bad <input/>

commit b0dff620e2a47be356f85a883875c16f8181c8ae
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 24 04:05:47 2008 +0000

    Minor cleanups.

commit 863e3712c71940276f4c227c9bbf5a57b303972e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 24 04:04:08 2008 +0000

    Add atom to the implicit module list.

commit 672eca53371b131484d00cbe6a069092d0b7f6b3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 24 00:20:26 2008 +0000

    Lots of deltas rolled up into a bigger change.  Sorry for the mess.
    
    1) Deleted in-place-editing.  We'll be replacing this with a real edit
       system that groups settings together and is more coherent.
    
    2) Tweaked the way that dialog boxes work to get the ajax stuff working
       again.  It's imperfect and does not work properly for uploading images.
       This is going to get redone also, but this is a good resting point.
    
    3) Created edit forms for albums and photos.  Moved _update and _create out
       of Items_Controller and into the individual subclasses.
    
    4) Created access::required which is a shorthand for:
        if (!access::can(...)) {
          access::forbidden();
        }
    
    5) Added validation rules to Items_Model
    
    6) Converted login to use the regular modal dialog approach in the theme.

commit c76d730a7c07253e7cc3224a78c616ce63989f40
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Tue Dec 23 21:44:35 2008 +0000

    Edit user - first draft

commit 32a3071477df1b59d40ee65ed3625fa3ca4f78e1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 23 19:07:30 2008 +0000

    Can't self-close a <div>.

commit 76b1500209e5c5becef180eae2abed78d18d09db
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 23 07:30:14 2008 +0000

    Clean up the way that we upload via dialogs:
    1) If the create request is Ajax, then return a 201 Created response code
    2) If we receive back a 201 response, then switch to the new page.
    3) Display a status message when we do an upload.

commit 69daaffb054f20574cb59078ce205920f4678da6
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Tue Dec 23 06:33:28 2008 +0000

    Fixed indents

commit 73d7cb4576ce3e27be738e428b7da759a58c5b09
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Tue Dec 23 06:24:21 2008 +0000

    Make the loading class a bit more reusable.

commit 8f1cd010c07944542886623f0faf1bf877861f42
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 23 06:10:06 2008 +0000

    Reload parent after adding a new item since the left/right pointers have changed.

commit 360fbda04c8882efa053171ffb07fd76efaac940
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 23 04:46:13 2008 +0000

    Only clear the dirty bit if we updated the specific target.

commit 14da6b65b7954663455f0f0e31720959e3215bb3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 23 04:43:54 2008 +0000

    Update to reflect change in album::create API

commit 5713e3c66ed8bab3b86490d7b6e90f7947d53429
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 23 04:36:09 2008 +0000

    Change photo::create() and album::create() to take ORM instances
    instead of ids.

commit 2502240ce4ad25e9fb60ee2468764e25346d2917
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 23 04:14:07 2008 +0000

    Add very simple graphics toolkits.
    
    Track a set of rules in Graphics_Rule_Model which specify how we turn
    original images into thumbnails and resizes.  There's one set of rules
    that applies to every image in the Gallery.
    
    Track the state of thumbs and resizes with a "dirty" bit.  The new
    graphics helper manages the rules and can rebuild the thumbs and
    resizes for any images that are considered "dirty".
    
    Introduce the concept of an "album cover" which is an item that an
    album points to.  We'll use that item as the source for the album's
    thumbnail/resize.
    
    Conflated with this change (sorry!) I also changed the Var table to
    use module_name instead of module_id.  This may be marginally less
    efficient, but it's much easier to follow in the database.

commit 608d0996698716c488318411e10b880796c58805
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 23 01:49:26 2008 +0000

    Update comment.

commit ddcf10dfce923fd07192e7dbc39fa34de3e22be8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 23 01:29:17 2008 +0000

    Allow the site admin to upload watermark images.  Can't do much with them yet.

commit f476e2169ee84922dfe48d5a5065e1eabe40713f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 23 01:27:50 2008 +0000

    Change photo::img_dimensions to take the dimensions, not a photo.  This lets us use it in the watermark module too

commit 0c89fdcfc88a88459c47fdf9df94f764d4ab7702
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Tue Dec 23 01:00:23 2008 +0000

    Added missing semicolons

commit d330e4203ad9709ed7bb05a2815016e7809173c7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 23 00:13:22 2008 +0000

    Step 1 of converting watermarks over to be an admin page.

commit 34daf50695a09237819a1e112f009a9649152452
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 23 00:06:20 2008 +0000

    Add attribute to <script> element.

commit c5173c53709a158b86df3e2fbe514b1063b23375
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 23 00:05:36 2008 +0000

    Remove stray comma.

commit 27a3fc9230dde3f0fb157a27a5890f9761ba0867
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 22 20:42:00 2008 +0000

    Fix a typo

commit 3a71a9d5c19df0d14cb287774fe09a703763d448
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 22 20:23:28 2008 +0000

    Add message severity CSS classes to status messages.  Create
    message::severity_class() to do the conversion and convert the log
    entry code to use that.

commit 37d24e863c7a1356fb66d374810411537af80841
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 22 19:46:40 2008 +0000

    Internationalize welcome block.

commit 47d068e4a8159031a1d8d07b7661f39e62256417
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 22 10:39:13 2008 +0000

    Remove extraneous view, not necessary

commit 03042850ada822efce9fed676e20829fb7db9cd9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 22 10:32:32 2008 +0000

    Fix admin/modules url.

commit bdc0876fa86e29ee439e69024f6f476c49886b99
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 22 06:50:20 2008 +0000

    Add messaging system for reporting actions back to the user.  Make
    module install/uninstall work and tie it into the messaging system.

commit f6381c534e92e230349f5633eb280a22421d9050
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 22 04:54:51 2008 +0000

    Reinstate the dummy error handler to ensure that we work in a clean install w/ no database

commit 17f77b8de4586d1ee4a3693561b71815eb2fc092
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 22 04:49:30 2008 +0000

    Remove module.info from infrastructure modules that are effectively
    libraries that would ship with the core.
    
    Refactor welcome.php to use the newly refactored module::available()

commit 9cf2c5792111570fd831abfad9fc7496995d2e8b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 22 04:33:18 2008 +0000

    Normalize CSRF handling into the access helper.  Probably not the best
    place for it, but it'll do for now.
    
    Do CSRF checking in the Admin controller so that we're safe across the
    board on the admin side.

commit 685a5ca1e1b94cc1a817d699f4223d139689f7cb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 22 04:32:23 2008 +0000

    Support proper rendering of locked modules, add a submit button, point it at admin/modules/save

commit 74c417cab9fc3eff64681c96b04d5f5c5ef555e0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 22 04:31:04 2008 +0000

    Lock a couple of modules

commit b526cc8c0bea4033a1ffadd6706f073f9cb90eeb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 22 03:53:36 2008 +0000

    Add some admin theme callbacks and make them explicitly admin_xxx for consistency
    with the callbacks in the xxx_block helpers.  So in the theme we have:
    
    admin.html.php:
      $theme->admin_page_bottom()
    
    then in the helpers:
    
    core_block.php:
      function admin_page_bottom() { }

commit fe27bd1eb34efe95da6ffe8b6f6c137fe8a18306
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 22 03:41:33 2008 +0000

    Change the way that we track modules.
    
    Each module now has a "module.info" file that has information about
    the module, including the core.  We can display the installed version,
    and the version in the code.
    
    Also take a first shot at a modules admin page.

commit f7b4222e3fc725c2fc4db28840c151c1ebeb801c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 22 03:23:30 2008 +0000

    Fix capitalization.

commit a98d13e9c7788347234ff0af3ce69bc322e4e24f
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Dec 22 00:19:58 2008 +0000

    Update Selenium IDE test case file names.

commit f2f5a67cde270ac3d6dced72714dc9b556825261
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Dec 21 23:59:53 2008 +0000

    Removed my local dev url.

commit 7934076a3bc5f477d8f8b8b2527d17278050851f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 21 21:52:49 2008 +0000

    Add phpdoc comments.

commit 1432ab9aca42f185f0a202cb7ee0acd914da18e7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 21 20:44:02 2008 +0000

    Swap "Content" and "Modules"

commit 849b271a8c3930b5a912f9ec7bd7bba9bac20819
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 21 10:35:30 2008 +0000

    Add info/warning/error classes to log messages.

commit 0573698155f04d6ccb6a68cf63fdeb8c73501576
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 21 04:43:47 2008 +0000

    Add some more logging code.  Now the site admin has some log entries to look at.

commit 4c2ddfb8681392b98f0c10ef7f40937c77e5f20f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 21 04:42:25 2008 +0000

    INFO -> log::INFO

commit b3c05b157969e17db53cb2afe6efe58dbc2b2ba9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 21 04:18:42 2008 +0000

    Move logging up to the controllers so that our logging can operate at a more meta level

commit 3ce32dab5517c0774a65da3494b1c84d930818f1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 21 03:56:53 2008 +0000

    Report actual log entries in the "log entries" admin block.

commit f0b633334416ecb86de0356a06932fcf78efbfb7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 21 03:50:11 2008 +0000

    Add a logging facility, and instrument login/logout to use it.

commit a19a4729b55ac72d487def1bc5da9f427c084ba9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 21 02:36:32 2008 +0000

    Implement the 'Project News' block with actual news from GMC.. woot!

commit 78ce8615f3047e7f25d3d1642a7ff9713695705b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 21 02:02:41 2008 +0000

    Implement the "recent comments" block with real data.

commit f257f1b35085f7dcb5146c6c1ffaa629e99d4cfc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 21 02:02:06 2008 +0000

    create a more generic random_phrase() function

commit 81e87dfecdcd645dad6583373540ea182a50cea2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 21 01:29:25 2008 +0000

    Change "datetime" to "created" to give some semantics to this field.

commit 8f87a030c8abe447feac22022fa6223248979601
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 20 23:19:12 2008 +0000

    Implement the photo stream with the most recently uploaded photos.

commit 99c481897b8d1574bf984a1d5ea732fe63482fe0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 20 22:49:32 2008 +0000

    Add "created" and "updated" timestamps to the items table.

commit 05f26fa2d4d45d99082c81f03fa71922770d18dc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 20 22:37:14 2008 +0000

    Fix a problem with magenta

commit ec8462410f0a8705f870ce0ee2009eb62da127b8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 20 20:11:51 2008 +0000

    Update view counts for albums also

commit 50b0613243d7a841306d3674fc258c9e6952f350
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 20 20:04:57 2008 +0000

    Add view counts and show them properly.

commit 406830cbf8e99919d0d1845e0440c2063cceb301
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 20 10:54:29 2008 +0000

    use some real stats

commit 64f993db6f70554d5dd0e3fe2db672abc4e971de
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 20 07:38:46 2008 +0000

    Update modified to Kohana r3823 (svn merge -c19322 vendor/kohana/modified/kohana trunk/kohana)

commit ad0ddc236cee215a4e59feb3d0762ed847472331
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 20 07:30:27 2008 +0000

    Fix preamble

commit b3b308f36982deaaf5076aa41a6b5783b42a674c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 20 02:08:15 2008 +0000

    Add a missing colon.

commit a5a9a79fa6a162d556b27020c3489fc2f27077e1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 20 02:08:03 2008 +0000

    Internationalize.

commit 0f10f37c1656d0fa9e4eb90ccb367c6a0293b4e7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 20 02:06:14 2008 +0000

    Replace placeholders with real data

commit e4bace4c7414138d8d9b67f79a902f63694fc10c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 20 01:42:18 2008 +0000

    Collapse Admin_Dashboard_Controller down into a single theme call, since now
    all dashboard blocks are stored in modules.

commit b933d1a17096bfe61cf43ee866d7ae5eb557e3af
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 20 01:25:03 2008 +0000

    Move Recent Comments into its own block.

commit 9afd9d05ae71a097488bea88cf87d98405881aa7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 20 01:20:19 2008 +0000

    Move log entries into its own block

commit 16a3e43b45c654e0e882810234a39ea518a70879
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 20 01:16:46 2008 +0000

    Move the "Photo Stream" section into its own block

commit e12a4f2ae392a91db0c649367977d46cedc87e68
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 20 01:13:57 2008 +0000

    Move the "status messages" section into its own block.

commit 68e9dcf027551ea6cde85eefd3b58023d233604d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 20 01:08:39 2008 +0000

    Move Platform and Project News admin sidebar blocks into the new
    modular structure.

commit ac4bb34cf26ea5147849d47bab2747473503d582
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 20 01:00:52 2008 +0000

    Add admin sidebar blocks, and move the stats block into that pattern.

commit aee3efe972317b49329703e354cc1d90afdf9488
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 20 00:52:20 2008 +0000

    Create a pattern for admin dashboard blocks and make the "welcome"
    block.

commit 30d541cb26b1754afdf0f5130dcf75af40457251
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 20 00:51:15 2008 +0000

    Copy this from the default theme and change <h3> to <h2>

commit 99f131d9ae72cf9f954352d7827c1da932ed8c01
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 20 00:50:37 2008 +0000

    Create module::load_themes() to load the correct theme after we do
    routing and know whether we're going to an /admin page or a regular
    one.

commit 6564007a9deb7879b67ec67e81ec91841ddd09a4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 19 22:16:10 2008 +0000

    Implement admin user editing.  It's still very rough.  Trying to
    figure out how to share forms between user and admin editing.
    
    Incremental improvement

commit 9d2d8243362c13e6e918f896b124dfd2181c8890
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 19 22:14:14 2008 +0000

    Fix a bug in admin delegation.

commit 17c0b01444cd2f5aa8e3926a50960e9e1c0d730d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 19 22:13:33 2008 +0000

    Add access::forbidden()

commit 855a5928ce74f72352c454c3d613eea60d39682c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 19 09:47:13 2008 +0000

    Create a new pattern for Site Admin controllers:
    
    1) They must all start with "admin_".  This pattern is not directly
       routable.
    
    2) Their urls must be /admin/xxx.
    
    3) The Admin_Controller will take the xxx and look for Admin_Xxx_Controller
       and will delegate to that admin controller, after doing security checks.
    
    Moved the users and dashboard views into individual modules for now.

commit 2438dba3961265e92cbc804ca07e893ba50e03d1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 19 07:16:38 2008 +0000

    Delete the var/thumbs .htaccess files, too.

commit 12e9c136f2731ad2f24d79344971fc2e34bb9772
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Dec 19 06:10:45 2008 +0000

    Add a bit more space under gHeader.

commit 5d2b1ae05697e0326bd7076b4906d59ad98e9ba6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 19 03:05:11 2008 +0000

    Don't try to validate the form unless it's a POST request.

commit 0cf07fbeec6a7fb34742c9198329a4180a935165
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 19 03:02:58 2008 +0000

    Fix indentation.

commit 6a58deb3a13a8e77150b16ba4c1686d58450c65f
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Dec 19 02:02:38 2008 +0000

    Missed this in last commit. Say it with me, run svn status before svn ci :)

commit 4a4ec2b48653bf6ce4802c8c81bd743a3dfd04c1
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Dec 19 01:54:53 2008 +0000

    Restored admin menu. Restored call to default theme's style sheet during development, to simplify the process. Admin specific styles go in admin_default/css/screen.css. Moved jquery files out to css and js.

commit 8b3e2445781d09825fa4f7d65b34011f7006d35a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 19 01:26:49 2008 +0000

    We always have at least 1 page in an album.

commit c00dc21ba82a06727078a65a15ffce961d16787a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 19 01:24:27 2008 +0000

    Add session based CSRF protection to all forms

commit 5ca17fd273c19a2d9fbff11d3c4bcf426d2cc6a9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 19 00:48:45 2008 +0000

    Allow server-side adding of images to other albums than the root

commit 77c97daa3725bb92690e38d52b0619843fede3ef
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 19 00:47:37 2008 +0000

    Don't restrict image overlays

commit f5bc55e72dbce5f8f1ffbf4e20d3ed806cfaa232
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 18 22:35:16 2008 +0000

    Add labels to the form groups.

commit a74537ad59ff37defe9a1901b83200d96db73e7b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 18 22:29:49 2008 +0000

    Don't wrap hidden inputs in <li/>

commit 052bb79d68b7b9aba782b69dfbcca4b831464d70
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 18 18:50:27 2008 +0000

    Add <fh:complete/>

commit c67234974d578cacfd354b103e1f166e8ea2c426
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 18 07:32:34 2008 +0000

    Refactor site admin menu into a theme function and build the menus in
    the various modules.  In the process, rename xxx_menu::site_navigation() to just
    xxx_menu::site().  And add xxx_menu::admin().
    
    The menus are the same as before, but I changed the HTML to be
    consistent with the way that we do it in the regular site, and this
    broke the superfish styles.  I don't know how to fix this.. help me
    Chad!

commit aed68bfa9f68bfbc5df09135bec371b98a579671
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Thu Dec 18 07:00:47 2008 +0000

    I'm tired of clicking. Here are a few Selenium IDE tests.

commit c2598fe4d85f9c3b737ea40959f44bf04172eafa
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Thu Dec 18 02:50:40 2008 +0000

    Dialog polishing. They now resize their height. Updated form styles in the context of dialog display (don't show legends, fieldset border, or submit button).
    
    Let's make sure that all forms generated are complete and well formed and then use JS and CSS to control their display and behavior in different contexts.

commit dc5faf0ebf64461246da9691d754e563c20e5f42
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 18 00:41:55 2008 +0000

    Update cookie handling to ignore $Version, $Path and $Domain cookie
    attributes and make it RF2109 compliant.

commit c92fbfd3c39cb665504ffccb0036e90a777327f4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 18 00:29:22 2008 +0000

    Add <generator> element to try to make Polar Rose happy (it doesn't work, though)

commit db110df5baebc3d780200d281812700a07b6fa45
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 18 00:28:30 2008 +0000

    Absoluteify some urls to make feedvalidator.org happy

commit d4f1f6400fe6749f3773d6b317a5f19bb908b710
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 18 00:16:03 2008 +0000

    Polar Rose facial recognition module.  Currently in a non-working
    state because their server is not RFC2109 compliant.  Filing a bug.

commit 55f63f6c9fb0f206ba7b8fde4310edbfc8c75eb5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 18 00:02:59 2008 +0000

    Add item view permission checks.
    Switch from absolute urls to relative ones.
    
    Relative urls break the flash based slideshow, but the Cooliris
    extension works.  I'll file a bug.

commit b37047ff557c88becd662bd6622bf27f7a9a78f2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 17 22:39:33 2008 +0000

    Add Item_Model::viewable() which we can use to restrict any query to
    just items viewable by the active user.  Ie:
    
      ORM::factory("item")
        ->where("name", "foo")
        ->find_all()
    
    Would get all items with the name "foo".
    
      ORM::factory("item")
        ->viewable()
        ->where("name", "foo")
        ->find_all()
    
    Restricts it to just the set of items that the user is allowed to see.

commit fe396410894f9fcf430e31216312f70db800d96e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 17 19:28:26 2008 +0000

    Update Kohana code to r3799 from their svn head.  All tests pass.
    
    Resolved upstream tickets:
      http://dev.kohanaphp.com/ticket/972
    
    Command:
      svn merge -c19275 vendor/kohana/modified/kohana trunk/kohana

commit 093fb407a839b1bdacd0cd6036b349a42dcfea7d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 17 19:23:04 2008 +0000

    Fix a bug where setting the active user did not reset group_ids (unit tests ftw!)

commit 9b6ccfc7f3b495ddc62304ae51da6c1b96810f2b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 17 19:06:39 2008 +0000

    Fix some lint errors

commit 26f0b4e44d90230f5a3f292b36f1e65b6eb32365
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 17 19:04:20 2008 +0000

    Clear out module list in load_modules() before trying any db operations

commit d1c737ffac4f0574f3fd649bc7cb191297d87365
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 17 19:03:36 2008 +0000

    Extend the changes in list_tables() and list_fields() that uses
    TEST_MODE to avoid static members.

commit fa5a8fde4a378c4a4940eba323de7e2e61054d36
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 17 18:32:08 2008 +0000

    Switch from cookie sessions to database sessions.  We can't use cookie
    sessions; it encodes all the value into the cookie which means
    little/no security, transfer costs, and storage limits.

commit 130e26983aedac1e4bb9f26d6a82c629248075e8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 17 17:40:45 2008 +0000

    Add initialization to the user module to put the user and group_ids
    into the session, for easy access.  This cuts down the number of
    queries when we're loading images through file_proxy.php

commit 2abe82f106ecf68d40df5dee40876edd06ff5f60
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 17 17:10:08 2008 +0000

    Put Gallery3 under GPLv2

commit 01f6c67eb5403c10c6d42ced6ee7310cf515e7d9
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Wed Dec 17 06:22:08 2008 +0000

    Added .gLoadingLarge and .gLoadingSmall to show ajax loading indicator. Applied to modal dialogs.

commit 78cd00312e875a5f448b0c1e079644586da42f07
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 17 05:53:05 2008 +0000

    Improve performance by finding the item without walking the tree.
    Instead, use the level and the name to get a short list of candidates,
    and check each one of those.  In most cases, this query should give us
    the right result the first time.

commit 8630d61051d3fc2292cec35d098e239132870fa5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 17 04:55:49 2008 +0000

    Change the album thumbnail/resize from _album.jpg to .album.pjg
    because the leading underscore confuses the Kohana router.

commit fc7b78492bc671f6dd78e04f5d42de958cdfb1d7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 17 04:45:35 2008 +0000

    Separate thumbnails out into var/thumbs.   This clears up some ambiguity in Item_Model and simplifies
    file_proxy.  It also means we can stop munging file names in the var/resizes hierarchy.
    
    In the process, rename "thumbnail" to "thumb" everywhere in honor of
    Chad (well, ok because it's shorter)..

commit f8a0c91ce689c5e0ae7bf05cc75b9982a3b26baf
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Dec 17 01:26:40 2008 +0000

    Drag & Drop the watermark now works and so does the dropdown box.  The target image is divided into a 3x3 quadrant referenced as: northwest, north, northeast, west, center, east, southeast, south, southwest.  Similiar to the imagemagik garvities.  Currently the watermark is placed in the left top of the particular quadrant.

commit 9fa566a1c9d88436df6c1de2902f0e3d01b42f21
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Wed Dec 17 01:19:13 2008 +0000

    Added label to add tag form input

commit 3c05b95620f46c7042471371a3cab9d87f7da75e
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Wed Dec 17 00:45:52 2008 +0000

    Added JS to set/reset simple forms' input values to their corresponding labels' value. Labels should always be used with visible inputs. Use this to style and control short form input display and behavior.

commit f4c6a20149eceae01d2085264f7facf516fd6bb8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 16 23:59:33 2008 +0000

    Remove error checking; if this fails let it fail noisily for now so that we can find problems faster.

commit af32e5708db12c91c02616c363d8bb4201a66fa7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 16 23:36:56 2008 +0000

    Remove all caching from ORM_MPTT.  This was premature optimization: it
    wasn't benefitting us, and it will get in the way when we want to add
    implicit view protection to our queries.

commit 34484fb1b5b8cfd881fe5aea68b4d6ec0e46d43d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 16 23:33:43 2008 +0000

    Dump out the stack trace on errors.

commit 59bb72df888ca3652702b5ef5bbf8ef39deafadc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 16 23:11:24 2008 +0000

    Fix preamble

commit 8c7d0a76e55acd6be2da05a7ab119b696e5f3a37
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 16 23:07:33 2008 +0000

    Add file_proxy.  This is controller gets triggered by .htaccess
    protection on var/albums and var/resizes and only displays files to
    the user if they have "view" permission on the base ite.

commit 363548bfc451e22053b8546433a5fbe7a5b52f46
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Dec 16 20:40:29 2008 +0000

commit b0c21915e96fbd520874961867530e765abd7563
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Dec 16 19:16:34 2008 +0000

    Oops, remove the () on the parameter to $("#Dialog").ready(...) so we pass the function, not the results of the function call.

commit c32988a097d6199194ae156fafbac444a0b9b56a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Dec 16 19:12:24 2008 +0000

    Separate the handling of the dialog resizing into the watermark.js, so we don't have to download the watermark dialog initialization with each request.

commit 59bc7dc22c650e731ae3db1f5d6df0d05a389191
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Dec 16 19:06:03 2008 +0000

    1) change the selector for the the function to gDialog
    2) Once the dialog is resized, center it

commit 04441e11cccceea92454d3fcbc54e0e103fb8bd6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Dec 16 17:30:18 2008 +0000

    1) Remove the load watermark from the scaffolding... use the menu option
    2) The set watermark dialog is now sizing properly.  @todo is recenter in the window

commit 931d8c6bdce9fa4656d36c2f07ff6a38d0b47c5d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Dec 16 17:26:19 2008 +0000

    Submit the form using ajaxSubmit

commit 4c3c68ac10161e37804b76e640c0d3893b7389bd
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Dec 16 16:29:59 2008 +0000

    Add Submit and Reset buttons to the dialog in order to trap the form submission so the form doesn't close.  There might be a better way, but i couldn't think of it.

commit a0e07764c14ef5567a0f9375ecb03951fdc89b27
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 16 11:04:47 2008 +0000

    Make the breadcrumb a little larger

commit e2544da5b0f1a1a8a2706c9487374b9fac58c597
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 16 08:27:06 2008 +0000

    Alphabetize field names to make it easier to find 'em.

commit 3e219aab6ba88738832627ac39a3b3249f0ce2c3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 16 08:17:00 2008 +0000

    Change htaccess rules to use mod_rewrite

commit 8bd7afeb5b98cda47fce9df8a32ce85d9ef1a173
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 16 05:13:04 2008 +0000

    TEST_MODE always exists now, so check its value, don't rely on its existence to know that we're in test mode.

commit 83363172b1d42b0d5c27d555a497f49fcad34b11
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 16 05:04:42 2008 +0000

    Don't use model_cache for get_version and set_version; that breaks the installer.

commit 327398458219c42bc8b060490b4ff1eb18631f3b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 16 04:56:51 2008 +0000

    Use model_cache::get() to reduce duplicate queries

commit 65a340efd8ab353ade7797893348b747adf82d98
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 16 04:52:16 2008 +0000

    Fix a bug where we were using module::set_var() instead of module::get_var() resulting in
    loading all photos in an album on a single page and updating the var on every page load.

commit e82b08db20b9d052bc42ff5eb3bfedbc5aa519a5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 16 04:45:52 2008 +0000

    Make the profiler output more legible by adding some padding to the table.

commit 52a7607336be794e9892dd87a53d09ee97ecb392
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 16 04:31:33 2008 +0000

    Define TEST_MODE 0 when we're in production

commit d9e02a5d0c1a81925df33a9b25501fc90db91451
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 16 04:29:00 2008 +0000

    Various optimizations:
    o Add model_cache::get() which caches models avoiding duplicate lookups
    o Stop using ORM relationships for Item_Model::owner so that we can use caching
    o For Item_Model::xxx_edit fields, don't make them editable for guests
    o Other minor stuff.
    
    These optimizations reduce the number of queries for a 9-photos page from ~200
    to ~45.  Still way too many!

commit dc089173456c95dcec1e6184b8e6b5b2810ced52
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 16 02:31:13 2008 +0000

    Fix a bug where we were not deleting the .htaccess file on access::reset()

commit 02aa98b6e0f4bfdc70cbb28e16910c2f173072f9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 16 02:25:47 2008 +0000

    Colorize test output

commit 61618af0db392e044ce54ab4cd585cf792b21751
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 16 01:04:19 2008 +0000

    Create and delete .htaccess files based on the view permissions for
    the group::everybody() user.

commit 898d001330230569f5cd0c280fbb499fd6005f2f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 16 00:50:51 2008 +0000

    Fix capitalization.

commit eecf7bd51823edfdded0fb86a8f31dd1d30beefd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 16 00:31:50 2008 +0000

    phpdoc cleanup

commit 3d2fc86604cca5df2d9578564f653528063ba24d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 16 00:30:05 2008 +0000

    Permission only function on albums.

commit 92e6ed8a8a9baad24318299edbaa0da1236089ce
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Dec 15 23:08:18 2008 +0000

    Start of the dialog to specify the watermark placement.  For convience, using the imagemagik nomicalture regarding watermark locations (east, west, center, etc.)
    
    You can drag the watermark around but it doesn't stay in place.
    Need to figure out how to resize the dialog box
    
    and all of the supporting javascript

commit 2f8b4df0f564c883d7cdcf07936ce639b806a322
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 15 21:23:00 2008 +0000

    Protect menus and blocks against the fact that we don't have an item
    on tag pages.

commit 743ffe96ed148bbc780ad5679da44dc8064cbb17
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 15 21:18:38 2008 +0000

    Refresh from Kohana r3778.
    
    Resolved tickets:
       http://dev.kohanaphp.com/ticket/967

commit b6363bcb03fcb9644989336b983e0fd4ab2d574f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 15 20:49:05 2008 +0000

    Update to reflect changes in Kohana ORM relationship code.
    Now you must call ORM::save() after ORM::add() and ORM::remove().

commit 1d3e1484a7456ec707df2d20abe33b33d613321a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Dec 15 19:51:49 2008 +0000

    The admin high level menu is shown if the active user is not a guest.  Other sub menus depend on the appropriate level of access

commit b9c45407ec5622e1f29a116f827662bb1bd30b36
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 15 10:10:59 2008 +0000

    Reapply r18995: disable static table caches when we're in TEST_MODE.

commit 3ae6ae53e6f146176877c3a808c36fb968d6ae60
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 15 10:09:42 2008 +0000

    (merge of vendor/kohana/modified/modules/unit_test r19226) Re-add english versions of unit test messages

commit 8023325429aae98390be9e2effd3910084b68575
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 15 10:05:00 2008 +0000

    Fix Database::instance()->list_tables()
    
    Upstream ticket:
      http://dev.kohanaphp.com/ticket/967

commit 3131662c195bd3e2400f2499a66e084a32c90c71
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 15 09:51:48 2008 +0000

    Reapply r19116:
    Add support for filtering tests down to the Class::method level.
    
    Upstream ticket:
      http://dev.kohanaphp.com/ticket/961

commit b5e6f79f5fec0709e6eeab4f5813f9c60dbec431
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 15 09:45:55 2008 +0000

    Reapply patch to make tests always call teardown.
    
    Upstream ticket:
      http://dev.kohanaphp.com/ticket/960

commit 7b5713d485b5e9cfb0537e66a365998ef3775e57
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 15 09:34:54 2008 +0000

    (merge of vendor/kohana/modified r19221) Remove captcha, swift and pagination message catalogs; we don't need those

commit 0567334c62c9fe4da7f68d37fd5f833f198bba7e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 15 09:31:55 2008 +0000

    (merge of vendor/kohana/modified r19219) Add back in English localization strings, else we're missing a lot of critical strings at development time

commit 93977e579cca9a9d0df28099e1fb7596bcc1c825
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 15 09:22:32 2008 +0000

    Refresh of Forge r168 from vendor/forge/modified

commit 4fe895a2c473cd22e4741552186fe2be48503167
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 15 09:21:44 2008 +0000

    Delete forge in preparation to refresh it from vendors/forge/modified

commit 3b35e8b91ce94c292b46a296d034542ac5f0f6da
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 15 08:56:18 2008 +0000

    Refresh kohana from upstream svn trunk r3771.
    
    During this process, remove a considerable number of files from kohana
    that we will not be needing in Gallery3, including the following files
    and directories:
        kohana/application
        kohana/example.htaccess
        kohana/index.php
        kohana/install.php
        kohana/kohana.png
        kohana/modules/archive
        kohana/modules/auth
        kohana/modules/flot
        kohana/modules/gmaps
        kohana/modules/kodoc
        kohana/modules/payment
        kohana/modules/smarty
        kohana/modules/unit_test/i18n
        kohana/modules/unit_test/tests/Example_Test.php
        kohana/modules/unit_test/tests/Valid_Test.php
        kohana/system/config/captcha.php
        kohana/system/controllers/captcha.php
        kohana/system/fonts
        kohana/system/i18n
        kohana/system/libraries/Calendar.php
        kohana/system/libraries/Calendar_Event.php
        kohana/system/libraries/Captcha.php
        kohana/system/libraries/Tagcloud.php
        kohana/system/vendor
        kohana/system/views/pagination
        kohana/system/views/kohana_calendar.php

commit 628058b4ed5aefb543ceb6ca9d3b87828c66bef1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 15 08:52:32 2008 +0000

    Refresh from kohana svn trunk r3771

commit 31759cb3b3090c1b9d68ac54f2d2622584003563
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 15 08:37:09 2008 +0000

    Delete trunk/kohana and trunk/modules/unit_test in preparation to refresh
    them properly from the vendor branch.

commit e73bd90285e1082449990e8118b91aa853eb5e6f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 15 08:35:46 2008 +0000

    Convert tabs to spaces

commit 011fe8bc934f07a1b851c8025ab68c3fdee1e53b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 15 08:35:30 2008 +0000

    Get rid of windows line endings

commit cf47b3d45c99bae2120dfa1d365eef91fd42f4fc
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Dec 15 07:08:13 2008 +0000

    Fix that rascal IE. Added conditional HTML comment to use fix-ie.css for IE7 and earlier. Fixed bg images in album/item view buttons, IE 6/7 don't appear to handle background-position: center center :(

commit 20d5f45218073c1c4c60a32d6f939b5ae4bb6b58
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Dec 15 06:37:56 2008 +0000

    Fix the reference to jquery-ui.packed.js

commit c68a0823b9bd43ca5519fe534978681f3b376061
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Dec 15 06:17:17 2008 +0000

    Should be ul, not u#gLoginLink

commit 1a5da095ae6f70af8353d651b025725b194f7bdc
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Dec 15 06:11:32 2008 +0000

    Renamed vars used in dialog init to avoid confusion and conflicts.

commit bc40b487294c1d2d34ad7a48f29f8f3580b606fe
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Dec 15 05:08:22 2008 +0000

    revert the creation of a global gallery3 javascript variable

commit 30c6ba48ea122a4cd313691297f02fcfcfb18535
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Dec 15 04:55:09 2008 +0000

    Forgot the quotes

commit e665a21038ed197eef4ddda9f9525ca173ee0f37
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Dec 15 04:53:16 2008 +0000

    Set up a global gallery3 javascript variable where we can put things that need to be passed into the javascript

commit 1cb02685894f3aabcde64429d9f69b0de329ec5b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Dec 15 04:40:09 2008 +0000

    Change the label on the watermark form upload element, so the error message is at least somewhat meaningful

commit 15c22471cc2aab3255595497d632a14cdc591544
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Dec 15 04:23:57 2008 +0000

    Cleanup watermark.js

commit 96d906c903934601b86d776792d75fb2bb71037f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 15 03:59:03 2008 +0000

    Update Forge to r168 from upstream.
    
    Resolves these issues:
      http://code.google.com/p/kohanamodules/issues/detail?id=6
      http://code.google.com/p/kohanamodules/issues/detail?id=7

commit b2107c37344a6013cedfcbff824accebd99c6112
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Dec 15 03:49:48 2008 +0000

    1) Move the deletion of the vars into module::delete helper
    2) remove the watermark_add_form.html.php

commit 119344d9db9873918995886af938f968cd21b922
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Dec 15 02:45:50 2008 +0000

    Switched login display from display in the header to a dialog. Validation errors don't display on first failed attempt, will fix later. Moved jquery js, images, css out to respective folders.

commit a91492bc293360aca9ff2c0f5ec03537d02c1a08
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Mon Dec 15 02:42:30 2008 +0000

    added missing png file to admin theme

commit e66a31bf45d62892125482dba0e68fe145cd382a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Dec 15 02:40:17 2008 +0000

    Change the login form so that the legend is populated

commit f9906978bf998a4bd475a6df722fa47f1fb89c03
Author: Jakob Hilden <jhild@umich.edu>
Date:   Mon Dec 15 02:26:59 2008 +0000

    added move handle icon to the sidebar blocks

commit 2812f34732fd23094103b8bfe906d2adddd4f8fd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 15 01:55:07 2008 +0000

    Rename default_admin to admin_default.

commit 2842a1a8be748f6ec1024ea3a8ecc97471f70a3f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 15 01:52:04 2008 +0000

    Argh, fix a bad rename.

commit 1127257f638ce641f23751928c449c3121622a8d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 15 01:50:52 2008 +0000

    Rename default_admin to admin_default.

commit 20f6be62c827ab975c652f0d841cfa85d33405ed
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 15 01:49:25 2008 +0000

    Add Admin_View

commit ac8bb530c2bfb013c444c4119a2396274231143a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 15 01:49:15 2008 +0000

    Add proper preamble

commit c02d2554cfdf23a91b6b756ada91ab1ce1018280
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 15 01:48:34 2008 +0000

    Refactor admin dashboard.
    
    o Copy all the assets from default to default_admin so that they're
      totally separate
    o Get rid of $item_theme
    o Rename list_users.html.php to users.html.php
    o use __call in admin controller to allow us to load any admin page

commit 19e75b1e2ed73521b3cad01e55d546d3a6b55587
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 15 00:37:31 2008 +0000

    mark unauthorized exception w/ a @todo

commit db7e60da32e3feba918cc819a1ef8fada6aec02a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Dec 14 23:53:30 2008 +0000

    Change the watermark module to use forge.
    Also the watermark file is now stored in varpath.
    and the location is stored in the module vars table

commit c46bd97407e2eef500fa224ef7593193e3da6d18
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Sun Dec 14 21:50:10 2008 +0000

    load admin subpages AJAXy way

commit b7487e384d47b4ca444844c972be83c77ad4ea74
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 14 21:39:56 2008 +0000

    convert single quotes to double quotes for consistency.

commit 4b4e9e8e45465012805854dd322431f87f2b09c7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Dec 14 19:43:04 2008 +0000

    The start of the watermark module.  It doesn't save the watermark at this point.  This is more of trying out the approach where Forge is not used for forms.  Basic html and the Validation library.

commit 7fa014ae61b7463632e67923b745a6de07dd3f20
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Sun Dec 14 07:59:24 2008 +0000

    refactored admin views and added 'List User'

commit 8b81731846f4778fc176d04259eb6dbb30daa3d5
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Sun Dec 14 04:39:22 2008 +0000

    clean the links and require authorization before showing admin pages

commit cb92d1a70dfe6e14c9f76b322bff038564acc7d6
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Sun Dec 14 04:16:38 2008 +0000

    1. fix up the <link> and <script> elements in the dashboard <head>.
    2. made the images work properly

commit 1c279887aa261c887a4695f93c9aa18f012fe72a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Dec 14 03:48:32 2008 +0000

    Should be get_var not set_var

commit fc1e7a933372929d32f2d56a23b3c79e6e72439b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Dec 14 03:19:31 2008 +0000

    1) fix Forge_Group to display the label (will raise a bug with Kohana)
    2) Change form.html.php to use the group label instead of the name
    3) Converted the add photo to explicity set the label of the field (new coding standard)

commit 23343fc4f61f25a66f9c2ae6f17683ce3bfb922d
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Sun Dec 14 02:46:28 2008 +0000

    Revert accidental commit

commit 34c9aa52b804ef3bdffde4e9cde496be020eb2e7
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Sun Dec 14 02:45:07 2008 +0000

    Fixed tabs and line endings

commit 13ad40ab5cfd1457a0d9b536d837d558ae1badde
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Sun Dec 14 02:23:37 2008 +0000

    Created admin controller and made admin obey admin theme settings

commit c322f1fe4c02c586c779d673baf8547bd30ae611
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Dec 14 00:15:23 2008 +0000

    Removed call to jquery.dimension

commit aa81669ec5568919cbb5acef3a717fbe57317022
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Dec 14 00:14:11 2008 +0000

    Removed jquery.dimension. It's methods are part of jquery core.

commit a56c118d442852e00b4230f59f63213818904be3
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sat Dec 13 23:38:49 2008 +0000

    Sidebar and comment white space and text size updates.

commit 92102c891c36045142fea5c2293f310752a57166
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sat Dec 13 23:02:16 2008 +0000

    Layout cleanup and simplification. Move view-mode buttons into sidebar, search to header_top. Reduced borders. Started album grid improvements. Minor white space improvements. Still need to handle text/photo alignment in album grid, improve placement of search.

commit af8c74f6125478450072fd105d54172dcba1bf8e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 13 20:06:20 2008 +0000

    Fix a bug where parent permissions were not getting inherited to newly
    created albums and photos.

commit d480778108d431b26a2e3413814380943d2d804d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 13 19:49:58 2008 +0000

    Don't have to check if the item is loaded now, access::can will guard against unloaded items

commit 8ba5ea3cf832f42e93e98c3b984962ace3abf2d1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 13 19:49:33 2008 +0000

    Make sure that access::can fails if the item is not loaded

commit 65e237a59a99d7c5e8c32cdc7c730414f6dea30f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 13 09:53:36 2008 +0000

    Fix security pattern.  We can't successfully call access::can unless the item is loaded.

commit ee688d1f37ec424d6761bff7008021b6a122c76f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Dec 13 08:37:41 2008 +0000

    Reload modules *after* we blow away the database to flush out caches

commit e7a763a8c2f49821a1c0de7ce5f9217f200e08d8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Dec 13 08:27:14 2008 +0000

    Add permission check on the tag add controller, in case some bypasses the view and tries to access the controller directly.

commit fc3fd3321df5e116975bc6c447768f7d8180b87e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Dec 13 07:49:27 2008 +0000

    Add a permissions check to determine if the active user has edit permission on the item in order to display the tag add form

commit 80792d4fb156e8c9a06760361bbb66b5a7c1db59
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Dec 13 05:01:12 2008 +0000

    Set the resize and thumbnail maximum dimension into the module vars table

commit 7b7bf37e673d184556c114d6083b2d7699ab00d3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Dec 13 04:12:40 2008 +0000

    Set thumbnails to 200x200 and resizes to 640x640 and let the Image::resize method pick the right aspect ratio

commit ec5b8dabed64845e8390856eea0a9392c67fad2a
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sat Dec 13 02:48:59 2008 +0000

    Whoops. Missed this in the last commit.

commit cc9aa9e72c923be279c984547e8acf655ad83134
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sat Dec 13 01:48:35 2008 +0000

    Admin menu now similar to Wordpress admin menu.

commit 8f4fec1f3d4d039547e8b318debebdfce9d3313d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Dec 12 23:02:53 2008 +0000

    Change the check from class_exists to module::is_installed

commit 43e626f99e24c9ba12719f464e71e6f28cff7938
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Dec 12 21:37:11 2008 +0000

    Change the resize option on creating thumbnails and resizes to Image::AUTO which will preserve the aspect ratio of the original image

commit 942dbe175ca1697c0cca99fb7aae03de6ca398e0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Dec 12 19:39:38 2008 +0000

    Remove a couple of todo's by store the "theme name", "admin theme name" and "page size" in the vars table and initializing when the core module is installed

commit 7715aa9c64e190585eda165a31c42de139bcd416
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Dec 12 19:36:07 2008 +0000

    If the user class doesn't exist, then just set the owner_id to null. Another issue of generating data before the user class is installed

commit e12451cf1033e6b6cfa8e278894ccac3098ddd84
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 12 08:41:48 2008 +0000

    Refaactor module::install() and module::uninstall() out of the
    scaffolding and unit test code so that we can use it consistently.
    This fixes an issue where adding a module was not refreshing the
    statically cached module list causing the test framework to break.

commit 7e4d13d9bdc43ecc3b6cdd7144c40d70cda11c5a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 12 08:00:07 2008 +0000

    Point the Site Admin link at the wireframe for now.

commit 597cc0013c5c540d95e3e7e6f82d8bd0a2dcae74
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 12 07:55:19 2008 +0000

    Make the error handler public, else it can't be called from outside
    this class (which is the most likely scenario).

commit 79226f0a8f820e08e5ff19cec7e8484fa7385fa9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 12 07:53:54 2008 +0000

    Cache modules and module_names when we call load_modules so that we don't have to check every time

commit 6ef284ac401c7a8e72f8b2bad3058281ea6d7266
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Dec 12 07:47:25 2008 +0000

    Dashboard protoype updates: Added welcome/general info block, logo, login menu, link to view gallery, close links for blocks, changed Logs to Statistics, and upped the font size.

commit a0415afc1da629a8f47dcf2265ba2a36907c9567
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 12 07:44:19 2008 +0000

    Use restore_error_handler() instead of a second set_error_handler() call

commit 187f28a6b3f1deecdae913b2958c82d8e16414e1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 12 07:42:26 2008 +0000

    Yet another deal with bootstrapping when we've got no core install yet.

commit 2fb94444d963a288bcb4f0a9bf9a8cffdc9e9e04
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Dec 12 07:40:53 2008 +0000

    Randomly choose images from core/tests/images as test images

commit e65f8d50226ba13e01f3c3463ff67aeccac2b83a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 12 07:25:43 2008 +0000

    Remove head() for now.

commit 11d4e2d7258ab17cff54c8f2062afdb47886b95e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 12 07:12:48 2008 +0000

    Don't show the access tab if the user module isn't installed

commit 6fd19dedbc1485084520726d617836ec58793346
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Dec 12 07:10:48 2008 +0000

    Remove local_import directory

commit 54d27238f38c596f5158f8bac112b1d08ca47542
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 12 07:09:00 2008 +0000

    Fix module::_core_installed() hack.

commit a3142246e4c2f587e524571cf319bec68b339bb3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 12 06:54:48 2008 +0000

    Move the view permission cache directly into the item table for efficiency.  Unit tests ftw!

commit ffbb164934c5a9d9778736202897218393581311
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Dec 12 06:54:30 2008 +0000

    New scaffold images. Landscape, portrait, square.

commit 8b3989b063c37f37a4ac832c4d60b1b7e1dd9ac9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 12 06:54:13 2008 +0000

    Add user::guest() convenience function

commit b54b34ed78792806dd9b8785aa194e8ff03154c5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 12 05:39:06 2008 +0000

    Pass list of test dirs into Unit_Test::_constructor() as an argument
    instead of modifying the config.

commit 987814cac22ba3d7fbce2a922d7e305b8d0e6fe7
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Dec 12 05:12:11 2008 +0000

    Missed this on the last commit. (Menu updates and added Gallery Info block for admin dashboard prototype.)

commit 732e43747ff3d5e78eb12c368d0720081ac11d80
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Dec 12 05:09:35 2008 +0000

    Apply padding-left to avoid overlap of text on message type icons. Menu updates and added Gallery Info block for admin dashboard prototype.

commit 697c2503ae4582fefa572c6f72dfba0e4adae717
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 12 05:02:44 2008 +0000

    Add support for filtering tests down to the Class::method level.

commit b202816324c3a6bf515a8d938c33e882106f26da
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Dec 12 01:46:43 2008 +0000

    Remove the attempt at a local import module

commit 35067cbced6dadbc4cb7e7a45334485320eb473b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 12 01:22:03 2008 +0000

    Expand on our core-is-installed checking code.

commit 63f6e037a7f7e53d40ac17f8a1adc5dc5fb378b7
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Dec 12 01:08:25 2008 +0000

    Keep .gError and other message type classes from wallpapering bg icons on form and form child elements.

commit 2cf3233f546dfa38521bd9ec280dbec9a9fb7612
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 12 00:59:30 2008 +0000

    Get rid of all pseudo users and pseudo groups, while preserving all
    other functionality.  This makes our user/group and access code
    fully consistent.

commit 0f41cab73201ca2669f4cce88d7e195d7cb28285
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 11 23:10:42 2008 +0000

    Guard load_modules() against the case that the database isn't installed.

commit bd992a97b217fe2c33bd7cb6df0f61adc7d64ebc
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Dec 11 21:27:16 2008 +0000

    Remove the options menus from the albums and photo pages and move to the site menu

commit bf10544e27a8c942e6907d059586119b80112337
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Dec 11 20:47:09 2008 +0000

    Destroy the popup dialog when it closes so there is nothing hanging around and we can reuse it for a different popup

commit faeb52e7f4d7a16242c9a7c1674cb1798058d179
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Dec 11 19:22:38 2008 +0000

    remove the <span class="ui-tabs-nav"> from arround the site menu.  It was clashing with the superfish styling.

commit bcd10e4a7fb0ecc7d7649ee29184a7c036cab4a7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 11 19:12:41 2008 +0000

    Convert a stray <li> to </li>

commit 914164d5ebd490d946541668eb78571d2f2c023b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 11 19:06:40 2008 +0000

    Split _update_access_cache into two functions separating view from
    non-view.  This is a step along the path towards moving the view
    access cache into the item model.

commit 1af3b8e10022323769a7080532a9a89f907407c6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Dec 11 19:01:47 2008 +0000

    Changes to the Menu.php:
    1) separate the classes that are generated by the Menu class from what is used for the rendering. The classes that are generated are gMenu, gMenuElement, and gMenuDialog for the Menu, Menu_Element and MenuDialog classes respectively.
    2) Changed the ui.init.js to add the appropriate rendering classes to the above classes. All gMenu elements have the sf-menu class added.  All elements of class gMenuDialog have the gDialogLink class added.
    3) Use Superfish for the menus so they now float properly.

commit f3d40c02ecdf061a21e877e03e6c91d9b6c4b2c9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Dec 11 18:53:54 2008 +0000

    A a script block to the <head> of the page that creates a javascript variable (base_url) such that javascript on the page can find the base url of the site in order to generate ajax callbacks.

commit f5b63e5261649ae078fea15ddbc8833035a19983
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 11 18:31:02 2008 +0000

    Fix preambles

commit 5e196e5a374848acfcc558d4d103d8293e273704
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Dec 11 17:22:40 2008 +0000

    This file got left behind and is lonely

commit e1f2a5d4e60f431e0a94c998afc026f1136fb26b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Dec 11 17:20:55 2008 +0000

    1) Begins the creation of the local import module by adding the administation component to the scaffolding Actions tab.  The importing functionality will follow shortly.
    
    2) Defines a routining pattern for module administration controllers.  URI's of the form admin/module/method/parameters gets remapped into module_admin/method/parameters. This will result in the lookup of the the controller Module_Admin_Controller

commit 773d7024eb57765822e345380be7682ce5f14d17
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Dec 11 16:09:49 2008 +0000

    Correct test

commit e84a0ebe46e0cc3ddf070084da28ed2d62256ed8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Dec 11 16:06:22 2008 +0000

    Change the name of the implmentation of module parameters to module vars

commit fa86be7df41f1b44309014829d728fc9afe88823
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 11 08:26:27 2008 +0000

    whee, more ascii art

commit c2ce81ba30beecce1722004c2f1b6280f8a168b5
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Thu Dec 11 06:38:26 2008 +0000

    In progress admin dashboard prototype.

commit 53aabb7cfc0d55858dc466d40749c091a4e07693
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Thu Dec 11 01:26:26 2008 +0000

    Fixed message spacing, removed borders for .gMessages

commit 2eac9119f7ac12b20074b478676ae0fb785394fc
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Thu Dec 11 01:15:48 2008 +0000

    Added status message styles, container (.gMessages) and message types complete with icons for message types ( .gSuccess, .gError, .gWarning, .gInfo, .gHelp).

commit 16b9f6ab22b3e61c1485c93f6b371f9ac22fdaa5
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Dec 11 00:40:44 2008 +0000

    Add the base url to the rearrange ajax call back script

commit 52ed3f11fde503891628329c0083cd86474834ff
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Dec 10 22:19:39 2008 +0000

    Fix problem with access::can, where the $item->id was being passed to the access_group::can method.

commit 7e5935d5325a7bc20fb5603a76a5af4d7df499a9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Dec 10 19:44:58 2008 +0000

    Create a module parameter table.  This will be useful if a module wants to store information, but is not enough to warrant a table of its own

commit 18a6614a11cf39a29f5705edabc710688da357e6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 10 07:05:49 2008 +0000

    Change all access API methods to take ORMs instead of ids.  This will
    minimize reloading objects from the database.

commit 09364348c7ddb5cd46c3f63ea71467e7b49d0c34
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 10 04:25:20 2008 +0000

    Remove navigation_top() and navigation_bottom() as they're subsumed by the new menu code

commit f198331065d90c54a502ceb396730fd6644bc0b2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 10 04:23:48 2008 +0000

    Put profiler into page_bottom()

commit 5ebd0854beeb306712287931af45949b8ec0592f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Dec 9 17:02:06 2008 +0000

    Combine all the ui.jquery files into a single packed file at version (1.6rc2) copied from the the corresponding vendor branch.
    Move into the application/lib directory and remove from the theme.
    Remove the ui.jquery javascript from the rearrange module and use the common library.

commit 4a0e4b798e6ea3341b1bbc902b9e1e5f2c96692d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 9 10:14:09 2008 +0000

    Check view permissions before allowing view access to albums/photos.

commit e62103b8d9463bf409881d17a4bda93f3ca3208d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 9 08:47:30 2008 +0000

    Move code to delete users and add/remove users from groups into the
    model.

commit 930fb1f6976e60ec3774d837036b5a73bdbf32a8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 9 08:29:12 2008 +0000

    Remove tabs, fix indentation.

commit 2f8e3292fe0d020d14e3f97a136d18dbee6374cf
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Tue Dec 9 07:08:17 2008 +0000

    fixed album view button display in IE, link text is now visually hidden

commit 2fbd4c09e67b41869e559b32fd097faf46bfc990
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Tue Dec 9 06:40:20 2008 +0000

    Checked in jQuery superfish menu plugin, applied to item options menu. Updated album/item view icons.

commit 5ae606786a5708cf749ae8c3d02d88e8e09c0c23
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 9 00:50:58 2008 +0000

    update call from access::can() -> access::group_can()

commit f69f3967ea816c6231fdf8689182b8a8dfe715c8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 9 00:07:26 2008 +0000

    move user::delete() to User_Model::delete()

commit e3ad42a276803bc594074d5e3f101e58f8cd9bfe
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 9 00:02:20 2008 +0000

    Add access::can() which verifies that the user belongs to a group that has the
    given permission.

commit bd3a472be7979aadb730f7ac6caaa3c47a6ce11c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 8 10:46:53 2008 +0000

    Rename access::can() to access::group_can()

commit 85239ec75034fb9ad0f3c2d26d77d760a4e6dfd7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 8 10:46:06 2008 +0000

    Ignore gallery_unit_test/views/kohana_*.php

commit b0f39497b4ab4315cba1ba4db9633b34e72ec440
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 8 08:32:44 2008 +0000

    Some minor beautification.

commit 10945012518821d2f0b85949525fe95eb38b77ef
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 8 08:27:17 2008 +0000

    Only add the unit_test and gallery_unit_test modules if we're in TEST_MODE

commit fb93722e9e49900a4bf69f390e7e796eef6c7240
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Mon Dec 8 08:27:13 2008 +0000

    moved erro page from unit_test to gallery_unit_test

commit 0a0852328af72c27336357bbbcf7d07cd695eef6
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Mon Dec 8 08:24:01 2008 +0000

    moved erro page from unit_test to gallery_unit_test

commit b878ed174d9e8628098931156d526b3fc028d905
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 8 06:14:34 2008 +0000

    Refactor Menu code to create allow you to create menus using a
    chainable factory interface and retrieve them by ids.  Streamlined the
    HTML creation code a little bit in the process, moved the basic menu
    functionality into Theme_View and created the option to have different
    menus other than site_navigation().

commit 655581f3c996a6404f07486ade64d30cab335e8e
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Mon Dec 8 05:19:21 2008 +0000

    Show unit test errors as text; not as html

commit 8592aad2bb1919b20ef2309adb1fbbd7bbba97da
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 8 04:55:39 2008 +0000

    Replace protected array and __get() with just class variables.  This is faster and tighter.

commit 736829490adaecab8aea6ffe7538f07cd358cc82
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 8 04:50:56 2008 +0000

    Minor cleanups.

commit 528a48a96e0dcdcb974882f2d27c7d38aac283fe
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 8 04:47:31 2008 +0000

    Minor cleanups.

commit 73496de94f1ebb56f3156c3e24053b2d4cec669a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 8 04:39:21 2008 +0000

    Tighten up head()

commit ee2299d6d0710cb59e6b123746e7a99efff10c6d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Dec 8 00:23:33 2008 +0000

    Restructure Menu processing to respect the differnent types of menu items (Menu's, Menu_Link, Menu_Dialog)

commit bd033cda8fa93ade32d6fdef53a4d46397e1a372
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Dec 7 23:05:00 2008 +0000

    Move form.html.php from themes/default/views to core/views

commit ba2b39624b25ccc1626071d27cca6598d776106b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Dec 7 22:19:26 2008 +0000

    correct menu processing such that urls=# aren't given class gDialogLink

commit 3449827c5ae3f28b0353d7babd354b92f403e5bf
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Dec 7 22:10:23 2008 +0000

    Change the menu processing to add the gDialogLink class if the url starts with a #.  this results in a modal dialog box being opened.  At this point the url is not retrieved and the text just shows up in the dialog box... need to look at that

commit eaffc5e085141a639c15699739b63368eccca945
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Dec 7 21:52:06 2008 +0000

    Changed how drawForms handles hidden fields.  I make the assumption that hidden fields will never have an error or label so rather then recursing to draw the hidden fields, we just render them.  Also moved the hidden fields outside the <ul>.

commit 5f9e35bf93f25c272f89775e02149f81300d85df
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Dec 7 21:34:19 2008 +0000

    Remove debugging code

commit e518dafb19a0bb7dc3b1a1e4eea3326dd59806d9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Dec 7 21:24:50 2008 +0000

    1) Revert the changes to Form_Upload and Form_Textarea, so we don't have to change third party code.
    2) Change drawForm to check for a non empty $input->class in order to determime if the element should be wrapped in <li>...</li>.  If $input->class is empty then treat as a hidden field.

commit 954fcf034238458f292c9f5ec72c6d4b101aac0d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Dec 7 19:45:46 2008 +0000

    Merge gallery3/branches/menus back into gallery3/trunk

commit b409a376f3689e51bb50f9716c1384d9b2013832
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Dec 7 17:09:21 2008 +0000

    1) Change the photo description field to a text area
    2) Added a 'type' data element to both forge/Form_Textarea and forge/Form_Upload
    
    The second change allows the drawForm to correctly render both of these elements enclosed in a <li>...</li> html blocl

commit 5d23a6515d8c62f158c6369fafc6fc9bf0092775
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 7 10:56:44 2008 +0000

    Finish writing unit tests for Access.  No bugs found!

commit fef188d787fd07fc47e30bd7be46a8982dd71788
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 7 09:25:40 2008 +0000

    Leave all locking in ORM_MPTT::move_to, don't worry about it in
    Item_Model::move_to, unless it turns out that we really need to.

commit bf7ab8904aa9ccbb201b1ef9634a8b13834e5f6d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 7 08:46:44 2008 +0000

    Change ORM_MPTT::add_to_parent() to take an ORM instead of an id so
    that it's consistent with ORM_MPTT::move_to()

commit e40b54a4689f1565e0f76c536d0d4b05b23afc1e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 7 08:32:30 2008 +0000

    Adjust exception text to our normal form.

commit c9cc6ffd1a1df704ca31e270329899277a4a7c51
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 7 08:30:08 2008 +0000

    fix a couple of typos.

commit 055aa044977fdb608547bca2f39b79abe31beabe
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 7 08:23:22 2008 +0000

    Rename moveTo to move_to and extend the test a bit.

commit d086f31ea4f877b9497f8d4933edd9352ba04b1a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 7 07:42:02 2008 +0000

    Style cleanups to make File_Structure_Test pass.

commit ba18542527531798abca1881497eac60827cb0f8
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Dec 7 07:04:58 2008 +0000

    Yay! Working item upload dialog from the album page!

commit c65ae1203295ce07f43bc836dbeda82d1591ccdd
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Dec 7 04:58:07 2008 +0000

    Let dialogs be draggable for now.

commit f0a1950597b20b84a5822294a69a25d6d310b7df
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 7 04:56:39 2008 +0000

    Fix a bug in the redirect after adding photos.

commit 36cda412f48ada1a059523685094687b9c02f3b8
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Dec 7 04:49:26 2008 +0000

    First go around at reusable modal dialogs. Moved jQuery UI CSS into screen.css, moved default theme JS to js folder. Named jQuery UI files to match the file names as they distribute them. Removed accordion, it's not used yet.

commit 9bfeb413abce88d9f47a819dea24d8526ec45a80
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Dec 7 01:28:37 2008 +0000

    Added title attribute.

commit 2aa84796f3a7965c7094422412ad005c13c00bd3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Dec 7 01:24:44 2008 +0000

    * Don't call _getadd_photo_html() when we don't have an items table.
    * Guard against errors when uninstalling modules that don't have any code left (eg: carousel)
    * Create the var/uploads dir automatically.

commit adfe664d96a168d3474c97c633d75db7dd57a4be
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sat Dec 6 23:28:26 2008 +0000

    Removed tabs, todo, added description

commit fb6e22e1457ce4d1503c739d7354d51fe3af4e94
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Dec 6 21:14:36 2008 +0000

    Implemented photo::_get_photo_add().  You need to create the var/uploads directory and make it writable by the server.  The location of the temporary upload directory is specified in config/upload.php

commit 64c380a60d540bd7428282fe10591e8ec19ba7fd
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Dec 6 20:27:55 2008 +0000

    Correct @todo's in Item_Controller

commit dca3cd2e8d0a376103bcec8fe4d7e0feba268b8b
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sat Dec 6 17:18:55 2008 +0000

    Switch the slideshow link from text to icon.

commit 611b8f44ed949140a6b69190c25954b840e2e783
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Dec 6 06:10:15 2008 +0000

    Add firing comment_added and comment_updated events

commit bda84d71eb7a52ba29d4d1434a21bac476124877
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Dec 5 06:27:02 2008 +0000

    Fix a bug where any uninstall removed the entire database.

commit 89787fa8ab53d68b0790f7c06f8887a5ea207337
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Dec 5 06:26:33 2008 +0000

    Make sure the pager clears the album grid.

commit 69f48d37c3a8aba618e74b1e6aab427e14d496c3
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Dec 5 06:22:51 2008 +0000

    Removing carousel. Slideshow and planned album views should cover this functionality

commit bfd3a21dfdffcae86e695c8b50802e5c7ee3cf79
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Dec 5 06:06:02 2008 +0000

    Added album and item view icons (album, hybrid, slideshow, full size). Added "Options" menu placeholder to display item options (add, edit, subscribe, permissions, etc.). Renamed gAlbumHeaderMenu to gItemMenu which can be used on both album and item views.

commit 0d1c04060579b13b648d0dbdbb4577bda58b34a2
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Dec 5 06:01:44 2008 +0000

    Don't need to pass the event, it's not used.

commit 2e908ec6e5972751ae74ed4f00281e31fab3d37f
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Dec 5 05:59:50 2008 +0000

    Read that $("#Selector").length was a good way to check whether an element exists in the DOM/jQuery object.

commit 8d1790a0b465566439911c05806afea742148773
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Dec 5 04:56:33 2008 +0000

    * Add a moveTo unit test
    * Pass the module::event(..., $data) by reference to the handlers

commit 362f43169c591c62c54a1844889fa04c27774954
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Dec 5 04:24:54 2008 +0000

    Removed right border off of #Content container, don't need the separation between it and the Sidebar.

commit 6ea063bc4caad861052145554f3ad2a2b8ee58f9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Dec 4 21:33:25 2008 +0000

    Tweak some issues with the moveTo Processing

commit 0f103b1c069063a2e6109a0ba7e566104f4ba8fa
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Dec 4 20:05:58 2008 +0000

    Moving albums around with a drag and drop interface seems to work and preserve the left right pointers.
    * changed _lock and _unlock to protected methods lock and lock respectively
    * added a moveTo method on the Item_Model
    * Corrected the hole closure  on delete.
    * added moveTo on the ORM_MTPP class
    * Changed the rearrange javascript to do moves with ajax

commit 80a7db61c9fba53477c1ec0850bdffaf7b11657a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 4 08:17:57 2008 +0000

    Fix up the test framework to work now that we're only loading installed modules
    via the autoloader.

commit 9ba9f7bf2754988b7408c23c32b1f2a332528d29
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 4 07:44:28 2008 +0000

    Change the startup code to only put installed modules on the autoload
    path.  This breaks a bunch of places where we had hardcoded
    dependencies, so guard all of those cases.  Restructure
    module::available() a bit and the way that we do install/uninstall in
    the scaffolding.

commit deafa2f91220ad54cfaae1372ef98ab5f46e0f86
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Dec 4 06:43:16 2008 +0000

    remove unused ->root

commit bae905a4cb6c86acf2a887b57779492d964ecba1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 4 06:40:35 2008 +0000

    Improvements to access helper.
    
    o Rename access::remove_group() to access::delete_group() for
      consistency.
    
    o Wrote more unit tests
    
    o Tests found a bug in access::remove_item() .. yay!

commit 1ae3ed7e3b796bae6e16e687c29f3fcf0df5fbfe
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Dec 4 06:36:14 2008 +0000

    Get rid of the rearrange helper as the code could be inlined

commit b9a0843d86a64efa92eb9827964b36896fc5af9e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Dec 4 06:28:42 2008 +0000

    Remove an resemblence to a RESTful controller from Rearrange_Controller

commit 4d76351017a64256dfdac5e17096c948820a51fa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 4 05:54:48 2008 +0000

    Fix indentation

commit c67a4f485d47150feab41f495ed8147a1b595b61
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 4 05:54:26 2008 +0000

    style updates

commit 375e7c675ef31c9b3c44292f1577fb5f1cea42a2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 4 05:47:05 2008 +0000

    Implement ORM_MPTT::delete() properly.
    Inline ORM_MPTT::_grow() for now
    Rewrite ORM_MPTT tests to be domain specific; they no longer use album/photo helpers.

commit 89a346c1e14be26a9b7ac98c6996e84b537228ea
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 4 05:45:00 2008 +0000

    Rename Directory_Helper_Test to Dir_Helper_Test

commit 24cbff29cc0cd30ade2064862387d55f96a3ec90
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Dec 4 05:15:21 2008 +0000

    Replace grow_test and constrict_test with add_hierarchy_test and
    delete_hierarchy_test.
    
    Our tests will be more robust if we test the public API and not the
    internal private functions.  If we get to the point where we have to
    test the private functions, we should probably move those functions
    into their own separate class with a public API.

commit 5c095cbd787bf71e30658536aafdbf8ea837aa1f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Dec 4 01:12:44 2008 +0000

    Add unit tests to test growing and contracting the left and right pointers
    Added a delete method to ORM_MPTT that contracts the tree when an item is deleted

commit 9ae6acdc0ab3f40fa6267161d733e79d4424eb0b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Dec 4 00:14:52 2008 +0000

    Before deleting an item, save the path to the image in the var directory as once the item is deleted, the $item->file_path() is no longer valid.

commit e8cf2a3e67428f855eabba72da3de880335cd483
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 3 23:32:29 2008 +0000

    Fix internationalized string.

commit ccee9854c29f9fedfeb5647d058e76154f9a8295
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 3 23:31:10 2008 +0000

    Rename file::unlink() to dir::unlink().  This creates an API that is
    clearer about its actions, otherwise we may accidentally blow away an
    entire hierarchy when we think we're deleting a single file (there's a
    reason why rm won't let you delete dirs that aren't empty!)
    
    Name it "dir" instead of "directory" because apparently "directory" is
    already reserved.
    
    Move the delete call out of Items_Controller and into the model.  The
    model is responsible for keeping state integrity, not the controller.

commit 76196be483e92e01543c8dc1c488e44ae527db64
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Dec 3 22:48:23 2008 +0000

    Remove @todo

commit 7bb4b6029df8b17ef8a2ba9c8ce8d6c7b3e015c3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Dec 3 22:39:57 2008 +0000

    Add a MY_file class that extends the file helper by creating an unlink method that deletes a file or an album directory.
    Modify Items_Controller::_delete to call this new helper method when deleting an item

commit d8511f2fde7baabe15687e38589eb17933ac9aa4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 3 19:10:23 2008 +0000

    Implement two tests

commit c3478675cd2ff6ccf1637975088868af6b3eeca7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 3 19:09:56 2008 +0000

    Fix a bug where we weren't actually deleting permissions (hooray for unit tests!)

commit 03bc3c281e5cb5adbaba44b195c6ecec09618b0f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 3 19:09:16 2008 +0000

    Make sure that we always run teardown, even when the test throws an exception

commit 1e647c2a03799c9f1bc890af9384994d4c9c7329
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Dec 3 18:14:15 2008 +0000

    Drag and drop seems to work in the rearrange module

commit 27a9c14d274b3d521e5b5571553b0acc2f522d4a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Dec 3 17:33:18 2008 +0000

    If the the post and get arrays don't contain a _method parameter, then use the request::method() to determine the actual request method (i.e. delete doesn't show up in either places)

commit efc627029551987fbd785dd719c72b0690c743a5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 3 17:17:59 2008 +0000

    Test stubs

commit 53664787d459066eaf26a3dec1df7c25eddcc912
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 3 06:00:30 2008 +0000

    Add a filter to unit tests.  Now you can do 'php index.php Album_Helper_Test Photo_Helper_Test' to just run those two

commit f114814c03d3fa87b0d43edbe454c3ac9b93cf33
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 3 05:59:39 2008 +0000

    Move the form html into the controller

commit 39499cdf2e147c9ce1b47e338369b38b6542102f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 3 05:40:59 2008 +0000

    Add /welcome/form/add/photos to give you the add photo form.

commit a4494b9f9ac9625701f7bf545e3d0d83ffbbc5ab
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 3 05:15:03 2008 +0000

    Put the output in pretty ASCII boxes.

commit e03bb0f7c37a8f68b088512d4b65108db4b6c46a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 3 04:28:14 2008 +0000

    Re-enable access_cache propagation now that we've patched the MySQL driver.

commit dc35a005bcf07c8ee57c355549b5f79da22b5b01
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 3 04:27:29 2008 +0000

    Don't cache the table field definition when we're in test mode, else
    all the table changing shenanigans we do to add permissions and groups
    will fail to register.

commit 718ac67a02aa6fea73b6ed4ff3b092e77320798b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 3 04:17:02 2008 +0000

    get rid of a stray space that was breaking the File_Structure_Test

commit c1886aab88304d5d338a32bb9bd3fc31facec893
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 3 04:05:24 2008 +0000

    Temporarily disable some code to get tests to pass.

commit 7f9b765571f2805d7f68a87870b5720baa1ecc34
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 3 03:53:46 2008 +0000

    Fix errors in the preamble

commit 844e5573f0ce27f716f33a6e450a69a5d281a4d2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 3 03:49:45 2008 +0000

    Make sure that the dev is not using the same db for tests as they are for production (this one's for you, valiant!)

commit 705698a425bf00f7294a2e9eee8065fcadfffde5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 3 03:44:48 2008 +0000

    Drop the database and rm -rf test/var instead of calling uninstall on
    all modules.  This guarantees a clean start w/out worrying about
    weirdness in the uninstaller code.

commit 37758d15defc18486671d2f33d7018e820dc61e0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 3 03:43:50 2008 +0000

    Drop the right tables at uninstall time

commit 98ea31a86d6152a8b6b612f0e5b1cc7a7ce41b52
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Wed Dec 3 03:24:45 2008 +0000

    Grouped Ajax/Dom scripting related styles (gInPlaceEdit, gClose, etc.). Began gInPlaceEdit styles.

commit 6f959deed90750d3f87f26e64fc44beb3f7ba903
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 3 03:23:30 2008 +0000

    Rename generic test.php to gallery_unit_test.php to make navigation to this file a little easier

commit db5bc2050063cc9fb3830ec769bfbbc01e1f4198
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Dec 3 03:18:43 2008 +0000

    Fix a bad copy/pasted comment

commit 0e752790a3cae8da1126f545f96967bcbb3d1de5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 2 21:41:07 2008 +0000

    Removed per jozefs

commit 2e42a5ea8ce64031f6baf31964a0ff25a6ad0b04
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Dec 2 21:37:06 2008 +0000

    Remove the variable from inside _()

commit 3953dde2c698d89810661435b2602fbdb55c322e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Dec 2 21:25:15 2008 +0000

    The rearrange module will now add an album if you drag the "new album" onto the album tree.  I haven't had a chance to figure out why the form does get any styling or why a textarea is no included as a list item.

commit ea11562e3270764a1083b0b7e236be5331626504
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 2 04:54:37 2008 +0000

    Oops, this was missing from the last fix.

commit ae4c828b06a752775250239f82e688925ab0e529
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Dec 2 04:38:45 2008 +0000

    Fix a problem in _update_access_cache() where if the intent is
    default, we weren't properly propagating ALLOW where necessary.

commit 52e63e7f75f3bac213393dd4194c089d09e3569b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 1 23:48:07 2008 +0000

    Tighten up ul.permissions

commit 9f1f10c4dda5221cc5bc961addb40810bb9ce44d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 1 23:46:43 2008 +0000

    Turn <div/> into <div></div> to make Chrome happy.

commit 77f9e81facc102033151a3782a121594b9d67202
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 1 23:44:14 2008 +0000

    Add missing closing >

commit 6459f167fd38127f2e8edeaad9ca9a5ebbf7ca46
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Dec 1 23:14:26 2008 +0000

    Drag and Drop is starting to work.  You can drag the New Album over any of the directorys and it will be allowed. Drag anything over New Album and it will return. You can drag an tree item except the root over the delete icon and it will be accepted.  Now I need to build the ajax and server side functionality the at allows this to all work.

commit 92563f813e8cb20eeff2532bd7bafa625c0275bf
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Dec 1 21:35:09 2008 +0000

    Fix the fact that the tree wouldn't show up... just a wee bit overly aggressive in cleaning up what i thought was unused files

commit 0ebd4f6b28e9fbe51d6214e9b845c94c54ca92a0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Dec 1 20:54:25 2008 +0000

    New Rearrange gui based on jqueryFileTree (http://www.abeautifulsite.net/notebook.php?article=58).  I like the look of this one better. Still need to implement the drag and drop functionality.

commit ed2cb2a86d691895ce4dac9b6de6665c5021c4c4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 1 10:40:40 2008 +0000

    Fix profiler settings in the scaffolding

commit 2eed685883f09b3cfdee4fdd8057e2a8a69f490e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 1 10:27:36 2008 +0000

    style the permission tree a little tighter

commit 5c303aa07ba7512f1e6a1150d118c47d16678c54
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 1 09:57:03 2008 +0000

    Add access::reset() so that you can specify your intent to use the
    parent's permissions.
    
    Update scaffolding to demonstrate that it works.

commit 88a70cbc0420c57b5b989e57de0ee69dbb66ecca
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 1 09:02:46 2008 +0000

    Clean up styles a bit to make it more obvious what's going on.  Show
    edit permissions too to demonstrate that we're doing something
    different for the different type of permissions.

commit e3d7877d7958a0f5df5a8b593eb953ea8e78fa14
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 1 09:01:10 2008 +0000

    Add @todos

commit 91c4bda1ec6640abb8b1a585e1fd1f8955d53fd1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Dec 1 08:50:00 2008 +0000

    Prototype access control model.  There's much left to do, but it's a
    working implementation.

commit ab0fcb7453db7d93c9dc1dfd38e6d6f84a5b16b5
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Dec 1 06:57:37 2008 +0000

    In place editing in breadcrumbs is a bit much, plus, it breaks the layout. Removing, at least for now.

commit 26a512c3522b4f59a06f5e3146df5d466373c06e
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Dec 1 01:55:50 2008 +0000

    Grouped inline form styles. No longer using gInline class in favor of specific form IDs that can be styled differently depending on which container they appear. Added gDescription class, dropped gUnderState for semantics. CSS cleanup.

commit 6b03b798f3be23c83d0587f180341929c49af886
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 30 21:39:23 2008 +0000

    Move rearrange HTML generation into welcome.php so that we gracefully
    handle the case where the DB is not installed yet.

commit 4271f7702a2754d8470949209f2db82990eb2d1a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 29 22:47:15 2008 +0000

    Add access model (not fully baked yet).
    Update scaffolding to allow addition of just albums (helpful for testing permissions)

commit 6c2869f8227944e56b6bb73da0d72b4c52f87da9
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sat Nov 29 21:30:30 2008 +0000

    Changed CSS organization, removed form section. Moved generic form CSS up to top of sheet and specific form styles to be adjacent to related content. This should ensure inheritance works generic down to specific. Removed #gAddTags in favor of #gTags form.

commit 7ae004f76fafa3f0d31b39c45505e66d9be9b8cf
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Nov 29 20:02:30 2008 +0000

    The gui part of rearranging albums and photos on the welcome page.  Haven't finished the ajax back end to actually do the move, but thought i'd put the gui up so people can play

commit 70de32ebb48df84080f180e41703bb0064093ba1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Nov 29 17:08:42 2008 +0000

    Insure that the page and offset refere to valid items

commit 9b9bdce821e4f0dcbd5fec64c8447663a83cd820
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 29 09:53:38 2008 +0000

    Fix another bug caused by moving this from tag to tag_event

commit 1b78f334447d86af9fde7cfbad738c0bb7f13e93
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 29 09:49:51 2008 +0000

    Fix a bug where we were listening to the wrong event.

commit d01010cd1d137caf180d581ee30fe80cac971f5e
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Nov 28 23:24:13 2008 +0000

    Use .width() instead of .innerWidth(). Now photo resize works in IE 7.

commit a73aade7130ba22ffb434b0f32c6421a7324b237
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 28 22:06:26 2008 +0000

    The start of a rearrange module

commit bb8fa3c4171d18c0ebe85920aefab09cc6e7f474
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Nov 28 22:02:46 2008 +0000

    Dynamically reset the dimensions of resized photos to fit if they're too wide.

commit 4c2d4abb1cf349f4e58c9c8dd7d74284d7bba6c7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 28 21:55:26 2008 +0000

    Remove debugging statements

commit 6a76d6f747768106f8bccd8b74059371dbac615a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 28 21:22:34 2008 +0000

    Dynamically create the list of available modules.  This permits new modules to be added without having to update the config.php file

commit 8b6ed6c477771e42d43ea0684e5139cf361b6cee
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 28 19:37:01 2008 +0000

    Create module::event() which runs Gallery events.  It works by
    convention.  To respond to the "photo_created" event in the gmaps
    module, you create modules/gmaps/helpers/gmaps_event.php containing
    class gmaps_event which has function photo_created.
    
    Renamed all events from gallery.foo.bar to foo_bar
    Updated tag module to use new convention.

commit 1b1d3852949a39765a4c58df3bcbc9cd5a28e00e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 28 18:41:11 2008 +0000

    Check for APP13 before using it

commit 89c4dadec2a7c9cfd55affa118ed681a9654a58c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 28 18:39:18 2008 +0000

    Rename module::get_list() to module::installed()

commit a7f6efa2f2bed248149fb2f5d3833301b92a2ecf
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 28 18:04:59 2008 +0000

    When an image is uploaded (i.e. created) the tag module will now extract any iptc keywords and add them as image tags.

commit 4d71975f37fe00efb19bebc5efd23f056165ba56
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 28 09:46:29 2008 +0000

    Add credits theme callback, point the powered-by link at GMC

commit 6fbd79928c36f33064103b410cdaa69111400046
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 28 07:13:21 2008 +0000

    Move the <media:thumbnail> outside of the <media:group> to work around a bug in Cooliris.

commit 5672fbea1e89189a03593698d29e0775e026a79f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 28 07:05:11 2008 +0000

    Rename tag_block_cloud.html.php to tag_cloud.html.php

commit 2c86723942c9a2001a4fac6f50328521d21ced1e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 28 05:45:35 2008 +0000

    Add an easy way to add a bunch of servers from the server side

commit 29966cc4fcd4e9d79936f033524bab67d75d2cac
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 28 05:18:17 2008 +0000

    Set the page size to 30 images.  No need to limit ourselves to 10 in a feed.

commit dec97b42fe94105e39dc5cbadc0051155a123569
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 28 04:51:17 2008 +0000

    Create media_rss helper and move feed generation in there, so that we
    can get to the feed from other parts of the code.

commit 3fa12655dd2409981804c9ef065ff4c1d2daa3b6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 28 04:26:18 2008 +0000

    Correct parameter on gallery.album.created event firing

commit 143337dbf08a3f5252004994a4bb6ab0d50f100d
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Nov 28 04:22:52 2008 +0000

    Use return false instead of preventDefault() to prevent link action, thx Tim

commit 1239e38e4584eef1bf7c665fd629f97b8135e455
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 28 03:09:18 2008 +0000

    Move the form drawing code back into form.html.php -- I'm going to
    take a shot at fixing it up in the view file so that it's mostly HTML,
    not mostly PHP.  If that fails, I'll move it back into a helper.

commit 0a6be1bf5584f9b755ac89f7be45542345498fe1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 28 02:44:02 2008 +0000

    Fix some minor issues with the feed format

commit 62e5f73b7bb1615d5a579aa049f9ab1588c12bdb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 28 01:42:01 2008 +0000

    Re-enable the slideshow for tag views, since now we have a MediaRSS feed for them

commit b69104b695623da94ca9a4a9dff92770ea19bd58
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 28 01:41:26 2008 +0000

    Fix a bug where we were loading the wrong item/tag

commit 88b35c1182326790e16746ed5d62461631f1425d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 28 01:40:55 2008 +0000

    Tags_Model::items() now lets you filter by item type

commit fd519082e1164bd3a92e541ad969c6151050f966
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 28 01:20:17 2008 +0000

    Add a media_rss feed for tag views.
    When visiting a photo, show the feed for the parent album.

commit 18412bb14eca2e22c03895fa81a7749665700aca
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 28 01:18:45 2008 +0000

    Add tag() function

commit 828f23896f820f826b803b35c506f8e764504a18
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 28 00:51:38 2008 +0000

    Rename item events and create events for comment create, login, logout, user creation.  I probably forgot some, but its a start.

commit 3ad9b6174a0adcc3d9b6e4ae007bd3ffd8ef2d26
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 28 00:19:08 2008 +0000

    Add event plumbing to allow the tag module to be notified when a photo is created. Eventually this will be used to parse the image meta data and extract tags;

commit b8c034cb373a9e1f2df684f56e2cb1a42e413d1c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 27 22:21:16 2008 +0000

    Reverted r18930.  This is because in the media_rss module we don't generate a media rss feed link if we don't have an item.  So if we go an throw a slideshow on there, it doesn't do anything because piclens can't find the feed to produce a slideshow.
    
    You can put it back if you really want to.  It will probably make more sense when we have an alternative slide show taht can work with the children collection.

commit 26c9ec6d4ba2a563a53b74612af4a0083c7fa23e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 27 22:08:56 2008 +0000

    Make header buttons, line them up nicely and float them to the right
    so that they don't push the album grid down.

commit bb388af21af7a4778f55598e8b78fc71ae0cd04b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 27 22:08:17 2008 +0000

    Add tag_top() button

commit bc210a708ed90d521521dec0415586468ca7e0e0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 27 22:08:00 2008 +0000

    Set resize to 640x480 for now to avoid breaking the default theme layout

commit 8d4bd0c81465954ed8608c64f52c1281aa01f45d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 27 19:46:39 2008 +0000

    Update tests to reflect the fact that the admin group is gone.
    
    Fix a bug in user::create(), found by the unit tests (hooray)!

commit 6bc9c5868b553a5b3fbbcfcd35587ca25135de38
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 27 16:33:41 2008 +0000

    Create a form_helper class containing the function Draw_Form so we don't have to always check to see if the DrawForm method is already defined in pages that could have multiple forms.

commit bac4ff2046a9413ad53caca47842b63d3e5a5385
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 27 16:19:07 2008 +0000

    1) Create a Theme_View class that combines the functionality of the Theme class with the View class.
    2) Only define the form.html.php::DrawForm method once if there are multiple forms on the page (i.e. comments and add tags)

commit 723eb2f611727cb7a1d8b64e1a7814de94be9cc9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 27 11:43:48 2008 +0000

    Move the ADMIN global nav option into the core module and only show it if we're logged in as an admin user

commit e183901dc39c31ef4aaacca0edc36540dc2edd8b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 27 11:43:11 2008 +0000

    Give the admin user actual admin privileges

commit 34a286ae90ec5b5bdb7702f6bdf560f5f92f4f38
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 27 11:33:45 2008 +0000

    Add navigation_top() and navigation_bottom() insertion points
    
    Move "My Gallery" navigation tab into the user module and only show it
    if you're logged in

commit 0b86568586b423de9689ba659782c3b67defe29a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 27 11:13:24 2008 +0000

    Use the dimensions of the real image

commit d909fc10706776f5396d032e655659c06989763c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 27 10:25:50 2008 +0000

    Make tags look a little better.

commit c95c17b13311c23998f494ce982da7c633a9285d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 27 09:45:26 2008 +0000

    Centralize logging around installing/uninstalling modules.

commit 92ca1ba9abb37e49df83e5c313d00b16c19efc66
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 27 06:34:45 2008 +0000

    Style form#gAddTag nicely

commit 850c3b90a3156cfa2e7030a3d343a1e479c0b4de
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 27 06:34:20 2008 +0000

    Don't wrap hidden elements in list items

commit 3992dad4861c3a1296be7e0e7d4c7a46d621c1cc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 27 06:25:21 2008 +0000

    Move form generation off into tag::get_add_form().  We can't use a controller to generate the form (it's incompatible with our REST model where controllers print stuff)

commit 09b27ecf9871db0bfeb7043cf8e667b66e56185a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 27 06:24:07 2008 +0000

    Remove stray trailing blank lines

commit 27e64f1dc6cc43b40592337eed360bdf7e3d7a59
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 27 06:14:32 2008 +0000

    Move javascript from default theme to appropriate modules

commit 7e5f59bcb7682896657dd11a530dc25412ef3cdc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 27 05:59:37 2008 +0000

    Add children_count to album/photo controllers for consistency with tags

commit 326fa1dd27e116ace49155487a6c95ba0ef82231
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 27 05:59:25 2008 +0000

    Remove slideshow.js as it is not required

commit d16790de0cc5e5c0c0783ae3150fd1945fdcef3c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 27 05:45:17 2008 +0000

    Get rid of the placeholder "add tags here..." text, and clear the form
    on submit.

commit 72d16756b169e1f751470670eececf76e88b2bd7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 27 05:37:20 2008 +0000

    Refactor cloud generation into a helper so that we can call it from
    Tags_Controller::_index().  This enables our Ajax code to reload the
    tags block after we submit a new tag, so update the JS to do that
    properly.

commit 5447b8321080afd09387d837a4acfa9c90ddfa16
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 27 05:00:50 2008 +0000

    Clean up REST pattern in tags:
    1) Generate the form in Tags_Controller::_form_add()
    2) Process the form submit in Tags_Controller::_create()
    3) Create the tag properly
    
    This required me to limit our scope to adding one tag at a time, which
    I think is fine if we're doing Ajax style tag addition.

commit 8e33f5d7b90335236e14b283ccb6d6ee5db4762d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 27 04:58:38 2008 +0000

    Add page_type() function

commit 480abae4010c036bdd7df75147614f6c3e596ded
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 27 04:31:12 2008 +0000

    Fix indentation.

commit b4b72b284b61673dfceb3c8a206181d66cd26c35
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 27 01:48:01 2008 +0000

    We are now submitting the ajax tag add form to the server correctly and rehooking the ajaxForm

commit d881c91e0c542133187e00d62c9191add7a5c33d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 27 00:26:04 2008 +0000

    Trying to add tags, but it doesn't work yet.  For some reason that i can't figure out, the form never validates and I never get into the true branch of the if.  I'm taking a break for awhile.

commit e3fa1c8acd0e617651e9b4a613413dc51521c63d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 26 23:10:15 2008 +0000

    Link to the albums in the album tree.

commit 691faa0e83790c0dc40a937f875e3032843d91c3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 26 23:07:37 2008 +0000

    Draw an album tree in the access -> permissions tab.

commit 91b1c4cf39c0b9ac6d2a0134bfc771e46d42e3dc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 26 23:06:35 2008 +0000

    Skip the tags block if there're no tags

commit 974f9f778891bbefeb083b2d97b3dae206c96452
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 26 21:50:45 2008 +0000

    Add a new "tag" page type.
    
    Create the concept of "page types" which let us specify the kind of
    page that we're rendering in high level terms.  Currently there are
    three page types: album, photo and tag.
    
    The tag page type uses slightly different variables.  It has a $tag
    but no $item.  Adjust all sidebar_block() functions to avoid printing
    stuff that's dependent on the item if there is no item.
    
    Simplify the tag code to stop trying to fake an item.
    
    Update the theme slightly to use $item and $tag where appropriate
    (notably, for making the <title> element).

commit 4e8937ccefc95272442a9cd5ccb71aab01f113a1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 26 21:24:46 2008 +0000

    Indentation fix.

commit 496007d2ae949b905cd1c8d874a0ce90ce54e181
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 26 21:15:37 2008 +0000

    NULL -> null

commit 9f37aaa1c29b9b17bee514597ec316130d7531c7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 26 20:40:04 2008 +0000

    Move Tag_Controller -> Tags_Controller to fit our REST pattern.

commit aa19a79e067c95f3e1c8b3e35fc051b4fa0eddbf
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 26 20:33:06 2008 +0000

    Clean up unnecessary comments, remove stray references to Comment_Controller

commit 38e1eef5474dbe1768938fdd3882cf0627d7e70e
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Wed Nov 26 20:21:39 2008 +0000

    Some code audit fixes and adding some directory separator normalization code to make it work on Windows as well.

commit 25b0dff45cf0776ebee4aeadfe05d0977d03eb0d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 26 18:49:20 2008 +0000

    Add a thumbnail to the root directory, in case it gets displayed in a tag dynamic album

commit b3be74166c2ab3987737606c9e57851789681833
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 26 17:08:57 2008 +0000

    Breadcrumbs now look right for dynamic tag albums

commit e77fd34175a5d7bef5f1561bdbeea8ef253db1d2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 26 17:02:27 2008 +0000

    Duh, i have the count in the tag model... why do i need to do a query to count?
    Added text to the description instead of return an empty string

commit af9a27216d25bcb390413c7848e26d3cd5e1b15f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 26 16:48:00 2008 +0000

    Modify the tag model to behave like a virtual album.  There are two outstanding issues that i still have to resolve.  The first being there is no thumbnail for the root directory, so it doesn't look quite right.  And secondly, the bread crumb shows the dynamic tag album as hot having a parent.  I wanted it to be the root directory, but i will overcome :-)

commit dfd02815125af60d7b1791646b441ba41c4e438a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 26 15:18:09 2008 +0000

    Remove test since the method to be tested was removed

commit 66f51f3c17e7d44eec399f427dd210a48391ba63
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Wed Nov 26 11:46:56 2008 +0000

    Initial commit of the translation class, I18n_Core and some tests.
    - Port of Ruby's I18n gem (http://rails-i18n.org/)
    - Added proper plural handling on top of that.
    - Using CLDR 1.6's plural form data
    - See I18n_Test for example usage.
    - Not integrated into G3 templates yet. Probably adding __() as alias for I18n::instance->translate().
    - No specific plan yet where localization files should live.

commit 59d71baa0852231d658f355741ca1bab79f18ebf
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 26 10:48:22 2008 +0000

    Style the tag cloud add form.

commit 39b6e84a57b572471c8b95c5d1bf5df69b45245c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 26 10:48:00 2008 +0000

    Change sort_by_name to case insensitive sort.

commit 98ee16ca49c70d12225677999b7534744d13f168
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 26 10:27:13 2008 +0000

    Simplify tags code some more:
    1) change buckets to be 1-7 not 0-6.. zero-based indicies don't make sense in the
       real world and are liable to confuse themers.
    
    2) Change tag API to popular_tags($count) which just returns the popular tags.  Let
       the block code massage it into the right format for the view.
    
    3) Move alphasort into the block code, simplify it and rename it to sort_by_name so
       that it's more descriptive
    
    4) Do the bucketing in the view; this allows the themer to override it and create their
       own bucketing algorithm to go with the theme's CSS.
    
    5) Don't create any temporary objects.

commit e1f39ac13f587c6c6fbf5c5ab522b8422f992366
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 26 09:38:39 2008 +0000

    Re-enable code to drop view columns from the items table when deleting groups.

commit 427dc7a0d1297a8cab1d6913fa841f481929d9c4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 26 09:34:31 2008 +0000

    Ignore errors from dropping view columns from the items table.

commit de56a33c9c27cdf5abc0573fb1334fbbeb762048
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 26 06:37:12 2008 +0000

    Clean tag creation

commit 18ce4a4c1fab25bd5d7be43c6761195dd60b5981
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 26 05:43:43 2008 +0000

    Actually call uninstall!

commit e31456af47ce19d63976e41244b7e48e26c3add9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 26 05:20:47 2008 +0000

    Remove stray 'filter' instances

commit 03bf3a6af26a5311ab0411616911c443332a8821
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 26 05:08:43 2008 +0000

    Remove the more or less links

commit 9c60566197a1edeb1c7d758886c8d518b5b99388
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 26 04:54:43 2008 +0000

    Add support for marking users as "admin"

commit 226df2a8f855010a3400fb4d8bb72469ad43d91a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 26 04:45:43 2008 +0000

    Add support in the scaffolding for adding users to groups, adding and
    removing users and groups.

commit 5ccb050413c15b4c16a20b2806886759332a90a7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 26 04:13:57 2008 +0000

    group::create() and group::delete() now manage the view_## columns in
    the items table.
    
    Convert installer over to using new creation API.

commit 242b3a1403aec688f82024adfa0ca20b25981a60
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 26 03:48:42 2008 +0000

    Use lorem2 words as inputs to generateTags.  Limiting the number of
    tags results in a better distribution of the tags (so the cloud looks
    nicer).

commit 5fce343ca45aba212fa348a90a9bbe405bb413e1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 26 03:34:39 2008 +0000

    Create user/group create/delete functions and have the scaffolding use them.

commit 1ea0382f5346c2fb1a2388a8a53adfe40078dc10
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Nov 25 22:38:11 2008 +0000

    Moving right along on tags.  Now the threshold for which tags can be changed. The default is to show all the tags (i.e. count >= the minimum frequency) by clicking on the "See Less" link, the tag cloud will not show the minimum frequency, so the number of tags shown is smaller.
    The "See More" link works the opposite way.

commit e9e589e5ebb54d016f1e52d4ba776970456e39b6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Nov 25 18:54:04 2008 +0000

    Display tag block using data from the database

commit d554adc484faa8bd605d230f49b8e3db2bc595b9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Nov 25 18:14:52 2008 +0000

    1) Changed how the test tags are generated to be able to create a better distribution
    2) Added a new helper function "load_buckets" assign the class suffix to each tag
    3) Created a unit test to test the load_buckets function

commit 53f45b3079d08813b427305ed12ac91530d7e06e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Nov 25 18:00:33 2008 +0000

    Correct call to undefined uninstall_modules method. Should have been _uninstall_modules

commit 38a260b1d707cb9ea4639403ee9a9410bccc1134
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Nov 25 16:50:29 2008 +0000

    Rename get_absolute_url to abs_current

commit 102f0f566b930f9c5030df47f198f0e1627ce317
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Nov 25 15:54:45 2008 +0000

    Normalize atom url generation

commit 2c20fed373e54bfc67f878a1f5d93d0cd2fc146e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Nov 25 15:01:17 2008 +0000

    Dynamically locate modules to install for test

commit 565f1a260c089435dbe1f6ece50b79bfc44f34dd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 25 09:39:45 2008 +0000

    The scaffolding can now add and delete users and groups.  Yippee!

commit 9bdf825a947ea4758b1f86100c05f62582edc0a6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 25 09:15:45 2008 +0000

    Add a "Access" tab to the scaffolding and list users and groups.
    Refactor welcome.php a little bit to make index() more readable.

commit b2af9ed47043ac43d33c9c19db4d29093e3ee600
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Nov 25 07:05:03 2008 +0000

    Modify the test controller to call tag_installer::install and uninstall
    Created the first tag unit test

commit 52206148a8aaa25245b1f73dddaa24d199868400
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Nov 25 06:41:11 2008 +0000

    Fix tests

commit 7eded6770888cbec2659ad8946d1b461669bf11f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 25 05:24:54 2008 +0000

    Make the album_top and header_bottom annotated theme blocks look a little bit nicer (but not perfect)

commit 458d588dd6f29158f42be73fd6b63fdb5cd542c6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 25 05:15:07 2008 +0000

    Move album_top back inside gAlbumHeader so that the slideshow link appears on the same line as the title/description.

commit 229e531ab97cdc103984c095c41bc323375897f6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 25 04:41:14 2008 +0000

    Change url() to use url::file() since it's more concise.

commit 8b84b188bf5640c95fcc05a99f08780344476b27
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 25 04:40:07 2008 +0000

    Remove module() since it's now unused.  We can add it back if we decide that we want it again.

commit b22494a4eac2fdc7882000f6871d683b4090dc35
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 25 04:37:21 2008 +0000

    Move the in-place-edit JS into the page_footer callback and out of
    Theme.php.

commit fe602433a85e7e963c9ded4128e62d1800867f6e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 25 04:36:31 2008 +0000

    tag::add_tag() -> tag::add

commit 389cf77e5afb830d436f632f5be6fee56333b589
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 25 04:35:50 2008 +0000

    Make the annotated block titles 10% larger.

commit 7ec579cede9acd0bbe2662cfc6ed1779d2df08d1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 25 04:23:45 2008 +0000

    Simplify the API.  We don't have a need to add multiple tags to
    multiple items, so don't create a confusing API where we don't need
    one.  The caller can just as easily loop over items and tags.
    
    Use ORM::has() instead of manually looping over items, which would be
    wildly inefficient on large installs.  Document that we're calling
    ORM::has() a second time just so that we can update the count
    correctly.

commit 7be23c269c6e8eea502dd473cbe00b359cb46d2b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 25 03:24:31 2008 +0000

    Remove a stray comma that was making IE sad.

commit 6935cfef40a6b24cc03a544c45a24ebe7ab3fe6a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 25 02:27:00 2008 +0000

    Add gClearFix to the annotated theme elements, which makes the box surround its contents better (thanks thumb!)

commit aedcba0ed2c37ba1a52d6d57c6ff5f9556a7799b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 25 02:24:59 2008 +0000

    Round the corners on the annotated titles, gently.

commit dcf3693b3ebcb75436da7df5d2171891357703aa
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 25 02:17:53 2008 +0000

    Add theme debugging.  Activate it in the [info] tab in the
    scaffolding, then browse around your Gallery3 to see where you can add
    visible elements via modules.

commit 85bdb606bf56a71b4b02fa353129b6c2cfe2b527
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 25 02:16:00 2008 +0000

    Escape CDATA blocks to avoid JS errors

commit 26f5baba94479c749ca3db2ad983e2b37fcf4fc9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 25 02:14:36 2008 +0000

    Reposition album_top and album_bottom slightly

commit c725a0f16eeb0dfaff47549898540b178b7d4b48
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 25 02:14:04 2008 +0000

    Move comment listing into the comment module

commit 1ad18467745612ecc892550810d55a4fe371409c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 25 01:58:19 2008 +0000

    Oops, fix a typo causing us to treat an array like a string.

commit 8e6eff096bcacd6e3f51d1e04885d651bf916455
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 25 01:39:20 2008 +0000

    Don't add in-place-edit CSS unless there's a logged-in user.

commit 2c7893b48eee9191a9c6f10ecac9cf4718dc0443
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 25 01:35:42 2008 +0000

    Fix a bug in thumbnail_info where we were printing out the data instead of returning it

commit f81a9879be6fd50fd26d9dd2bc1c90e87763f7a8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Nov 24 23:18:32 2008 +0000

    Moved the creation of tags into the tag helper library.  Added a count field to the tags table.  Bharat, I know you said not to worry about caching, but I want to explore what are some of the issues with keeping track of the counts as we go. (i.e. is it a pain in the a__)

commit 75d9a829d794c727ff526deb07ad272faac4380d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Nov 24 22:20:22 2008 +0000

    Add @todo to look at normalizing the url functions to the ones already in MY_url.php

commit 983a893e8652c444646b511c817e9c0dd8a08945
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 24 08:57:04 2008 +0000

    Show a link to the item with the most tags.

commit 226dc45203b043c80884cc13f57e4d9505ef968d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 24 08:54:03 2008 +0000

    Fix a typo in _show() that broke proper redirection

commit b60e3e13a4677541bfd2fcd80dfd782e26201aa8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 24 08:27:52 2008 +0000

    Show the tag count, too.
    Try using array_rand to simplify tag creation logic.  Is it better?  Maybe.

commit b79ce414ded73012001823a2e0e2c0feae0d5671
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 24 07:50:20 2008 +0000

    Detect browsers that prefer XHTML (Chrome!) and normalize it to HTML
    so that we don't ship XML down to Chrome.

commit c812d2a9314eec3d73f9408cf1f3938edc675b0d
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Nov 24 07:12:45 2008 +0000

    Changed comment sort order asc. Changed ajax comment add to append comment li to comment thread ul. Added fadeIn for user login.

commit dd200ce5ff5c5039f6ccf95067164aac2388183f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Nov 24 06:02:38 2008 +0000

    Don't bother trying to check if the class file exists, just use method_exists, which will use the php auto loader to find the class.

commit 8b52d9cde47953fb70587c6d404ec681fff71bee
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Nov 24 05:58:38 2008 +0000

    Revert the site_title change

commit d7288d33e63a9b03408180002dde39d05134689d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Nov 24 05:55:29 2008 +0000

    Remove the has_many_and_belongs_to_many relations from the item model

commit 39f00707ac64558c882fb3df30adb666049b6295
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Nov 24 05:03:52 2008 +0000

    Add the creation of tags to the scaffolding code

commit e85282b709708c2be6ec5eb70ba5942167ff583b
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Nov 24 00:27:45 2008 +0000

    Make login form JS unobtrusive. Needs work.

commit 45128b2322742d99bd4b1cc1bde6215ac6af7982
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 23 21:47:04 2008 +0000

    Prefer variable interpolation to sprintf where possible (less code, more readable)
    Prefer url::abs_site() to atom::get_base_url()

commit 55fc5993f0fbf0a5e4454b4533db20c74a7a9605
Author: Jozef Selesi <jozefs@users.sourceforge.net>
Date:   Sun Nov 23 20:43:47 2008 +0000

    Fix double-escaping in the item comments feed.

commit 02486f2401b072fb3f5f2a50e68afaf2db9368d3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 23 20:31:43 2008 +0000

    Show the # of comments

commit 3e3beb34e953540b81470e4d4e1859c4ecbdf77d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 23 20:25:32 2008 +0000

    Change the map, for kicks.

commit 9139872c8deea2cc52b4be31152f74b66c8c8f9c
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Nov 23 20:17:02 2008 +0000

    When removing #gCommentForm I forgot to update the jQuery selectors used here. In place commenting works again.

commit 3728136fced923b96dbf733e6098b6d6961f06fb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 23 20:15:47 2008 +0000

    Escape Javascript to avoid validation errors.

commit 156c4f35483aa075e207dd4c64d03e4cbe28e9d7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 23 20:13:38 2008 +0000

    Fix HTML errors.

commit a164d0ee8049b7b30ae7c6e1963925173871de2c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 23 20:05:24 2008 +0000

    Fix a few minor bugs in the tags db schema and simplify it a bit.
    Avoid using restrictions on our data in the database; let's design the
    system to keep integrity in the app (and make the app robust against
    minor integrity issues like duplicate tags, etc).

commit a43b8d03a176faf0092da60b019f38d65c5e90ea
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Nov 23 18:15:54 2008 +0000

    This should have been checked in with r18815.

commit ab20406ef21c1011c2a4b189e8340dc7ee87a813
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Nov 23 18:00:44 2008 +0000

    Tag module database definitions

commit 7491e3c44affb89fe28030f8759283bc1b4aa291
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Nov 23 16:51:06 2008 +0000

    Add a site-config parameter to the config.php file.  Created a core_block:head method to insert the title into the head section.  If the config value is false, the default Browse Photos::$item->title is used.  A string value with a trailing '-' will append the config value to $item-title.  Otherwise, the page title is set with the supplied value.

commit 7485740d9741021b2016df80b225ae4d82b892d0
Author: Jozef Selesi <jozefs@users.sourceforge.net>
Date:   Sun Nov 23 12:41:41 2008 +0000

    Changed and extended the Atom library a little so that the code for creating entries and feeds has been considerably simplified and reduced.

commit bdbb115296f4002186ee3a99fadc13988dd1509f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Nov 23 08:38:24 2008 +0000

    Remove extra quotes around variable that already contained a string value

commit 51ada4c2e2ee305fa12b1f9f70bd6935e825dd80
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 23 08:08:12 2008 +0000

    Move search out into its own module and have it display its link at
    the header_bottom() insertion point.

commit f39cf6ed2f43706ef13e67353ea7e43f5d09b7a8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 23 07:46:50 2008 +0000

    Add a button to install all plugins at once, now that we have so many.
    Improve the style a bit, sort the plugins, put core first and make it
    stand out so that you don't accidentally uninstall it.

commit 0ef6f4995c9b1e9abfcdd28203235eb1dc6260b9
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Nov 23 04:34:19 2008 +0000

    Fixed up the pager a bit, added missing images. Let's float items instead of using absolute positioning (slideshow link). CSS comment org and comment updates.

commit d14d312d0699677a00c71e38b9d3ce26d6629597
Author: Jozef Selesi <jozefs@users.sourceforge.net>
Date:   Sun Nov 23 00:24:56 2008 +0000

    * Individual comment views now output valid Atom 1.0 entries:
      http://example.gallery.com/index.php/comments/{comment_id}?_format=atom
    * Changed Content-Type of Atom feeds and entries to XML for easier debugging.
    * Added an Atom helper class with some common functions and cleaned up entry and feed generation code a bit in the comment helper.
    * Style fixes.

commit d93d37a10c289d9ffe99e765c45f47209686c893
Author: Jozef Selesi <jozefs@users.sourceforge.net>
Date:   Sat Nov 22 22:46:17 2008 +0000

    * Fixed a bug in the Atom library where child elements were not added to their proper parents.
    * Added valid Atom 1.0 feeds for comments. They can be seen at:
      http://gallery.example.com/index.php/comments?item_id={photo_id}&_format=atom

commit 1b76def26fbfc4ef3f0fcb2df210d916b972628b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 22 21:59:41 2008 +0000

    Create thumbnail insertion points (top/bottom/info) and move
    the generic item info into the info module.

commit 35cfbfdef457d7d330c5a3839baea250a563af67
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 22 21:50:39 2008 +0000

    Pass extra args on to the block function.
    Avoid excess string concatenation (not benchmarked).

commit c6f0cc036df6a1306b03c987092197d8bab27111
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 22 21:46:34 2008 +0000

    Move all block callbacks from View::block_type() to
    $theme->block_type() so that the themer has a consistent interface.
    Also added a bunch more callbacks and normalized the names so that the
    module author has plenty of options for where stuff gets put on the
    page.  Especially renamed album/photo/sidebar to be album_blocks()
    photo_blocks() and sidebar_blocks() to make it clear that those are
    going to be larger content sections and not just basic insertion
    points.
    
    Used __call() to collapse all functions in the theme, which
    incidentally makes it trivially easy to add a new insertion point.

commit ac9df35d8aed2ed5dcf9da2b319bf8da1f246ab3
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sat Nov 22 20:36:46 2008 +0000

    Cleanup of header to normalize margins and white space. Improved display of user login form. Added gHide, gShowBlock, gShowInline, gClose classes to handle show and hide functions. Half-baked idea which will need refinement.

commit 47442f9dd2bee70df745b2ec6026a121f9f29eeb
Author: Jozef Selesi <jozefs@users.sourceforge.net>
Date:   Sat Nov 22 20:00:40 2008 +0000

    Make the generated XML nicely formatted.

commit bb6eeb63bbf95d82fd811f34f358a4f64ae66d79
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sat Nov 22 18:39:47 2008 +0000

    Added a label for the search form. Even if we place labels in text input fields as we currently do w/ the search form, a label should be included to maintain accessibility. Set label display to none if it shouldn't be displayed.

commit 60284479936d65443bd5dc14456bc0b692eab500
Author: Jozef Selesi <jozefs@users.sourceforge.net>
Date:   Sat Nov 22 18:22:53 2008 +0000

    An Atom library prototype. Its purpose is to explore the cost of us supporting Atom as the default input and output format of RESTful controllers. Only the constructs necessary for representing comment feeds and entries have been implemented. Its output are valid Atom 1.0 documents. The test contains examples of how to make feeds and entries.

commit 55341f14f2ea8b495c04792b47e372063fefae75
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Nov 22 06:06:02 2008 +0000

    Correct case on helper class names.  By convention, helper class names are lower case:
    http://docs.kohanaphp.com/general/helpers

commit a347ed5c10f11843dd49be907d771fbc73941841
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Nov 22 06:01:08 2008 +0000

    Correct case on helper class names.  By convention, helper class names are lower case:
    http://docs.kohanaphp.com/general/helpers
    
    Remove block_helper file as the abstract class os no longer required.

commit 8eadddfa873c4c0e8f14adc079c18a1f8fb0fa44
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Nov 22 05:51:15 2008 +0000

    Convert gmaps, info, and tag modules to the new block module

commit bb53a0b99f9d36d10afec914122dd262a1e442cc
Author: Jozef Selesi <jozefs@users.sourceforge.net>
Date:   Sat Nov 22 01:31:15 2008 +0000

    * Added test for rest::request_method().
    * Implemented delete in comment.

commit 01c8cdc8dd08bf859f68aaffff32fd1acf1a66ab
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 21 23:55:29 2008 +0000

    Convert the carousel module to provide its block through the new api

commit 60191f1d2c65103d35a8b7bf9771d5ff13405db6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 21 23:36:41 2008 +0000

    Be consistent in naming the album_top block

commit 88f799be6f458f71f9df87e05d24273f9a0058b9
Author: Jozef Selesi <jozefs@users.sourceforge.net>
Date:   Fri Nov 21 21:07:36 2008 +0000

    Fixed a bug in the REST controller dispatcher and added a test case that excercises it.

commit 4f5e3ad6d58c40a44ee2c4da8ec15c4851e33095
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 21 20:46:25 2008 +0000

    Use the new block mechanism to insert user related content into the html pages

commit 6ec266faa69cd1efeb531d3b1494189989a84293
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 21 20:13:28 2008 +0000

    2nd attempt at inserting html by modules.

commit 1b834319f4d92c7845ae67236c2e7a1ea66eba6c
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Nov 21 08:35:53 2008 +0000

    Restored most heading styles, still need to restore table and list styles. Removed unused CSS. CSS format updates. Applied jQuery tab styles to gSiteMenu. Removed gBlockHeader, all we need is a good old h3 element for a heading.

commit ba0f6f9e941bdd1b77d74b57d3d1bfba1e60e3cc
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Nov 21 07:35:34 2008 +0000

    Fixed style issues on comment container, should be plural id (gComments). Removed gCommentForm id, it's not necessary, at least not  now.

commit 992cf22c795100a4f42c17c38cf1aaa2029af279
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 21 07:06:11 2008 +0000

    Revert module block approach

commit e60ddd0bd8e3337cf569eb66d36f2bd1021e948e
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Nov 21 01:56:33 2008 +0000

    Add jQuery UI, tabs, and accordion JS and CSS to build Adam Torres' hi-fi prototype. Dropped YUI Base CSS in favor of defining our own base styles in screen.css, headings will and other items may not look right until I do. Need to figure out how jQuery ThemeRoller CSS should be integrated, if at all.

commit 8c06908f7f4e0bf6d55d4f6e2ee2c062b2f8190e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 20 17:51:12 2008 +0000

    Use rest::http_content_type() instead of the header() method to set response content

commit b78cee63950479abfa78df37a03388007f332543
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 20 17:32:58 2008 +0000

    A look at away to allow modules to define html head contents (links and js) and also allow modules to contribute blocks to the layout.

commit e2b040c6ae3797a5d6ec6c0f05f6bf3194e07c52
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 20 06:49:43 2008 +0000

    Add a missing slash in the HTTP return code

commit 66192bb214eceac9ddda2707e4b07626e8f972ee
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 20 06:37:26 2008 +0000

    Break dispatch tests up into little ones.

commit 340a0d7117e4c574429eae39eb328471e516941a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 20 06:26:42 2008 +0000

    Add a @todo to change user "joe" in the future.

commit 6fd261c8b02c90d6a24d12b10e5bd20a0adb4734
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 20 06:05:22 2008 +0000

    Add unittest and caching for ORM_MTPP::descendants

commit 4c587bdb01e6a7664780c53518a8cbe2858741b3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 20 05:24:24 2008 +0000

    Limit File_Structure_Test to only apply the regex expression if views is contained in the path name.

commit b18a1f477830274e2487fd0564d795dbbf386eb7
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Thu Nov 20 05:07:35 2008 +0000

    Content type and character encoding should be defined before <title>

commit 604e58346bdbb99fa62f53aa21d37f0d239b93fc
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 20 05:06:24 2008 +0000

    Add unittest and caching to ORM_MTPP::descendants_count

commit 29cc48ebcf2f8c267a41815cb1cf0ea11f7326e2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 20 04:41:29 2008 +0000

    Correct missing quotes

commit 611627231b6a712053e05734d7509b1d3751151b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 20 02:59:43 2008 +0000

    Clean up the MediaRSS module a little bit:
    * Media_RSS_Controller::$LIMIT is now self::$page_size
    * We use ORM_MPTT descendant_counts()
    * If the page is out of bounds, put it on a boundary
    * Move pub_date into the controller to simplify the mrss file
    * Put all the view assignment in one block for easier reading
    * Removed stray ; from the end of lines in the mrss file
    
    Clean up ORM_MPTT a bit:
    * fix spelling: decendent -> descendant
    * Remove unnecessary order_by() clauses
    * Set the default for $type to null (not "all").

commit c3fc1cb7ec91783a7953486c8a83aa8008dd5406
Author: Jozef Selesi <jozefs@users.sourceforge.net>
Date:   Thu Nov 20 01:25:29 2008 +0000

    * Added HTTP status constants and helper functions to REST helper.
    * HTTP header setting in comment module now going through REST helper API.
    * Fixed items controller test.
    * Fixed user installer test.
    * Fixed _create() handling in the REST controller.
    * Fixed routing for edit and add forms.
    * Added some tests for the REST controller.
    * Set svn:eol-style to LF on a bunch of files.
    * Added preamble to MY_Forge.php.

commit bd76b2e89f0caa2773e62192ef5d3b769c8ed6f8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 20 00:45:40 2008 +0000

    changed descendents_by_type to descendents and added descendent_count

commit d48d71a7051b2426187a63f255f3563742fe49a0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 20 00:22:36 2008 +0000

    Correct typo

commit 223449fcbddf5beaa88e428554bbe7655b8e41c3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 19 23:46:40 2008 +0000

    slideshow::link() returns the entire anchor element

commit 9ddc8c8aabfc5a6697ff636900297f94ecff4d8f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 19 23:36:50 2008 +0000

    Fix typo.

commit 4a4eac31adc3e98802bb2b3c6fe1e9b4507ed32d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 19 23:33:50 2008 +0000

    Create url::abs_site() and url::abs_file() to allow us to generate
    full URLs with a clean API, and isolate the cruddy party where we have
    to hardcode the server protocol into a single file.

commit c25f21accbae7081d946cd2d4dd83ebc64e7f0f7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 19 23:18:41 2008 +0000

    Change the album and photo templates to call the slideshow helper to get the slideshow link and button text.  The slideshow link will only show up if the slideshow module is installed.

commit 689f7e70d5a9c5879b1a76fcbf57d03fdfb853d7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 19 22:53:02 2008 +0000

    The feed url can be relative.

commit 1b36ce6c7e334ac6b5510b50935cc389f80126be
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 19 22:47:30 2008 +0000

    Fix broken path in url()
    Fix some style issues

commit 103bd8e8d22fed0cb2795ba28fe2e5acbfc4c744
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 19 22:45:30 2008 +0000

    Add the original item height and width to the item table

commit c8dc84d50230e6eb5e9824687ae57319b9afe05c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 19 22:39:44 2008 +0000

    Change the regex to assert true for files that match the pattern "#/views/.*?(\.html|mrss)\.php$#"

commit 8825687d0304d3ea520fe540a985ea34a061eb2b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 19 22:20:23 2008 +0000

    Change the view_files_end_in_html_dot_php_test to view_files_correct_suffix_test and change it to also accept mrss as a valid suffix

commit 7e5516302c67b7200dad3809b27a17cf3a421bf4
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 19 18:54:49 2008 +0000

    clean up feed template

commit 32b4a35568d3f079e4195412723fcde86e363872
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 19 18:45:12 2008 +0000

    Integrate Piclens lite as the slideshow

commit b3314fc1dcfd73c36c4bab82a5ebabca629845c8
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 19 18:23:30 2008 +0000

    Update the media rss template to include the resize and the fullsize
    added descendants by type method to the item model to allow for the selection of children by type

commit 161998dde6d976c45cfcea31f1128147acc3d64f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 19 06:35:54 2008 +0000

    Fix some broken-ness:
    1) Item_Controller::_create() and _update() were swapped
    2) _create() was redirecting to the wrong urls on success
    3) Change in-place return parameter from __return to _return
    4) Change in-place code to tunnel _put via POST

commit e14d5574b6861314c2133b156c8f2c9c94aeb1b6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 19 06:05:38 2008 +0000

    Cleanup media rss feed
    added parameters to thumbnail_url and resizes_url to be passed to the url::base call to generate ful urls

commit 763f0808e94fe32b879a53f928b9e5fa2a19d3c2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 19 05:00:52 2008 +0000

    Add the media rss feed link to the page header in the default theme

commit fe75760d63970b7e717cfc2a4338883dd256b81d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 19 04:52:50 2008 +0000

    Make the album title in-place editable.

commit 4ff0997c7579539a5da7b8dba6bf6613264bf8a9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 19 04:22:17 2008 +0000

    Fix a mistake in the route that let people try to get to the rest controller (it would fail, but this way they get a 404 instead of another error).

commit 5638fc5fb60823544f1944bdf40705a19b7365f1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 19 04:20:35 2008 +0000

    Change the way that we do RESTful routing.
    
    1) We now use __call() in REST_Controller to handle any requests to a controller
       that were not already handled.  In the case of RESTful controllers, this should
       be the only entry point (although they're free to break the model and add other
       ones.. nothing stops them).
    
       This means that we can remove all the catch-all routes in
       routes.php which greatly simplifies it.
    
    2) Move request_method() and output_format() out of REST_Controller and into the REST
       helper in core/helpers/rest.php
    
    3) Experiment with letting the various subclasses check the output_format and deal with
       it themselves.  This simplifies the API, but it might be a bad idea in that it might
       push too much work to the individual controllers.  It's a balancing act, time will tell,
       I'm willing to change it back later.

commit e0efdee8b2a2ba2ee1b86cfb2b7863a88877c00e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 19 04:14:09 2008 +0000

    Fix /item -> /items to conform to new REST api.

commit c0aa61787c98e27f4c25ad0a4a2307c884bcf664
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 19 03:42:43 2008 +0000

    Change output_format() to autodetect for html / xml / json

commit 3e67a35cb063bc58011b7be9c07454ff3800fc7e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 19 03:39:38 2008 +0000

    change mime_type column from 255 chars to 64

commit 89bb3c42f713ace310b64d7e1c9ce8aebc8fc373
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 19 03:39:12 2008 +0000

    Update the unit test for mime types.  Can't test it right now because routing is broken for the test framework so we have to fix that first.

commit 20a0700fcb161294354dabdecc899458b637c782
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 19 03:29:57 2008 +0000

    Set the content type to application/rss+xml

commit c7b2090f0cd68acf7e952a71ba30aa4c9edb6a45
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 19 03:29:53 2008 +0000

    add the mime type column on the item table

commit a197c057c83534b0fa59da692fa63bcd49c16a26
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 19 03:23:40 2008 +0000

    rename views/feed.media_rss.php to views/feed.mrss.php because
    mrss is a more standard abbreviation for MediaRSS.  Sigh.

commit c67f9069d0d79339c9c0102ef3b5e9387f014e69
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 19 03:21:43 2008 +0000

    Rename views/media_rss.html.php -> views/feed.media_rss.php because as
    Tim points out, "it's not html".  My bad!

commit 9311c12f1fbf34e6570936380ac20997f715f8d9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 19 03:18:59 2008 +0000

    rename views/media.rss.php  to views/media_rss.html.php for consistency.

commit df4832bf6f73d9587de603ad8a151853a962ba84
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 19 03:17:56 2008 +0000

    Change Media_RSS_Controller so that it does not extend REST_Controller, since it
    doesn't refer to a fixed resource or collection of resources.
    
    Fix some minor bugs in the code so that we can actually generate a
    feed.  It looks pretty cool!  Improved pagination links, but didn't actually test them.

commit 693080669a95d9b875252f5bf9f2719c594df2f5
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 19 02:50:11 2008 +0000

    fix a few minor issues

commit ad7ace9b72532512c67953d7149854312b6b195d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 19 02:31:20 2008 +0000

    The continuing evolution of the slideshow...
    1) added a mime_type property to the item module(no database change)
    2) created a media_rss module
    3) moved most of the functionality for the downloading the images to the media_rss module

commit b2772f5a050351129a64b966b127e39cf76c80b5
Author: Jozef Selesi <jozefs@users.sourceforge.net>
Date:   Wed Nov 19 00:12:25 2008 +0000

    * Renamed the album, item and photo controllers to albums, items and photos in order to follow the convention that controllers that refer to a collection of resources have plural names.
    * Added a bug workaround to routes.php

commit 1992343c2e1f2df892f39f971ae629edc59c33d0
Author: Jozef Selesi <jozefs@users.sourceforge.net>
Date:   Tue Nov 18 23:40:47 2008 +0000

    * Changed REST API. Now there are two separate methods for forms:
      GET /form/edit/{controller}/{resource_id} -> controller::_form_edit($resource)
      GET /form/add/{controller}/{parameters}   -> controller::_form_add($parameters)
    * Updated comment, user and core modules to reflect the API changes
    * Cleaned up routing and handling of requests to /{controller}

commit 4bf486955cea9e2b67531f044c6bf34a7bc9324f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Nov 18 19:09:24 2008 +0000

    The start of the slideshow module.  Mostly framework stuff, no real implementation yet

commit 4dfa22606fe4c23ab3b60b94518a8d06de63d86b
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Nov 18 16:39:35 2008 +0000

    Correct the placement of the slideshow button on the photo.html page

commit 6f4fae0786676721009205e43796e4e4e4fe0f95
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Nov 18 16:26:36 2008 +0000

    Added the is_installed to the module helper and change to photo.html to not try to display a comment if it is not installed

commit b63ea2cdbf995d4648bc3c4a5f4eb51ed8da3a8d
Author: Jozef Selesi <jozefs@users.sourceforge.net>
Date:   Tue Nov 18 15:48:08 2008 +0000

    - All comments of an item can now be seen /comments?item_id=
    - Return proper Content-Type header for GET /comments requests
    - Got rid of the query processing for index() in REST_Controller()
    - Small misc fixes

commit d4fc15f76c383be2ac77679ad2fcaa11bba93c05
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 18 09:07:46 2008 +0000

    Fix a typo in the text MPTT link

commit d8225e44c4a91c20d6a1b4177a677b395aa0e07a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 18 09:03:49 2008 +0000

    Fix a typo user_id -> owner_id

commit 394de8ec0a2393625f207e44192503a921f67834
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 18 09:03:26 2008 +0000

    Gracefully handle the no-comments case

commit 3ebb751cda5d47147a5c828b4cb32ecd4a9f8042
Author: Jozef Selesi <jozefs@users.sourceforge.net>
Date:   Tue Nov 18 08:28:32 2008 +0000

    First iteration of REST controller refactoring. RESTful controllers that refer to collections should now have plural names and there should be only one controller per resource. Updated existing classes that implement REST_Controller. The routing now works like this:
    GET    /controller    -> controller::_index()
    POST   /controller    -> controller::_create()
    GET    /controller/id -> controller::_show()
    PUT    /controller/id -> controller::_update()
    DELETE /controller/id -> controller::_delete()
    GET    /form/edit/controller/resource_id -> controller::_form()
    GET    /form/add/controller/data         -> controller::_form()

commit 59dbd1dc833a974f55f5cc66fa1c3204fa30980e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 18 08:10:14 2008 +0000

    Move User_Controller to Users_Controller per jozefs request.

commit 8b6796fa5f515b090b0c187e5d1303398868f975
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Nov 18 00:38:36 2008 +0000

    Synchronize the model rules with the database definitions and vice-versa.

commit c031fcef23a250f9739e911e8f1deeba924ad76c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 17 04:54:13 2008 +0000

    Remove stray <ul> from comment list

commit c91e90406bbc81f8311a1d2707dd141d150f99a4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 17 00:30:18 2008 +0000

    Add output formats to our REST controllers.  Add support for JSON and
    XML to the comment controllers as a proof of concept.  It's not fully
    baked; we should examine ways to create helpers to make this process
    easier.

commit 0975e702a99dad701f66c606de6597048338f247
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 16 19:26:44 2008 +0000

    Add _method=put to the edit form
    Properly implement User_Controller::_put()

commit 1a2cb5ff043d19736f45d2e845eb44bd32305afe
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 16 19:23:41 2008 +0000

    Put _method into the edit form's url; Implement Comment::_put() properly

commit b6de9859223ad4521ea9aef147534607c5a0a4d5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 16 19:22:27 2008 +0000

    Handle _method in either GET or POST

commit 5d14531af936a9ab2887fac9d1f056a1d712b051
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 16 19:12:01 2008 +0000

    Drop the call to render() and just use the View's __toString method to
    print it out.

commit bcb2230a6b081d17978f18458e6db756a3dbd6e1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 16 10:19:01 2008 +0000

    Remove a @todo

commit 4610fc8e7f32f1a582b5f6c9c25714151b9a2967
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 16 07:51:42 2008 +0000

    Create Forge::add_rules_from() which pulls validation rules from the model and
    associates them with the form.  This replaces the various _add_validation_rules()
    functions in the user and comment modules.
    
    Move user edit form into user helper for consistency with the comment module.
    
    Implement missing _form method in the user controller.

commit ce7fbf979d249e5e1effb7040d3e51a2c35015e3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 16 07:27:36 2008 +0000

    Stop using the target param; replace the form by hand so that we can run ajaxify_comment_form() as needed.  Otherwise the 2nd post attempt won't be ajax

commit e3be3cecf5ba6dea5d051c05d86b995f9b1df830
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 16 07:20:58 2008 +0000

    Second half of renaming the tags module.  Change all occurrences of
    gTags to gTag in the CSS.

commit e87a37b8552504a7e9adcafad9662e291b4cfc18
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 16 07:17:29 2008 +0000

    Rename 'tags' module to 'tag' for consistency of pluralization

commit 140736a1e49d47376ebc893aa2da250ba3d836a3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 16 07:14:12 2008 +0000

    Several large changes:
    
    1) Changed the way that we get forms.  Now, if you want to get a form
       for a REST resource you prefix /form to the resource id.  So:
        /form/photo/1    : returns a form for editing photo id 1
        /form/comments/1 : returns a form for adding a comment to photo id 1
        /form/comment/1  : returns a form for editing comment id 1
    
    2) Changed the comment module to have two controllers:
        comment:  deals with a single comment resource
        comments: deal with collections of comments attached to an item
    
    Related stuff:
    - Moved the comments js into the theme
    - Reworked Comment_Helper for clarity
    - Moved form generation code down into Comment_Helper
    - Cleaned up routes (eliminating new comment ones added in recent rev)
    - Added form() function to all REST controllers
    - Changed comment module to use a block instead of an arbitrary helper call from the theme
    - Comment controller only returns HTML currently, but returns a 201 Created status
      code when a new comment is added, which the Ajax code can catch and act upon.
    - Got rid of a lot of extra views in comment module

commit b8b60df391637ff21bb79ba64f820749ef324ee9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 16 07:07:16 2008 +0000

    Rename gLogin -> gLoginForm
    
    This disambiguates forms from blocks (for example in the comment
    module we were calling both the form and block gComments).

commit be67187ad95526b378decbab7cb7623fcf9ef5f3
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Nov 16 06:43:31 2008 +0000

    Create MY_Forge to specify the defaul html

commit 1a79a1089340d0d6c913ce018532ec3bb8eed39c
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Sun Nov 16 06:09:11 2008 +0000

    prevent direct access. take 2

commit d4c95a089e442edfafbf44ea8183b0ab275cbdc3
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Sun Nov 16 06:06:13 2008 +0000

    prevent direct access

commit f27929e1266194eb9b4b3de9b4926e0494290017
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Sun Nov 16 05:46:42 2008 +0000

    create a regular user and make scaffolding assign owner to logged in user

commit 2d463c5531004b868ba12a577d6ea1b47d7b4b73
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 15 21:54:16 2008 +0000

    use text::alternate where appropriate

commit 6fd71945447468c46cc5837f184f07ec0fd4178c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 15 21:47:21 2008 +0000

    Destroy the session on logout, don't just delete the user.

commit fbc810098f797d6cacecadb39fab2016ab9a8429
Author: Jozef Selesi <jozefs@users.sourceforge.net>
Date:   Sat Nov 15 17:39:14 2008 +0000

    Do comment add in a single request, some code cleanup.

commit 5e10b44a951a40d9877843b381a5ba6d6c511c48
Author: Jozef Selesi <jozefs@users.sourceforge.net>
Date:   Sat Nov 15 17:04:16 2008 +0000

    Remove unnecessary pasted code.

commit 0f11c77bcd05b4b52a7260220f751f29197735e0
Author: Jozef Selesi <jozefs@users.sourceforge.net>
Date:   Sat Nov 15 16:53:07 2008 +0000

    Set svn:eol-style to LF.

commit f9eaa8c220630578664fb6b46d082fce42726ca5
Author: Jozef Selesi <jozefs@users.sourceforge.net>
Date:   Sat Nov 15 16:52:23 2008 +0000

    Initial add comment implementation.

commit 66bd9d85b3820df8e4393019754d6a11294d4d4e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 15 10:15:12 2008 +0000

    Show per-field error messages inline again

commit ca05d94b703f22416a61f7ec5e26d1f400414e46
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 15 09:27:04 2008 +0000

    Add gInline to the form's unordered list to clean it up.

commit 89c6f8f914a159155a620b5de1214b0cf48adff4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 15 09:09:29 2008 +0000

    Don't show gLoginMenu if there's no user module

commit 16828a4bc708b2e507c120e995783055a138555a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 15 09:08:59 2008 +0000

    Delete the user from the session when uninstalling the user module

commit e901d613bf192f1a01a31bac2aac2d4074fddf45
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 15 09:08:18 2008 +0000

    Add Theme::module() and module::get()

commit c152e5db5add87a572bf78fe3d64c8562bf7e790
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 15 09:05:21 2008 +0000

    Only remove the user from the session when logging out.

commit 5486238d8d631710471c5170fb1f12c31a9ed19e
Author: Jozef Selesi <jozefs@users.sourceforge.net>
Date:   Sat Nov 15 08:52:58 2008 +0000

    Set svn:eol-style to LF.

commit db6061096e23e77c4ea895fa3c1bd20d65c6db4c
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 15 08:44:01 2008 +0000

    Item / Owner changes.
    
    * Hardcode the item has_one owner relationship again
    * Overload User_Model::__get to handle missing owners gracefully
    * Fix Item_Controller to take the owner_id from the session or
      from the parent album when adding new albums and photos.

commit 6dbf5ae172e8336caa0971024ffdfa0148bcf718
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Sat Nov 15 08:19:14 2008 +0000

    Clean user / item relationship. Upload files gets the ownership of current user; and the views don't break if user module is not installed

commit dc1090d005d4d565e2989dee94be3fcc1a6190a7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 15 08:16:58 2008 +0000

    Now, only logged in users can edit stuff in-place.

commit 9d1a598ec0826b0e8c3b6fc0ff64863f5dde7edc
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 15 08:15:00 2008 +0000

    Add support for modifying user data.  It still needs work.
    
    Make the continue= param a GET only parameter so that it's not part of
    the form.

commit ae7839ffaada72c522ffcd9b3f4f1cc04027a720
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 15 06:23:09 2008 +0000

    Revise the user login code.
    
    * Remove user registration link and popup from the theme; this
      shouldn't be done in a popup. Use ajaxform to simplify the way
      that we load the login popup.
    
    * Create form.html.php, this is a template for Forge based forms.
    
    * Move user validation rules into User_Model and let forms
      populate the rules into their forms as useful.
    
    * Undo r18688's changes regarding the REST code.  We should never
      accept a null resource, this breaks the REST abstraction.
    
    * Change login and user controllers to use Forge which lets us delete
      login.html.php and user.html.php since those now are generated by
      the theme-owned form template

commit 26c8772e16b0328358d23ee4c29f9b592e632b28
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 15 05:27:46 2008 +0000

    jquery.form.js r5945

commit bd1ec2df1fbd0a642b7f981742558b2ee4f8b5ff
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 14 18:16:13 2008 +0000

    The state of of the user registration functionality

commit d7745f2ad871b8e5ac29428f74344dcb41f93b6d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 14 17:23:10 2008 +0000

    Add the name attr to the input fields and use the form.serialize() method to generate the post data

commit 61d957e372b623856338b8223fc80ad440bd1d93
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 14 16:58:59 2008 +0000

    Rename login.js to user.js

commit ed90edfa960d94705768cae7061804e3c44f650a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 14 16:56:17 2008 +0000

    Remove class="gInline" and set the css as suggested by thumb in -devel

commit e0ec9dd76a62ad712b2a771a383f262557116753
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 14 16:51:11 2008 +0000

    Allow the HTTP get method to be called without an id to create any empty template.

commit 5a2fe6bb0b3068c47337e7382354f8ca340375e2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 14 08:22:53 2008 +0000

    Internationalize all strings

commit 652cc48b772c3fcc4f932afecf29741ab3e632a7
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 14 07:42:20 2008 +0000

    change the display name to a varchar

commit b5f48e4ab377e81d295226fe2eb51bfe9f023fe5
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 14 07:30:47 2008 +0000

    Use the shortform to load the resource.

commit 23869029266db567d654702d738f78077f480588
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Fri Nov 14 07:20:00 2008 +0000

    Remove the logout action from the login controller

commit f0695f20306cd7588741ead5f6d8d8831794b4ab
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 14 05:21:47 2008 +0000

    Move logout to its own controller

commit 71dc730986e0b3d2593a34098a7adbd7f3d2f399
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 14 05:09:07 2008 +0000

    Change quotes style

commit 0fe8d444722e6051a10fddd9e6b01b7c4849c5de
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 13 10:38:28 2008 +0000

    Create module helper and refactor all the code that creates, updates
    and deletes modules into it.

commit 6d7130bffc2e124c9eed9fca3f772dcbd620fd12
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 13 05:17:58 2008 +0000

    Progress is being made... you can now logout

commit f62719ba61e755cf40b178f6a3c940833df650e1
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 13 04:56:12 2008 +0000

    Login is now working, but you can't logout

commit c9b07ff99ee3f198a78b4bff46991bf22d99ad3d
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Thu Nov 13 04:38:58 2008 +0000

    Only highlight text, radio, checkbox, select, and textarea elements in forms or list items with gError. Don't highlight submit, reset inputs.

commit d357ed44245b9d19ef7907d2415f731b047e25de
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Thu Nov 13 04:07:03 2008 +0000

    Adds the class gError to gLogin if the username or password is in error

commit 7db9e60bd5583e6726b67274f6f38e6cee49f01b
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Thu Nov 13 03:54:23 2008 +0000

    It's #gLogin, not #gLoginForm. My bad...

commit d52df803fa52ff9ff91e8587fd5f1aadac6824a2
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Thu Nov 13 03:50:51 2008 +0000

    Removed padding on form text inputs, normalized font size of forms in header and sidebar.

commit c63ddc34329075293b5a7130f5ab0677631ab3af
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Thu Nov 13 03:39:18 2008 +0000

    Major updates to form CSS. Now using unordered lists for layouts. Added .gInline for forms like login, search, tags. Updated comment, login, search, and tagging forms. All form styles live in screen.css now. Still a lot to do, but this is a good foundation.

commit 74216a3c636673fd49e82a7c31c0c9ed1de60e7f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 12 21:42:40 2008 +0000

    The login processing is starting to take shape. Login_Form is gone.  The html for the login form is retrieve via an ajax call when the user clicks on login.  Can't login with a valid id yet, but you certainly get error messages when things are wrong :-)

commit 2a9f8b5bcd6de819e461583bde1641aad3055d27
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 12 18:13:59 2008 +0000

    Added a legend to the fieldset

commit 91b149adbf42f71b1892cef4b90f62c1147c8d06
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 12 17:48:04 2008 +0000

    Generate the login view using fieldsets and an un order list

commit 75527db81f47219882d9e1cedeebf406c99d0cf6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 12 17:08:53 2008 +0000

    Clean up alignment in the login menu when the login form is displayed

commit 2019e9a931ffde9b2358241aa1844b4a826a76f9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 12 15:53:39 2008 +0000

    Remove user_password class and move the functionality into the user helper class

commit 56dcb953b0b1fa9d47d6c1dd0f1f60a07ac98433
Author: Jozef Selesi <jozefs@users.sourceforge.net>
Date:   Wed Nov 12 15:43:05 2008 +0000

    Code cleanup, add test for time formatting function.

commit a1ca946a89e00a2daa22069aabf60e7a1151e78b
Author: Jozef Selesi <jozefs@users.sourceforge.net>
Date:   Wed Nov 12 12:00:13 2008 +0000

    Make comment post time display more user-friendly by displaying 'today', 'yesterday', 'x days ago' etc.

commit ed8f1d4152d077529ac0f39d1aeb42186037e99f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 12 10:54:01 2008 +0000

    gBlockContent lives on the outer div, so remove it from the inner form.

commit 453e15f502f94e5605b29527d406eb500234e828
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 12 10:11:05 2008 +0000

    Throw an exception when we can't upload a file.  This is not the best solution, but it works for now.

commit 7423c755c04d55dda274baf24c38ef76815cc92b
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Wed Nov 12 08:30:55 2008 +0000

    aliasing owner to user

commit 31bea40e2ec72dd3924ed9f68459db35f1e0f17f
Author: Jozef Selesi <jozefs@users.sourceforge.net>
Date:   Wed Nov 12 07:07:13 2008 +0000

    Set svn:eol-style LF on a new file and add the standard preamble to some files.

commit 1da2428183a9f1ae8324a8b4db4ae71e3125470d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 12 03:40:49 2008 +0000

    More updates for user management.  The controllers don't work yet. But the login link in the header wil open up a login box like the mockup

commit 49e44f29f219e20a2a6a2430dd82a2b2898764fa
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 12 03:22:48 2008 +0000

    Added a generic style .gDisplayNone

commit 51c64f1d28c466c69dc693be15bce8bfbffeafd1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 12 00:05:47 2008 +0000

    Create a simple benchmark that loads 500 localized messages and performs
    500 localizations on them.

commit ba348181f74634376c871c2be9210ead4582b5e2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 11 23:12:16 2008 +0000

    Rename tag_cloud.html.php to tags_block.html.php for consistency

commit 3024d2313be97a866d1b922b94333e8b63174be7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 11 23:10:39 2008 +0000

    Turn IN_PRODUCTION to false while we work on G3

commit fd4faa89e63b72eeb07f0339a2be928e464e39ef
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 11 23:07:30 2008 +0000

    Override View_Core::render so that we trap errors stemming from bad
    PHP includes and show a visible stack trace to help developers.

commit b0a3308740d121c7ba504c1625f08901d713d750
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 11 22:46:25 2008 +0000

    Minor cleanup; localization, indentation, etc.

commit 752459c64cafec0f003c4b8531201c58a5fecad7
Author: Jozef Selesi <jozefs@users.sourceforge.net>
Date:   Tue Nov 11 20:54:12 2008 +0000

    Display comments from the database.

commit dd9058ada40b3afd47d3cbf800b78862bc44bdb6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Nov 11 20:16:58 2008 +0000

    Added some functionality to the user helper class (to check if the user is logged in) and changed the header to use the helper class

commit 8223018a0be53d105d6ee901d80a633650238851
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Nov 11 20:04:15 2008 +0000

    Property update

commit f5d092b4848e07c2fff453b7723266e8aab4463c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Nov 11 20:02:43 2008 +0000

    Correct some missing properties and change the user_model to have a set function so the password is hashed as part of the model

commit a15c7cb11fbf3a45492cf7cb0a04823d4321f3d5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 11 13:11:20 2008 +0000

    Change the PUT/DELETE tunneling param from __action to _method
    to be like Rails.

commit ee413f5f39e1a172b48a1264b1d75b7f6986979d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 11 13:00:11 2008 +0000

    Updated for recent Item_Controller API change

commit 1651b3fe8506cd629770e7642a2e1e1f88a9fc68
Author: Jozef Selesi <jozefs@users.sourceforge.net>
Date:   Tue Nov 11 12:20:20 2008 +0000

    Move scaffolding code out of the comments controller to welcome.php.

commit 76b3bdd40cec18e4331ff9095e58b0562ed76175
Author: Jozef Selesi <jozefs@users.sourceforge.net>
Date:   Tue Nov 11 11:22:29 2008 +0000

    Set svn:eol-style to LF on lib/

commit c59481e6158e7f2966636533c1dc6c15b729fe54
Author: Jozef Selesi <jozefs@users.sourceforge.net>
Date:   Tue Nov 11 11:15:05 2008 +0000

    Set svn:eol-style to LF.

commit 900f60d2743b03f4bc325847dbeeb132b9c10006
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Nov 11 10:14:01 2008 +0000

    Fix header URLs (no longer hardcoded, avoiding nesting of index.php/index.php/ for some environments)

commit 71f8a0e8fe547e35be61be529d86529a6f68721a
Author: Andy Staudacher <andy.st@gmail.com>
Date:   Tue Nov 11 10:06:38 2008 +0000

    Fix config paths for MS Windows (kohana's URL router depends on normalized directory separators)

commit bba5289035eebb0c4a9c6c5f3d1598b538fc3586
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Nov 11 07:39:20 2008 +0000

    Change Album and Photo controllers to set the user object as a global variable; change the header so it links to the user controllers; and add the user controllers which don't do anything.

commit 87f1115113f36b197003a45f32f295bb4cd19891
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 11 07:29:48 2008 +0000

    Change REST API to use non-routable functions: _get(), _post(),
    _put(), _delete().
    
    This should make it more obvious that these are not your typical
    routes, simplifies overall routing by removing a rule and removes the
    possibility of accidentally leaking information if we route to one of
    them by accident.

commit d35f337b7bc719ed0a4534ca835abbfa46d24a18
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 11 06:24:30 2008 +0000

    Add phpdocs to explain how to use REST_Controller

commit 9f261213a5ad8e70dc4ab8ccd9bc76490a58763a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Nov 11 06:21:21 2008 +0000

    Reset PasswordHash.php to its original state and exclude it from the file_structure_test

commit dae36c2aa4afebb38cc3235b46c6490b2f771aa1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 11 06:18:45 2008 +0000

    Create REST_Controller abstract base class for all REST based resource
    controllers.  Any controller that wants to act RESTful can extend this
    class and implement get/post/put/delete.
    
    Tweak default routes to disallow direct access to the REST controller
    and direct access to any REST methods.

commit 62bb63a70d35feb4517afa29f83cf2f5d7fd4be9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Nov 11 04:57:49 2008 +0000

    New user module with password support. This supports the same password mechanism as g1 and g2 to facilitate a migration.

commit db6917b58b0533214560ffef7334f4dc5e9a7cc7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 10 22:08:02 2008 +0000

    Use select_list() to allow for a single assert_equal in our tests.

commit 253ae3e0034bc94a7d2d072bb9bee38aa9403ad1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 10 21:56:46 2008 +0000

    Use alternate form of ORM::factory to reduce code.

commit ffa39aabb99e1b9b7f475f5afee523c821e34112
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 10 21:55:27 2008 +0000

    Manually delete the auth table and module entry to ease transitions for devs.

commit 7bcf7efc097cc0a9264d9714cdc72fc30554f376
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Nov 10 21:29:30 2008 +0000

    Remove the complexity of a interface driven user management module

commit 0a8d5edbdc8e3e251f29b7370fdc2e594b06446f
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Nov 10 20:17:09 2008 +0000

    Early look at the User/Auth module refactoring.  It will look for a driver based on the contents of the user/config/user.php file.  And load that driver based on the User_Driver interface.  There is a default User_Gallery_Driver class that will provide the actual interface implementation.  Replacing this driver will allow a completely different user and authentication implementation to be used... hopefully will reduce issues with embedding and other user management systems.  Removed from unit tests so they will still run.

commit ddf0a519000f4c93df1f2ded18b631325256a905
Author: Jozef Selesi <jozefs@users.sourceforge.net>
Date:   Mon Nov 10 17:32:04 2008 +0000

    Comment creation controller, helper and test. Add comments from the scaffold.

commit 359e28a50f990fb205c62532f495b48454a6787c
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Nov 10 16:45:06 2008 +0000

    Remove Auth module

commit d4415d0d3e1c82afbf85d156a6f8598eb6a051b6
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Nov 10 16:36:56 2008 +0000

    Reset the links in the header and update the readme

commit 92b1ae14f971434b6a9aebe817071b16f1fb1aae
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 10 16:36:08 2008 +0000

    Require short_open_tag to be enabled, or die.

commit 7a1b2b0ca7dc10c69f58f3f53e6d8d1c1039db77
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 10 15:33:55 2008 +0000

    Add a test to make sure that we have no windows-style line endings.

commit ceb07822339d92e399b3c93069ff356fcc68a278
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 10 12:28:58 2008 +0000

    Add support for multi-file-upload using jquery.MultiFile and modify
    Item_Controller to accept it.

commit aceb0309731f94813eaefa9e34cd0253425c6151
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 10 12:28:05 2008 +0000

    Raise upload_max_filesize and post_max_size to very high values

commit d8c2399b96c1f281013cd7ddc599a9aea6e570c3
Author: Jozef Selesi <jozefs@users.sourceforge.net>
Date:   Mon Nov 10 11:40:48 2008 +0000

    Prevent direct script access.

commit 8cb0acbbb0ca512408b688a491c56e88150a5274
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 10 09:39:31 2008 +0000

    Indent fixes

commit 4f80dddbd189a0851f33bccdab71767e7714378d
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Nov 10 07:57:43 2008 +0000

    Indent fixes

commit 8903daee3182706de1ddb08fa207f847901d0d9a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 10 07:48:19 2008 +0000

    Convert a few more images to ../images

commit 2210d52007ceb21c367b5f1bb1e4fd74941c215a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 10 07:47:08 2008 +0000

    Switch image paths to relative

commit 8858b957b05f9673ed29b6ad941cbeaefd29cd13
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Mon Nov 10 03:17:56 2008 +0000

    The start of the login functionality.  It shows the login popup but doesn't do anything else.  Just got tire of my changes being clobbered :-)

commit 5e385398f00cd77ced7b91892c02c8c97db0848e
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Nov 10 02:16:09 2008 +0000

    IE fixes. Default theme now looks roughly the same in IE and Firefox. We need to avoid using absolute and relative positioning for our primary layout containers (i.e. gHeader, gFooter, etc.).

commit c2162a645a47b8759bf07319cec69cf9cbff4f67
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 10 00:34:02 2008 +0000

    Clean up HTML for adding albums/photos a tad.

commit b006b1922c098290c591504ab0df26c69a0f2002
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 10 00:26:52 2008 +0000

    uninstall and reinstall the comment module, too

commit b5f2443bb53b802366d1f76c80beebef70129e3f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 10 00:25:59 2008 +0000

    Add the ability to create albums to the scaffolding
    Revert $_POST back to $this->input->post() because that supports default values.

commit 49f3794894fb591afd1009a6ad0a6f31cc10d066
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Mon Nov 10 00:24:01 2008 +0000

    jQuery edit in place is so easy, seems like it oughta be added to the photo view :)

commit 085ba7cd46c3fcc5bcb7a3f4c98ee580e67b6800
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 10 00:16:41 2008 +0000

    Tests for Item_Controller

commit c054b4de049f172263e1d74015717e4b26000b21
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 10 00:16:03 2008 +0000

    Convert quote styles
    Convert $this->input->post to $_POST

commit 223cba531e10c90253ea447e373c4e99a72c0299
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 9 23:49:09 2008 +0000

    Rename tests to make room for controller tests
      Album_Test -> Album_Helper_Test
      Photo_Test -> Photo_Helper_Test

commit 1ba012db0e2b9b60899a666471326465bb7a9f93
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 9 23:45:47 2008 +0000

    Chain away temporary variables

commit e7155c09c53be09d84b85ad57a8dc58529c10672
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 9 23:40:28 2008 +0000

    Implement Item_Controller::put() and delete()
    Adjust/simplify photo::create
    Add image uploading to the scaffolding

commit aa437293e6e5404b3beb86a3d0801b509930201c
Author: Jozef Selesi <jozefs@users.sourceforge.net>
Date:   Sun Nov 9 23:34:03 2008 +0000

    Fix line endings.

commit 25dd0bbf1c995ea35ee5dc56d6dfa309c393b2b9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 9 23:29:05 2008 +0000

    style fix

commit 434e56351ef9b3bf884bb722732aa9abd6e324a0
Author: Jozef Selesi <jozefs@users.sourceforge.net>
Date:   Sun Nov 9 23:06:31 2008 +0000

    Install/uninstall support for the comment module. Missing from the previous commit.

commit 46a67a4b6d922c54bf001c7faa1311b5f4ef4c7e
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Nov 9 23:03:50 2008 +0000

    IE fixes, sidebar is now fixed in IE (we were missing a yui-g class). Removed .first class, it's not needed, at least not now. Moved all top-level layout containers to page.html.php so that if themers want to replace YUI grids with something else, like Blueprint, they only really need to edit page.html.php.

commit 24decb7fa41974fa9a2edc323b30eccb1548721e
Author: Jozef Selesi <jozefs@users.sourceforge.net>
Date:   Sun Nov 9 22:57:55 2008 +0000

    Beginnings of the comment module. Install and uninstall.

commit 85b909a9f9c3596284bef9ea5568dff55302a402
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Sun Nov 9 20:07:47 2008 +0000

    CSS cleanup. Alphabetized all CSS attributes. Use short form declaration for background. Don't precede decimal values with 0 (.8em instead of 0.8em). Convert colors to short form, use lower case hex alpha values (easier to read), convert keyword colors to hex values. Quoted url paths. Fixed the order of border attributes (width style color). Don't clear floated elements around #gContent.

commit 1b490c5fe6ce6ced7b02bbdf8c939a991f0378af
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 9 19:20:23 2008 +0000

    Make Gallery3 more RESTful.
    
    Create Item_Controller as a common superclass for Album_Controller and
    Photo_Controller.  Change routes to route requests to Item_Controller
    for dispatching, which in turn will generate get/post/put/delete
    requests to the controlller so that each controller has a RESTful
    surface.
    
    Change in_place editing to take advantage of this.

commit 065bbb2120ce0aaee96a3886bd06c90ca26da9bd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 9 19:10:48 2008 +0000

    try to disable register_globals

commit 4cc70a18519bc5694a59060301278fb5bf911bac
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 9 18:54:17 2008 +0000

    change url::base() to url::file()

commit a8713a769533913004a2ac7cdf65ed60dbb80a7d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 8 19:11:12 2008 +0000

    Allow in-place editing in the info block.

commit e8d989ff9ae049a93f1ad700d7f6416a8dfe5207
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 8 10:21:18 2008 +0000

    Simplify the CSS a bit.

commit 0238925a635cd412e9c05131402fa68cc8e6b725
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 8 09:35:46 2008 +0000

    Restrict our dom traversal to look only for span.gInPlaceEdit for speed.

commit 950c58e6d37f68f69815d4d73df5577b9789679a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 8 09:28:11 2008 +0000

    Add support for in-place editing of data fields.

commit ac8199a09a810277624c93fd82e49d2250ae0461
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 8 07:51:19 2008 +0000

    Tell users to install the user module before installing auth.

commit 418c0aab69a72da512646541be2d88a866cb9fdb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 8 07:48:36 2008 +0000

    Create permanent owner_id column in the item table, and use a soft
    relationship to bind the two.  To do this, I overrode __get in
    Item_Model so that $item->owner returns the appropriate User_Model.

commit ea7cc4f46edc730ff873c579a6c63490d24496a6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 8 07:27:46 2008 +0000

    Simplify the way that we find the user id (just look it up, and if there's a database exception use the null value)

commit 28b739a2105cba83f877d4fc4022d710b920b5a7
Author: Felix Rabinovich <virshu@users.sourceforge.net>
Date:   Sat Nov 8 07:18:56 2008 +0000

    Adding user (owner) to items; info module

commit 3bb9b9185cb9445157ab20df9178f9a892a0bbe0
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Nov 8 05:30:41 2008 +0000

    Standardize on a format for exceptions messages new Exception("@todo ERROR_MESSAGE");

commit 36d1be4717c5d817ccafbed628a760c1126ba967
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 8 05:12:37 2008 +0000

    44 --> E_DATABASE_ERROR

commit 73488d5ee97c73c45ab963424ac855e626af19e7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 8 05:11:58 2008 +0000

    Remove inappropriate comments

commit d0251553146256bfa03ee63d77fcc90582a1289d
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Nov 8 01:56:59 2008 +0000

    The start of an authentication module.  This provides the installation and a basic install test. There is no interface at the moment to do authentication. It is dependent on the install of the user module.

commit 57683d5b70be2460a767d1385253d787229214e2
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sat Nov 8 01:19:03 2008 +0000

    Change how the modules table doesn't exist is caught.  In running unit test, sometimes i would get the message "There was an SQL error: Table 'gallery3_unittest.modules' doesn't exist - ...." and sometimes I would get the message "Table modules does not exist in your database." In both cases the error code was 44.

commit dc90ad97396c258f3a5fe9b0c126af33f88a7b4a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 7 10:46:06 2008 +0000

    Change add() to add photos:albums at a ratio of 10:1

commit 30c4433b4406d61466aa347038e4e28ab52ceeb6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 7 10:44:49 2008 +0000

    Fix the child url to use the item type.

commit 70e96fbaf0e4f8110f8366934b0d62318a5b57b0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 7 08:54:30 2008 +0000

    add gMinimize to the block header

commit 04d4ea27eecd444e8fa167edb7be0a2d0bbb2db6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 7 08:53:42 2008 +0000

    indentation fixes

commit e0f8541fef9e55f2df7e5bc435674ffc7b52f193
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Nov 7 07:41:50 2008 +0000

    Renamed .minimize to .gMinimize

commit 81ab478559de2d551c5a26bac98433f701beb08e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 7 07:37:49 2008 +0000

    move block.html.php into the default theme

commit 76436c0029f5be153f805a1be03e17ea26309906
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 7 07:33:43 2008 +0000

    Add automatic pagination.  All you have to do is add <?= $theme->pager
    ?> to your theme file and you get a well formed pager.  Themes can
    customize this any way they want.  A version that matches the mockup
    is provided in the default theme.

commit 50a9848f383c988b720c99945fbb91f371e02fa0
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Nov 7 07:31:58 2008 +0000

    Updated CSS organization and headings, removed unused styles, added placeholders for a few styles, including gThumbnail. Simplified album grid loop, the thumbnail container markup for albums and items was almost identical, no need to repeat all of it. Switched album grid markup from <div> to <ul>. Updated element nesting in photo template.

commit ae359b50e0704df00111cdb02a2c16a81a0e5996
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 7 07:31:11 2008 +0000

    Use get_object_vars to simplify code

commit 936decb437cbb19799dcae255af1d4425a850ae3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 7 06:46:38 2008 +0000

    Add children_count() to ORM_MPTT

commit 6a1ef44c8842d007dd59574cc76ba767519d124f
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 7 06:44:36 2008 +0000

    convert tabs -> spaces

commit 6b5b5ec3a67c322b7566fc5e645008acf62e9dc6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 7 05:49:45 2008 +0000

    Use jquery.cookie to keep the same tab open when you refresh
    Add a switch to turn profiling on/off

commit c526a9cd2542ae10589f8b7736e173d720b7e794
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Nov 7 05:04:15 2008 +0000

    Move default theme up above modules so that it can override module views

commit 7329cb0dde260f022178c7965f6240660d08da28
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Fri Nov 7 05:03:00 2008 +0000

    Added YUI 2.6.0 CSS collection to lib (reset-gonts-grids and base) and call these rather than CDN versions, for now. Renamed default theme's style sheet to screen.css, recommend that CSS files be named for the primary media they support. Removed unused YUI JS component calls from the default theme.

commit 6f1c46da6e0fb0145412d18412ffb593f5bd9b5a
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 6 10:22:34 2008 +0000

    Oops, these files got left out of r18525.

commit 93fd448e7edbf3aedbf62580650c2abdbf8e8cb5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 6 07:24:58 2008 +0000

    Break header/sidebar/footer out into separate templates.

commit 278191dd6d38bd939ccefb7a1c338611ee920b6e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 6 07:20:06 2008 +0000

    Change the theming module again, per a discussion with Chad and Jakob.
    Now we have an overall page layout (page.html.php) which has a $content
    variable, and that $content will be one of several possible secondary
    views.  Currently, it is either photo.html.php or album.html.php.
    
    header, footer, breadcrumb, sidebar, anything common to all pages is
    in page.html.php.

commit 6cafc61f96e900790c8a1e3f0cd01b1b679e93b0
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 6 05:51:20 2008 +0000

    album::set_thumbnail is now part of Item_Model so it can go.
    
    Fix a bug in the scaffolding where we weren't saving the album after
    adding its thumbnail (so its dimensions weren't getting set).

commit d6e942f2e37fc2e6539ddabba62faac06df59c08
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 6 04:56:50 2008 +0000

    Add quick-link to the deepest photo to test hierarchical navigation

commit 3fe8cd7135577499a9319da4a71467ba56ad46b4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 6 04:55:22 2008 +0000

    Drop the ? from the base url; we're going to count on Apache PathInfo for navigation.

commit c4407f7bdafd5390ecff98c2fb38aeaae9a9195c
Author: Chad Kieffer <chad@2tbsp.com>
Date:   Thu Nov 6 04:37:28 2008 +0000

    spruce up the display of commands

commit cf27982466a79e0e73be2b6911d2312cdf22c147
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 6 03:58:37 2008 +0000

    When uninstalling the core, uninstall all the other modules first.
    Otherwise, when you reinstall the other module's tables are still
    hanging around and interfere with their install.

commit 2738d4b6a6910575059e4e1eaa7192ab2a1369a5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 6 03:55:32 2008 +0000

    Fix a typo.

commit ef4b1257964dde8ed04cc574cb7004043d54f9c5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Thu Nov 6 03:51:30 2008 +0000

    Uninstall/reinstall modules in the right order and catch exceptions (fixes test failures)

commit c389e229828e5e9b8acd2618f0e4365ada77beab
Author: Chris Kelly <ckdake@ckdake.com>
Date:   Wed Nov 5 22:37:48 2008 +0000

    doh. ini_set for short_open_tag only works in old version of php. reverting to using .htaccess

commit 91a0236f8cdea57f70433f0f90a4f60f9418cbad
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 5 22:29:42 2008 +0000

    Guard the module loading code against database errors (in case the database isn't configured yet)

commit 3d20abcdf0874e831f64811a81f10b5610e8cda3
Author: Chris Kelly <ckdake@ckdake.com>
Date:   Wed Nov 5 22:20:58 2008 +0000

    move short_open_tag setting from .htaccess to ini_set because it works more often and fails more gracefully

commit 134bac46d07a4d027ef350c69a6cc8f787bfa6e9
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 5 22:10:35 2008 +0000

    add installation unit tests and corrected a problem where the groups_users pivot table was not populated.

commit dbf0fda99b2751378d924f6f8fda7509eb1c04b3
Author: Chris Kelly <ckdake@ckdake.com>
Date:   Wed Nov 5 21:52:22 2008 +0000

    better instructions/error handling

commit 74cefadb19ba51d909286543276f3f0937a34f6e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 5 20:42:15 2008 +0000

    actually delete the same tables as we createad

commit 0493cf4ecd923116205ff213b7386a5a9e4bf76a
Author: Chris Kelly <ckdake@ckdake.com>
Date:   Wed Nov 5 18:32:50 2008 +0000

    replaced Feature URLs with new one

commit 24787b554552b58d4e1de898650181a9b982a101
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 5 17:32:59 2008 +0000

    remove tabs

commit dcfa725d6abfa921928121a9cec878ccf3ee3d35
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 5 09:58:15 2008 +0000

    Adjust gTags style since the <ul> is no longer gBlock, it's on a containing div

commit 3feb0b288be437210ae10f0fbdb9fc14e6c252a8
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 5 09:50:20 2008 +0000

    Add info section with MPTT graphs

commit ae00f739445717885e2fc82e241bae38b7e58d44
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 5 09:42:47 2008 +0000

    * Add thumbnail and resize dimensions to the item table and use them
      properly in the theme.
    * Move thumbnail and resize generation down into the model for
      consistency.
    * Add a sample thumbnail for albums
    * Fix a bug in the ORM to clear the cache when we reload an object.
    * Add Kohana docs to the scaffold.

commit e35c154414ac73788645666b3e4e71722706c6cd
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 5 07:57:59 2008 +0000

    Style/doc cleanups.

commit e44ff9bb6054f83d266a28f4e5418ff9b98a5b80
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 5 07:47:19 2008 +0000

    ORM_MPTT::parents() should not include the node itself.

commit d21f3437e64fb67f306eaec40e778e77176796ff
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 5 07:42:52 2008 +0000

    Add the photo controller, and tie it to the photo page in our theme.
    
    Implement a real breadcrumb.

commit 581e931c439a726fbd6a0b0068debd2cd76e349d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 5 07:13:46 2008 +0000

    Change the default theme to actually render what's in the Gallery.
    Currently only the album view works, albums have no thumbnails, and
    there's only 1 image in use.
    
    Improved Item_Model to have the following API methods
      file_path() -- returns the path to the source image or album dir
      thumbnail_path(), thumbnail_url() -- returns path/url to the thumbnail
      resize_path(), resize_url() -- returns path/url to the resize
    
    All tests updated.

commit 00513a71d2091eba3110164e506c2231972a1584
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 5 06:17:35 2008 +0000

    Report the number of photos/albums

commit 772239206b11c0578228c663d8bcdbd2145c6f0a
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 5 06:16:47 2008 +0000

    Rename logon_name to name, name to display_name and remove the external id field

commit fd3e21e2fda37b65b393e26d0e07f94847efb284
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 5 05:41:19 2008 +0000

    Move Google Maps block off into its own gmaps module.

commit 8e880b4c4124db457244b5a75975c4f6e4531378
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 5 05:35:47 2008 +0000

    Item Info block is now off into the info module.  Yay!

commit 3c65b68e1c958190ea6c4ca995019109a6a55865
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 5 05:32:47 2008 +0000

    The start of the user module.  At this point, it shows up on the scaffolding screen and you can install and uninstall it.  Which creates the tables, defines 2 groups (adminstrator, registered) and one user (admin).

commit a60944e07d77bcc020bf33934055702dae89b875
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 5 05:28:20 2008 +0000

    Tags are now off in their own module, hooray!

commit b82332192a7420cce045612014ad6f54b02974c3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 5 05:20:20 2008 +0000

    The carousel block is now off into its own module.  The
    sidebar.html.php file loops over $theme->blocks() which in turn calls
    carousel::block() which uses the Block object to create a standard
    block UI.  Hooray!

commit f7560a7e8b15abdd549e4c59bbb39c6416844d9e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 5 04:32:58 2008 +0000

    Don't overwrite the version number of installed modules when searching for uninstalled modules.

commit ffb426be45f85e28c86b27352c0e89fea274671e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 5 04:05:53 2008 +0000

    Update to latest HTML/CSS

commit 25bd62f9066841a4452da6c1312c73552079c761
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 5 03:26:28 2008 +0000

    Use jQuery magic to make the scaffold look shiny.

commit 6e0b7f6be1e43cdb5c8fd3528abd9b7a4ebb48a9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 5 03:24:57 2008 +0000

    Add jQuery 1.2.6

commit 836874ba68a2314d18e70bdf1d8e37a48de9c877
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 5 03:24:09 2008 +0000

    Updated for new MPTT API

commit ef0bb33a9531a02c36c99f98b088e544bc6cbd52
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 5 01:40:41 2008 +0000

    Order the children()

commit 190b4398074cc18a1b1c0b3a2640122bce3d9083
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 5 01:39:21 2008 +0000

    Moved MPTT related tests to ORM_MPTT_Test

commit 04a738bc18bdae995343b17b60fe6f7c5e4f247d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 5 01:30:59 2008 +0000

    Declare install/uninstall stat.c

commit f011971adedf5f09092b0a2772ad18a9f9f31a70
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 5 01:08:16 2008 +0000

    Further simplify the code.

commit 667d79c705f83b9752e30553f94a94cba25227a2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Wed Nov 5 01:05:21 2008 +0000

    _readModules -> _readModules
    Simplify the installer-detection code.

commit da286fbf6b18b9a4839e26f23f09a3217d93ea3e
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Wed Nov 5 00:07:16 2008 +0000

    Clean up camel humped names and move private function to bottom of file

commit 212e6a0778a918749c0323eeb2ea9b1feb3ba9b5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 4 23:16:42 2008 +0000

    New tests for the ORM_MPTT class.

commit d0629584b503be10a940766d8536c8ed0bd08bbe
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Nov 4 22:18:00 2008 +0000

    Have the scaffolding code see what what modules are available and list whether they need to be installed or uninstalled.

commit 605d2de336eac8c8f80b916d30989b347d813e94
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 4 21:24:42 2008 +0000

    Lots of new stuff!
    
    Replace theme HTML with *almost* the latest stuff from the
    mockups.  (it doesn't include r18467 yet).
    
    Our theme format is now modelled after WordPress / Habari's style
    where you have one entry point per type (eg: album.php) which can
    load up whatever parts it needs (eg: $theme->display("header"))
    
    Created album and photo helpers which have create() functions
    that form the base of our new API, along with tests for them.
    
    Created our own version of the ORM_MPTT since the existing
    versions were too buggy and unsupported to depend upon.  Only has
    a minimal implementation so far, and the tests are not yet
    committed.
    
    Added path(), thumbnail_path() and resize_path() to Item_Model
    
    Extended the scaffolding to allow you to add lots of
    photos/albums into your hierarchy.
    
    Deleted modules/mptt -- we're not going to use this anymore.

commit ade1650846605d648da2565994e309414d908ac5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 4 05:22:06 2008 +0000

    Add a test to detect tabs in our code, and convert all tabs to spaces
    so that the test passes.

commit f8b22c5aa9f70824004905fc864dead72bef67ea
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 4 05:12:05 2008 +0000

    Updated README.

commit 630b0f26fc5dc970d8634e58489c41c5a40481f1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Tue Nov 4 05:02:37 2008 +0000

    Restructure the theme code to be more like WordPress / Habari.  Now,
    the controller initiates a request to a top level page (eg:
    album.html.php) which is then free to include whatever other page
    chunks it wants with calls like <?= $theme->display('header.html') ?>
    
    Variables like $item and $children are in the global space for all
    views.
    
    theme.php helper is now Theme.php library which lets us store the name
    of the theme inside the variable itself.  This means that the theme
    does not have to know its own name because you can use $theme->url()
    for all urls to stuff inside the theme itself, which makes it possible
    to cline a theme without changing a single line.
    
    Still using the mock album UI.

commit 8709c1965f9b13967e74efddb7ff6c99e734a135
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Tue Nov 4 02:19:46 2008 +0000

    White space correction

commit 57dd27fe572b0f7f349a7c858198850a2076bc58
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 3 06:50:23 2008 +0000

    Oops, left out the footer by accident.

commit 8a4ab78bfb0bbf49e0a1db1e9e0576712bb04bc2
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 3 06:02:40 2008 +0000

    Oops, injecting the function name caused an extra call in the call
    stack.  The test passed, but the actual code failed.  Fixed now.

commit fa9dda4c01a1ebb1af34e51fb36c2b3f27eb8d6e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 3 05:55:34 2008 +0000

    Create an initial attempt at the album controller, set it up with a default route
    and add a link to it from the welcome page.

commit a089399e73cf52ebb7ac84c8db8b66db9664322b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 3 05:53:20 2008 +0000

    Default theme, built with YUI.  A mock right now, not functional at
    all (except in some very minor ways).  It's unclear if this is the
    best final structure.  Right now the album controller knows a
    considerable amount about the layout of the page, which may not be the
    best way to do things.

commit 6da6b8ed52086d967bdb0d8e4140cbdffdb18cf7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 3 05:52:13 2008 +0000

    Theme helper.  Right now it has one api method, theme::url which
    returns a url local to the theme that you're in.  For example, if
    you're in themes/foo/views/page_header.html.php and you call
    theme::url("images/foo.png") then it'll create a url to:
    themes/foo/images/foo.png

commit 6c35abd30a741a77c7657db3f22d35c1b7dbb64b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 3 05:36:44 2008 +0000

    whitespace fix

commit 8831e89f406a2d3e8e56217dbffa142b88931fea
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 3 02:08:07 2008 +0000

    More bootstrap code.
    * core_installer::install now creates the root album and the albums/thumbnails
      directories under VARPATH.
    * Add a test for core_installer

commit 33e9cdad15e74f2b9482a5e7c1564ee468172418
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 3 02:05:59 2008 +0000

    Uninstall/reinstall core on every test run (for now).

commit 019ea9cd35e732e5d49b4bc655e6b18bcbc7989e
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 3 02:05:11 2008 +0000

    Rename columns lft/rgt to left/right.

commit 8183289bb1bcc21408b8c3cfa6034d9ffcc3c750
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 3 01:20:45 2008 +0000

    Add some padding between paragraphs.

commit 2578b598ddb5a48386d169b662d9fc5bcf67b45b
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 3 01:13:51 2008 +0000

    Change styles a bit to make it a little more consistent.

commit 7d2c828a4c909bab4c73656cfb1730176066b1db
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 3 00:27:35 2008 +0000

    Put info about installed modules directly into the scaffolding page,
    and create methods to install/uninstall modules.

commit 7ae73fcd653d40d7ff1240f816481473adba5da4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 3 00:26:55 2008 +0000

    Change structure of item table to match MPTT class (which is a little different from ORM_MPTT which we used in gx

commit df36d28b8a1a5c593a2a930d34008fb8233e7bd1
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Mon Nov 3 00:07:38 2008 +0000

    Make the unit_test database config the default so that our test runs don't
    mess up the real database.

commit e173f36bcb50451c49e5708de29fcb41267b41f4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 2 23:55:09 2008 +0000

    Create some basic infrastructure:
      * item model (contains basic item info, similar to the gx version)
      * module model (has info about each module and which version of it is installed)
      * added a very basic unit test to verify that we can create an instance of item
      * Updated our test controller to require a unit_test db config and
        call core::install if it hasn't been done already.
    
    New pattern:
      * core/helpers/core_installer.php creates core_installer helper.
        When we install a new module you call xxx_installer::install(),
        and when you want it to go away, you do xxx_installer::uninstall()
    
    Create

commit aff7048b1f94dfcc98924bf9a0904dbba13709f7
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 2 22:01:30 2008 +0000

    Turn on short_open_tags

commit 2f151cf39fa6716755a3a3e16e61cfa68da11a77
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 2 21:56:14 2008 +0000

    Ignore view files in no_trailing_closing_php_tag_test since they will occasionally
    end in tags like <?= this ?>

commit a38752607e954ea47a93caadc8949eb6900fbc15
Author: Tim Almdal <tnalmdal@shaw.ca>
Date:   Sun Nov 2 21:39:10 2008 +0000

    replace a tab with the appropriate number of spaces

commit 231117b4a3b622df91a5a3234cb97c2fe94cd180
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 2 21:12:15 2008 +0000

    Change this to be inline instead of an iframe, and fix it up so that
    it walks you through creating the database also.

commit 3f21b08e5f7d0a44e69d70ca15286899c598f5eb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 2 19:59:09 2008 +0000

    Read local database config file

commit d742de4e1100df15153784fa0702a334cd388d73
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 2 19:56:57 2008 +0000

    Improve welcome scaffolding to walk you through getting the var
    directory set up correctly and a database config file in place.

commit 3ec437029bc23fff6560871f67171c3990205477
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sun Nov 2 18:57:50 2008 +0000

    Add mptt and forge modules to the module load list
    disable logging if the log dir is not writable.

commit bd8cd9364c8396aeb3d56572d116fb8c5af1f1b4
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 1 22:43:28 2008 +0000

    Fix all our preambles to make the preamble test pass.

commit 06174a4f748919ed0121c84f197026196587563d
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 1 22:42:59 2008 +0000

    Add a test to verify that we have the right preamble on files.

commit 3757b39dfe9854a7f63af36744a04f9b0b9242c3
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 1 22:41:09 2008 +0000

    Improve formatting

commit 6f98bd445ad53f08810e3861db8a064d71d81baf
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 1 22:05:08 2008 +0000

    Clean up tests a bit.

commit a7f22994ed0298ed051235e90bb581703956ba30
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 1 18:45:25 2008 +0000

    Add a new test to verify that view files end in .html.php

commit 60fbea6fd000569210641588888c010b50c9c8e6
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 1 10:47:00 2008 +0000

    Add first test; this verifies that we leave the ?> off at the end of PHP files.

commit 5a3731d0c6e846c926e233109359632afaacacdb
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 1 10:45:51 2008 +0000

    Remove all html::specialchars(); we're not getting rendered in a
    browser.

commit 08f9822b72932bafa4aa6327f601e1901e2e0003
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 1 09:02:24 2008 +0000

    Exclude demo tests

commit f8b4c669063b49acd658b1d85194632b57350e68
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 1 07:55:48 2008 +0000

    Set up unit test framework.  Tweak configuration so that it only runs in
    command line mode, and expects to put data into test/var.  Create a module
    to wrap it that generates a nice text-only view of the output.

commit 146f34dc07c7c47505d8a6e4bdf9e535fcddfbb5
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Sat Nov 1 03:58:08 2008 +0000

    Improve the welcome page to be a bit more explanatory about the product.

commit 53ef67d00055e145e3d9b36c68c06543ba0617c9
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Oct 31 22:42:08 2008 +0000

    Move gallery3 out of the eval branch and up to its real home.  Note that
    I'm inverting the normal paradigm by putting trunk/vendor/tags/branches
    inside the gallery3 project.  This is actually the recommended form when
    you have multiple projects inside a svn repository.

commit a69515ecb3638b5ea8aeaa008dc3731eba84e721
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Oct 31 22:38:54 2008 +0000

    Placeholder app for Gallery3, along with a customized index.php and a README
    
    
    
    git-svn-id: http://gallery.svn.sourceforge.net/svnroot/gallery/trunk/eval/gx/gallery3/trunk@18409 57fcd75e-5312-0410-8df3-f5eb6fbb1595

commit eba717f95f586d2538007bd18da6e9b32b076c30
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Oct 31 22:12:14 2008 +0000

    Merge over vendor code.
    
    
    git-svn-id: http://gallery.svn.sourceforge.net/svnroot/gallery/trunk/eval/gx/gallery3/trunk@18408 57fcd75e-5312-0410-8df3-f5eb6fbb1595

commit fff10f8b70376ef25722bd867df26bc5aefced43
Author: Bharat Mediratta <bharat@menalto.com>
Date:   Fri Oct 31 19:48:16 2008 +0000

    Welcome to Gallery 3
    
    git-svn-id: http://gallery.svn.sourceforge.net/svnroot/gallery/trunk/eval/gx/gallery3/trunk@18399 57fcd75e-5312-0410-8df3-f5eb6fbb1595
